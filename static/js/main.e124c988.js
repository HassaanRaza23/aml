/*! For license information please see main.e124c988.js.LICENSE.txt */
(()=>{var e={356:(e,t,r)=>{e.exports=r(9645).last},579:(e,t,r)=>{"use strict";e.exports=r(2799)},870:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1203:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&n.isLength(e.length)}},1210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6326),a=n.__importDefault(r(8829)),i=n.__importDefault(r(5736));class s{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){if(!e||"string"!==typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const t=new URL(`${this.url}/${e}`);return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:n=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?`{${r.join(",")}}`:`${r}`]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new i.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}}t.default=s},1293:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof r&&(r={});const{leading:a=!1,trailing:i=!0,maxWait:s}=r,o=Array(2);let l;a&&(o[0]="leading"),i&&(o[1]="trailing");let c=null;const u=n.debounce(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];l=e.apply(this,r),c=null},t,{edges:o}),d=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return null!=s&&(null===c&&(c=Date.now()),Date.now()-c>=s)?(l=e.apply(this,r),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,r),l)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),l),d}},1444:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toPath=function(e){const t=[],r=e.length;if(0===r)return t;let n=0,a="",i="",s=!1;for(46===e.charCodeAt(0)&&(t.push(""),n++);n<r;){const o=e[n];i?"\\"===o&&n+1<r?(n++,a+=e[n]):o===i?i="":a+=o:s?'"'===o||"'"===o?i=o:"]"===o?(s=!1,t.push(a),a=""):a+=o:"["===o?(s=!0,a&&(t.push(a),a="")):"."===o?a&&(t.push(a),a=""):a+=o,n++}return a&&t.push(a),t}},2086:(e,t,r)=>{"use strict";e.exports=r(5082)},2104:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1203),a=r(9921);t.isArrayLikeObject=function(e){return a.isObjectLike(e)&&n.isArrayLike(e)}},2132:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8268),a=r(870),i=r(4803),s=r(9972);function o(e,t,r,n){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return l(e,t,r,n);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,i]of t.entries()){if(!1===r(e.get(a),i,a,e,t,n))return!1}return!0}(e,t,r,n);if(t instanceof Set)return c(e,t,r,n);const a=Object.keys(t);if(null==e)return 0===a.length;if(0===a.length)return!0;if(n&&n.has(t))return n.get(t)===e;n&&n.set(t,e);try{for(let s=0;s<a.length;s++){const o=a[s];if(!i.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!r(e[o],t[o],o,e,t,n))return!1}return!0}finally{n&&n.delete(t)}}(e,t,r,n);case"function":return Object.keys(t).length>0?o(e,{...t},r,n):s.eq(e,t);default:return a.isObject(e)?"string"!==typeof t||""===t:s.eq(e,t)}}function l(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let i=0;i<t.length;i++){const s=t[i];let o=!1;for(let l=0;l<e.length;l++){if(a.has(l))continue;let c=!1;if(r(e[l],s,i,e,t,n)&&(c=!0),c){a.add(l),o=!0;break}}if(!o)return!1}return!0}function c(e,t,r,n){return 0===t.size||e instanceof Set&&l([...e],[...t],r,n)}t.isMatchWith=function(e,t,r){return"function"!==typeof r?n.isMatch(e,t):o(e,t,function e(t,n,a,i,s,l){const c=r(t,n,a,i,s,l);return void 0!==c?Boolean(c):o(t,n,e,l)},new Map)},t.isSetMatch=c},2204:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5316),a=r(7312),i=r(3799);t.sortBy=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const o=r.length;return o>1&&i.isIterateeCall(e,r[0],r[1])?r=[]:o>2&&i.isIterateeCall(r[0],r[1],r[2])&&(r=[r[0]]),n.orderBy(e,a.flatten(r),["asc"])}},2284:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})},2330:(e,t,r)=>{"use strict";var n=r(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(n){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),a=n[0].inst,u=n[1];return o(function(){a.value=r,a.getSnapshot=t,c(a)&&u({inst:a})},[e,r,t]),s(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},2489:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},2682:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];if(null==t)return!1;return!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},2715:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9599),a=r(7330),i=r(3808),s=r(8845);t.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?s.matchesProperty(e[0],e[1]):i.matches(e);case"string":case"symbol":case"number":return a.property(e)}}},2777:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2799:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(e,t,n){var a=null;if(void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in n={},t)"key"!==i&&(n[i]=t[i]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:a,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=a,t.jsxs=a},3272:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){return"string"===typeof e||"symbol"===typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}},3757:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4704),a=r(1203),i=r(870),s=r(9972);t.isIterateeCall=function(e,t,r){return!!i.isObject(r)&&(!!("number"===typeof t&&a.isArrayLike(r)&&n.isIndex(t)&&t<r.length||"string"===typeof t&&t in r)&&s.eq(r[t],e))}},3808:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8268),a=r(5261);t.matches=function(e){return e=a.cloneDeep(e),t=>n.isMatch(t,e)}},3821:(e,t,r)=>{e.exports=r(2204).sortBy},4208:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const a=e[n],i=t(a);r.has(i)||r.set(i,a)}return Array.from(r.values())}},4250:(e,t,r)=>{e.exports=r(8182).isEqual},4288:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,p(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function _(e,t,n,a,i,s){return n=s.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:s}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(){}function C(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0;break;case h:return C((u=e._init)(e._payload),t,a,i,s)}}if(u)return s=s(e),u=""===i?"."+A(e,0):i,w(s)?(a="",null!=u&&(a=u.replace(E,"$&/")+"/"),C(s,t,a,"",function(e){return e})):null!=s&&(j(s)&&(l=s,c=a+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+u,s=_(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var d,m=""===i?".":i+":";if(w(e))for(var p=0;p<e.length;p++)u+=C(i=e[p],t,a,o=m+A(i,p),s);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=C(i=i.value,t,a,o=m+A(i,p++),s);else if("object"===o){if("function"===typeof e.then)return C(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(k,k):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function O(e,t,r){if(null==e)return e;var n=[],a=0;return C(e,n,"","",function(e){return t.call(r,e,a++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:O,forEach:function(e,t,r){O(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return N.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=p({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(n[i]=t[i]);var i=arguments.length-2;if(1===i)n.children=r;else if(1<i){for(var s=Array(i),o=0;o<i;o++)s[o]=arguments[o+2];n.children=s}return _(e.type,a,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,r){var n,a={},i=null;if(null!=t)for(n in void 0!==t.key&&(i=""+t.key),t)S.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===a[n]&&(a[n]=s[n]);return _(e,i,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.T,r={};N.T=r;try{var n=e(),a=N.S;null!==a&&a(r,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(I,R)}catch(i){R(i)}finally{N.T=t}},t.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},t.use=function(e){return N.H.use(e)},t.useActionState=function(e,t,r){return N.H.useActionState(e,t,r)},t.useCallback=function(e,t){return N.H.useCallback(e,t)},t.useContext=function(e){return N.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return N.H.useDeferredValue(e,t)},t.useEffect=function(e,t,r){var n=N.H;if("function"===typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},t.useId=function(){return N.H.useId()},t.useImperativeHandle=function(e,t,r){return N.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return N.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.H.useMemo(e,t)},t.useOptimistic=function(e,t){return N.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return N.H.useReducer(e,t,r)},t.useRef=function(e){return N.H.useRef(e)},t.useState=function(e){return N.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return N.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return N.H.useTransition()},t.version="19.1.1"},4332:(e,t,r)=>{e.exports=r(5053).uniqBy},4385:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}},4391:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(7004)},4704:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},4737:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.noop=function(){}},4803:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let r,{signal:n,edges:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;const s=null!=a&&a.includes("leading"),o=null==a||a.includes("trailing"),l=()=>{null!==i&&(e.apply(r,i),r=void 0,i=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),d()},t)},d=()=>{null!==c&&(clearTimeout(c),c=null),r=void 0,i=null},h=function(){if(n?.aborted)return;r=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i=t;const o=null==c;u(),s&&o&&l()};return h.schedule=u,h.cancel=d,h.flush=()=>{l()},n?.addEventListener("abort",d,{once:!0}),h}},4879:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=n.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043:(e,t,r)=>{"use strict";e.exports=r(4288)},5053:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4208),a=r(9599),i=r(2104),s=r(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return i.isArrayLikeObject(e)?n.uniqBy(Array.from(e),s.iteratee(t)):[]}},5082:(e,t)=>{"use strict";var r=60103,n=60106,a=60107,i=60108,s=60114,o=60109,l=60110,c=60112,u=60113,d=60120,h=60115,f=60116,m=60121,p=60122,g=60117,y=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;r=b("react.element"),n=b("react.portal"),a=b("react.fragment"),i=b("react.strict_mode"),s=b("react.profiler"),o=b("react.provider"),l=b("react.context"),c=b("react.forward_ref"),u=b("react.suspense"),d=b("react.suspense_list"),h=b("react.memo"),f=b("react.lazy"),m=b("react.block"),p=b("react.server.block"),g=b("react.fundamental"),y=b("react.debug_trace_mode"),v=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case i:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case h:case o:return e;default:return t}}case n:return t}}}t.isFragment=function(e){return x(e)===a}},5261:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6433);t.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5303:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2489),a=r(4704),i=r(6321),s=r(1444);t.has=function(e,t){let r;if(r=Array.isArray(t)?t:"string"===typeof t&&n.isDeepKey(t)&&null==e?.[t]?s.toPath(t):[t],0===r.length)return!1;let o=e;for(let n=0;n<r.length;n++){const e=r[n];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||i.isArguments(o))&&a.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}},5316:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9709),a=r(7043),i=r(1444);t.orderBy=function(e,t,r,s){if(null==e)return[];r=s?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));const o=(e,t)=>{let r=e;for(let n=0;n<t.length&&null!=r;++n)r=r[t[n]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||a.isKey(e)?e:{key:e,path:i.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?o(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let a=0;a<l.length;a++){const i=n.compareValues(e.criteria[a],t.criteria[a],r[a]);if(0!==i)return i}return 0}).map(e=>e.original)}},5414:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:a=!0,trailing:i=!0}=r;return n.debounce(e,t,{leading:a,maxWait:t,trailing:i})}},5508:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6433),a=r(7599);t.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,i,s,o)=>{const l=t?.(r,i,s,o);if(null!=l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case a.numberTag:case a.stringTag:case a.booleanTag:{const t=new e.constructor(e?.valueOf());return n.copyProperties(t,e),t}case a.argumentsTag:{const t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6326).__importDefault(r(7374)),a=new RegExp("[,()]");class i extends n.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&a.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const i=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}t.default=i},5896:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,s=a>>>1;n<s;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,r))c<a&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function N(e){if(g=!1,w(e),!p)if(null!==n(c))p=!0,_||(_=!0,S());else{var t=n(u);null!==t&&R(N,t.startTime-e)}}var S,_=!1,j=-1,E=5,A=-1;function k(){return!!y||!(t.unstable_now()-A<E)}function C(){if(y=!1,_){var e=t.unstable_now();A=e;var r=!0;try{e:{p=!1,g&&(g=!1,b(j),j=-1),m=!0;var i=f;try{t:{for(w(e),h=n(c);null!==h&&!(h.expirationTime>e&&k());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),r=!0;break t}h===n(c)&&a(c),w(e)}else a(c);h=n(c)}if(null!==h)r=!0;else{var l=n(u);null!==l&&R(N,l.startTime-e),r=!1}}break e}finally{h=null,f=i,m=!1}r=void 0}}finally{r?S():_=!1}}}if("function"===typeof x)S=function(){x(C)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,T=O.port2;O.port1.onmessage=C,S=function(){T.postMessage(null)}}else S=function(){v(C,0)};function R(e,r){j=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,r(u,e),null===n(c)&&e===n(u)&&(g?(b(j),j=-1):g=!0,R(N,i-s))):(e.sortIndex=o,r(c,e),p||m||(p=!0,_||(_=!0,S()))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},5990:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6321:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===n.getTag(e)}},6326:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>P,__assign:()=>i,__asyncDelegator:()=>j,__asyncGenerator:()=>_,__asyncValues:()=>E,__await:()=>S,__awaiter:()=>m,__classPrivateFieldGet:()=>R,__classPrivateFieldIn:()=>L,__classPrivateFieldSet:()=>I,__createBinding:()=>g,__decorate:()=>o,__disposeResources:()=>M,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>a,__generator:()=>p,__importDefault:()=>T,__importStar:()=>O,__makeTemplateObject:()=>A,__metadata:()=>f,__param:()=>l,__propKey:()=>d,__read:()=>b,__rest:()=>s,__rewriteRelativeImportExtension:()=>F,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>x,__spreadArray:()=>N,__spreadArrays:()=>w,__values:()=>v,default:()=>B});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function o(e,t,r,n){var a,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t,r,n,a,i){function s(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,f=r.length-1;f>=0;f--){var m={};for(var p in n)m[p]="access"===p?{}:n[p];for(var p in n.access)m.access[p]=n.access[p];m.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var g=(0,r[f])("accessor"===l?{get:d.get,set:d.set}:d[c],m);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(o=s(g.get))&&(d.get=o),(o=s(g.set))&&(d.set=o),(o=s(g.init))&&a.unshift(o)}else(o=s(g))&&("field"===l?a.unshift(o):d[c]=o)}u&&Object.defineProperty(u,n.name,d),h=!0}function u(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function d(e){return"symbol"===typeof e?e:"".concat(e)}function h(e,t,r){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,r,n){return new(r||(r=Promise))(function(a,i){function s(e){try{l(n.next(e))}catch(t){i(t)}}function o(e){try{l(n.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,o)}l((n=n.apply(e,t||[])).next())})}function p(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var g=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function y(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function v(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function x(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function N(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function _(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),i=[];return n=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){a[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||o(e,t)})},t&&(n[e]=t(n[e])))}function o(e,t){try{(r=a[e](t)).value instanceof S?Promise.resolve(r.value.v).then(l,c):u(i[0][2],r)}catch(n){u(i[0][3],n)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}function j(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:S(e[n](t)),done:!1}:a?a(t):t}:a}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,a,(t=e[r](t)).done,t.value)})}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},C=function(e){return C=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},C(e)};function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=C(e),n=0;n<r.length;n++)"default"!==r[n]&&g(t,e,r[n]);return k(t,e),t}function T(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function I(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}function L(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function P(e,t,r){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!==typeof n)throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var D="function"===typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function M(e){function t(t){e.error=e.hasError?new D(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function a(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(e){return t(e),a()})}else n|=1}catch(s){t(s)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function F(e,t){return"string"===typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,a,i){return r?t?".jsx":".js":!n||a&&i?n+a+"."+i.toLowerCase()+"js":e}):e}const B={__extends:a,__assign:i,__rest:s,__decorate:o,__param:l,__esDecorate:c,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:f,__awaiter:m,__generator:p,__createBinding:g,__exportStar:y,__values:v,__read:b,__spread:x,__spreadArrays:w,__spreadArray:N,__await:S,__asyncGenerator:_,__asyncDelegator:j,__asyncValues:E,__makeTemplateObject:A,__importStar:O,__importDefault:T,__classPrivateFieldGet:R,__classPrivateFieldSet:I,__classPrivateFieldIn:L,__addDisposableResource:P,__disposeResources:M,__rewriteRelativeImportExtension:F}},6392:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6443),a=r(5990),i=r(7599),s=r(4803),o=r(3757);function l(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d=u?.(e,t,r,n);if(null!=d)return d;if(s.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[a,i]of e)t.set(a,l(i,a,r,n,u));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const a of e)t.add(l(a,void 0,r,n,u));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,u);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),c(t,e,r,n,u),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),c(t,e,r,n,u),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),c(t,e,r,n,u),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,r,n,u),t}if("object"===typeof e&&function(e){switch(a.getTag(e)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),c(t,e,r,n,u),t}return e}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const s=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<s.length;n++){const o=s[n],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=l(t[o],o,r,a,i))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6443:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6672:(e,t,r)=>{"use strict";var n=r(5043);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=r,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:i}):"script"===r&&s.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin);s.d.L(e,r,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},6770:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2777);t.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},7004:(e,t,r)=>{"use strict";var n=r(8853),a=r(5043),i=r(7950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var k=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var C=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case _:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return R(e(t))}catch(r){}}return null}var I=Array.isArray,L=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},M=[],F=-1;function B(e){return{current:e}}function U(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var H=B(null),$=B(null),q=B(null),G=B(null);function W(e,t){switch(z(q,t),z($,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ad(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=ad(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(H),z(H,e)}function V(){U(H),U($),U(q)}function K(e){null!==e.memoizedState&&z(G,e);var t=H.current,r=id(t,e.type);t!==r&&(z($,e),z(H,r))}function Y(e){$.current===e&&(U(H),U($)),G.current===e&&(U(G),Kd._currentValue=D)}var J=Object.prototype.hasOwnProperty,X=n.unstable_scheduleCallback,Q=n.unstable_cancelCallback,Z=n.unstable_shouldYield,ee=n.unstable_requestPaint,te=n.unstable_now,re=n.unstable_getCurrentPriorityLevel,ne=n.unstable_ImmediatePriority,ae=n.unstable_UserBlockingPriority,ie=n.unstable_NormalPriority,se=n.unstable_LowPriority,oe=n.unstable_IdlePriority,le=n.log,ce=n.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/pe|0)|0},me=Math.log,pe=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var a=0,i=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&n;return 0!==o?0!==(n=o&~i)?a=ve(n):0!==(s&=o)?a=ve(s):r||0!==(r=o&~e)&&(a=ve(r)):0!==(o=n&~i)?a=ve(o):0!==s?a=ve(s):r||0!==(r=n&~e)&&(a=ve(r)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(r=t&-t)||32===i&&0!==(4194048&r))?t:a}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ne(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function _e(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function je(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ee(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-fe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Ae(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-fe(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}function ke(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ce(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Oe(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Te=Math.random().toString(36).slice(2),Re="__reactFiber$"+Te,Ie="__reactProps$"+Te,Le="__reactContainer$"+Te,Pe="__reactEvents$"+Te,De="__reactListeners$"+Te,Me="__reactHandles$"+Te,Fe="__reactResources$"+Te,Be="__reactMarker$"+Te;function Ue(e){delete e[Re],delete e[Ie],delete e[Pe],delete e[De],delete e[Me]}function ze(e){var t=e[Re];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Le]||r[Re]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=bd(e);null!==e;){if(r=e[Re])return r;e=bd(e)}return t}r=(e=r).parentNode}return null}function He(e){if(e=e[Re]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function qe(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Be]=!0}var We=new Set,Ve={};function Ke(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ve[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Je,Xe,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,r){if(a=t,J.call(et,a)||!J.call(Ze,a)&&(Qe.test(a)?et[a]=!0:(Ze[a]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var a}function rt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function nt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function at(e){if(void 0===Je)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Xe=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Xe}var it=!1;function st(e,t){if(!e||it)return"";it=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(a){var n=a}Reflect.construct(e,[],r)}else{try{r.call()}catch(i){n=i}e.call(r.prototype)}}else{try{throw Error()}catch(s){n=s}(r=e())&&"function"===typeof r.catch&&r.catch(function(){})}}catch(o){if(o&&n&&"string"===typeof o.stack)return[o.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),s=i[0],o=i[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(a=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(n===l.length||a===c.length)for(n=l.length-1,a=c.length-1;1<=n&&0<=a&&l[n]!==c[a];)a--;for(;1<=n&&0<=a;n--,a--)if(l[n]!==c[a]){if(1!==n||1!==a)do{if(n--,0>--a||l[n]!==c[a]){var u="\n"+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=n&&0<=a);break}}}finally{it=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?at(r):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return at("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ut(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function pt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,r,n,a,i,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ct(t)):null!=r?vt(e,s,ct(r)):null!=n&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,r,n,a,i,s,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=r){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;r=null!=r?""+ct(r):"",t=null!=t?""+ct(t):r,o||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:a)&&"symbol"!==typeof n&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function vt(e,t,r){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function bt(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ct(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function xt(e,t,r){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ct(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(s(92));if(I(n)){if(1<n.length)throw Error(s(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ct(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function Nt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"===typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!==typeof r||0===r||St.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function jt(e,t,r){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&r[a]!==n&&_t(e,a,n)}else for(var i in t)t.hasOwnProperty(i)&&_t(e,i,t[i])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ct(e){return kt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ot=null;function Tt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,It=null;function Lt(e){var t=He(e);if(t&&(e=t.stateNode)){var r=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n[Ie]||null;if(!a)throw Error(s(90));gt(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&ht(n)}break e;case"textarea":xt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&bt(e,!!r.multiple,t,!1)}}}var Pt=!1;function Dt(e,t,r){if(Pt)return e(t,r);Pt=!0;try{return e(t)}finally{if(Pt=!1,(null!==Rt||null!==It)&&(zc(),Rt&&(t=Rt,e=It,It=Rt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Mt(e,t){var r=e.stateNode;if(null===r)return null;var n=r[Ie]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Ih){Bt=!1}var zt=null,Ht=null,$t=null;function qt(){if($t)return $t;var e,t,r=Ht,n=r.length,a="value"in zt?zt.value:zt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Vt(){return!1}function Kt(e){function t(t,r,n,a,i){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Wt:Vt,this.isPropagationStopped=Vt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Yt,Jt,Xt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Qt),er=h({},Qt,{view:0,detail:0}),tr=Kt(er),rr=h({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Yt=e.screenX-Xt.screenX,Jt=e.screenY-Xt.screenY):Jt=Yt=0,Xt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),nr=Kt(rr),ar=Kt(h({},rr,{dataTransfer:0})),ir=Kt(h({},er,{relatedTarget:0})),sr=Kt(h({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),or=Kt(h({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),lr=Kt(h({},Qt,{data:0})),cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ur={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dr[e])&&!!t[e]}function fr(){return hr}var mr=Kt(h({},er,{key:function(e){if(e.key){var t=cr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ur[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fr,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),pr=Kt(h({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gr=Kt(h({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fr})),yr=Kt(h({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vr=Kt(h({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),br=Kt(h({},Qt,{newState:0,oldState:0})),xr=[9,13,27,32],wr=Ft&&"CompositionEvent"in window,Nr=null;Ft&&"documentMode"in document&&(Nr=document.documentMode);var Sr=Ft&&"TextEvent"in window&&!Nr,_r=Ft&&(!wr||Nr&&8<Nr&&11>=Nr),jr=String.fromCharCode(32),Er=!1;function Ar(e,t){switch(e){case"keyup":return-1!==xr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Cr=!1;var Or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Or[e.type]:"textarea"===t}function Rr(e,t,r,n){Rt?It?It.push(n):It=[n]:Rt=n,0<(t=qu(t,"onChange")).length&&(r=new Zt("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ir=null,Lr=null;function Pr(e){Du(e,0)}function Dr(e){if(ht($e(e)))return e}function Mr(e,t){if("change"===e)return t}var Fr=!1;if(Ft){var Br;if(Ft){var Ur="oninput"in document;if(!Ur){var zr=document.createElement("div");zr.setAttribute("oninput","return;"),Ur="function"===typeof zr.oninput}Br=Ur}else Br=!1;Fr=Br&&(!document.documentMode||9<document.documentMode)}function Hr(){Ir&&(Ir.detachEvent("onpropertychange",$r),Lr=Ir=null)}function $r(e){if("value"===e.propertyName&&Dr(Lr)){var t=[];Rr(t,Lr,e,Tt(e)),Dt(Pr,t)}}function qr(e,t,r){"focusin"===e?(Hr(),Lr=r,(Ir=t).attachEvent("onpropertychange",$r)):"focusout"===e&&Hr()}function Gr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dr(Lr)}function Wr(e,t){if("click"===e)return Dr(t)}function Vr(e,t){if("input"===e||"change"===e)return Dr(t)}var Kr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yr(e,t){if(Kr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!J.call(t,a)||!Kr(e[a],t[a]))return!1}return!0}function Jr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xr(e,t){var r,n=Jr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jr(n)}}function Qr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=ft((e=t.contentWindow).document)}return t}function en(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tn=Ft&&"documentMode"in document&&11>=document.documentMode,rn=null,nn=null,an=null,sn=!1;function on(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;sn||null==rn||rn!==ft(n)||("selectionStart"in(n=rn)&&en(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&Yr(an,n)||(an=n,0<(n=qu(nn,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rn)))}function ln(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cn={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},un={},dn={};function hn(e){if(un[e])return un[e];if(!cn[e])return e;var t,r=cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in dn)return un[e]=r[t];return e}Ft&&(dn=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);var fn=hn("animationend"),mn=hn("animationiteration"),pn=hn("animationstart"),gn=hn("transitionrun"),yn=hn("transitionstart"),vn=hn("transitioncancel"),bn=hn("transitionend"),xn=new Map,wn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){xn.set(e,t),Ke(t,[e])}wn.push("scrollEnd");var Sn=new WeakMap;function _n(e,t){if("object"===typeof e&&null!==e){var r=Sn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:lt(t)},Sn.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var jn=[],En=0,An=0;function kn(){for(var e=En,t=An=En=0;t<e;){var r=jn[t];jn[t++]=null;var n=jn[t];jn[t++]=null;var a=jn[t];jn[t++]=null;var i=jn[t];if(jn[t++]=null,null!==n&&null!==a){var s=n.pending;null===s?a.next=a:(a.next=s.next,s.next=a),n.pending=a}0!==i&&Rn(r,a,i)}}function Cn(e,t,r,n){jn[En++]=e,jn[En++]=t,jn[En++]=r,jn[En++]=n,An|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function On(e,t,r,n){return Cn(e,t,r,n),In(e)}function Tn(e,t){return Cn(e,null,null,t),In(e)}function Rn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var a=!1,i=e.return;null!==i;)i.childLanes|=r,null!==(n=i.alternate)&&(n.childLanes|=r),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-fe(r),null===(n=(e=i.hiddenUpdates)[a])?e[a]=[t]:n.push(t),t.lane=536870912|r),i):null}function In(e){if(50<Rc)throw Rc=0,Ic=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ln={};function Pn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,t,r,n){return new Pn(e,t,r,n)}function Mn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fn(e,t){var r=e.alternate;return null===r?((r=Dn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Bn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Un(e,t,r,n,a,i){var o=0;if(n=e,"function"===typeof e)Mn(e)&&(o=1);else if("string"===typeof e)o=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,r,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Dn(31,r,t,a)).elementType=A,e.lanes=i,e;case g:return zn(r.children,a,i,t);case y:o=8,a|=24;break;case v:return(e=Dn(12,r,t,2|a)).elementType=v,e.lanes=i,e;case S:return(e=Dn(13,r,t,a)).elementType=S,e.lanes=i,e;case _:return(e=Dn(19,r,t,a)).elementType=_,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:o=10;break e;case x:o=9;break e;case N:o=11;break e;case j:o=14;break e;case E:o=16,n=null;break e}o=29,r=Error(s(130,null===e?"null":typeof e,"")),n=null}return(t=Dn(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function zn(e,t,r,n){return(e=Dn(7,e,n,t)).lanes=r,e}function Hn(e,t,r){return(e=Dn(6,e,null,t)).lanes=r,e}function $n(e,t,r){return(t=Dn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qn=[],Gn=0,Wn=null,Vn=0,Kn=[],Yn=0,Jn=null,Xn=1,Qn="";function Zn(e,t){qn[Gn++]=Vn,qn[Gn++]=Wn,Wn=e,Vn=t}function ea(e,t,r){Kn[Yn++]=Xn,Kn[Yn++]=Qn,Kn[Yn++]=Jn,Jn=e;var n=Xn;e=Qn;var a=32-fe(n)-1;n&=~(1<<a),r+=1;var i=32-fe(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Xn=1<<32-fe(t)+a|r<<a|n,Qn=i+e}else Xn=1<<i|r<<a|n,Qn=e}function ta(e){null!==e.return&&(Zn(e,1),ea(e,1,0))}function ra(e){for(;e===Wn;)Wn=qn[--Gn],qn[Gn]=null,Vn=qn[--Gn],qn[Gn]=null;for(;e===Jn;)Jn=Kn[--Yn],Kn[Yn]=null,Qn=Kn[--Yn],Kn[Yn]=null,Xn=Kn[--Yn],Kn[Yn]=null}var na=null,aa=null,ia=!1,sa=null,oa=!1,la=Error(s(519));function ca(e){throw pa(_n(Error(s(418,"")),e)),la}function ua(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Re]=e,t[Ie]=n,r){case"dialog":Mu("cancel",t),Mu("close",t);break;case"iframe":case"object":case"embed":Mu("load",t);break;case"video":case"audio":for(r=0;r<Lu.length;r++)Mu(Lu[r],t);break;case"source":Mu("error",t);break;case"img":case"image":case"link":Mu("error",t),Mu("load",t);break;case"details":Mu("toggle",t);break;case"input":Mu("invalid",t),yt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),dt(t);break;case"select":Mu("invalid",t);break;case"textarea":Mu("invalid",t),wt(t,n.value,n.defaultValue,n.children),dt(t)}"string"!==typeof(r=n.children)&&"number"!==typeof r&&"bigint"!==typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Ju(t.textContent,r)?(null!=n.popover&&(Mu("beforetoggle",t),Mu("toggle",t)),null!=n.onScroll&&Mu("scroll",t),null!=n.onScrollEnd&&Mu("scrollend",t),null!=n.onClick&&(t.onclick=Xu),t=!0):t=!1,t||ca(e)}function da(e){for(na=e.return;na;)switch(na.tag){case 5:case 13:return void(oa=!1);case 27:case 3:return void(oa=!0);default:na=na.return}}function ha(e){if(e!==na)return!1;if(!ia)return da(e),ia=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sd(e.type,e.memoizedProps)),t=!t),t&&aa&&ca(e),da(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){aa=yd(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}aa=null}}else 27===r?(r=aa,fd(e.type)?(e=vd,vd=null,aa=e):aa=r):aa=na?yd(e.stateNode.nextSibling):null;return!0}function fa(){aa=na=null,ia=!1}function ma(){var e=sa;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),sa=null),e}function pa(e){null===sa?sa=[e]:sa.push(e)}var ga=B(null),ya=null,va=null;function ba(e,t,r){z(ga,t._currentValue),t._currentValue=r}function xa(e){e._currentValue=ga.current,U(ga)}function wa(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Na(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var o=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),wa(i.return,r,e),n||(o=null);break e}i=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=r,null!==(i=o.alternate)&&(i.lanes|=r),wa(o,r,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Sa(e,t,r,n){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=a.type;Kr(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===G.current){if(null===(o=a.alternate))throw Error(s(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Kd):e=[Kd])}a=a.return}null!==e&&Na(t,e,r,n),t.flags|=262144}function _a(e){for(e=e.firstContext;null!==e;){if(!Kr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ja(e){ya=e,va=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ea(e){return ka(ya,e)}function Aa(e,t){return null===ya&&ja(e),ka(e,t)}function ka(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===va){if(null===e)throw Error(s(308));va=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else va=va.next=t;return r}var Ca="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Oa=n.unstable_scheduleCallback,Ta=n.unstable_NormalPriority,Ra={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ia(){return{controller:new Ca,data:new Map,refCount:0}}function La(e){e.refCount--,0===e.refCount&&Oa(Ta,function(){e.controller.abort()})}var Pa=null,Da=0,Ma=0,Fa=null;function Ba(){if(0===--Da&&null!==Pa){null!==Fa&&(Fa.status="fulfilled");var e=Pa;Pa=null,Ma=0,Fa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ua=L.S;L.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Pa){var r=Pa=[];Da=0,Ma=Cu(),Fa={status:"pending",value:void 0,then:function(e){r.push(e)}}}Da++,t.then(Ba,Ba)}(0,t),null!==Ua&&Ua(e,t)};var za=B(null);function Ha(){var e=za.current;return null!==e?e:nc.pooledCache}function $a(e,t){z(za,null===t?za.current:t.pool)}function qa(){var e=Ha();return null===e?null:{parent:Ra._currentValue,pool:e}}var Ga=Error(s(460)),Wa=Error(s(474)),Va=Error(s(542)),Ka={then:function(){}};function Ya(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ja(){}function Xa(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Ja,Ja),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ja,Ja);else{if(null!==(e=nc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Qa=t,Ga}}var Qa=null;function Za(){if(null===Qa)throw Error(s(459));var e=Qa;return Qa=null,e}function ei(e){if(e===Ga||e===Va)throw Error(s(483))}var ti=!1;function ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ni(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ai(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&rc)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=In(e),Rn(e,null,r),t}return Cn(e,n,t,r),In(e)}function si(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ae(e,r)}}function oi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var s={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===i?a=i=s:i=i.next=s,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fa)throw Fa}}function ui(e,t,r,n){li=!1;var a=e.updateQueue;ti=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,m=f!==o.lane;if(m?(ic&f)===f:(n&f)===f){0!==f&&f===Ma&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;f=t;var y=r;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(y,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(y,d,f):p)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=a.callbacks)?a.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,s|=f;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(m=o).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),fc|=s,e.lanes=s,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function hi(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)di(r[e],t)}var fi=B(null),mi=B(0);function pi(e,t){z(mi,e=dc),z(fi,t),dc=e|t.baseLanes}function gi(){z(mi,dc),z(fi,fi.current)}function yi(){dc=mi.current,U(fi),U(mi)}var vi=0,bi=null,xi=null,wi=null,Ni=!1,Si=!1,_i=!1,ji=0,Ei=0,Ai=null,ki=0;function Ci(){throw Error(s(321))}function Oi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Kr(e[r],t[r]))return!1;return!0}function Ti(e,t,r,n,a,i){return vi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?Gs:Ws,_i=!1,i=r(n,a),_i=!1,Si&&(i=Ii(t,r,n,a)),Ri(e),i}function Ri(e){L.H=qs;var t=null!==xi&&null!==xi.next;if(vi=0,wi=xi=bi=null,Ni=!1,Ei=0,Ai=null,t)throw Error(s(300));null===e||Ao||null!==(e=e.dependencies)&&_a(e)&&(Ao=!0)}function Ii(e,t,r,n){bi=e;var a=0;do{if(Si&&(Ai=null),Ei=0,Si=!1,25<=a)throw Error(s(301));if(a+=1,wi=xi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}L.H=Vs,i=t(r,n)}while(Si);return i}function Li(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?Ui(t):t,e=e.useState()[0],(null!==xi?xi.memoizedState:null)!==e&&(bi.flags|=1024),t}function Pi(){var e=0!==ji;return ji=0,e}function Di(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Mi(e){if(Ni){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ni=!1}vi=0,wi=xi=bi=null,Si=!1,Ei=ji=0,Ai=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wi?bi.memoizedState=wi=e:wi=wi.next=e,wi}function Bi(){if(null===xi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=xi.next;var t=null===wi?bi.memoizedState:wi.next;if(null!==t)wi=t,xi=e;else{if(null===e){if(null===bi.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(xi=e).memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},null===wi?bi.memoizedState=wi=e:wi=wi.next=e}return wi}function Ui(e){var t=Ei;return Ei+=1,null===Ai&&(Ai=[]),e=Xa(Ai,e,t),t=bi,null===(null===wi?t.memoizedState:wi.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?Gs:Ws),e}function zi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ui(e);if(e.$$typeof===w)return Ea(e)}throw Error(s(438,String(e)))}function Hi(e){var t=null,r=bi.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=bi.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=k;return t.index++,r}function $i(e,t){return"function"===typeof t?t(e):t}function qi(e){return Gi(Bi(),xi,e)}function Gi(e,t,r){var n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=r;var a=e.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,n.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=o=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(vi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ma&&(d=!0);else{if((vi&f)===f){u=u.next,f===Ma&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,bi.lanes|=f,fc|=f}h=u.action,_i&&r(i,h),i=u.hasEagerState?u.eagerState:r(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,bi.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Kr(i,e.memoizedState)&&(Ao=!0,d&&null!==(r=Fa)))throw r;e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Wi(e){var t=Bi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);Kr(i,t.memoizedState)||(Ao=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Vi(e,t,r){var n=bi,a=Bi(),i=ia;if(i){if(void 0===r)throw Error(s(407));r=r()}else r=t();var o=!Kr((xi||a).memoizedState,r);if(o&&(a.memoizedState=r,Ao=!0),a=a.queue,gs(2048,8,Ji.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||null!==wi&&1&wi.memoizedState.tag){if(n.flags|=2048,fs(9,{destroy:void 0,resource:void 0},Yi.bind(null,n,a,r,t),null),null===nc)throw Error(s(349));i||0!==(124&vi)||Ki(n,t,r)}return r}function Ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Yi(e,t,r,n){t.value=r,t.getSnapshot=n,Xi(t)&&Qi(e)}function Ji(e,t,r){return r(function(){Xi(t)&&Qi(e)})}function Xi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Kr(e,r)}catch(n){return!0}}function Qi(e){var t=Tn(e,2);null!==t&&Dc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var r=e;if(e=r(),_i){he(!0);try{r()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:e},t}function es(e,t,r,n){return e.baseState=r,Gi(e,xi,"function"===typeof n?n:$i)}function ts(e,t,r,n,a){if(zs(e))throw Error(s(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==L.T?r(!0):i.isTransition=!1,n(i),null===(r=t.pending)?(i.next=t.pending=i,rs(t,i)):(i.next=r.next,t.pending=r.next=i)}}function rs(e,t){var r=t.action,n=t.payload,a=e.state;if(t.isTransition){var i=L.T,s={};L.T=s;try{var o=r(a,n),l=L.S;null!==l&&l(s,o),ns(e,t,o)}catch(c){is(e,t,c)}finally{L.T=i}}else try{ns(e,t,i=r(a,n))}catch(u){is(e,t,u)}}function ns(e,t,r){null!==r&&"object"===typeof r&&"function"===typeof r.then?r.then(function(r){as(e,t,r)},function(r){return is(e,t,r)}):as(e,t,r)}function as(e,t,r){t.status="fulfilled",t.value=r,ss(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,rs(e,r)))}function is(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,ss(t),t=t.next}while(t!==n)}e.action=null}function ss(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function os(e,t){return t}function ls(e,t){if(ia){var r=nc.formState;if(null!==r){e:{var n=bi;if(ia){if(aa){t:{for(var a=aa,i=oa;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=yd(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){aa=yd(a.nextSibling),n="F!"===a.data;break e}}ca(n)}n=!1}n&&(t=r[0])}}return(r=Fi()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},r.queue=n,r=Fs.bind(null,bi,n),n.dispatch=r,n=Zi(!1),i=Us.bind(null,bi,!1,n.queue),a={state:t,dispatch:null,action:e,pending:null},(n=Fi()).queue=a,r=ts.bind(null,bi,a,i,r),a.dispatch=r,n.memoizedState=e,[t,r,!1]}function cs(e){return us(Bi(),xi,e)}function us(e,t,r){if(t=Gi(e,t,os)[0],e=qi($i)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=Ui(t)}catch(s){if(s===Ga)throw Va;throw s}else n=t;var a=(t=Bi()).queue,i=a.dispatch;return r!==t.memoizedState&&(bi.flags|=2048,fs(9,{destroy:void 0,resource:void 0},ds.bind(null,a,r),null)),[n,i,e]}function ds(e,t){e.action=t}function hs(e){var t=Bi(),r=xi;if(null!==r)return us(t,r,e);Bi(),t=t.memoizedState;var n=(r=Bi()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function fs(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function ms(){return Bi().memoizedState}function ps(e,t,r,n){var a=Fi();n=void 0===n?null:n,bi.flags|=e,a.memoizedState=fs(1|t,{destroy:void 0,resource:void 0},r,n)}function gs(e,t,r,n){var a=Bi();n=void 0===n?null:n;var i=a.memoizedState.inst;null!==xi&&null!==n&&Oi(n,xi.memoizedState.deps)?a.memoizedState=fs(t,i,r,n):(bi.flags|=e,a.memoizedState=fs(1|t,i,r,n))}function ys(e,t){ps(8390656,8,e,t)}function vs(e,t){gs(2048,8,e,t)}function bs(e,t){return gs(4,2,e,t)}function xs(e,t){return gs(4,4,e,t)}function ws(e,t){if("function"===typeof t){e=e();var r=t(e);return function(){"function"===typeof r?r():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ns(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,gs(4,4,ws.bind(null,t,e),r)}function Ss(){}function _s(e,t){var r=Bi();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Oi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function js(e,t){var r=Bi();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Oi(t,n[1]))return n[0];if(n=e(),_i){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n}function Es(e,t,r){return void 0===r||0!==(1073741824&vi)?e.memoizedState=t:(e.memoizedState=r,e=Pc(),bi.lanes|=e,fc|=e,r)}function As(e,t,r,n){return Kr(r,t)?r:null!==fi.current?(e=Es(e,r,n),Kr(e,t)||(Ao=!0),e):0===(42&vi)?(Ao=!0,e.memoizedState=r):(e=Pc(),bi.lanes|=e,fc|=e,t)}function ks(e,t,r,n,a){var i=P.p;P.p=0!==i&&8>i?i:8;var s=L.T,o={};L.T=o,Us(e,!1,t,r);try{var l=a(),c=L.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Bs(e,t,function(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(e){r.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<r.length;e++)(0,r[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)}),n}(l,n),Lc());else Bs(e,t,n,Lc())}catch(u){Bs(e,t,{then:function(){},status:"rejected",reason:u},Lc())}finally{P.p=i,L.T=s}}function Cs(){}function Os(e,t,r,n){if(5!==e.tag)throw Error(s(476));var a=Ts(e).queue;ks(e,a,t,D,null===r?Cs:function(){return Rs(e),r(n)})}function Ts(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:D},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Rs(e){Bs(e,Ts(e).next.queue,{},Lc())}function Is(){return Ea(Kd)}function Ls(){return Bi().memoizedState}function Ps(){return Bi().memoizedState}function Ds(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Lc(),n=ii(t,e=ai(r),r);return null!==n&&(Dc(n,t,r),si(n,t,r)),t={cache:Ia()},void(e.payload=t)}t=t.return}}function Ms(e,t,r){var n=Lc();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},zs(e)?Hs(t,r):null!==(r=On(e,t,r,n))&&(Dc(r,e,n),$s(r,t,n))}function Fs(e,t,r){Bs(e,t,r,Lc())}function Bs(e,t,r,n){var a={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(zs(e))Hs(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,Kr(o,s))return Cn(e,t,a,0),null===nc&&kn(),!1}catch(l){}if(null!==(r=On(e,t,a,n)))return Dc(r,e,n),$s(r,t,n),!0}return!1}function Us(e,t,r,n){if(n={lane:2,revertLane:Cu(),action:n,hasEagerState:!1,eagerState:null,next:null},zs(e)){if(t)throw Error(s(479))}else null!==(t=On(e,r,n,2))&&Dc(t,e,2)}function zs(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function Hs(e,t){Si=Ni=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $s(e,t,r){if(0!==(4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Ae(e,r)}}var qs={readContext:Ea,use:zi,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useLayoutEffect:Ci,useInsertionEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useSyncExternalStore:Ci,useId:Ci,useHostTransitionStatus:Ci,useFormState:Ci,useActionState:Ci,useOptimistic:Ci,useMemoCache:Ci,useCacheRefresh:Ci},Gs={readContext:Ea,use:zi,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:ys,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,ps(4194308,4,ws.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ps(4194308,4,e,t)},useInsertionEffect:function(e,t){ps(4,2,e,t)},useMemo:function(e,t){var r=Fi();t=void 0===t?null:t;var n=e();if(_i){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Fi();if(void 0!==r){var a=r(t);if(_i){he(!0);try{r(t)}finally{he(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=Ms.bind(null,bi,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,r=Fs.bind(null,bi,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Ss,useDeferredValue:function(e,t){return Es(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=ks.bind(null,bi,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=bi,a=Fi();if(ia){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===nc)throw Error(s(349));0!==(124&ic)||Ki(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,ys(Ji.bind(null,n,i,e),[e]),n.flags|=2048,fs(9,{destroy:void 0,resource:void 0},Yi.bind(null,n,i,r,t),null),r},useId:function(){var e=Fi(),t=nc.identifierPrefix;if(ia){var r=Qn;t="\xab"+t+"R"+(r=(Xn&~(1<<32-fe(Xn)-1)).toString(32)+r),0<(r=ji++)&&(t+="H"+r.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(r=ki++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Is,useFormState:ls,useActionState:ls,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Us.bind(null,bi,!0,r),r.dispatch=t,[e,t]},useMemoCache:Hi,useCacheRefresh:function(){return Fi().memoizedState=Ds.bind(null,bi)}},Ws={readContext:Ea,use:zi,useCallback:_s,useContext:Ea,useEffect:vs,useImperativeHandle:Ns,useInsertionEffect:bs,useLayoutEffect:xs,useMemo:js,useReducer:qi,useRef:ms,useState:function(){return qi($i)},useDebugValue:Ss,useDeferredValue:function(e,t){return As(Bi(),xi.memoizedState,e,t)},useTransition:function(){var e=qi($i)[0],t=Bi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Vi,useId:Ls,useHostTransitionStatus:Is,useFormState:cs,useActionState:cs,useOptimistic:function(e,t){return es(Bi(),0,e,t)},useMemoCache:Hi,useCacheRefresh:Ps},Vs={readContext:Ea,use:zi,useCallback:_s,useContext:Ea,useEffect:vs,useImperativeHandle:Ns,useInsertionEffect:bs,useLayoutEffect:xs,useMemo:js,useReducer:Wi,useRef:ms,useState:function(){return Wi($i)},useDebugValue:Ss,useDeferredValue:function(e,t){var r=Bi();return null===xi?Es(r,e,t):As(r,xi.memoizedState,e,t)},useTransition:function(){var e=Wi($i)[0],t=Bi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Vi,useId:Ls,useHostTransitionStatus:Is,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var r=Bi();return null!==xi?es(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Hi,useCacheRefresh:Ps},Ks=null,Ys=0;function Js(e){var t=Ys;return Ys+=1,null===Ks&&(Ks=[]),Xa(Ks,e,t)}function Xs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Qs(e,t){if(t.$$typeof===f)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zs(e){return(0,e._init)(e._payload)}function eo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Fn(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Hn(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===g?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===E&&Zs(i)===t.type)?(Xs(t=a(t,r.props),r),t.return=e,t):(Xs(t=Un(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=$n(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=zn(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hn(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Xs(r=Un(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case p:return(t=$n(t,e.mode,r)).return=e,t;case E:return h(e,t=(0,t._init)(t._payload),r)}if(I(t)||O(t))return(t=zn(t,e.mode,r,null)).return=e,t;if("function"===typeof t.then)return h(e,Js(t),r);if(t.$$typeof===w)return h(e,Aa(e,t),r);Qs(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return r.key===a?c(e,t,r,n):null;case p:return r.key===a?u(e,t,r,n):null;case E:return f(e,t,r=(a=r._init)(r._payload),n)}if(I(r)||O(r))return null!==a?null:d(e,t,r,n,null);if("function"===typeof r.then)return f(e,t,Js(r),n);if(r.$$typeof===w)return f(e,t,Aa(e,r),n);Qs(e,r)}return null}function y(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case p:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case E:return y(e,t,r,n=(0,n._init)(n._payload),a)}if(I(n)||O(n))return d(t,e=e.get(r)||null,n,a,null);if("function"===typeof n.then)return y(e,t,r,Js(n),a);if(n.$$typeof===w)return y(e,t,r,Aa(t,n),a);Qs(t,n)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){r(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===E&&Zs(b)===c.type){r(l,c.sibling),Xs(d=a(c,u.props),u),d.return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zn(u.props.children,l.mode,d,u.key)).return=l,l=d):(Xs(d=Un(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}(d=$n(u,l.mode,d)).return=l,l=d}return o(l);case E:return v(l,c,u=(b=u._init)(u._payload),d)}if(I(u))return function(a,s,o,l){for(var c=null,u=null,d=s,m=s=0,p=null;null!==d&&m<o.length;m++){d.index>m?(p=d,d=null):p=d.sibling;var g=f(a,d,o[m],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(a,d),s=i(g,s,m),null===u?c=g:u.sibling=g,u=g,d=p}if(m===o.length)return r(a,d),ia&&Zn(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===u?c=d:u.sibling=d,u=d);return ia&&Zn(a,m),c}for(d=n(d);m<o.length;m++)null!==(p=y(d,a,m,o[m],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?m:p.key),s=i(p,s,m),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(a,e)}),ia&&Zn(a,m),c}(l,c,u,d);if(O(u)){if("function"!==typeof(b=O(u)))throw Error(s(150));return function(a,o,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,m=o,p=o=0,g=null,v=l.next();null!==m&&!v.done;p++,v=l.next()){m.index>p?(g=m,m=null):g=m.sibling;var b=f(a,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),o=i(b,o,p),null===d?u=b:d.sibling=b,d=b,m=g}if(v.done)return r(a,m),ia&&Zn(a,p),u;if(null===m){for(;!v.done;p++,v=l.next())null!==(v=h(a,v.value,c))&&(o=i(v,o,p),null===d?u=v:d.sibling=v,d=v);return ia&&Zn(a,p),u}for(m=n(m);!v.done;p++,v=l.next())null!==(v=y(m,a,p,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?p:v.key),o=i(v,o,p),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),ia&&Zn(a,p),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,Js(u),d);if(u.$$typeof===w)return v(l,c,Aa(l,u),d);Qs(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(d=a(c,u)).return=l,l=d):(r(l,c),(d=Hn(u,l.mode,d)).return=l,l=d),o(l)):r(l,c)}return function(e,t,r,n){try{Ys=0;var a=v(e,t,r,n);return Ks=null,a}catch(s){if(s===Ga||s===Va)throw s;var i=Dn(29,s,null,e.mode);return i.lanes=n,i.return=e,i}}}var to=eo(!0),ro=eo(!1),no=B(null),ao=null;function io(e){var t=e.alternate;z(co,1&co.current),z(no,e),null===ao&&(null===t||null!==fi.current||null!==t.memoizedState)&&(ao=e)}function so(e){if(22===e.tag){if(z(co,co.current),z(no,e),null===ao){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ao=e)}}else oo()}function oo(){z(co,co.current),z(no,no.current)}function lo(e){U(no),ao===e&&(ao=null),U(co)}var co=B(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||gd(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:h({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var fo={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Lc(),a=ai(n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ii(e,a,n))&&(Dc(t,e,n),si(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Lc(),a=ai(n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=ii(e,a,n))&&(Dc(t,e,n),si(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Lc(),n=ai(r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=ii(e,n,r))&&(Dc(t,e,r),si(t,e,r))}};function mo(e,t,r,n,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!Yr(r,n)||!Yr(a,i))}function po(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function go(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var a in r===t&&(r=h({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}var yo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vo(e){yo(e)}function bo(e){console.error(e)}function xo(e){yo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function No(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function So(e,t,r){return(r=ai(r)).tag=3,r.payload={element:null},r.callback=function(){wo(e,t)},r}function _o(e){return(e=ai(e)).tag=3,e}function jo(e,t,r,n){var a=r.type.getDerivedStateFromError;if("function"===typeof a){var i=n.value;e.payload=function(){return a(i)},e.callback=function(){No(t,r,n)}}var s=r.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){No(t,r,n),"function"!==typeof a&&(null===_c?_c=new Set([this]):_c.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Eo=Error(s(461)),Ao=!1;function ko(e,t,r,n){t.child=null===e?ro(t,null,r,n):to(t,e.child,r,n)}function Co(e,t,r,n,a){r=r.render;var i=t.ref;if("ref"in n){var s={};for(var o in n)"ref"!==o&&(s[o]=n[o])}else s=n;return ja(t),n=Ti(e,t,r,s,i,a),o=Pi(),null===e||Ao?(ia&&o&&ta(t),t.flags|=1,ko(e,t,n,a),t.child):(Di(e,t,a),Yo(e,t,a))}function Oo(e,t,r,n,a){if(null===e){var i=r.type;return"function"!==typeof i||Mn(i)||void 0!==i.defaultProps||null!==r.compare?((e=Un(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,To(e,t,i,n,a))}if(i=e.child,!Jo(e,a)){var s=i.memoizedProps;if((r=null!==(r=r.compare)?r:Yr)(s,n)&&e.ref===t.ref)return Yo(e,t,a)}return t.flags|=1,(e=Fn(i,n)).ref=t.ref,e.return=t,t.child=e}function To(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(Yr(i,n)&&e.ref===t.ref){if(Ao=!1,t.pendingProps=n=i,!Jo(e,a))return t.lanes=e.lanes,Yo(e,t,a);0!==(131072&e.flags)&&(Ao=!0)}}return Po(e,t,r,n,a)}function Ro(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0!==(128&t.flags)){if(n=null!==i?i.baseLanes|r:r,null!==e){for(a=t.child=e.child,i=0;null!==a;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return Io(e,t,n,r)}if(0===(536870912&r))return t.lanes=t.childLanes=536870912,Io(e,t,null!==i?i.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$a(0,null!==i?i.cachePool:null),null!==i?pi(t,i):gi(),so(t)}else null!==i?($a(0,i.cachePool),pi(t,i),oo(),t.memoizedState=null):(null!==e&&$a(0,null),gi(),oo());return ko(e,t,a,r),t.child}function Io(e,t,r,n){var a=Ha();return a=null===a?null:{parent:Ra._currentValue,pool:a},t.memoizedState={baseLanes:r,cachePool:a},null!==e&&$a(0,null),gi(),so(t),null!==e&&Sa(e,t,n,!0),null}function Lo(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof r&&"object"!==typeof r)throw Error(s(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Po(e,t,r,n,a){return ja(t),r=Ti(e,t,r,n,void 0,a),n=Pi(),null===e||Ao?(ia&&n&&ta(t),t.flags|=1,ko(e,t,r,a),t.child):(Di(e,t,a),Yo(e,t,a))}function Do(e,t,r,n,a,i){return ja(t),t.updateQueue=null,r=Ii(t,n,r,a),Ri(e),n=Pi(),null===e||Ao?(ia&&n&&ta(t),t.flags|=1,ko(e,t,r,i),t.child):(Di(e,t,i),Yo(e,t,i))}function Mo(e,t,r,n,a){if(ja(t),null===t.stateNode){var i=Ln,s=r.contextType;"object"===typeof s&&null!==s&&(i=Ea(s)),i=new r(n,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=fo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=n,i.state=t.memoizedState,i.refs={},ri(t),s=r.contextType,i.context="object"===typeof s&&null!==s?Ea(s):Ln,i.state=t.memoizedState,"function"===typeof(s=r.getDerivedStateFromProps)&&(ho(t,r,s,n),i.state=t.memoizedState),"function"===typeof r.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(s=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&fo.enqueueReplaceState(i,i.state,null),ui(t,n,i,a),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=go(r,o);i.props=l;var c=i.context,u=r.contextType;s=Ln,"object"===typeof u&&null!==u&&(s=Ea(u));var d=r.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==s)&&po(t,i,n,s),ti=!1;var h=t.memoizedState;i.state=h,ui(t,n,i,a),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(ho(t,r,d,n),c=t.memoizedState),(l=ti||mo(t,r,l,n,h,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=s,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ni(e,t),u=go(r,s=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=r.contextType,l=Ln,"object"===typeof c&&null!==c&&(l=Ea(c)),(c="function"===typeof(o=r.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==l)&&po(t,i,n,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,n,i,a),ci();var f=t.memoizedState;s!==d||h!==f||ti||null!==e&&null!==e.dependencies&&_a(e.dependencies)?("function"===typeof o&&(ho(t,r,o,n),f=t.memoizedState),(u=ti||mo(t,r,u,n,h,f,l)||null!==e&&null!==e.dependencies&&_a(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),i.props=n,i.state=f,i.context=l,n=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,Lo(e,t),n=0!==(128&t.flags),i||n?(i=t.stateNode,r=n&&"function"!==typeof r.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&n?(t.child=to(t,e.child,null,a),t.child=to(t,null,r,a)):ko(e,t,r,a),t.memoizedState=i.state,e=t.child):e=Yo(e,t,a),e}function Fo(e,t,r,n){return fa(),t.flags|=256,ko(e,t,r,n),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uo(e){return{baseLanes:e,cachePool:qa()}}function zo(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=gc),e}function Ho(e,t,r){var n,a=t.pendingProps,i=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),n&&(i=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(ia){if(i?io(t):oo(),ia){var l,c=aa;if(l=c){e:{for(l=c,c=oa;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Jn?{id:Xn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},(l=Dn(18,null,null,0)).stateNode=c,l.return=t,t.child=l,na=t,aa=null,l=!0):l=!1}l||ca(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=a.children,a=a.fallback,i?(oo(),c=qo({mode:"hidden",children:c},i=t.mode),a=zn(a,i,r,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(i=t.child).memoizedState=Uo(r),i.childLanes=zo(e,n,r),t.memoizedState=Bo,a):(io(t),$o(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=Go(e,t,r)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=a.fallback,c=t.mode,a=qo({mode:"visible",children:a.children},c),(i=zn(i,c,r,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,to(t,e.child,null,r),(a=t.child).memoizedState=Uo(r),a.childLanes=zo(e,n,r),t.memoizedState=Bo,t=i);else if(io(t),gd(c)){if(n=c.nextSibling&&c.nextSibling.dataset)var u=n.dgst;n=u,(a=Error(s(419))).stack="",a.digest=n,pa({value:a,source:null,stack:null}),t=Go(e,t,r)}else if(Ao||Sa(e,t,r,!1),n=0!==(r&e.childLanes),Ao||n){if(null!==(n=nc)&&(0!==(a=0!==((a=0!==(42&(a=r&-r))?1:ke(a))&(n.suspendedLanes|r))?0:a)&&a!==l.retryLane))throw l.retryLane=a,Tn(e,a),Dc(n,e,a),Eo;"$?"===c.data||Vc(),t=Go(e,t,r)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,aa=yd(c.nextSibling),na=t,ia=!0,sa=null,oa=!1,null!==e&&(Kn[Yn++]=Xn,Kn[Yn++]=Qn,Kn[Yn++]=Jn,Xn=e.id,Qn=e.overflow,Jn=t),(t=$o(t,a.children)).flags|=4096);return t}return i?(oo(),i=a.fallback,c=t.mode,u=(l=e.child).sibling,(a=Fn(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fn(u,i):(i=zn(i,c,r,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,null===(c=e.child.memoizedState)?c=Uo(r):(null!==(l=c.cachePool)?(u=Ra._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=qa(),c={baseLanes:c.baseLanes|r,cachePool:l}),i.memoizedState=c,i.childLanes=zo(e,n,r),t.memoizedState=Bo,a):(io(t),e=(r=e.child).sibling,(r=Fn(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function $o(e,t){return(t=qo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function qo(e,t){return(e=Dn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,r){return to(t,e.child,null,r),(e=$o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),wa(e.return,t,r)}function Vo(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Ko(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ko(e,t,n.children,r),0!==(2&(n=co.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wo(e,r,t);else if(19===e.tag)Wo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(z(co,n),a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===uo(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Vo(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Vo(t,!0,r,null,i);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(Sa(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Fn(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Fn(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Jo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_a(e))}function Xo(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ao=!0;else{if(!Jo(e,r)&&0===(128&t.flags))return Ao=!1,function(e,t,r){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),ba(0,Ra,e.memoizedState.cache),fa();break;case 27:case 5:K(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:ba(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(io(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Ho(e,t,r):(io(t),null!==(e=Yo(e,t,r))?e.sibling:null);io(t);break;case 19:var a=0!==(128&e.flags);if((n=0!==(r&t.childLanes))||(Sa(e,t,r,!1),n=0!==(r&t.childLanes)),a){if(n)return Ko(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),z(co,co.current),n)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,r);case 24:ba(0,Ra,e.memoizedState.cache)}return Yo(e,t,r)}(e,t,r);Ao=0!==(131072&e.flags)}else Ao=!1,ia&&0!==(1048576&t.flags)&&ea(t,Vn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((a=n.$$typeof)===N){t.tag=11,t=Co(null,t,n,e,r);break e}if(a===j){t.tag=14,t=Oo(null,t,n,e,r);break e}}throw t=R(n)||n,Error(s(306,t,""))}Mn(n)?(e=go(n,e),t.tag=1,t=Mo(null,t,n,e,r)):(t.tag=0,t=Po(null,t,n,e,r))}return t;case 0:return Po(e,t,t.type,t.pendingProps,r);case 1:return Mo(e,t,n=t.type,a=go(n,t.pendingProps),r);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(s(387));n=t.pendingProps;var i=t.memoizedState;a=i.element,ni(e,t),ui(t,n,null,r);var o=t.memoizedState;if(n=o.cache,ba(0,Ra,n),n!==i.cache&&Na(t,[Ra],r,!0),ci(),n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fo(e,t,n,r);break e}if(n!==a){pa(a=_n(Error(s(424)),t)),t=Fo(e,t,n,r);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=yd(e.firstChild),na=t,ia=!0,sa=null,oa=!0,r=ro(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fa(),n===a){t=Yo(e,t,r);break e}ko(e,t,n,r)}t=t.child}return t;case 26:return Lo(e,t),null===e?(r=kd(t.type,null,t.pendingProps,null))?t.memoizedState=r:ia||(r=t.type,e=t.pendingProps,(n=nd(q.current).createElement(r))[Re]=t,n[Ie]=e,ed(n,r,e),Ge(n),t.stateNode=n):t.memoizedState=kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&ia&&(n=t.stateNode=xd(t.type,t.pendingProps,q.current),na=t,oa=!0,a=aa,fd(t.type)?(vd=a,aa=yd(n.firstChild)):aa=a),ko(e,t,t.pendingProps.children,r),Lo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ia&&((a=n=aa)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var a=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=yd(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,oa))?(t.stateNode=n,na=t,aa=yd(n.firstChild),oa=!1,a=!0):a=!1),a||ca(t)),K(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,n=i.children,sd(a,i)?n=null:null!==o&&sd(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=Ti(e,t,Li,null,null,r),Kd._currentValue=a),Lo(e,t),ko(e,t,n,r),t.child;case 6:return null===e&&ia&&((e=r=aa)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(r,t.pendingProps,oa))?(t.stateNode=r,na=t,aa=null,e=!0):e=!1),e||ca(t)),null;case 13:return Ho(e,t,r);case 4:return W(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=to(t,null,n,r):ko(e,t,n,r),t.child;case 11:return Co(e,t,t.type,t.pendingProps,r);case 7:return ko(e,t,t.pendingProps,r),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,ba(0,t.type,n.value),ko(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,ja(t),n=n(a=Ea(a)),t.flags|=1,ko(e,t,n,r),t.child;case 14:return Oo(e,t,t.type,t.pendingProps,r);case 15:return To(e,t,t.type,t.pendingProps,r);case 19:return Ko(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=qo(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=Fn(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Ro(e,t,r);case 24:return ja(t),n=Ea(Ra),null===e?(null===(a=Ha())&&(a=nc,i=Ia(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=r),a=i),t.memoizedState={parent:n,cache:a},ri(t),ba(0,Ra,a)):(0!==(e.lanes&r)&&(ni(e,t),ui(t,null,null,r),ci()),a=e.memoizedState,i=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ba(0,Ra,n)):(n=i.cache,ba(0,Ra,n),n!==a.cache&&Na(t,[Ra],r,!0))),ko(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Qo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=no.current)&&((4194048&ic)===ic?null!==ao:(62914560&ic)!==ic&&0===(536870912&ic)||t!==ao))throw Qa=Ka,Wa;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=65011712&a.subtreeFlags,n|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function nl(e,t,r){var n=t.pendingProps;switch(ra(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xa(Ra),V(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?Qo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ma())),rl(t),null;case 26:return r=t.memoizedState,null===e?(Qo(t),null!==r?(rl(t),Zo(t,r)):(rl(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Qo(t),rl(t),Zo(t,r)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==n&&Qo(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),r=q.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Qo(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return rl(t),null}e=H.current,ha(t)?ua(t):(e=xd(a,n,r),t.stateNode=e,Qo(t))}return rl(t),null;case 5:if(Y(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Qo(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return rl(t),null}if(e=H.current,ha(t))ua(t);else{switch(a=nd(q.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?a.createElement(r,{is:n.is}):a.createElement(r)}}e[Re]=t,e[Ie]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(ed(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qo(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Qo(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(e=q.current,ha(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=na))switch(a.tag){case 27:case 5:n=a.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Ju(e.nodeValue,r)))||ca(t)}else(e=nd(e).createTextNode(n))[Re]=t,t.stateNode=e}return rl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[Re]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),a=!1}else a=ma(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){a=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool);var i=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(i=n.memoizedState.cachePool.pool),i!==a&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),el(t,t.updateQueue),rl(t),null;case 4:return V(),null===e&&Uu(t.stateNode.containerInfo),rl(t),null;case 10:return xa(t.type),rl(t),null;case 19:if(U(co),null===(a=t.memoizedState))return rl(t),null;if(n=0!==(128&t.flags),null===(i=a.rendering))if(n)tl(a,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,tl(a,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Bn(r,e),r=r.sibling;return z(co,1&co.current|2),t.child}e=e.sibling}null!==a.tail&&te()>Nc&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=uo(i))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!ia)return rl(t),null}else 2*te()-a.renderingStartTime>Nc&&536870912!==r&&(t.flags|=128,n=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=co.current,z(co,n?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return lo(t),yi(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&r)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(r=t.updateQueue)&&el(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&U(za),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xa(Ra),rl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function al(e,t){switch(ra(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xa(Ra),V(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(co),null;case 4:return V(),null;case 10:return xa(t.type),null;case 22:case 23:return lo(t),yi(),null!==e&&U(za),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xa(Ra),null;default:return null}}function il(e,t){switch(ra(t),t.tag){case 3:xa(Ra),V();break;case 26:case 27:case 5:Y(t);break;case 4:V();break;case 13:lo(t);break;case 19:U(co);break;case 10:xa(t.type);break;case 22:case 23:lo(t),yi(),null!==e&&U(za);break;case 24:xa(Ra)}}function sl(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){n=void 0;var i=r.create,s=r.inst;n=i(),s.destroy=n}r=r.next}while(r!==a)}}catch(o){uu(t,t.return,o)}}function ol(e,t,r){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var i=a.next;n=i;do{if((n.tag&e)===e){var s=n.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,a=t;var l=r,c=o;try{c()}catch(u){uu(a,l,u)}}}n=n.next}while(n!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{hi(t,r)}catch(n){uu(e,e.return,n)}}}function cl(e,t,r){r.props=go(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){uu(e,t,n)}}function ul(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof r?e.refCleanup=r(n):r.current=n}}catch(a){uu(e,t,a)}}function dl(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"===typeof n)try{n()}catch(a){uu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof r)try{r(null)}catch(i){uu(e,t,i)}else r.current=null}function hl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){uu(e,e.return,a)}}function fl(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in r){var h=r[m];if(r.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(m)||Qu(e,t,m,null,n,h)}}for(var f in n){var m=n[f];if(h=r[f],n.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":a=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(s(137,t));break;default:m!==h&&Qu(e,t,f,m,n,h)}}return void gt(e,o,l,c,u,d,i,a);case"select":for(i in m=o=l=f=null,r)if(c=r[i],r.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:n.hasOwnProperty(i)||Qu(e,t,i,null,n,c)}for(a in n)if(i=n[a],c=r[a],n.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Qu(e,t,a,i,n,c)}return t=l,r=o,n=m,void(null!=f?bt(e,!!r,f,!1):!!n!==!!r&&(null!=t?bt(e,!!r,t,!0):bt(e,!!r,r?[]:"",!1)));case"textarea":for(l in m=f=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Qu(e,t,l,null,n,a)}for(o in n)if(a=n[o],i=r[o],n.hasOwnProperty(o)&&(null!=a||null!=i))switch(o){case"value":f=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(s(91));break;default:a!==i&&Qu(e,t,o,a,n,i)}return void xt(e,f,m);case"option":for(var p in r)if(f=r[p],r.hasOwnProperty(p)&&null!=f&&!n.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Qu(e,t,p,null,n,f);for(c in n)if(f=n[c],m=r[c],n.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Qu(e,t,c,f,n,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)f=r[g],r.hasOwnProperty(g)&&null!=f&&!n.hasOwnProperty(g)&&Qu(e,t,g,null,n,f);for(u in n)if(f=n[u],m=r[u],n.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:Qu(e,t,u,f,n,m)}return;default:if(Et(t)){for(var y in r)f=r[y],r.hasOwnProperty(y)&&void 0!==f&&!n.hasOwnProperty(y)&&Zu(e,t,y,void 0,n,f);for(d in n)f=n[d],m=r[d],!n.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||Zu(e,t,d,f,n,m);return}}for(var v in r)f=r[v],r.hasOwnProperty(v)&&null!=f&&!n.hasOwnProperty(v)&&Qu(e,t,v,null,n,f);for(h in n)f=n[h],m=r[h],!n.hasOwnProperty(h)||f===m||null==f&&null==m||Qu(e,t,h,f,n,m)}(n,e.type,r,t),n[Ie]=t}catch(a){uu(e,e.return,a)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function pl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xu));else if(4!==n&&(27===n&&fd(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,r),e=e.sibling;null!==e;)gl(e,t,r),e=e.sibling}function yl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&fd(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(yl(e,t,r),e=e.sibling;null!==e;)yl(e,t,r),e=e.sibling}function vl(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ed(t,n,r),t[Re]=e,t[Ie]=r}catch(i){uu(e,e.return,i)}}var bl=!1,xl=!1,wl=!1,Nl="function"===typeof WeakSet?WeakSet:Set,Sl=null;function _l(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Ml(e,r),4&n&&sl(5,r);break;case 1:if(Ml(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(s){uu(r,r.return,s)}else{var a=go(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(r,r.return,o)}}64&n&&ll(r),512&n&&ul(r,r.return);break;case 3:if(Ml(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{hi(e,t)}catch(s){uu(r,r.return,s)}}break;case 27:null===t&&4&n&&vl(r);case 26:case 5:Ml(e,r),null===t&&4&n&&hl(r),512&n&&ul(r,r.return);break;case 12:Ml(e,r);break;case 13:Ml(e,r),4&n&&Ol(e,r),64&n&&(null!==(e=r.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=mu.bind(null,r))));break;case 22:if(!(n=null!==r.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||xl,a=bl;var i=xl;bl=n,(xl=t)&&!i?Bl(e,r,0!==(8772&r.subtreeFlags)):Ml(e,r),bl=a,xl=i}break;case 30:break;default:Ml(e,r)}}function jl(e){var t=e.alternate;null!==t&&(e.alternate=null,jl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var El=null,Al=!1;function kl(e,t,r){for(r=r.child;null!==r;)Cl(e,t,r),r=r.sibling}function Cl(e,t,r){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,r)}catch(i){}switch(r.tag){case 26:xl||dl(r,t),kl(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:xl||dl(r,t);var n=El,a=Al;fd(r.type)&&(El=r.stateNode,Al=!1),kl(e,t,r),wd(r.stateNode),El=n,Al=a;break;case 5:xl||dl(r,t);case 6:if(n=El,a=Al,El=null,kl(e,t,r),Al=a,null!==(El=n))if(Al)try{(9===El.nodeType?El.body:"HTML"===El.nodeName?El.ownerDocument.body:El).removeChild(r.stateNode)}catch(s){uu(r,t,s)}else try{El.removeChild(r.stateNode)}catch(s){uu(r,t,s)}break;case 18:null!==El&&(Al?(md(9===(e=El).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Ah(e)):md(El,r.stateNode));break;case 4:n=El,a=Al,El=r.stateNode.containerInfo,Al=!0,kl(e,t,r),El=n,Al=a;break;case 0:case 11:case 14:case 15:xl||ol(2,r,t),xl||ol(4,r,t),kl(e,t,r);break;case 1:xl||(dl(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount&&cl(r,t,n)),kl(e,t,r);break;case 21:kl(e,t,r);break;case 22:xl=(n=xl)||null!==r.memoizedState,kl(e,t,r),xl=n;break;default:kl(e,t,r)}}function Ol(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ah(e)}catch(r){uu(t,t.return,r)}}function Tl(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Nl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Nl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var n=pu.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function Rl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){El=l.stateNode,Al=!1;break e}break;case 5:El=l.stateNode,Al=!1;break e;case 3:case 4:El=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===El)throw Error(s(160));Cl(i,o,a),El=null,Al=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Il=null;function Ll(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Pl(e),4&n&&(ol(3,e,e.return),sl(3,e),ol(5,e,e.return));break;case 1:Rl(t,e),Pl(e),512&n&&(xl||null===r||dl(r,r.return)),64&n&&bl&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:var a=Il;if(Rl(t,e),Pl(e),512&n&&(xl||null===r||dl(r,r.return)),4&n){var i=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Be]||i[Re]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(n),a.head.insertBefore(i,a.querySelector("head > title"))),ed(i,n,r),i[Re]=e,Ge(i),n=i;break e;case"link":var o=Bd("link","href",a).get(n+(r.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&i.getAttribute("rel")===(null==r.rel?null:r.rel)&&i.getAttribute("title")===(null==r.title?null:r.title)&&i.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){o.splice(l,1);break t}ed(i=a.createElement(n),n,r),a.head.appendChild(i);break;case"meta":if(o=Bd("meta","content",a).get(n+(r.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&i.getAttribute("name")===(null==r.name?null:r.name)&&i.getAttribute("property")===(null==r.property?null:r.property)&&i.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&i.getAttribute("charset")===(null==r.charSet?null:r.charSet)){o.splice(l,1);break t}ed(i=a.createElement(n),n,r),a.head.appendChild(i);break;default:throw Error(s(468,n))}i[Re]=e,Ge(i),n=i}e.stateNode=n}else Ud(a,e.type,e.stateNode);else e.stateNode=Ld(a,n,e.memoizedProps);else i!==n?(null===i?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):i.count--,null===n?Ud(a,e.type,e.stateNode):Ld(a,n,e.memoizedProps)):null===n&&null!==e.stateNode&&fl(e,e.memoizedProps,r.memoizedProps)}break;case 27:Rl(t,e),Pl(e),512&n&&(xl||null===r||dl(r,r.return)),null!==r&&4&n&&fl(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Rl(t,e),Pl(e),512&n&&(xl||null===r||dl(r,r.return)),32&e.flags){a=e.stateNode;try{Nt(a,"")}catch(m){uu(e,e.return,m)}}4&n&&null!=e.stateNode&&fl(e,a=e.memoizedProps,null!==r?r.memoizedProps:a),1024&n&&(wl=!0);break;case 6:if(Rl(t,e),Pl(e),4&n){if(null===e.stateNode)throw Error(s(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(m){uu(e,e.return,m)}}break;case 3:if(Fd=null,a=Il,Il=_d(t.containerInfo),Rl(t,e),Il=a,Pl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ah(t.containerInfo)}catch(m){uu(e,e.return,m)}wl&&(wl=!1,Dl(e));break;case 4:n=Il,Il=_d(e.stateNode.containerInfo),Rl(t,e),Pl(e),Il=n;break;case 12:default:Rl(t,e),Pl(e);break;case 13:Rl(t,e),Pl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==r&&null!==r.memoizedState)&&(wc=te()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Tl(e,n)));break;case 22:a=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,u=bl,d=xl;if(bl=u||a,xl=d||c,Rl(t,e),xl=d,bl=u,Pl(e),8192&n)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||c||bl||xl||Fl(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(i=c.stateNode,a)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){uu(c,c.return,m)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){uu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(r=n.retryQueue)&&(n.retryQueue=null,Tl(e,r))));break;case 19:Rl(t,e),Pl(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Tl(e,n)));case 30:case 21:}}function Pl(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(ml(n)){r=n;break}n=n.return}if(null==r)throw Error(s(160));switch(r.tag){case 27:var a=r.stateNode;yl(e,pl(e),a);break;case 5:var i=r.stateNode;32&r.flags&&(Nt(i,""),r.flags&=-33),yl(e,pl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;gl(e,pl(e),o);break;default:throw Error(s(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)_l(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var r=t.stateNode;"function"===typeof r.componentWillUnmount&&cl(t,t.return,r),Fl(t);break;case 27:wd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Bl(e,t,r){for(r=r&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,a=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:Bl(a,i,r),sl(4,i);break;case 1:if(Bl(a,i,r),"function"===typeof(a=(n=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){uu(n,n.return,c)}if(null!==(a=(n=i).updateQueue)){var o=n.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)di(l[a],o)}catch(c){uu(n,n.return,c)}}r&&64&s&&ll(i),ul(i,i.return);break;case 27:vl(i);case 26:case 5:Bl(a,i,r),r&&null===n&&4&s&&hl(i),ul(i,i.return);break;case 12:Bl(a,i,r);break;case 13:Bl(a,i,r),r&&4&s&&Ol(a,i);break;case 22:null===i.memoizedState&&Bl(a,i,r),ul(i,i.return);break;case 30:break;default:Bl(a,i,r)}t=t.sibling}}function Ul(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&La(r))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&La(e))}function Hl(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)$l(e,t,r,n),t=t.sibling}function $l(e,t,r,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,r,n),2048&a&&sl(9,t);break;case 1:case 13:default:Hl(e,t,r,n);break;case 3:Hl(e,t,r,n),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&La(e)));break;case 12:if(2048&a){Hl(e,t,r,n),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,o=i.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Hl(e,t,r,n);break;case 23:break;case 22:i=t.stateNode,s=t.alternate,null!==t.memoizedState?2&i._visibility?Hl(e,t,r,n):Gl(e,t):2&i._visibility?Hl(e,t,r,n):(i._visibility|=2,ql(e,t,r,n,0!==(10256&t.subtreeFlags))),2048&a&&Ul(s,t);break;case 24:Hl(e,t,r,n),2048&a&&zl(t.alternate,t)}}function ql(e,t,r,n,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,s=t,o=r,l=n,c=s.flags;switch(s.tag){case 0:case 11:case 15:ql(i,s,o,l,a),sl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?ql(i,s,o,l,a):Gl(i,s):(u._visibility|=2,ql(i,s,o,l,a)),a&&2048&c&&Ul(s.alternate,s);break;case 24:ql(i,s,o,l,a),a&&2048&c&&zl(s.alternate,s);break;default:ql(i,s,o,l,a)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,a=n.flags;switch(n.tag){case 22:Gl(r,n),2048&a&&Ul(n.alternate,n);break;case 24:Gl(r,n),2048&a&&zl(n.alternate,n);break;default:Gl(r,n)}t=t.sibling}}var Wl=8192;function Vl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Vl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,r){if(null===Hd)throw Error(s(475));var n=Hd;if("stylesheet"===t.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Cd(r.href),i=e.querySelector(Od(a));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=qd.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,r=Td(r),(a=Nd.get(a))&&Dd(r,a),Ge(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",r),t.instance=i}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=qd.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(Il,e.memoizedState,e.memoizedProps);break;case 5:default:Vl(e);break;case 3:case 4:var t=Il;Il=_d(e.stateNode.containerInfo),Vl(e),Il=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Vl(e),Wl=t):Vl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Sl=n,Zl(n,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ql(e)):Jl(e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Sl=n,Zl(n,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Ql(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function Zl(e,t){for(;null!==Sl;){var r=Sl;switch(r.tag){case 0:case 11:case 15:ol(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:La(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,Sl=n;else e:for(r=e;null!==Sl;){var a=(n=Sl).sibling,i=n.return;if(jl(n),n===r){Sl=null;break e}if(null!==a){a.return=i,Sl=a;break e}Sl=i}}}var ec={getCacheForType:function(e){var t=Ea(Ra),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},tc="function"===typeof WeakMap?WeakMap:Map,rc=0,nc=null,ac=null,ic=0,sc=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,mc=0,pc=0,gc=0,yc=0,vc=null,bc=null,xc=!1,wc=0,Nc=1/0,Sc=null,_c=null,jc=0,Ec=null,Ac=null,kc=0,Cc=0,Oc=null,Tc=null,Rc=0,Ic=null;function Lc(){if(0!==(2&rc)&&0!==ic)return ic&-ic;if(null!==L.T){return 0!==Ma?Ma:Cu()}return Oe()}function Pc(){0===gc&&(gc=0===(536870912&ic)||ia?Ne():536870912);var e=no.current;return null!==e&&(e.flags|=32),gc}function Dc(e,t,r){(e!==nc||2!==sc&&9!==sc)&&null===e.cancelPendingCommit||($c(e,0),Uc(e,ic,gc,!1)),je(e,r),0!==(2&rc)&&e===nc||(e===nc&&(0===(2&rc)&&(mc|=r),4===hc&&Uc(e,ic,gc,!1)),Nu(e))}function Mc(e,t,r){if(0!==(6&rc))throw Error(s(327));for(var n=!r&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),a=n?function(e,t){var r=rc;rc|=2;var n=Gc(),a=Wc();nc!==e||ic!==t?(Sc=null,Nc=te()+500,$c(e,t)):cc=xe(e,t);e:for(;;)try{if(0!==sc&&null!==ac){t=ac;var i=oc;t:switch(sc){case 1:sc=0,oc=null,Zc(e,t,i,1);break;case 2:case 9:if(Ya(i)){sc=0,oc=null,Qc(t);break}t=function(){2!==sc&&9!==sc||nc!==e||(sc=7),Nu(e)},i.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:Ya(i)?(sc=0,oc=null,Qc(t)):(sc=0,oc=null,Zc(e,t,i,7));break;case 5:var o=null;switch(ac.tag){case 26:o=ac.memoizedState;case 5:case 27:var l=ac;if(!o||zd(o)){sc=0,oc=null;var c=l.sibling;if(null!==c)ac=c;else{var u=l.return;null!==u?(ac=u,eu(u)):ac=null}break t}}sc=0,oc=null,Zc(e,t,i,5);break;case 6:sc=0,oc=null,Zc(e,t,i,6);break;case 8:Hc(),hc=6;break e;default:throw Error(s(462))}}Jc();break}catch(d){qc(e,d)}return va=ya=null,L.H=n,L.A=a,rc=r,null!==ac?0:(nc=null,ic=0,kn(),hc)}(e,t):Kc(e,t,!0),i=n;;){if(0===a){cc&&!n&&Uc(e,t,0,!1);break}if(r=e.current.alternate,!i||Bc(r)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=vc;var c=l.current.memoizedState.isDehydrated;if(c&&($c(l,o).flags|=256),2!==(o=Kc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,mc|=i,a=4;break e}i=bc,bc=a,null!==i&&(null===bc?bc=i:bc.push.apply(bc,i))}a=o}if(i=!1,2!==a)continue}}if(1===a){$c(e,0),Uc(e,t,0,!0);break}e:{switch(n=e,i=a){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Uc(n,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(a=wc+300-te())){if(Uc(n,t,gc,!lc),0!==be(n,0,!0))break e;n.timeoutHandle=ld(Fc.bind(null,n,r,bc,Sc,xc,t,gc,mc,yc,lc,i,2,-0,0),a)}else Fc(n,r,bc,Sc,xc,t,gc,mc,yc,lc,i,0,-0,0)}break}a=Kc(e,t,!1),i=!1}Nu(e)}function Fc(e,t,r,n,a,i,o,l,c,u,d,h,f,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Hd={stylesheets:null,count:0,unsuspend:$d},Kl(t),null!==(h=function(){if(null===Hd)throw Error(s(475));var e=Hd;return e.stylesheets&&0===e.count&&Wd(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,i,r,n,a,o,l,c,d,1,f,m)),void Uc(e,i,o,!u);ru(e,t,i,r,n,a,o,l,c)}function Bc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Kr(i(),a))return!1}catch(s){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,r,n){t&=~pc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var i=31-fe(a),s=1<<i;n[i]=-1,a&=~s}0!==r&&Ee(e,r,t)}function zc(){return 0!==(6&rc)||(Su(0,!1),!1)}function Hc(){if(null!==ac){if(0===sc)var e=ac.return;else va=ya=null,Mi(e=ac),Ks=null,Ys=0,e=ac;for(;null!==e;)il(e.alternate,e),e=e.return;ac=null}}function $c(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,cd(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),Hc(),nc=e,ac=r=Fn(e.current,null),ic=t,sc=0,oc=null,lc=!1,cc=xe(e,t),uc=!1,yc=gc=pc=mc=fc=hc=0,bc=vc=null,xc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var a=31-fe(n),i=1<<a;t|=e[a],n&=~i}return dc=t,kn(),r}function qc(e,t){bi=null,L.H=qs,t===Ga||t===Va?(t=Za(),sc=3):t===Wa?(t=Za(),sc=4):sc=t===Eo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===ac&&(hc=1,wo(e,_n(t,e.current)))}function Gc(){var e=L.H;return L.H=qs,null===e?qs:e}function Wc(){var e=L.A;return L.A=ec,e}function Vc(){hc=4,lc||(4194048&ic)!==ic&&null!==no.current||(cc=!0),0===(134217727&fc)&&0===(134217727&mc)||null===nc||Uc(nc,ic,gc,!1)}function Kc(e,t,r){var n=rc;rc|=2;var a=Gc(),i=Wc();nc===e&&ic===t||(Sc=null,$c(e,t)),t=!1;var s=hc;e:for(;;)try{if(0!==sc&&null!==ac){var o=ac,l=oc;switch(sc){case 8:Hc(),s=6;break e;case 3:case 2:case 9:case 6:null===no.current&&(t=!0);var c=sc;if(sc=0,oc=null,Zc(e,o,l,c),r&&cc){s=0;break e}break;default:c=sc,sc=0,oc=null,Zc(e,o,l,c)}}Yc(),s=hc;break}catch(u){qc(e,u)}return t&&e.shellSuspendCounter++,va=ya=null,rc=n,L.H=a,L.A=i,null===ac&&(nc=null,ic=0,kn()),s}function Yc(){for(;null!==ac;)Xc(ac)}function Jc(){for(;null!==ac&&!Z();)Xc(ac)}function Xc(e){var t=Xo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ac=t}function Qc(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Do(r,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Do(r,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Mi(t);default:il(r,t),t=Xo(r,t=ac=Bn(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ac=t}function Zc(e,t,r,n){va=ya=null,Mi(t),Ks=null,Ys=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=r.alternate)&&Sa(t,r,a,!0),null!==(r=no.current)){switch(r.tag){case 13:return null===ao?Vc():null===r.alternate&&0===hc&&(hc=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===Ka?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),du(e,n,a)),!1;case 22:return r.flags|=65536,n===Ka?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),du(e,n,a)),!1}throw Error(s(435,r.tag))}return du(e,n,a),Vc(),!1}if(ia)return null!==(t=no.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==la&&pa(_n(e=Error(s(422),{cause:n}),r))):(n!==la&&pa(_n(t=Error(s(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,n=_n(n,r),oi(e,a=So(e.stateNode,n,a)),4!==hc&&(hc=2)),!1;var i=Error(s(520),{cause:n});if(i=_n(i,r),null===vc?vc=[i]:vc.push(i),4!==hc&&(hc=2),null===t)return!0;n=_n(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,oi(r,e=So(r.stateNode,n,e)),!1;case 1:if(t=r.type,i=r.stateNode,0===(128&r.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===_c||!_c.has(i))))return r.flags|=65536,a&=-a,r.lanes|=a,jo(a=_o(a),e,r,n),oi(r,a),!1}r=r.return}while(null!==r);return!1}(e,a,t,r,ic))return hc=1,wo(e,_n(r,e.current)),void(ac=null)}catch(i){if(null!==a)throw ac=a,i;return hc=1,wo(e,_n(r,e.current)),void(ac=null)}32768&t.flags?(ia||1===n?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=no.current)&&13===n.tag&&(n.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var r=nl(t.alternate,t,dc);if(null!==r)return void(ac=r);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var r=al(e.alternate,e);if(null!==r)return r.flags&=32767,void(ac=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=r}while(null!==e);hc=6,ac=null}function ru(e,t,r,n,a,i,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==jc);if(0!==(6&rc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(i=t.lanes|t.childLanes,function(e,t,r,n,a,i){var s=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=s&~r;0<r;){var u=31-fe(r),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}r&=~d}0!==n&&Ee(e,n,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,r,i|=An,o,l,c),e===nc&&(ac=nc=null,ic=0),Ac=t,Ec=e,kc=r,Cc=i,Oc=a,Tc=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(ie,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=L.T,L.T=null,a=P.p,P.p=2,o=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,td=rh,en(e=Zr(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(g){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===a&&(l=o),f===i&&++d===n&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(rd={focusedElem:e,selectionRange:r},rh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(i=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,r=t,a=i.memoizedProps,i=i.memoizedState,n=r.stateNode;try{var p=go(r.type,a,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(p,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(r,r.return,y)}}break;case 3:if(0!==(1024&e))if(9===(r=(e=t.stateNode.containerInfo).nodeType))pd(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{rc=o,P.p=a,L.T=n}}jc=1,nu(),au(),iu()}}function nu(){if(1===jc){jc=0;var e=Ec,t=Ac,r=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||r){r=L.T,L.T=null;var n=P.p;P.p=2;var a=rc;rc|=4;try{Ll(t,e);var i=rd,s=Zr(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(s!==o&&o&&o.ownerDocument&&Qr(o.ownerDocument.documentElement,o)){if(null!==l&&en(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(s=g,g=p,p=s);var y=Xr(o,p),v=Xr(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}rh=!!td,rd=td=null}finally{rc=a,P.p=n,L.T=r}}e.current=t,jc=2}}function au(){if(2===jc){jc=0;var e=Ec,t=Ac,r=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||r){r=L.T,L.T=null;var n=P.p;P.p=2;var a=rc;rc|=4;try{_l(e,t.alternate,t)}finally{rc=a,P.p=n,L.T=r}}jc=3}}function iu(){if(4===jc||3===jc){jc=0,ee();var e=Ec,t=Ac,r=kc,n=Tc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,Ac=Ec=null,su(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(_c=null),Ce(r),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==n){t=L.T,a=P.p,P.p=2,L.T=null;try{for(var i=e.onRecoverableError,s=0;s<n.length;s++){var o=n[s];i(o.value,{componentStack:o.stack})}}finally{L.T=t,P.p=a}}0!==(3&kc)&&ou(),Nu(e),a=e.pendingLanes,0!==(4194090&r)&&0!==(42&a)?e===Ic?Rc++:(Rc=0,Ic=e):Rc=0,Su(0,!1)}}function su(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,La(t)))}function ou(e){return nu(),au(),iu(),lu()}function lu(){if(5!==jc)return!1;var e=Ec,t=Cc;Cc=0;var r=Ce(kc),n=L.T,a=P.p;try{P.p=32>r?32:r,L.T=null,r=Oc,Oc=null;var i=Ec,o=kc;if(jc=0,Ac=Ec=null,kc=0,0!==(6&rc))throw Error(s(331));var l=rc;if(rc|=4,Xl(i.current),$l(i,i.current,o,r),rc=l,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{P.p=a,L.T=n,su(e,t)}}function cu(e,t,r){t=_n(r,t),null!==(e=ii(e,t=So(e.stateNode,t,2),2))&&(je(e,2),Nu(e))}function uu(e,t,r){if(3===e.tag)cu(e,e,r);else for(;null!==t;){if(3===t.tag){cu(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===_c||!_c.has(n))){e=_n(r,e),null!==(n=ii(t,r=_o(2),2))&&(jo(r,n,t,e),je(n,2),Nu(n));break}}t=t.return}}function du(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new tc;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(uc=!0,a.add(r),e=hu.bind(null,e,t,r),t.then(e,e))}function hu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,nc===e&&(ic&r)===r&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-wc?0===(2&rc)&&$c(e,0):pc|=r,yc===ic&&(yc=0)),Nu(e)}function fu(e,t){0===t&&(t=Se()),null!==(e=Tn(e,t))&&(je(e,t),Nu(e))}function mu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),fu(e,r)}function pu(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==n&&n.delete(t),fu(e,r)}var gu=null,yu=null,vu=!1,bu=!1,xu=!1,wu=0;function Nu(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),bu=!0,vu||(vu=!0,dd(function(){0!==(6&rc)?X(ne,_u):ju()}))}function Su(e,t){if(!xu&&bu){xu=!0;do{for(var r=!1,n=gu;null!==n;){if(!t)if(0!==e){var a=n.pendingLanes;if(0===a)var i=0;else{var s=n.suspendedLanes,o=n.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=a&~(s&~o))?201326741&i|1:i?2|i:0}0!==i&&(r=!0,ku(n,i))}else i=ic,0===(3&(i=be(n,n===nc?i:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||xe(n,i)||(r=!0,ku(n,i));n=n.next}}while(r);xu=!1}}function _u(){ju()}function ju(){bu=vu=!1;var e=0;0!==wu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=wu),wu=0);for(var t=te(),r=null,n=gu;null!==n;){var a=n.next,i=Eu(n,t);0===i?(n.next=null,null===r?gu=a:r.next=a,null===a&&(yu=r)):(r=n,(0!==e||0!==(3&i))&&(bu=!0)),n=a}Su(e,!1)}function Eu(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var s=31-fe(i),o=1<<s,l=a[s];-1===l?0!==(o&r)&&0===(o&n)||(a[s]=we(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(r=ic,r=be(e,e===(t=nc)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===sc||9===sc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&Q(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&r)||xe(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&Q(n),Ce(r)){case 2:case 8:r=ae;break;case 32:default:r=ie;break;case 268435456:r=oe}return n=Au.bind(null,e),r=X(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&Q(n),e.callbackPriority=2,e.callbackNode=null,2}function Au(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(ou()&&e.callbackNode!==r)return null;var n=ic;return 0===(n=be(e,e===nc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,n,t),Eu(e,te()),null!=e.callbackNode&&e.callbackNode===r?Au.bind(null,e):null)}function ku(e,t){if(ou())return null;Mc(e,t,!0)}function Cu(){return 0===wu&&(wu=Ne()),wu}function Ou(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ct(""+e)}function Tu(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Ru=0;Ru<wn.length;Ru++){var Iu=wn[Ru];Nn(Iu.toLowerCase(),"on"+(Iu[0].toUpperCase()+Iu.slice(1)))}Nn(fn,"onAnimationEnd"),Nn(mn,"onAnimationIteration"),Nn(pn,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(gn,"onTransitionRun"),Nn(yn,"onTransitionStart"),Nn(vn,"onTransitionCancel"),Nn(bn,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Du(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){yo(u)}a.currentTarget=null,i=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){yo(u)}a.currentTarget=null,i=l}}}}function Mu(e,t){var r=t[Pe];void 0===r&&(r=t[Pe]=new Set);var n=e+"__bubble";r.has(n)||(zu(t,e,2,!1),r.add(n))}function Fu(e,t,r){var n=0;t&&(n|=4),zu(r,e,n,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Bu]){e[Bu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Pu.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,Fu("selectionchange",!1,t))}}function zu(e,t,r,n){switch(ch(t)){case 2:var a=nh;break;case 8:a=ah;break;default:a=ih}r=a.bind(null,t,r,e),a=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Hu(e,t,r,n,a){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===a)break;if(4===s)for(s=n.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===a)return;s=s.return}for(;null!==o;){if(null===(s=ze(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){n=i=s;continue e}o=o.parentNode}}n=n.return}Dt(function(){var n=i,a=Tt(r),s=[];e:{var o=xn.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Gt(r))break e;case"keydown":case"keyup":c=mr;break;case"focusin":u="focus",c=ir;break;case"focusout":u="blur",c=ir;break;case"beforeblur":case"afterblur":c=ir;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=gr;break;case fn:case mn:case pn:c=sr;break;case bn:c=yr;break;case"scroll":case"scrollend":c=tr;break;case"wheel":c=vr;break;case"copy":case"cut":case"paste":c=or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=pr;break;case"toggle":case"beforetoggle":c=br}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=n;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Mt(p,f))&&d.push($u(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,r,a),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===Ot||!(u=r.relatedTarget||r.fromElement)||!ze(u)&&!u[Le])&&(c||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=n),c!==u)){if(d=nr,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=pr,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:$e(c),m=null==u?o:$e(u),(o=new d(g,p+"leave",c,r,a)).target=h,o.relatedTarget=m,g=null,ze(a)===n&&((d=new d(f,p+"enter",u,r,a)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,p=0,m=d=c;m;m=Gu(m))p++;for(m=0,g=f;g;g=Gu(g))m++;for(;0<p-m;)d=Gu(d),p--;for(;0<m-p;)f=Gu(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Wu(s,o,c,d,!1),null!==u&&null!==h&&Wu(s,h,u,d,!0)}if("select"===(c=(o=n?$e(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Mr;else if(Tr(o))if(Fr)y=Vr;else{y=Gr;var v=qr}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?n&&Et(n.elementType)&&(y=Mr):y=Wr;switch(y&&(y=y(e,n))?Rr(s,y,r,a):(v&&v(e,o,n),"focusout"===e&&n&&"number"===o.type&&null!=n.memoizedProps.value&&vt(o,"number",o.value)),v=n?$e(n):window,e){case"focusin":(Tr(v)||"true"===v.contentEditable)&&(rn=v,nn=n,an=null);break;case"focusout":an=nn=rn=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,on(s,r,a);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":on(s,r,a)}var b;if(wr)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Cr?Ar(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(_r&&"ko"!==r.locale&&(Cr||"onCompositionStart"!==x?"onCompositionEnd"===x&&Cr&&(b=qt()):(Ht="value"in(zt=a)?zt.value:zt.textContent,Cr=!0)),0<(v=qu(n,x)).length&&(x=new lr(x,e,null,r,a),s.push({event:x,listeners:v}),b?x.data=b:null!==(b=kr(r))&&(x.data=b))),(b=Sr?function(e,t){switch(e){case"compositionend":return kr(t);case"keypress":return 32!==t.which?null:(Er=!0,jr);case"textInput":return(e=t.data)===jr&&Er?null:e;default:return null}}(e,r):function(e,t){if(Cr)return"compositionend"===e||!wr&&Ar(e,t)?(e=qt(),$t=Ht=zt=null,Cr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _r&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(x=qu(n,"onBeforeInput")).length&&(v=new lr("onBeforeInput","beforeinput",null,r,a),s.push({event:v,listeners:x}),v.data=b)),function(e,t,r,n,a){if("submit"===t&&r&&r.stateNode===a){var i=Ou((a[Ie]||null).action),s=n.submitter;s&&null!==(t=(t=s[Ie]||null)?Ou(t.formAction):s.getAttribute("formAction"))&&(i=t,s=null);var o=new Zt("action","action",null,n,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==wu){var e=s?Tu(a,s):new FormData(a);Os(r,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=s?Tu(a,s):new FormData(a),Os(r,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(s,e,n,r,a)}Du(s,t)})}function $u(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qu(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=Mt(e,r))&&n.unshift($u(e,a,i)),null!=(a=Mt(e,t))&&n.push($u(e,a,i))),3===e.tag)return n;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wu(e,t,r,n,a){for(var i=t._reactName,s=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===n)break;5!==o&&26!==o&&27!==o||null===c||(l=c,a?null!=(c=Mt(r,i))&&s.unshift($u(r,c,l)):a||null!=(c=Mt(r,i))&&s.push($u(r,c,l))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Vu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Yu(e){return("string"===typeof e?e:""+e).replace(Vu,"\n").replace(Ku,"")}function Ju(e,t){return t=Yu(t),Yu(e)===t}function Xu(){}function Qu(e,t,r,n,a,i){switch(r){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||Nt(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&Nt(e,""+n);break;case"className":rt(e,"class",n);break;case"tabIndex":rt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,r,n);break;case"style":jt(e,n,i);break;case"data":if("object"!==t){rt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Ct(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===r?("input"!==t&&Qu(e,t,"name",a.name,a,null),Qu(e,t,"formEncType",a.formEncType,a,null),Qu(e,t,"formMethod",a.formMethod,a,null),Qu(e,t,"formTarget",a.formTarget,a,null)):(Qu(e,t,"encType",a.encType,a,null),Qu(e,t,"method",a.method,a,null),Qu(e,t,"target",a.target,a,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Ct(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Xu);break;case"onScroll":null!=n&&Mu("scroll",e);break;case"onScrollEnd":null!=n&&Mu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}r=Ct(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":Mu("beforetoggle",e),Mu("toggle",e),tt(e,"popover",n);break;case"xlinkActuate":nt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":nt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":nt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":nt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":nt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":nt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":nt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":nt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":nt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":tt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&tt(e,r=At.get(r)||r,n)}}function Zu(e,t,r,n,a,i){switch(r){case"style":jt(e,n,i);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(s(60));e.innerHTML=r}}break;case"children":"string"===typeof n?Nt(e,n):("number"===typeof n||"bigint"===typeof n)&&Nt(e,""+n);break;case"onScroll":null!=n&&Mu("scroll",e);break;case"onScrollEnd":null!=n&&Mu("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ve.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"===typeof(i=null!=(i=e[Ie]||null)?i[r]:null)&&e.removeEventListener(t,i,a),"function"!==typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):tt(e,r,n):("function"!==typeof i&&null!==i&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,a)))}}function ed(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mu("error",e),Mu("load",e);var n,a=!1,i=!1;for(n in r)if(r.hasOwnProperty(n)){var o=r[n];if(null!=o)switch(n){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Qu(e,t,n,o,r,null)}}return i&&Qu(e,t,"srcSet",r.srcSet,r,null),void(a&&Qu(e,t,"src",r.src,r,null));case"input":Mu("invalid",e);var l=n=o=i=null,c=null,u=null;for(a in r)if(r.hasOwnProperty(a)){var d=r[a];if(null!=d)switch(a){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":n=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Qu(e,t,a,d,r,null)}}return yt(e,n,l,c,u,o,i,!1),void dt(e);case"select":for(i in Mu("invalid",e),a=o=n=null,r)if(r.hasOwnProperty(i)&&null!=(l=r[i]))switch(i){case"value":n=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:Qu(e,t,i,l,r,null)}return t=n,r=o,e.multiple=!!a,void(null!=t?bt(e,!!a,t,!1):null!=r&&bt(e,!!a,r,!0));case"textarea":for(o in Mu("invalid",e),n=i=a=null,r)if(r.hasOwnProperty(o)&&null!=(l=r[o]))switch(o){case"value":a=l;break;case"defaultValue":i=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Qu(e,t,o,l,r,null)}return wt(e,a,i,n),void dt(e);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Qu(e,t,c,a,r,null);return;case"dialog":Mu("beforetoggle",e),Mu("toggle",e),Mu("cancel",e),Mu("close",e);break;case"iframe":case"object":Mu("load",e);break;case"video":case"audio":for(a=0;a<Lu.length;a++)Mu(Lu[a],e);break;case"image":Mu("error",e),Mu("load",e);break;case"details":Mu("toggle",e);break;case"embed":case"source":case"link":Mu("error",e),Mu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&null!=(a=r[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Qu(e,t,u,a,r,null)}return;default:if(Et(t)){for(d in r)r.hasOwnProperty(d)&&(void 0!==(a=r[d])&&Zu(e,t,d,a,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(null!=(a=r[l])&&Qu(e,t,l,a,r,null))}var td=null,rd=null;function nd(e){return 9===e.nodeType?e:e.ownerDocument}function ad(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function md(e,t){var r=t,n=0,a=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0<n&&8>n){r=n;var s=e.ownerDocument;if(1&r&&wd(s.documentElement),2&r&&wd(s.body),4&r)for(wd(r=s.head),s=r.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||r.removeChild(s),s=o}}if(0===a)return e.removeChild(i),void Ah(t);a--}else"$"===r||"$?"===r||"$!"===r?a++:n=r.charCodeAt(0)-48;else n=0;r=i}while(r);Ah(t)}function pd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":pd(r),Ue(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function xd(e,t,r){switch(t=nd(r),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var Nd=new Map,Sd=new Set;function _d(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var jd=P.d;P.d={f:function(){var e=jd.f(),t=zc();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Rs(t):jd.r(e)},D:function(e){jd.D(e),Ad("dns-prefetch",e,null)},C:function(e,t){jd.C(e,t),Ad("preconnect",e,t)},L:function(e,t,r){jd.L(e,t,r);var n=Ed;if(n&&e&&t){var a='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(a+='[imagesrcset="'+pt(r.imageSrcSet)+'"]',"string"===typeof r.imageSizes&&(a+='[imagesizes="'+pt(r.imageSizes)+'"]')):a+='[href="'+pt(e)+'"]';var i=a;switch(t){case"style":i=Cd(e);break;case"script":i=Rd(e)}Nd.has(i)||(e=h({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),Nd.set(i,e),null!==n.querySelector(a)||"style"===t&&n.querySelector(Od(i))||"script"===t&&n.querySelector(Id(i))||(ed(t=n.createElement("link"),"link",e),Ge(t),n.head.appendChild(t)))}},m:function(e,t){jd.m(e,t);var r=Ed;if(r&&e){var n=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+pt(n)+'"][href="'+pt(e)+'"]',i=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Rd(e)}if(!Nd.has(i)&&(e=h({rel:"modulepreload",href:e},t),Nd.set(i,e),null===r.querySelector(a))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Id(i)))return}ed(n=r.createElement("link"),"link",e),Ge(n),r.head.appendChild(n)}}},X:function(e,t){jd.X(e,t);var r=Ed;if(r&&e){var n=qe(r).hoistableScripts,a=Rd(e),i=n.get(a);i||((i=r.querySelector(Id(a)))||(e=h({src:e,async:!0},t),(t=Nd.get(a))&&Md(e,t),Ge(i=r.createElement("script")),ed(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}},S:function(e,t,r){jd.S(e,t,r);var n=Ed;if(n&&e){var a=qe(n).hoistableStyles,i=Cd(e);t=t||"default";var s=a.get(i);if(!s){var o={loading:0,preload:null};if(s=n.querySelector(Od(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Nd.get(i))&&Dd(e,r);var l=s=n.createElement("link");Ge(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Pd(s,t,n)}s={type:"stylesheet",instance:s,count:1,state:o},a.set(i,s)}}},M:function(e,t){jd.M(e,t);var r=Ed;if(r&&e){var n=qe(r).hoistableScripts,a=Rd(e),i=n.get(a);i||((i=r.querySelector(Id(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=Nd.get(a))&&Md(e,t),Ge(i=r.createElement("script")),ed(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}};var Ed="undefined"===typeof document?null:document;function Ad(e,t,r){var n=Ed;if(n&&"string"===typeof t&&t){var a=pt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof r&&(a+='[crossorigin="'+r+'"]'),Sd.has(a)||(Sd.add(a),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(a)&&(ed(t=n.createElement("link"),"link",e),Ge(t),n.head.appendChild(t)))}}function kd(e,t,r,n){var a,i,o,l,c=(c=q.current)?_d(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof r.precedence&&"string"===typeof r.href?(t=Cd(r.href),(n=(r=qe(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"===typeof r.href&&"string"===typeof r.precedence){e=Cd(r.href);var u=qe(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Od(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Nd.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Nd.set(e,r),u||(a=c,i=e,o=r,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ed(i,"link",o),Ge(i),a.head.appendChild(i))))),t&&null===n)throw Error(s(528,""));return d}if(t&&null!==n)throw Error(s(529,""));return null;case"script":return t=r.async,"string"===typeof(r=r.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(r),(n=(r=qe(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Cd(e){return'href="'+pt(e)+'"'}function Od(e){return'link[rel="stylesheet"]['+e+"]"}function Td(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+pt(e)+'"]'}function Id(e){return"script[async]"+e}function Ld(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+pt(r.href)+'"]');if(n)return t.instance=n,Ge(n),n;var a=h({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Ge(n=(e.ownerDocument||e).createElement("style")),ed(n,"style",a),Pd(n,r.precedence,e),t.instance=n;case"stylesheet":a=Cd(r.href);var i=e.querySelector(Od(a));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;n=Td(r),(a=Nd.get(a))&&Dd(n,a),Ge(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",n),t.state.loading|=4,Pd(i,r.precedence,e),t.instance=i;case"script":return i=Rd(r.src),(a=e.querySelector(Id(i)))?(t.instance=a,Ge(a),a):(n=r,(a=Nd.get(i))&&Md(n=h({},r),a),Ge(a=(e=e.ownerDocument||e).createElement("script")),ed(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Pd(n,r.precedence,e));return t.instance}function Pd(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,i=a,s=0;s<n.length;s++){var o=n[s];if(o.dataset.precedence===t)i=o;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function Bd(e,t,r){if(null===Fd){var n=new Map,a=Fd=new Map;a.set(r,n)}else(n=(a=Fd).get(r))||(n=new Map,a.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var i=r[a];if(!(i[Be]||i[Re]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var o=n.get(s);o?o.push(i):n.set(s,[i])}}return n}function Ud(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Hd=null;function $d(){}function qd(){if(this.count--,0===this.count)if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Wd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Vd,e),Gd=null,qd.call(e))}function Vd(e,t){if(!(4&t.state.loading)){var r=Gd.get(e);if(r)var n=r.get(null);else{r=new Map,Gd.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(r.set(s.dataset.precedence,s),n=s)}n&&r.set(null,n)}s=(a=t.instance).getAttribute("data-precedence"),(i=r.get(s)||n)===n&&r.set(null,a),r.set(s,a),this.count++,n=qd.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Kd={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Yd(e,t,r,n,a,i,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jd(e,t,r,n,a,i,s,o,l,c,u,d){return e=new Yd(e,t,r,s,o,l,c,d),t=1,!0===i&&(t|=24),i=Dn(3,null,null,t),e.current=i,i.stateNode=e,(t=Ia()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:r,cache:t},ri(i),e}function Xd(e){return e?e=Ln:Ln}function Qd(e,t,r,n,a,i){a=Xd(a),null===n.context?n.context=a:n.pendingContext=a,(n=ai(t)).payload={element:r},null!==(i=void 0===i?null:i)&&(n.callback=i),null!==(r=ii(e,n,t))&&(Dc(r,0,t),si(r,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Tn(e,67108864);null!==t&&Dc(t,0,67108864),eh(e,67108864)}}var rh=!0;function nh(e,t,r,n){var a=L.T;L.T=null;var i=P.p;try{P.p=2,ih(e,t,r,n)}finally{P.p=i,L.T=a}}function ah(e,t,r,n){var a=L.T;L.T=null;var i=P.p;try{P.p=8,ih(e,t,r,n)}finally{P.p=i,L.T=a}}function ih(e,t,r,n){if(rh){var a=sh(n);if(null===a)Hu(e,t,n,oh,r),vh(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return dh=bh(dh,e,t,r,n,a),!0;case"dragenter":return hh=bh(hh,e,t,r,n,a),!0;case"mouseover":return fh=bh(fh,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return mh.set(i,bh(mh.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ph.set(i,bh(ph.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(vh(e,n),4&t&&-1<yh.indexOf(e)){for(;null!==a;){var i=He(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=ve(i.pendingLanes);if(0!==s){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-fe(s);o.entanglements[1]|=l,s&=~l}Nu(i),0===(6&rc)&&(Nc=te()+500,Su(0,!1))}}break;case 13:null!==(o=Tn(i,2))&&Dc(o,0,2),zc(),eh(i,2)}if(null===(i=sh(n))&&Hu(e,t,n,oh,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else Hu(e,t,n,null,r)}}function sh(e){return lh(e=Tt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=c(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ne:return 2;case ae:return 8;case ie:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,mh=new Map,ph=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(t.pointerId)}}function bh(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=He(t))&&th(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function xh(e){var t=ze(e.target);if(null!==t){var r=l(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=c(r)))return e.blockedOn=t,void function(e,t){var r=P.p;try{return P.p=e,t()}finally{P.p=r}}(e.priority,function(){if(13===r.tag){var e=Lc();e=ke(e);var t=Tn(r,e);null!==t&&Dc(t,0,e),eh(r,e)}})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=sh(e.nativeEvent);if(null!==r)return null!==(t=He(r))&&th(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Ot=n,r.target.dispatchEvent(n),Ot=null,t.shift()}return!0}function Nh(e,t,r){wh(e)&&r.delete(t)}function Sh(){uh=!1,null!==dh&&wh(dh)&&(dh=null),null!==hh&&wh(hh)&&(hh=null),null!==fh&&wh(fh)&&(fh=null),mh.forEach(Nh),ph.forEach(Nh)}function _h(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Sh)))}var jh=null;function Eh(e){jh!==e&&(jh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){jh===e&&(jh=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],a=e[t+2];if("function"!==typeof n){if(null===lh(n||r))continue;break}var i=He(r);null!==i&&(e.splice(t,3),t-=3,Os(i,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function Ah(e){function t(t){return _h(t,e)}null!==dh&&_h(dh,e),null!==hh&&_h(hh,e),null!==fh&&_h(fh,e),mh.forEach(t),ph.forEach(t);for(var r=0;r<gh.length;r++){var n=gh[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<gh.length&&null===(r=gh[0]).blockedOn;)xh(r),null===r.blockedOn&&gh.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var a=r[n],i=r[n+1],s=a[Ie]||null;if("function"===typeof i)s||Eh(r);else if(s){var o=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[Ie]||null)o=s.formAction;else if(null!==lh(a))continue}else o=s.action;"function"===typeof o?r[n+1]=o:(r.splice(n,3),n-=3),Eh(r)}}}function kh(e){this._internalRoot=e}function Ch(e){this._internalRoot=e}Ch.prototype.render=kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Qd(t.current,Lc(),e,t,null,null)},Ch.prototype.unmount=kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Qd(e.current,2,null,e,null,null),zc(),t[Le]=null}},Ch.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var r=0;r<gh.length&&0!==t&&t<gh[r].priority;r++);gh.splice(r,0,e),0===r&&xh(e)}};var Oh=a.version;if("19.1.1"!==Oh)throw Error(s(527,Oh,"19.1.1"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return u(a),e;if(i===n)return u(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,n=i;break}if(c===n){o=!0,n=a,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,n=a;break}if(c===n){o=!0,n=i,r=a;break}c=c.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Th={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Th),de=Rh}catch(Lh){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var r=!1,n="",a=vo,i=bo,l=xo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,r,n,a,i,l,0,null),e[Le]=t.current,Uu(e),new kh(t)},t.hydrateRoot=function(e,t,r){if(!o(e))throw Error(s(299));var n=!1,a="",i=vo,l=bo,c=xo,u=null;return null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onUncaughtError&&(i=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(u=r.formState)),(t=Jd(e,1,!0,t,0,n,a,i,l,c,0,u)).context=Xd(null),r=t.current,(a=ai(n=ke(n=Lc()))).callback=null,ii(r,a,n),r=n,t.current.lanes=r,je(t,r),Nu(t),e[Le]=t.current,Uu(e),new Ch(t)},t.version="19.1.1"},7043:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2777),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!n.isSymbol(e))||("string"===typeof e&&(i.test(e)||!a.test(e))||null!=t&&Object.hasOwn(t,e)))}},7231:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3799),a=r(4879);t.range=function(e,t,r){r&&"number"!==typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=a.toFinite(e),void 0===t?(t=e,e=0):t=a.toFinite(t),r=void 0===r?e<t?1:-1:a.toFinite(r);const i=Math.max(Math.ceil((t-e)/(r||1)),0),s=new Array(i);for(let n=0;n<i;n++)s[n]=e,e+=r;return s}},7237:(e,t,r)=>{"use strict";r(8365)},7260:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7312:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=[],n=Math.floor(t),a=(e,t)=>{for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)&&t<n?a(s,t+1):r.push(s)}};return a(e,0),r}},7330:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9323);t.property=function(e){return function(t){return n.get(t,e)}}},7374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6326).__importDefault(r(9286));class a extends n.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=a?`${a}.order`:"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof n?"offset":`${n}.offset`,i="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.get("Accept"))&&void 0!==s?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}t.default=a},7599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7770:(e,t,r)=>{e.exports=r(9323).get},7820:(e,t,r)=>{e.exports=r(5414).throttle},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(6672)},7980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const n=r(6326),a=n.__importDefault(r(1210));t.PostgrestClient=a.default;const i=n.__importDefault(r(8829));t.PostgrestQueryBuilder=i.default;const s=n.__importDefault(r(5736));t.PostgrestFilterBuilder=s.default;const o=n.__importDefault(r(7374));t.PostgrestTransformBuilder=o.default;const l=n.__importDefault(r(9286));t.PostgrestBuilder=l.default;const c=n.__importDefault(r(2611));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},8182:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9330),a=r(4737);t.isEqual=function(e,t){return n.isEqualWith(e,t,a.noop)}},8210:function(e,t,r){var n;!function(){"use strict";var a,i=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,p=9007199254740991,g=d(1286742750677284.5),y={};function v(e,t){var r,n,a,i,s,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?k(t,h):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=s,l=c.length),i>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((l=c.length)-(i=u.length)<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/m|0,c[i]%=m;for(r&&(c.unshift(r),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?k(t,h):t}function b(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function x(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(i+=j(r)),i+=n;(r=7-(n=(s=e[t])+"").length)&&(i+=j(r))}else if(0===s)return"0";for(;s%10===0;)s/=10;return i+s}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,r=(n=i.d.length)<(a=e.d.length)?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return k(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return S(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(a))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(a)?new n(0):(o=!1,t=w(E(r,s),E(e,s),s),o=!0,k(t,i))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?C(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(o=!1,t=w(r,e,0,1).times(e),o=!0,r.minus(t)):k(new n(r),a)},y.naturalExponential=y.exp=function(){return N(this)},y.naturalLogarithm=y.ln=function(){return E(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):C(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=S(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},y.squareRoot=y.sqrt=function(){var e,t,r,n,a,i,s,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=S(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=x(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),n=new u(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new u(a.toString()),a=s=(r=u.precision)+3;;)if(n=(i=n).plus(w(c,i,s+2)).times(.5),x(i.d).slice(0,s)===(t=x(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&"4999"==t){if(k(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if("9999"!=t)break;s+=4}return o=!0,k(n,r)},y.times=y.mul=function(e){var t,r,n,a,i,s,l,c,u,d=this,h=d.constructor,f=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,(c=f.length)<(u=p.length)&&(i=f,f=p,p=i,s=c,c=u,u=s),i=[],n=s=c+u;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+p[n]*f[a-n-1]+t,i[a--]=l%m|0,t=l/m|0;i[a]=(i[a]+t)%m|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,o?k(e,h.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(b(e,0,i),void 0===t?t=n.rounding:b(t,0,8),k(r,e+S(r)+1,t))},y.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=O(n,!0):(b(e,0,i),void 0===t?t=a.rounding:b(t,0,8),r=O(n=k(new a(n),e+1,t),!0,e+1)),r},y.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?O(a):(b(e,0,i),void 0===t?t=s.rounding:b(t,0,8),r=O((n=k(new s(a),e+S(a)+1,t)).abs(),!1,e+S(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return k(new t(e),S(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,r,n,i,s,c,u=this,h=u.constructor,f=+(e=new h(e));if(!e.s)return new h(a);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(a))return u;if(n=h.precision,e.eq(a))return k(u,n);if(c=(t=e.e)>=(r=e.d.length-1),s=u.s,c){if((r=f<0?-f:f)<=p){for(i=new h(a),t=Math.ceil(n/7+4),o=!1;r%2&&T((i=i.times(u)).d,t),0!==(r=d(r/2));)T((u=u.times(u)).d,t);return o=!0,e.s<0?new h(a).div(i):k(i,n)}}else if(s<0)throw Error(l+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,u.s=1,o=!1,i=e.times(E(u,n+12)),o=!0,(i=N(i)).s=s,i},y.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return void 0===e?n=O(a,(r=S(a))<=s.toExpNeg||r>=s.toExpPos):(b(e,1,i),void 0===t?t=s.rounding:b(t,0,8),n=O(a=k(new s(a),e,t),e<=(r=S(a))||r<=s.toExpNeg,e)),n},y.toSignificantDigits=y.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(b(e,1,i),void 0===t?t=r.rounding:b(t,0,8)),k(new r(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=S(e),r=e.constructor;return O(e,t<=r.toExpNeg||t>=r.toExpPos)};var w=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%m|0,n=r/m|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,i;if(r!=n)i=r>n?1:-1;else for(a=i=0;a<r;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*m+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,i,s){var o,c,u,d,h,f,p,g,y,v,b,x,w,N,_,j,E,A,C=n.constructor,O=n.s==a.s?1:-1,T=n.d,R=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(l+"Division by zero");for(c=n.e-a.e,E=R.length,_=T.length,g=(p=new C(O)).d=[],u=0;R[u]==(T[u]||0);)++u;if(R[u]>(T[u]||0)&&--c,(x=null==i?i=C.precision:s?i+(S(n)-S(a))+1:i)<0)return new C(0);if(x=x/7+2|0,u=0,1==E)for(d=0,R=R[0],x++;(u<_||d)&&x--;u++)w=d*m+(T[u]||0),g[u]=w/R|0,d=w%R|0;else{for((d=m/(R[0]+1)|0)>1&&(R=e(R,d),T=e(T,d),E=R.length,_=T.length),N=E,v=(y=T.slice(0,E)).length;v<E;)y[v++]=0;(A=R.slice()).unshift(0),j=R[0],R[1]>=m/2&&++j;do{d=0,(o=t(R,y,E,v))<0?(b=y[0],E!=v&&(b=b*m+(y[1]||0)),(d=b/j|0)>1?(d>=m&&(d=m-1),1==(o=t(h=e(R,d),y,f=h.length,v=y.length))&&(d--,r(h,E<f?A:R,f))):(0==d&&(o=d=1),h=R.slice()),(f=h.length)<v&&h.unshift(0),r(y,h,v),-1==o&&(o=t(R,y,E,v=y.length))<1&&(d++,r(y,E<v?A:R,v)),v=y.length):0===o&&(d++,y=[0]),g[u++]=d,o&&y[0]?y[v++]=T[N]||0:(y=[T[N]],v=1)}while((N++<_||void 0!==y[0])&&x--)}return g[0]||g.shift(),p.e=c,k(p,s?i+S(p)+1:i)}}();function N(e,t){var r,n,i,s,l,c=0,d=0,f=e.constructor,m=f.precision;if(S(e)>16)throw Error(u+S(e));if(!e.s)return new f(a);for(null==t?(o=!1,l=m):l=t,s=new f(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,r=n=i=new f(a),f.precision=l;;){if(n=k(n.times(e),l),r=r.times(++c),x((s=i.plus(w(n,r,l))).d).slice(0,l)===x(i.d).slice(0,l)){for(;d--;)i=k(i.times(i),l);return f.precision=m,null==t?(o=!0,k(i,m)):i}i=s}}function S(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function _(e,t,r){if(t>e.LN10.sd())throw o=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return k(new e(e.LN10),t)}function j(e){for(var t="";e--;)t+="0";return t}function E(e,t){var r,n,i,s,c,u,d,h,f,m=1,p=e,g=p.d,y=p.constructor,v=y.precision;if(p.s<1)throw Error(l+(p.s?"NaN":"-Infinity"));if(p.eq(a))return new y(0);if(null==t?(o=!1,h=v):h=t,p.eq(10))return null==t&&(o=!0),_(y,h);if(h+=10,y.precision=h,n=(r=x(g)).charAt(0),s=S(p),!(Math.abs(s)<15e14))return d=_(y,h+2,v).times(s+""),p=E(new y(n+"."+r.slice(1)),h-10).plus(d),y.precision=v,null==t?(o=!0,k(p,v)):p;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=x((p=p.times(e)).d)).charAt(0),m++;for(s=S(p),n>1?(p=new y("0."+r),s++):p=new y(n+"."+r.slice(1)),u=c=p=w(p.minus(a),p.plus(a),h),f=k(p.times(p),h),i=3;;){if(c=k(c.times(f),h),x((d=u.plus(w(c,new y(i),h))).d).slice(0,h)===x(u.d).slice(0,h))return u=u.times(2),0!==s&&(u=u.plus(_(y,h+2,v).times(s+""))),u=w(u,new y(m),h),y.precision=v,null==t?(o=!0,k(u,v)):u;u=d,i+=2}}function A(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=d(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(u+r)}else e.s=0,e.e=0,e.d=[0];return e}function k(e,t,r){var n,a,i,s,l,c,f,p,y=e.d;for(s=1,i=y[0];i>=10;i/=10)s++;if((n=t-s)<0)n+=7,a=t,f=y[p=0];else{if((p=Math.ceil((n+1)/7))>=(i=y.length))return e;for(f=i=y[p],s=1;i>=10;i/=10)s++;a=(n%=7)-7+s}if(void 0!==r&&(l=f/(i=h(10,s-a-1))%10|0,c=t<0||void 0!==y[p+1]||f%i,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?a>0?f/h(10,s-a):0:y[p-1])%10&1||r==(e.s<0?8:7))),t<1||!y[0])return c?(i=S(e),y.length=1,t=t-i-1,y[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==n?(y.length=p,i=1,p--):(y.length=p+1,i=h(10,7-n),y[p]=a>0?(f/h(10,s-a)%h(10,a)|0)*i:0),c)for(;;){if(0==p){(y[0]+=i)==m&&(y[0]=1,++e.e);break}if(y[p]+=i,y[p]!=m)break;y[p--]=0,i=1}for(n=y.length;0===y[--n];)y.pop();if(o&&(e.e>g||e.e<-g))throw Error(u+S(e));return e}function C(e,t){var r,n,a,i,s,l,c,u,d,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),o?k(t,p):t;if(c=e.d,h=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n){for((d=s<0)?(r=c,s=-s,l=h.length):(r=h,n=u,l=c.length),s>(a=Math.max(Math.ceil(p/7),l)+2)&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for((d=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}s=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>s;){if(c[--a]<h[a]){for(i=a;i&&0===c[--i];)c[i]=m-1;--c[i],c[a]+=m}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,o?k(t,p):t):new f(0)}function O(e,t,r){var n,a=S(e),i=x(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+j(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+j(-a-1)+i,r&&(n=r-s)>0&&(i+=j(n))):a>=s?(i+=j(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+j(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=j(n))),e.s<0?"-"+i:i}function T(e,t){if(e.length>t)return e.length=t,!0}function R(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,r,n,a=["precision",1,i,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(d(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}s=function e(t){var r,n,a;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):A(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);A(t,e)}if(i.prototype=y,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=R,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return i.config(t),i}(s),s.default=s.Decimal=s,a=new s(1),void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},8268:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2132);t.isMatch=function(e,t){return n.isMatchWith(e,t,()=>{})}},8346:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365:(e,t,r)=>{"use strict";var n=r(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=n.useSyncExternalStore,s=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue},8396:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5508);t.cloneDeep=function(e){return n.cloneDeepWith(e)}},8420:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443:(e,t,r)=>{"use strict";e.exports=r(9717)},8499:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new a(n,i||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,s=new Array(i);a<i;a++)s[a]=n[a].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,i,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,a),!0;case 5:return u.fn.call(u.context,t,n,a,i),!0;case 6:return u.fn.call(u.context,t,n,a,i,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||s(this,i);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},8829:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6326).__importDefault(r(5736));t.default=class{constructor(e,t){let{headers:r={},schema:n,fetch:a}=t;this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e,t){const{head:r=!1,count:a}=null!==t&&void 0!==t?t:{},i=r?"HEAD":"GET";let s=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",o),a&&this.headers.append("Prefer",`count=${a}`),new n.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer",`count=${t}`),new n.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer",`count=${e}`),new n.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},8845:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8268),a=r(3272),i=r(8396),s=r(9323),o=r(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=a.toKey(e)}return t=i.cloneDeep(t),function(r){const a=s.get(r,e);return void 0===a?o.has(r,e):void 0===t?void 0===a:n.isMatch(a,t)}}},8853:(e,t,r)=>{"use strict";e.exports=r(5896)},9286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6326).__importDefault(r(2611));t.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,a,i;let s=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),i=null===(a=e.headers.get("content-range"))||void 0===a?void 0:a.split("/");n&&i&&i.length>1&&(l=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(o=[],s=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(i=null===s||void 0===s?void 0:s.details)||void 0===i?void 0:i.includes("0 rows"))&&(s=null,c=200,u="OK"),s&&this.shouldThrowOnError)throw new n.default(s)}return{error:s,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n,a,i,s;let o="";const l=null===e||void 0===e?void 0:e.cause;if(l){const i=null!==(t=null===l||void 0===l?void 0:l.message)&&void 0!==t?t:"",s=null!==(r=null===l||void 0===l?void 0:l.code)&&void 0!==r?r:"";o=`${null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,o+=`\n\nCaused by: ${null!==(a=null===l||void 0===l?void 0:l.name)&&void 0!==a?a:"Error"}: ${i}`,s&&(o+=` (${s})`),(null===l||void 0===l?void 0:l.stack)&&(o+=`\n${l.stack}`)}else o=null!==(i=null===e||void 0===e?void 0:e.stack)&&void 0!==i?i:"";return{error:{message:`${null!==(s=null===e||void 0===e?void 0:e.name)&&void 0!==s?s:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},9323:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7260),a=r(2489),i=r(3272),s=r(1444);t.get=function e(t,r,o){if(null==t)return o;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return o;const i=t[r];return void 0===i?a.isDeepKey(r)?e(t,s.toPath(r),o):o:i}case"number":case"symbol":{"number"===typeof r&&(r=i.toKey(r));const e=t[r];return void 0===e?o:e}default:{if(Array.isArray(r))return function(e,t,r){if(0===t.length)return r;let a=e;for(let i=0;i<t.length;i++){if(null==a)return r;if(n.isUnsafeProperty(t[i]))return r;a=a[t[i]]}if(void 0===a)return r;return a}(t,r,o);if(r=Object.is(r?.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return o;const e=t[r];return void 0===e?o:e}}}},9330:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4385),a=r(6443),i=r(5990),s=r(7599),o=r(9972);function l(e,t,r,n,a,i,s){const o=s(e,t,r,n,a,i);if(void 0!==o)return o;if(typeof e===typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return c(e,t,i,s)}return c(e,t,i,s)}function c(e,t,r,u){if(Object.is(e,t))return!0;let d=i.getTag(e),h=i.getTag(t);if(d===s.argumentsTag&&(d=s.objectTag),h===s.argumentsTag&&(h=s.objectTag),d!==h)return!1;switch(d){case s.stringTag:return e.toString()===t.toString();case s.numberTag:{const r=e.valueOf(),n=t.valueOf();return o.eq(r,n)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(e.valueOf(),t.valueOf());case s.regexpTag:return e.source===t.source&&e.flags===t.flags;case s.functionTag:return e===t}const f=(r=r??new Map).get(e),m=r.get(t);if(null!=f&&null!=m)return f===t;r.set(e,t),r.set(t,e);try{switch(d){case s.mapTag:if(e.size!==t.size)return!1;for(const[n,a]of e.entries())if(!t.has(n)||!l(a,t.get(n),n,e,t,r,u))return!1;return!0;case s.setTag:{if(e.size!==t.size)return!1;const n=Array.from(e.values()),a=Array.from(t.values());for(let i=0;i<n.length;i++){const s=n[i],o=a.findIndex(n=>l(s,n,void 0,e,t,r,u));if(-1===o)return!1;a.splice(o,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:if("undefined"!==typeof Buffer&&Buffer.isBuffer(e)!==Buffer.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!l(e[n],t[n],n,e,t,r,u))return!1;return!0;case s.arrayBufferTag:return e.byteLength===t.byteLength&&c(new Uint8Array(e),new Uint8Array(t),r,u);case s.dataViewTag:return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&c(new Uint8Array(e),new Uint8Array(t),r,u);case s.errorTag:return e.name===t.name&&e.message===t.message;case s.objectTag:{if(!(c(e.constructor,t.constructor,r,u)||n.isPlainObject(e)&&n.isPlainObject(t)))return!1;const i=[...Object.keys(e),...a.getSymbols(e)],s=[...Object.keys(t),...a.getSymbols(t)];if(i.length!==s.length)return!1;for(let n=0;n<i.length;n++){const a=i[n],s=e[a];if(!Object.hasOwn(t,a))return!1;if(!l(s,t[a],a,e,t,r,u))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}t.isEqualWith=function(e,t,r){return l(e,t,void 0,void 0,void 0,void 0,r)}},9397:(e,t,r)=>{e.exports=r(2682).isPlainObject},9461:(e,t,r)=>{"use strict";e.exports=r(2330)},9599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6392),a=r(8346),i=r(1203);t.last=function(e){if(i.isArrayLike(e))return n.last(a.toArray(e))}},9709:(e,t)=>{"use strict";function r(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,n)=>{if(e!==t){const a=r(e),i=r(t);if(a===i&&0===a){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?i-a:a-i}return 0}},9717:(e,t,r)=>{"use strict";var n=r(5043),a=r(9461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=a.useSyncExternalStore,o=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(s=e,t):(s=e,o=r)}var s,o,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,a]);var f=s(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},9859:(e,t,r)=>{e.exports=r(7231).range},9921:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>n[e]);return s.default=()=>n,r.d(i,s),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+"."+{239:"e147a5f2",453:"7293675b",732:"3cc85495",977:"b433902d"}[e]+".chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="idk:";r.l=(n,a,i,s)=>{if(e[n])e[n].push(a);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+i),o.src=n),e[n]=[a];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(f);var a=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(r)),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/aml/",(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise((r,n)=>a=e[t]=[r,n]);n.push(a[2]=i);var s=r.p+r.u(t),o=new Error;r.l(s,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,i,s=n[0],o=n[1],l=n[2],c=0;if(s.some(t=>0!==e[t])){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(l)l(r)}for(t&&t(n);c<s.length;c++)i=s[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkidk=self.webpackChunkidk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{scaleBand:()=>Ho,scaleDiverging:()=>Dh,scaleDivergingLog:()=>Mh,scaleDivergingPow:()=>Bh,scaleDivergingSqrt:()=>Uh,scaleDivergingSymlog:()=>Fh,scaleIdentity:()=>Oc,scaleImplicit:()=>Uo,scaleLinear:()=>Cc,scaleLog:()=>Bc,scaleOrdinal:()=>zo,scalePoint:()=>qo,scalePow:()=>Kc,scaleQuantile:()=>su,scaleQuantize:()=>ou,scaleRadial:()=>Xc,scaleSequential:()=>Ch,scaleSequentialLog:()=>Oh,scaleSequentialPow:()=>Rh,scaleSequentialQuantile:()=>Lh,scaleSequentialSqrt:()=>Ih,scaleSequentialSymlog:()=>Th,scaleSqrt:()=>Yc,scaleSymlog:()=>$c,scaleThreshold:()=>lu,scaleTime:()=>jh,scaleUtc:()=>Eh,tickFormat:()=>Ac});var t=r(5043),n=r(4391),a="popstate";function i(){return h(function(e,t){let{pathname:r="/",search:n="",hash:a=""}=d(e.location.hash.substring(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),c("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"===typeof t?t:u(t))},function(e,t){o("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function o(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?d(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function u(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function d(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function h(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,u="POP",d=null,h=m();function m(){return(o.state||{idx:null}).idx}function p(){u="POP";let e=m(),t=null==e?null:e-h;h=e,d&&d({action:u,location:y.location,delta:t})}function g(e){return f(e)}null==h&&(h=0,o.replaceState({...o.state,idx:h},""));let y={get action(){return u},get location(){return e(i,o)},listen(e){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(a,p),d=e,()=>{i.removeEventListener(a,p),d=null}},createHref:e=>t(i,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u="PUSH";let n=c(y.location,e,t);r&&r(n,e),h=m()+1;let a=l(n,h),f=y.createHref(n);try{o.pushState(a,"",f)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(f)}s&&d&&d({action:u,location:y.location,delta:1})},replace:function(e,t){u="REPLACE";let n=c(y.location,e,t);r&&r(n,e),h=m();let a=l(n,h),i=y.createHref(n);o.replaceState(a,"",i),s&&d&&d({action:u,location:y.location,delta:0})},go:e=>o.go(e)};return y}function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),s(r,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}new WeakMap;function m(e,t){return p(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function p(e,t,r,n){let a=O(("string"===typeof t?d(t):t).pathname||"/",r);if(null==a)return null;let i=g(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=C(a);s=E(i[o],e,n)}return s}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=(e,a,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(s(o.relativePath.startsWith(n),`Absolute route path "${o.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(n.length));let l=P([n,o.relativePath]),c=r.concat(o);e.children&&e.children.length>0&&(s(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:j(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of y(e.path))a(e,t,r);else a(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return a?[i,""]:[i];let s=y(n.join("/")),o=[];return o.push(...s.map(e=>""===e?i:[i,e].join("/"))),a&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var v=/^:[\w-]+$/,b=3,x=2,w=1,N=10,S=-2,_=e=>"*"===e;function j(e,t){let r=e.split("/"),n=r.length;return r.some(_)&&(n+=S),t&&(n+=x),r.filter(e=>!_(e)).reduce((e,t)=>e+(v.test(t)?b:""===t?w:N),n)}function E(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),s.push({params:a,pathname:P([i,u.pathname]),pathnameBase:D(P([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=P([i,u.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=k(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:i,pathnameBase:s,pattern:e}}function k(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];o("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function C(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return o(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function T(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function R(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function I(e){let t=R(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function L(e,t,r){let n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=d(e):(n={...e},s(!n.pathname||!n.pathname.includes("?"),T("?","pathname","search",n)),s(!n.pathname||!n.pathname.includes("#"),T("#","pathname","hash",n)),s(!n.search||!n.search.includes("#"),T("#","search","hash",n)));let i,o=""===e||""===n.pathname,l=o?"/":n.pathname;if(null==l)i=r;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:n="",hash:a=""}="string"===typeof e?d(e):e,i=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:i,search:M(n),hash:F(a)}}(n,i),u=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var P=e=>e.join("/").replace(/\/\/+/g,"/"),D=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var U=["POST","PUT","PATCH","DELETE"],z=(new Set(U),["GET",...U]);new Set(z),Symbol("ResetLoaderData");var H=t.createContext(null);H.displayName="DataRouter";var $=t.createContext(null);$.displayName="DataRouterState";var q=t.createContext(!1);var G=t.createContext({isTransitioning:!1});G.displayName="ViewTransition";var W=t.createContext(new Map);W.displayName="Fetchers";var V=t.createContext(null);V.displayName="Await";var K=t.createContext(null);K.displayName="Navigation";var Y=t.createContext(null);Y.displayName="Location";var J=t.createContext({outlet:null,matches:[],isDataRoute:!1});J.displayName="Route";var X=t.createContext(null);X.displayName="RouteError";function Q(){return null!=t.useContext(Y)}function Z(){return s(Q(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(Y).location}var ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function te(e){t.useContext(K).static||t.useLayoutEffect(e)}function re(){let{isDataRoute:e}=t.useContext(J);return e?function(){let{router:e}=he("useNavigate"),r=me("useNavigate"),n=t.useRef(!1);te(()=>{n.current=!0});let a=t.useCallback(async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(n.current,ee),n.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,{fromRouteId:r,...a}))},[e,r]);return a}():function(){s(Q(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(H),{basename:r,navigator:n}=t.useContext(K),{matches:a}=t.useContext(J),{pathname:i}=Z(),l=JSON.stringify(I(a)),c=t.useRef(!1);te(()=>{c.current=!0});let u=t.useCallback(function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(c.current,ee),!c.current)return;if("number"===typeof t)return void n.go(t);let s=L(t,JSON.parse(l),i,"path"===a.relative);null==e&&"/"!==r&&(s.pathname="/"===s.pathname?r:P([r,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[r,n,l,i,e]);return u}()}t.createContext(null);function ne(){let{matches:e}=t.useContext(J),r=e[e.length-1];return r?r.params:{}}function ae(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=t.useContext(J),{pathname:a}=Z(),i=JSON.stringify(I(n));return t.useMemo(()=>L(e,JSON.parse(i),a,"path"===r),[e,i,a,r])}function ie(e,r,n,a){s(Q(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=t.useContext(K),{matches:l}=t.useContext(J),c=l[l.length-1],u=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";ye(h,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let g,y=Z();if(r){let e="string"===typeof r?d(r):r;s("/"===f||e.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${e.pathname}" was given in the \`location\` prop.`),g=e}else g=y;let v=g.pathname||"/",b=v;if("/"!==f){let e=f.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=m(e,{pathname:b});o(p||null!=x,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),o(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=ue(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:P([f,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?f:P([f,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,a);return r&&w?t.createElement(Y.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function se(){let e=pe(),r=B(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:s},"ErrorBoundary")," or"," ",t.createElement("code",{style:s},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:i},n):null,o)}var oe=t.createElement(se,null),le=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(J.Provider,{value:this.props.routeContext},t.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ce(e){let{routeContext:r,match:n,children:a}=e,i=t.useContext(H);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(J.Provider,{value:r},a)}function ue(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==r.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,i=n?.errors;if(null!=i){let e=a.findIndex(e=>e.route.id&&void 0!==i?.[e.route.id]);s(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,e+1))}let o=!1,l=-1;if(n)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){o=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}return a.reduceRight((e,s,c)=>{let u,d=!1,h=null,f=null;n&&(u=i&&s.route.id?i[s.route.id]:void 0,h=s.route.errorElement||oe,o&&(l<0&&0===c?(ye("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===c&&(d=!0,f=s.route.hydrateFallbackElement||null)));let m=r.concat(a.slice(0,c+1)),p=()=>{let r;return r=u?h:d?f:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(ce,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:r})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===c)?t.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}function de(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function he(e){let r=t.useContext(H);return s(r,de(e)),r}function fe(e){let r=t.useContext($);return s(r,de(e)),r}function me(e){let r=function(e){let r=t.useContext(J);return s(r,de(e)),r}(e),n=r.matches[r.matches.length-1];return s(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function pe(){let e=t.useContext(X),r=fe("useRouteError"),n=me("useRouteError");return void 0!==e?e:r.errors?.[n]}var ge={};function ye(e,t,r){t||ge[e]||(ge[e]=!0,o(!1,r))}var ve={};function be(e,t){e||ve[t]||(ve[t]=!0,console.warn(t))}t.memo(function(e){let{routes:t,future:r,state:n}=e;return ie(t,void 0,n,r)});function xe(e){s(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function we(e){let{basename:r="/",children:n=null,location:a,navigationType:i="POP",navigator:l,static:c=!1}=e;s(!Q(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);"string"===typeof a&&(a=d(a));let{pathname:f="/",search:m="",hash:p="",state:g=null,key:y="default"}=a,v=t.useMemo(()=>{let e=O(f,u);return null==e?null:{location:{pathname:e,search:m,hash:p,state:g,key:y},navigationType:i}},[u,f,m,p,g,y,i]);return o(null!=v,`<Router basename="${u}"> is not able to match the URL "${f}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:t.createElement(K.Provider,{value:h},t.createElement(Y.Provider,{children:n,value:v}))}function Ne(e){let{children:t,location:r}=e;return ie(Se(t),r)}t.Component;function Se(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.Children.forEach(e,(e,a)=>{if(!t.isValidElement(e))return;let i=[...r,a];if(e.type===t.Fragment)return void n.push.apply(n,Se(e.props.children,i));s(e.type===xe,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),s(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Se(e.props.children,i)),n.push(o)}),n}var _e="get",je="application/x-www-form-urlencoded";function Ee(e){return null!=e&&"string"===typeof e.tagName}var Ae=null;var ke=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ce(e){return null==e||ke.has(e)?e:(o(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${je}"`),null)}function Oe(e,t){let r,n,a,i,s;if(function(e){return Ee(e)&&"form"===e.tagName.toLowerCase()}(e)){let s=e.getAttribute("action");n=s?O(s,t):null,r=e.getAttribute("method")||_e,a=Ce(e.getAttribute("enctype"))||je,i=new FormData(e)}else if(function(e){return Ee(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ee(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(n=o?O(o,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||_e,a=Ce(e.getAttribute("formenctype"))||Ce(s.getAttribute("enctype"))||je,i=new FormData(s,e),!function(){if(null===Ae)try{new FormData(document.createElement("form"),0),Ae=!1}catch(e){Ae=!0}return Ae}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,n)}}else{if(Ee(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_e,n=null,a=je,s=e}return i&&"text/plain"===a&&(s=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Te(e){return{__html:e}}function Re(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ie(e,t,r){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===O(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Le(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pe(e){return null!=e&&"string"===typeof e.page}function De(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Me(e,t,r,n,a,i){let s=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===i?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0}):[]}function Fe(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1),[...new Set(n)];var n}function Be(e,t){let r=new Set,n=new Set(t);return e.reduce((e,a)=>{if(t&&!Pe(a)&&"script"===a.as&&a.href&&n.has(a.href))return e;let i=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(a));return r.has(i)||(r.add(i),e.push({key:i,link:a})),e},[])}function Ue(e,t){return"lazy"===e.mode&&!0===t}function ze(){let e=t.useContext(H);return Re(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function He(){let e=t.useContext($);return Re(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $e=t.createContext(void 0);function qe(){let e=t.useContext($e);return Re(e,"You must render this element inside a <HydratedRouter> element"),e}function Ge(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function We(e,t,r){if(r&&!Je)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}$e.displayName="FrameworkContext";function Ve(e){let{page:r,...n}=e,{router:a}=ze(),i=t.useMemo(()=>m(a.routes,r,a.basename),[a.routes,r,a.basename]);return i?t.createElement(Ye,{page:r,matches:i,...n}):null}function Ke(e){let{manifest:r,routeModules:n}=qe(),[a,i]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,r){return Be((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await Le(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(De).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,r,n).then(e=>{t||i(e)}),()=>{t=!0}},[e,r,n]),a}function Ye(e){let{page:r,matches:n,...a}=e,i=Z(),{manifest:s,routeModules:o}=qe(),{basename:l}=ze(),{loaderData:c,matches:u}=He(),d=t.useMemo(()=>Me(r,n,u,s,i,"data"),[r,n,u,s,i]),h=t.useMemo(()=>Me(r,n,u,s,i,"assets"),[r,n,u,s,i]),f=t.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let e=new Set,t=!1;if(n.forEach(r=>{let n=s.routes[r.route.id];n&&n.hasLoader&&(!d.some(e=>e.route.id===r.route.id)&&r.route.id in c&&o[r.route.id]?.shouldRevalidate||n.hasClientLoader?t=!0:e.add(r.route.id))}),0===e.size)return[];let a=Ie(r,l,"data");return t&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[l,c,i,s,d,n,r,o]),m=t.useMemo(()=>Fe(h,s),[h,s]),p=Ke(h);return t.createElement(t.Fragment,null,f.map(e=>t.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...a})),m.map(e=>t.createElement("link",{key:e,rel:"modulepreload",href:e,...a})),p.map(e=>{let{key:r,link:n}=e;return t.createElement("link",{key:r,...n})}))}var Je=!1;function Xe(e){let{manifest:r,serverHandoffString:n,isSpaMode:a,renderMeta:i,routeDiscovery:s,ssr:o}=qe(),{router:l,static:c,staticContext:u}=ze(),{matches:d}=He(),h=t.useContext(q),f=Ue(s,o);i&&(i.didRenderScripts=!0);let p=We(d,null,a);t.useEffect(()=>{0},[]);let g=t.useMemo(()=>{if(h)return null;let a=u?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",i=c?`${r.hmr?.runtime?`import ${JSON.stringify(r.hmr.runtime)};`:""}${f?"":`import ${JSON.stringify(r.url)}`};\n${p.map((e,t)=>{let n=`route${t}`,a=r.routes[e.route.id];Re(a,`Route ${e.route.id} not found in manifest`);let{clientActionModule:i,clientLoaderModule:s,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=a,u=[...i?[{module:i,varName:`${n}_clientAction`}]:[],...s?[{module:s,varName:`${n}_clientLoader`}]:[],...o?[{module:o,varName:`${n}_clientMiddleware`}]:[],...l?[{module:l,varName:`${n}_HydrateFallback`}]:[],{module:c,varName:`${n}_main`}];return 1===u.length?`import * as ${n} from ${JSON.stringify(c)};`:[u.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${n} = {${u.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${f?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:r,...n}=e,a=new Set(t.state.matches.map(e=>e.route.id)),i=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(i.pop();i.length>0;)s.push(`/${i.join("/")}`),i.pop();s.forEach(e=>{let r=m(t.routes,e,t.basename);r&&r.forEach(e=>a.add(e.route.id))});let o=[...a].reduce((e,t)=>Object.assign(e,{[t]:n.routes[t]}),{});return{...n,routes:o,sri:!!r||void 0}}(r,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${p.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(r.entry.module)});`:" ";return t.createElement(t.Fragment,null,t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Te(a),type:void 0}),t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Te(i),type:"module",async:!0}))},[]),y=Je||h?[]:function(e){return[...new Set(e)]}(r.entry.imports.concat(Fe(p,r,{includeHydrateFallback:!0}))),v="object"===typeof r.sri?r.sri:{};return be(!h,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Je||h?null:t.createElement(t.Fragment,null,"object"===typeof r.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:v})}}):null,f?null:t.createElement("link",{rel:"modulepreload",href:r.url,crossOrigin:e.crossOrigin,integrity:v[r.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:r.entry.module,crossOrigin:e.crossOrigin,integrity:v[r.entry.module],suppressHydrationWarning:!0}),y.map(r=>t.createElement("link",{key:r,rel:"modulepreload",href:r,crossOrigin:e.crossOrigin,integrity:v[r],suppressHydrationWarning:!0})),g)}function Qe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}t.Component;function Ze(e){let{error:r,isOutsideRemixApp:n}=e;console.error(r);let a,i=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(B(r))return t.createElement(et,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},r.status," ",r.statusText),i);if(r instanceof Error)0;else{let e=null==r?"Unknown Error":"object"===typeof r&&"toString"in r?r.toString():JSON.stringify(r);new Error(e)}return t.createElement(et,{title:"Application Error!",isOutsideRemixApp:n},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),i)}function et(e){let{title:r,renderScripts:n,isOutsideRemixApp:a,children:i}=e,{routeModules:s}=qe();return s.root?.Layout&&!a?i:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,r)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,n?t.createElement(Xe,null):null)))}var tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{tt&&(window.__reactRouterVersion="7.7.1")}catch(EM){}function rt(e){let{basename:r,children:n,window:a}=e,s=t.useRef();null==s.current&&(s.current=i({window:a,v5Compat:!0}));let o=s.current,[l,c]=t.useState({action:o.action,location:o.location}),u=t.useCallback(e=>{t.startTransition(()=>c(e))},[c]);return t.useLayoutEffect(()=>o.listen(u),[o,u]),t.createElement(we,{basename:r,children:n,location:l.location,navigationType:l.action,navigator:o})}var nt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=t.forwardRef(function(e,r){let n,{onClick:a,discover:i="render",prefetch:l="none",relative:c,reloadDocument:d,replace:h,state:f,target:m,to:p,preventScrollReset:g,viewTransition:y,...v}=e,{basename:b}=t.useContext(K),x="string"===typeof p&&nt.test(p),w=!1;if("string"===typeof p&&x&&(n=p,tt))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),r=O(t.pathname,b);t.origin===e.origin&&null!=r?p=r+t.search+t.hash:w=!0}catch(EM){o(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(Q(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=t.useContext(K),{hash:i,pathname:o,search:l}=ae(e,{relative:r}),c=o;return"/"!==n&&(c="/"===o?n:P([n,o])),a.createHref({pathname:c,search:l,hash:i})}(p,{relative:c}),[S,_,j]=function(e,r){let n=t.useContext($e),[a,i]=t.useState(!1),[s,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=r,f=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(a){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[a]);let m=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?"intent"!==e?[s,f,{}]:[s,f,{onFocus:Ge(l,m),onBlur:Ge(c,p),onMouseEnter:Ge(u,m),onMouseLeave:Ge(d,p),onTouchStart:Ge(h,m)}]:[!1,f,{}]}(l,v),E=function(e){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=re(),c=Z(),d=ae(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:u(c)===u(d);l(e,{replace:r,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,d,n,a,r,e,i,s,o])}(p,{replace:h,state:f,target:m,preventScrollReset:g,relative:c,viewTransition:y});let A=t.createElement("a",{...v,...j,href:n||N,onClick:w||d?a:function(e){a&&a(e),e.defaultPrevented||E(e)},ref:Qe(r,_),target:m,"data-discover":x||"render"!==i?void 0:"true"});return S&&!x?t.createElement(t.Fragment,null,A,t.createElement(Ve,{page:N})):A});at.displayName="Link";var it=t.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d,...h}=e,f=ae(c,{relative:h.relative}),m=Z(),p=t.useContext($),{navigator:g,basename:y}=t.useContext(K),v=null!=p&&function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useContext(G);s(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=lt("useViewTransitionState"),i=ae(e,{relative:r});if(!n.isTransitioning)return!1;let o=O(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=O(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=A(i.pathname,l)||null!=A(i.pathname,o)}(f)&&!0===u,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,x=m.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;a||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&y&&(w=O(w,y)||w);const N="/"!==b&&b.endsWith("/")?b.length-1:b.length;let S,_=x===b||!o&&x.startsWith(b)&&"/"===x.charAt(N),j=null!=w&&(w===b||!o&&w.startsWith(b)&&"/"===w.charAt(b.length)),E={isActive:_,isPending:j,isTransitioning:v},k=_?n:void 0;S="function"===typeof i?i(E):[i,_?"active":null,j?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof l?l(E):l;return t.createElement(at,{...h,"aria-current":k,className:S,ref:r,style:C,to:c,viewTransition:u},"function"===typeof d?d(E):d)});it.displayName="NavLink";var st=t.forwardRef((e,r)=>{let{discover:n="render",fetcherKey:a,navigate:i,reloadDocument:o,replace:l,state:c,method:d=_e,action:h,onSubmit:f,relative:m,preventScrollReset:p,viewTransition:g,...y}=e,v=dt(),b=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=t.useContext(K),a=t.useContext(J);s(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),o={...ae(e||".",{relative:r})},l=Z();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),r=t.some(e=>""===e);if(r){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();o.search=r?`?${r}`:""}}e&&"."!==e||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:P([n,o.pathname]));return u(o)}(h,{relative:m}),x="get"===d.toLowerCase()?"get":"post",w="string"===typeof h&&nt.test(h);return t.createElement("form",{ref:r,method:x,action:b,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=t?.getAttribute("formmethod")||d;v(t||e.currentTarget,{fetcherKey:a,method:r,navigate:i,replace:l,state:c,relative:m,preventScrollReset:p,viewTransition:g})},...y,"data-discover":w||"render"!==n?void 0:"true"})});function ot(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lt(e){let r=t.useContext(H);return s(r,ot(e)),r}st.displayName="Form";var ct=0,ut=()=>`__${String(++ct)}__`;function dt(){let{router:e}=lt("useSubmit"),{basename:r}=t.useContext(K),n=me("useRouteId");return t.useCallback(async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:s,encType:o,formData:l,body:c}=Oe(t,r);if(!1===a.navigate){let t=a.fetcherKey||ut();await e.fetch(t,n,a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||s,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||s,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,r,n])}function ht(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=ht(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ft(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=ht(e))&&(n&&(n+=" "),n+=t);return n}const mt=ft;!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var pt=e=>"number"==typeof e&&!isNaN(e),gt=e=>"string"==typeof e,yt=e=>"function"==typeof e,vt=e=>gt(e)||yt(e)?e:null,bt=(e,t)=>!1===e||pt(e)&&e>0?e:t,xt=e=>(0,t.isValidElement)(e)||gt(e)||yt(e)||pt(e);function wt(e){let{enter:r,exit:n,appendPosition:a=!1,collapse:i=!0,collapseDuration:s=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=e,m=a?`${r}--${l}`:r,p=a?`${n}--${l}`:n,g=(0,t.useRef)(0);return(0,t.useLayoutEffect)(()=>{let e=d.current,t=m.split(" "),r=n=>{n.target===d.current&&(f(),e.removeEventListener("animationend",r),e.removeEventListener("animationcancel",r),0===g.current&&"animationcancel"!==n.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",r),e.addEventListener("animationcancel",r)},[]),(0,t.useEffect)(()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:n,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}(e,u,s):u()};h||(c?t():(g.current=1,e.className+=` ${p}`,e.addEventListener("animationend",t)))},[h]),t.createElement(t.Fragment,null,o)}}function Nt(e,t){return{content:St(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function St(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,t.isValidElement)(e)&&!gt(e.type)?(0,t.cloneElement)(e,{closeToast:r.closeToast,toastProps:r,data:r.data,isPaused:n}):yt(e)?e({closeToast:r.closeToast,toastProps:r,data:r.data,isPaused:n}):e}function _t(e){let{delay:r,isRunning:n,closeToast:a,type:i="default",hide:s,className:o,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:h}=e,f=s||l&&0===c,m={animationDuration:`${r}ms`,animationPlayState:n?"running":"paused"};l&&(m.transform=`scaleX(${c})`);let p=mt("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),g=yt(o)?o({rtl:u,type:i,defaultClassName:p}):mt(p,o),y={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&a()}};return t.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},t.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${i}`}),t.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:g,style:m,...y}))}var jt=1,Et=()=>""+jt++;function At(e,t,r){let n=1,a=0,i=[],s=[],o=t,l=new Map,c=new Set,u=()=>{s=Array.from(l.values()),c.forEach(e=>e())},d=e=>{var t,r;null==(r=null==(t=e.props)?void 0:t.onClose)||r.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},f=e=>{var t,n;let{toastId:a,updateId:i}=e.props,s=null==i;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(a,e),u(),r(Nt(e,s?"added":"updated")),s&&(null==(n=(t=e.props).onOpen)||n.call(t))};return{id:e,props:o,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach(r=>{var n;(null==t||t===r.props.toastId)&&(null==(n=r.toggle)||n.call(r,e))})},removeToast:h,toasts:l,clearQueue:()=>{a-=i.length,i=[]},buildToast:(t,s)=>{if((t=>{let{containerId:r,toastId:n,updateId:a}=t,i=r?r!==e:1!==e,s=l.has(n)&&null==a;return i||s})(s))return;let{toastId:c,updateId:d,data:m,staleId:p,delay:g}=s,y=null==d;y&&a++;let v={...o,style:o.toastStyle,key:n++,...Object.fromEntries(Object.entries(s).filter(e=>{let[t,r]=e;return null!=r})),toastId:c,updateId:d,data:m,isIn:!1,className:vt(s.className||o.toastClassName),progressClassName:vt(s.progressClassName||o.progressClassName),autoClose:!s.isLoading&&bt(s.autoClose,o.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(r(Nt(e,"removed")),l.delete(c),a--,a<0&&(a=0),i.length>0)return void f(i.shift());u()}}};v.closeButton=o.closeButton,!1===s.closeButton||xt(s.closeButton)?v.closeButton=s.closeButton:!0===s.closeButton&&(v.closeButton=!xt(o.closeButton)||o.closeButton);let b={content:t,props:v,staleId:p};o.limit&&o.limit>0&&a>o.limit&&y?i.push(b):pt(g)?setTimeout(()=>{f(b)},g):f(b)},setProps(e){o=e},setToggle:(e,t)=>{let r=l.get(e);r&&(r.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>s}}var kt=new Map,Ct=[],Ot=new Set,Tt=e=>Ot.forEach(t=>t(e)),Rt=()=>kt.size>0;function It(e,t){var r;if(t)return!(null==(r=kt.get(t))||!r.isToastActive(e));let n=!1;return kt.forEach(t=>{t.isToastActive(e)&&(n=!0)}),n}function Lt(e){if(Rt()){if(null==e||(e=>gt(e)||pt(e))(e))kt.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=kt.get(e.containerId);t?t.removeToast(e.id):kt.forEach(t=>{t.removeToast(e.id)})}}else Ct=Ct.filter(t=>null!=e&&t.options.toastId!==e)}function Pt(e,t){xt(e)&&(Rt()||Ct.push({content:e,options:t}),kt.forEach(r=>{r.buildToast(e,t)}))}function Dt(e,t){kt.forEach(r=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===r.id)&&r.toggle(e,null==t?void 0:t.id)})}function Mt(e){let t=e.containerId||1;return{subscribe(r){let n=At(t,e,Tt);kt.set(t,n);let a=n.observe(r);return Ct.forEach(e=>Pt(e.content,e.options)),Ct=[],()=>{a(),kt.delete(t)}},setProps(e){var r;null==(r=kt.get(t))||r.setProps(e)},getSnapshot(){var e;return null==(e=kt.get(t))?void 0:e.getSnapshot()}}}function Ft(e){return e&&(gt(e.toastId)||pt(e.toastId))?e.toastId:Et()}function Bt(e,t){return Pt(e,t),t.toastId}function Ut(e,t){return{...t,type:t&&t.type||e,toastId:Ft(t)}}function zt(e){return(t,r)=>Bt(t,Ut(e,r))}function Ht(e,t){return Bt(e,Ut("default",t))}function $t(e){let[r,n]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),s=(0,t.useRef)(null),o=(0,t.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;function f(){n(!0)}function m(){n(!1)}function p(t){let n=s.current;if(o.canDrag&&n){o.didMove=!0,r&&m(),"x"===e.draggableDirection?o.delta=t.clientX-o.start:o.delta=t.clientY-o.start,o.start!==t.clientX&&(o.canCloseOnClick=!1);let a="x"===e.draggableDirection?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;n.style.transform=`translate3d(${a},0)`,n.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance))}}function g(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g);let t=s.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=kt.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,t.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",f),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",m)}},[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){o.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",g);let r=s.current;o.canCloseOnClick=!0,o.canDrag=!0,r.style.transition="none","x"===e.draggableDirection?(o.start=t.clientX,o.removalDistance=r.offsetWidth*(e.draggablePercent/100)):(o.start=t.clientY,o.removalDistance=r.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:r,bottom:n,left:a,right:i}=s.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=a&&t.clientX<=i&&t.clientY>=r&&t.clientY<=n?m():f()}};return l&&c&&(y.onMouseEnter=m,e.stacked||(y.onMouseLeave=f)),h&&(y.onClick=e=>{d&&d(e),o.canCloseOnClick&&u(!0)}),{playToast:f,pauseToast:m,isRunning:r,preventExitTransition:a,toastRef:s,eventHandlers:y}}Ht.loading=(e,t)=>Bt(e,Ut("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Ht.promise=function(e,t,r){let n,{pending:a,error:i,success:s}=t;a&&(n=gt(a)?Ht.loading(a,r):Ht.loading(a.render,{...r,...a}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,a)=>{if(null==t)return void Ht.dismiss(n);let i={type:e,...o,...r,data:a},s=gt(t)?{render:t}:t;return n?Ht.update(n,{...i,...s}):Ht(s.render,{...i,...s}),a},c=yt(e)?e():e;return c.then(e=>l("success",s,e)).catch(e=>l("error",i,e)),c},Ht.success=zt("success"),Ht.info=zt("info"),Ht.error=zt("error"),Ht.warning=zt("warning"),Ht.warn=Ht.warning,Ht.dark=(e,t)=>Bt(e,Ut("default",{theme:"dark",...t})),Ht.dismiss=function(e){Lt(e)},Ht.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};kt.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},Ht.isActive=It,Ht.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=((e,t)=>{let{containerId:r}=t;var n;return null==(n=kt.get(r||1))?void 0:n.toasts.get(e)})(e,t);if(r){let{props:n,content:a}=r,i={delay:100,...n,...t,toastId:t.toastId||e,updateId:Et()};i.toastId!==e&&(i.staleId=e);let s=i.render||a;delete i.render,Bt(s,i)}},Ht.done=e=>{Ht.update(e,{progress:1})},Ht.onChange=function(e){return Ot.add(e),()=>{Ot.delete(e)}},Ht.play=e=>Dt(!0,e),Ht.pause=e=>Dt(!1,e);var qt="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,Gt=e=>{let{theme:r,type:n,isLoading:a,...i}=e;return t.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===r?"currentColor":`var(--toastify-icon-color-${n})`,...i})};var Wt={info:function(e){return t.createElement(Gt,{...e},t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return t.createElement(Gt,{...e},t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return t.createElement(Gt,{...e},t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return t.createElement(Gt,{...e},t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return t.createElement("div",{className:"Toastify__spinner"})}};function Vt(e){let{theme:r,type:n,isLoading:a,icon:i}=e,s=null,o={theme:r,type:n};return!1===i||(yt(i)?s=i({...o,isLoading:a}):(0,t.isValidElement)(i)?s=(0,t.cloneElement)(i,o):a?s=Wt.spinner():(e=>e in Wt)(n)&&(s=Wt[n](o))),s}var Kt=e=>{let{isRunning:r,preventExitTransition:n,toastRef:a,eventHandlers:i,playToast:s}=$t(e),{closeButton:o,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:f,transition:m,position:p,className:g,style:y,progressClassName:v,updateId:b,role:x,progress:w,rtl:N,toastId:S,deleteToast:_,isIn:j,isLoading:E,closeOnClick:A,theme:k,ariaLabel:C}=e,O=mt("Toastify__toast",`Toastify__toast-theme--${k}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":N},{"Toastify__toast--close-on-click":A}),T=yt(g)?g({rtl:N,position:p,type:d,defaultClassName:O}):mt(O,g),R=Vt(e),I=!!w||!c,L={closeToast:f,type:d,theme:k},P=null;return!1===o||(P=yt(o)?o(L):(0,t.isValidElement)(o)?(0,t.cloneElement)(o,L):function(e){let{closeToast:r,theme:n,ariaLabel:a="close"}=e;return t.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),r(!0)},"aria-label":a},t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),t.createElement(m,{isIn:j,done:_,position:p,preventExitTransition:n,nodeRef:a,playToast:s},t.createElement("div",{id:S,tabIndex:0,onClick:u,"data-in":j,className:T,...i,style:y,ref:a,...j&&{role:x,"aria-label":C}},null!=R&&t.createElement("div",{className:mt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},R),St(l,e,!r),P,!e.customProgressBar&&t.createElement(_t,{...b&&!I?{key:`p-${b}`}:{},rtl:N,theme:k,delay:c,isRunning:r,isIn:j,closeToast:f,hide:h,type:d,className:v,controlledProgress:I,progress:w||0})))},Yt=function(e){return{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},Jt=wt(Yt("bounce",!0)),Xt=(wt(Yt("slide",!0)),wt(Yt("zoom")),wt(Yt("flip")),{position:"top-right",transition:Jt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function Qt(e){let r={...Xt,...e},n=e.stacked,[a,i]=(0,t.useState)(!0),s=(0,t.useRef)(null),{getToastToRender:o,isToastActive:l,count:c}=function(e){var r;let{subscribe:n,getSnapshot:a,setProps:i}=(0,t.useRef)(Mt(e)).current;i(e);let s=null==(r=(0,t.useSyncExternalStore)(n,a,a))?void 0:r.slice();return{getToastToRender:function(t){if(!s)return[];let r=new Map;return e.newestOnTop&&s.reverse(),s.forEach(e=>{let{position:t}=e.props;r.has(t)||r.set(t,[]),r.get(t).push(e)}),Array.from(r,e=>t(e[0],e[1]))},isToastActive:It,count:null==s?void 0:s.length}}(r),{className:u,style:d,rtl:h,containerId:f,hotKeys:m}=r;function p(e){let t=mt("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":h});return yt(u)?u({position:e,rtl:h,defaultClassName:t}):mt(t,vt(u))}function g(){n&&(i(!0),Ht.play())}return qt(()=>{var e;if(n){let t=s.current.querySelectorAll('[data-in="true"]'),n=12,i=null==(e=r.position)?void 0:e.includes("top"),o=0,l=0;Array.from(t).reverse().forEach((e,t)=>{let r=e;r.classList.add("Toastify__toast--stacked"),t>0&&(r.dataset.collapsed=`${a}`),r.dataset.pos||(r.dataset.pos=i?"top":"bot");let s=o*(a?.2:1)+(a?0:n*t);r.style.setProperty("--y",`${i?s:-1*s}px`),r.style.setProperty("--g",`${n}`),r.style.setProperty("--s",""+(1-(a?l:0))),o+=r.offsetHeight,l+=.025})}},[a,c,n]),(0,t.useEffect)(()=>{function e(e){var t;let r=s.current;m(e)&&(null==(t=r.querySelector('[tabIndex="0"]'))||t.focus(),i(!1),Ht.pause()),"Escape"===e.key&&(document.activeElement===r||null!=r&&r.contains(document.activeElement))&&(i(!0),Ht.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[m]),t.createElement("section",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),Ht.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":r["aria-label"]},o((e,r)=>{let a=r.length?{...d}:{...d,pointerEvents:"none"};return t.createElement("div",{tabIndex:-1,className:p(e),"data-stacked":n,style:a,key:`c-${e}`},r.map(e=>{let{content:r,props:a}=e;return t.createElement(Kt,{...a,stacked:n,collapseAll:g,isIn:l(a.toastId,a.containerId),key:`t-${a.key}`},r)}))}))}var Zt=r(579);const er=[{title:"Dashboard",path:"/dashboard"},{title:"Customer",subMenu:[{title:"Customer List",path:"/customer/list"},{title:"Onboarding Form",path:"/customer/onboarding"}]},{title:"Screening",subMenu:[{title:"Instant Screening",path:"/screening/instant"},{title:"Ongoing Screening",path:"/screening/ongoing"}]},{title:"Transactions",subMenu:[{title:"Add Transactions",path:"/transactions/addtransactions"},{title:"Transaction Approvals",path:"/transactions/approvals"},{title:"Reports",path:"/transactions/reports"},{title:"XML Report Generation",path:"/transactions/xml-report"}]},{title:"Risk",subMenu:[{title:"Risk Assessment",path:"/risk/assessment"},{title:"Risk Rules",path:"/risk/rules"},{title:"Transaction Activity Rules",path:"/risk/transaction-activity-rules"}]},{title:"Case Management",subMenu:[{title:"Case List",path:"/cases/list"},{title:"Case Details",path:"/cases/details"},{title:"Case Actions",path:"/cases/actions"}]},{title:"Reports",subMenu:[{title:"Report Generation",path:"/reports/reportgeneration"},{title:"Report List",path:"/reports/reportlist"}]},{title:"logs",subMenu:[{title:"Activity Logs",path:"/logs/activitylogs"},{title:"System Logs",path:"/logs/systemlogs"}]}],tr=()=>{const[e,r]=(0,t.useState)(null),n=Z(),a=e=>n.pathname===e;return(0,Zt.jsxs)("aside",{className:"w-64 h-screen bg-white text-black p-4 overflow-y-auto",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"AML Platform"}),er.map((t,n)=>(0,Zt.jsx)("div",{className:"mb-3",children:t.subMenu?(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("button",{className:"w-full text-left font-semibold hover:text-blue-400",onClick:()=>r(e===n?null:n),children:t.title}),e===n&&(0,Zt.jsx)("div",{className:"ml-4 mt-2 space-y-2",children:t.subMenu.map((e,t)=>(0,Zt.jsx)(at,{to:e.path,className:"block hover:text-blue-300 "+(a(e.path)?"text-blue-400":""),children:e.title},t))})]}):(0,Zt.jsx)(at,{to:t.path,className:"block font-semibold hover:text-blue-400 "+(a(t.path)?"text-blue-400":""),children:t.title})},n))]})},rr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nr=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ar=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},ir=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var sr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const or=(0,t.forwardRef)((e,r)=>{let{color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...u}=e;return(0,t.createElement)("svg",{ref:r,...sr,width:a,height:a,stroke:n,strokeWidth:s?24*Number(i)/Number(a):i,className:ar("lucide",o),...!l&&!ir(u)&&{"aria-hidden":"true"},...u},[...c.map(e=>{let[r,n]=e;return(0,t.createElement)(r,n)}),...Array.isArray(l)?l:[l]])}),lr=(e,r)=>{const n=(0,t.forwardRef)((n,a)=>{let{className:i,...s}=n;return(0,t.createElement)(or,{ref:a,iconNode:r,className:ar(`lucide-${rr(nr(e))}`,`lucide-${e}`,i),...s})});return n.displayName=nr(e),n},cr=lr("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ur=()=>{const[e,r]=(0,t.useState)(!1),n=(0,t.useRef)();return(0,t.useEffect)(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,Zt.jsxs)("div",{className:"relative",ref:n,children:[(0,Zt.jsx)("button",{onClick:()=>r(!e),className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-full transition",children:(0,Zt.jsx)(cr,{size:20})}),e&&(0,Zt.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg z-50",children:[(0,Zt.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100",children:"View Profile"}),(0,Zt.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 hover:text-red-700",onClick:()=>{console.log("Sign out clicked")},children:"Sign Out"})]})]})},dr=e=>{let{children:t}=e;return(0,Zt.jsxs)("div",{className:"flex h-screen",children:[(0,Zt.jsx)(tr,{}),(0,Zt.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,Zt.jsx)("header",{className:"flex justify-end items-center p-4 border-b shadow-sm bg-white",children:(0,Zt.jsx)(ur,{})}),(0,Zt.jsx)("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:t})]})]})},hr=()=>{const e=re(),[r,n]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)("");return(0,Zt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,Zt.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-md w-full max-w-md",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Login"}),l&&(0,Zt.jsx)("div",{className:"mb-4 text-red-600 text-sm text-center",children:l}),(0,Zt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const n=await(async(e,t)=>(await new Promise(e=>setTimeout(e,1e3)),"admin@example.com"===e&&"password123"===t))(r,a);n?(s&&localStorage.setItem("authUser",r),e("/dashboard")):c("Invalid email or password")},className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium",children:"Email"}),(0,Zt.jsx)("input",{type:"email",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:r,onChange:e=>n(e.target.value),required:!0})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium",children:"Password"}),(0,Zt.jsx)("input",{type:"password",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:a,onChange:e=>i(e.target.value),required:!0})]}),(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Zt.jsx)("input",{type:"checkbox",className:"mr-2",checked:s,onChange:()=>o(!s)}),"Remember me"]}),(0,Zt.jsx)("a",{href:"#",className:"text-sm text-blue-600 hover:underline",children:"Forgot Password?"})]}),(0,Zt.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition",children:"Login"})]})]})})},fr=e=>{let{children:t,className:r=""}=e;return(0,Zt.jsx)("div",{className:`bg-white shadow rounded-2xl p-4 ${r}`,children:t})},mr=e=>{let{children:t}=e;return(0,Zt.jsx)("div",{className:"mt-2",children:t})},pr=e=>{let{children:t,onClick:r,className:n="",type:a="button"}=e;return(0,Zt.jsx)("button",{onClick:r,type:a,className:`bg-blue-600 text-white px-4 py-2 rounded-xl shadow hover:bg-blue-700 transition ${n}`,children:t})};var gr=r(7820),yr=r.n(gr),vr=r(7770),br=r.n(vr),xr=e=>0===e?0:e>0?1:-1,wr=e=>"number"==typeof e&&e!=+e,Nr=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,Sr=e=>("number"===typeof e||e instanceof Number)&&!wr(e),_r=e=>Sr(e)||"string"===typeof e,jr=0,Er=e=>{var t=++jr;return"".concat(e||"").concat(t)},Ar=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Sr(e)&&"string"!==typeof e)return n;if(Nr(e)){if(null==t)return n;var i=e.indexOf("%");r=t*parseFloat(e.slice(0,i))/100}else r=+e;return wr(r)&&(r=n),a&&null!=t&&r>t&&(r=t),r},kr=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1},Cr=(e,t)=>Sr(e)&&Sr(t)?r=>e+r*(t-e):()=>t;var Or=e=>null===e||"undefined"===typeof e,Tr=e=>Or(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Rr=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]};function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach(function(t){Pr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dr=(0,t.forwardRef)((e,r)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:f,onResize:m,style:p={}}=e,g=(0,t.useRef)(null),y=(0,t.useRef)();y.current=m,(0,t.useImperativeHandle)(r,()=>g.current);var[v,b]=(0,t.useState)({containerWidth:a.width,containerHeight:a.height}),x=(0,t.useCallback)((e,t)=>{b(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);(0,t.useEffect)(()=>{var e=e=>{var t,{width:r,height:n}=e[0].contentRect;x(r,n),null===(t=y.current)||void 0===t||t.call(y,r,n)};d>0&&(e=yr()(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return x(r,n),t.observe(g.current),()=>{t.disconnect()}},[x,d]);var w=(0,t.useMemo)(()=>{var{containerWidth:e,containerHeight:r}=v;if(e<0||r<0)return null;Rr(Nr(i)||Nr(s),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",i,s),Rr(!n||n>0,"The aspect(%s) must be greater than zero.",n);var a=Nr(i)?e:i,d=Nr(s)?r:s;return n&&n>0&&(a?d=a/n:d&&(a=d*n),c&&d>c&&(d=c)),Rr(a>0||d>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,d,i,s,o,l,n),t.Children.map(u,e=>(0,t.cloneElement)(e,{width:a,height:d,style:Lr({width:a,height:d},e.props.style)}))},[n,u,s,c,l,o,v,i]);return t.createElement("div",{id:h?"".concat(h):void 0,className:ft("recharts-responsive-container",f),style:Lr(Lr({},p),{},{width:i,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:g},t.createElement("div",{style:{width:0,height:0,overflow:"visible"}},w))});function Mr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Fr=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Br=()=>Math.random().toString(36).substring(7).split("").join("."),Ur={INIT:`@@redux/INIT${Br()}`,REPLACE:`@@redux/REPLACE${Br()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Br()}`};function zr(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Hr(e,t,r){if("function"!==typeof e)throw new Error(Mr(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(Mr(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(Mr(1));return r(Hr)(e,t)}let n=e,a=t,i=new Map,s=i,o=0,l=!1;function c(){s===i&&(s=new Map,i.forEach((e,t)=>{s.set(t,e)}))}function u(){if(l)throw new Error(Mr(3));return a}function d(e){if("function"!==typeof e)throw new Error(Mr(4));if(l)throw new Error(Mr(5));let t=!0;c();const r=o++;return s.set(r,e),function(){if(t){if(l)throw new Error(Mr(6));t=!1,c(),s.delete(r),i=null}}}function h(e){if(!zr(e))throw new Error(Mr(7));if("undefined"===typeof e.type)throw new Error(Mr(8));if("string"!==typeof e.type)throw new Error(Mr(17));if(l)throw new Error(Mr(9));try{l=!0,a=n(a,e)}finally{l=!1}return(i=s).forEach(e=>{e()}),e}h({type:Ur.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Mr(10));n=e,h({type:Ur.REPLACE})},[Fr]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Mr(11));function r(){const e=t;e.next&&e.next(u())}r();return{unsubscribe:e(r)}},[Fr](){return this}}}}}function $r(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const n=t[i];0,"function"===typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if("undefined"===typeof r(void 0,{type:Ur.INIT}))throw new Error(Mr(12));if("undefined"===typeof r(void 0,{type:Ur.PROBE_UNKNOWN_ACTION()}))throw new Error(Mr(13))})}(r)}catch(EM){a=EM}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let i=!1;const s={};for(let a=0;a<n.length;a++){const o=n[a],l=r[o],c=e[o],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(Mr(14))}s[o]=u,i=i||u!==c}return i=i||n.length!==Object.keys(e).length,i?s:e}}function qr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function Gr(e){return zr(e)&&"type"in e&&"string"===typeof e.type}function Wr(e){return t=>{let{dispatch:r,getState:n}=t;return t=>a=>"function"===typeof a?a(r,n,e):t(a)}}var Vr=Wr(),Kr=Wr,Yr=Symbol.for("immer-nothing"),Jr=Symbol.for("immer-draftable"),Xr=Symbol.for("immer-state");function Qr(e){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zr=Object.getPrototypeOf;function en(e){return!!e&&!!e[Xr]}function tn(e){return!!e&&(nn(e)||Array.isArray(e)||!!e[Jr]||!!e.constructor?.[Jr]||cn(e)||un(e))}var rn=Object.prototype.constructor.toString();function nn(e){if(!e||"object"!==typeof e)return!1;const t=Zr(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===rn}function an(e,t){0===sn(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function sn(e){const t=e[Xr];return t?t.type_:Array.isArray(e)?1:cn(e)?2:un(e)?3:0}function on(e,t){return 2===sn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ln(e,t,r){const n=sn(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function cn(e){return e instanceof Map}function un(e){return e instanceof Set}function dn(e){return e.copy_||e.base_}function hn(e,t){if(cn(e))return new Map(e);if(un(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=nn(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[Xr];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Zr(e),t)}{const t=Zr(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function fn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pn(e)||en(e)||!tn(e)||(sn(e)>1&&(e.set=e.add=e.clear=e.delete=mn),Object.freeze(e),t&&Object.entries(e).forEach(e=>{let[t,r]=e;return fn(r,!0)})),e}function mn(){Qr(2)}function pn(e){return Object.isFrozen(e)}var gn,yn={};function vn(e){const t=yn[e];return t||Qr(0),t}function bn(){return gn}function xn(e,t){t&&(vn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function wn(e){Nn(e),e.drafts_.forEach(_n),e.drafts_=null}function Nn(e){e===gn&&(gn=e.parent_)}function Sn(e){return gn={drafts_:[],parent_:gn,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _n(e){const t=e[Xr];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function jn(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[Xr].modified_&&(wn(t),Qr(4)),tn(e)&&(e=En(t,e),t.parent_||kn(t,e)),t.patches_&&vn("Patches").generateReplacementPatches_(r[Xr].base_,e,t.patches_,t.inversePatches_)):e=En(t,r,[]),wn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Yr?e:void 0}function En(e,t,r){if(pn(t))return t;const n=t[Xr];if(!n)return an(t,(a,i)=>An(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return kn(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,i=!1;3===n.type_&&(a=new Set(t),t.clear(),i=!0),an(a,(a,s)=>An(e,n,t,a,s,r,i)),kn(e,t,!1),r&&e.patches_&&vn("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function An(e,t,r,n,a,i,s){if(en(a)){const s=En(e,a,i&&t&&3!==t.type_&&!on(t.assigned_,n)?i.concat(n):void 0);if(ln(r,n,s),!en(s))return;e.canAutoFreeze_=!1}else s&&r.add(a);if(tn(a)&&!pn(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;En(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||kn(e,a)}}function kn(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fn(t,r)}var Cn={get(e,t){if(t===Xr)return e;const r=dn(e);if(!on(r,t))return function(e,t,r){const n=Rn(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!tn(n)?n:n===Tn(e.base_,t)?(Ln(e),e.copy_[t]=Pn(n,e)):n},has:(e,t)=>t in dn(e),ownKeys:e=>Reflect.ownKeys(dn(e)),set(e,t,r){const n=Rn(dn(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Tn(dn(e),t),a=n?.[Xr];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,n)&&(void 0!==r||on(e.base_,t)))return!0;Ln(e),In(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Tn(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Ln(e),In(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=dn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){Qr(11)},getPrototypeOf:e=>Zr(e.base_),setPrototypeOf(){Qr(12)}},On={};function Tn(e,t){const r=e[Xr];return(r?dn(r):e)[t]}function Rn(e,t){if(!(t in e))return;let r=Zr(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Zr(r)}}function In(e){e.modified_||(e.modified_=!0,e.parent_&&In(e.parent_))}function Ln(e){e.copy_||(e.copy_=hn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}an(Cn,(e,t)=>{On[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),On.deleteProperty=function(e,t){return On.set.call(this,e,t,void 0)},On.set=function(e,t,r){return Cn.set.call(this,e[0],t,r,e[0])};function Pn(e,t){const r=cn(e)?vn("MapSet").proxyMap_(e,t):un(e)?vn("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:bn(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Cn;r&&(a=[n],i=On);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=s,o}(e,t);return(t?t.scope_:bn()).drafts_.push(r),r}function Dn(e){return en(e)||Qr(10),Mn(e)}function Mn(e){if(!tn(e)||pn(e))return e;const t=e[Xr];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=hn(e,t.scope_.immer_.useStrictShallowCopy_)}else r=hn(e,!0);return an(r,(e,t)=>{ln(r,e,Mn(t))}),t&&(t.finalized_=!1),r}var Fn=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return n.produce(e,e=>t.call(this,e,...i))}}let n;if("function"!==typeof t&&Qr(6),void 0!==r&&"function"!==typeof r&&Qr(7),tn(e)){const a=Sn(this),i=Pn(e,void 0);let s=!0;try{n=t(i),s=!1}finally{s?wn(a):Nn(a)}return xn(a,r),jn(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===Yr&&(n=void 0),this.autoFreeze_&&fn(n,!0),r){const t=[],a=[];vn("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}Qr(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;const i=this.produce(e,r,(e,t)=>{n=e,a=t});return[i,n,a]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){tn(e)||Qr(8),en(e)&&(e=Dn(e));const t=Sn(this),r=Pn(e,void 0);return r[Xr].isManual_=!0,Nn(t),r}finishDraft(e,t){const r=e&&e[Xr];r&&r.isManual_||Qr(9);const{scope_:n}=r;return xn(n,t),jn(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=vn("Patches").applyPatches_;return en(e)?n(e,t):this.produce(e,e=>n(e,t))}},Bn=Fn.produce;Fn.produceWithPatches.bind(Fn),Fn.setAutoFreeze.bind(Fn),Fn.setUseStrictShallowCopy.bind(Fn),Fn.applyPatches.bind(Fn),Fn.createDraft.bind(Fn),Fn.finishDraft.bind(Fn);var Un="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?qr:qr.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function zn(e,t){function r(){if(t){let r=t(...arguments);if(!r)throw new Error(Pa(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>Gr(t)&&t.type===e,r}var Hn=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?new e(...r[0].concat(this)):new e(...r.concat(this))}};function $n(e){return tn(e)?Bn(e,()=>{}):e}function qn(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var Gn="RTK_autoBatch",Wn=e=>t=>{setTimeout(t,e)},Vn=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new Hn(e);return r&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const r=t(...arguments);let n=!0,a=!1,i=!1;const s=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Wn(10):"callback"===e.type?e.queueNotification:Wn(e.timeout),l=()=>{i=!1,a&&(a=!1,s.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>n&&e());return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{return n=!e?.meta?.[Gn],a=!n,a&&(i||(i=!0,o(l))),r.dispatch(e)}finally{n=!0}}})}}("object"===typeof r?r:void 0)),n};function Kn(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=e??{};let i=new Hn;return t&&(function(e){return"boolean"===typeof e}(t)?i.push(Vr):i.push(Kr(t.extraArgument))),i},{reducer:r,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:s,enhancers:o}=e||{};let l,c;if("function"===typeof r)l=r;else{if(!zr(r))throw new Error(Pa(1));l=$r(r)}c="function"===typeof n?n(t):t();let u=qr;a&&(u=Un({trace:!1,..."object"===typeof a&&a}));const d=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{const a=e(r,n);let i=()=>{throw new Error(Mr(15))};const s={getState:a.getState,dispatch:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,...r)}},o=t.map(e=>e(s));return i=qr(...o)(a.dispatch),{...a,dispatch:i}}}(...c),h=Vn(d);return Hr(l,s,u(..."function"===typeof o?o(h):h()))}function Yn(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Pa(28));if(n in t)throw new Error(Pa(29));return t[n]=r,a},addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}var Jn=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Xn=Symbol.for("rtk-slice-createasyncthunk");function Qn(e,t){return`${e}/${t}`}function Zn(){let{creators:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?.asyncThunk?.[Xn];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(Pa(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Pa(12));if(r in s.sliceCaseReducersByType)throw new Error(Pa(13));return s.sliceCaseReducersByType[r]=t,o},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(s.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},r=[],n]="function"===typeof e.extraReducers?Yn(e.extraReducers):[e.extraReducers],a={...t,...s.sliceCaseReducersByType};return function(e,t){let r,[n,a,i]=Yn(t);if(function(e){return"function"===typeof e}(e))r=()=>$n(e());else{const t=$n(e);r=()=>t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1?arguments[1]:void 0,s=[n[t.type],...a.filter(e=>{let{matcher:r}=e;return r(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===s.filter(e=>!!e).length&&(s=[i]),s.reduce((e,r)=>{if(r){if(en(e)){const n=r(e,t);return void 0===n?e:n}if(tn(e))return Bn(e,e=>r(e,t));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return s.getInitialState=r,s}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}i.forEach(n=>{const i=a[n],s={reducerName:n,type:Qn(r,n),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function(e,t,r){let n,a,{type:i,reducerName:s,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Pa(17));n=t.reducer,a=t.prepare}else n=t;r.addCase(i,n).exposeCaseReducer(s,n).exposeAction(s,a?zn(i,a):zn(i))}(s,i,o):function(e,t,r,n){let{type:a,reducerName:i}=e;if(!n)throw new Error(Pa(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=t,h=n(a,s,d);r.exposeAction(i,h),o&&r.addCase(h.fulfilled,o);l&&r.addCase(h.pending,l);c&&r.addCase(h.rejected,c);u&&r.addMatcher(h.settled,u);r.exposeCaseReducer(i,{fulfilled:o||ra,pending:l||ra,rejected:c||ra,settled:u||ra})}(s,i,o,t)});const c=e=>e,u=new Map,d=new WeakMap;let h;function f(e,t){return h||(h=l()),h(e,t)}function m(){return h||(h=l()),h.getInitialState()}function p(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){let a=e[t];return"undefined"===typeof a&&r&&(a=qn(d,n,m)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const n=qn(u,r,()=>new WeakMap);return qn(n,t,()=>{const n={};for(const[a,i]of Object.entries(e.selectors??{}))n[a]=ea(i,t,()=>qn(d,t,m),r);return n})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const g={name:r,reducer:f,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:m,...p(n),injectInto(e){let{reducerPath:t,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t??n;return e.inject({reducerPath:a,reducer:f},r),{...g,...p(a,!0)}}};return g}}function ea(e,t,r,n){function a(a){let i=t(a);"undefined"===typeof i&&n&&(i=r());for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return e(i,...o)}return a.unwrapped=e,a}var ta=Zn();function ra(){}var na="listener",aa="completed",ia="cancelled",sa=`task-${ia}`,oa=`task-${aa}`,la=`${na}-${ia}`,ca=`${na}-${aa}`,ua=class{constructor(e){this.code=e,this.message=`task ${ia} (reason: ${e})`}name="TaskAbortError";message},da=(e,t)=>{if("function"!==typeof e)throw new TypeError(Pa(32))},ha=()=>{},fa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ha;return e.catch(t),e},ma=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),pa=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ga=e=>{if(e.aborted){const{reason:t}=e;throw new ua(t)}};function ya(e,t){let r=ha;return new Promise((n,a)=>{const i=()=>a(new ua(e.reason));e.aborted?i():(r=ma(e,i),t.finally(()=>r()).then(n,a))}).finally(()=>{r=ha})}var va=e=>t=>fa(ya(e,t).then(t=>(ga(e),t))),ba=e=>{const t=va(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:xa}=Object,wa={},Na="listenerMiddleware",Sa=(e,t)=>(r,n)=>{da(r);const a=new AbortController;var i;i=a,ma(e,()=>pa(i,e.reason));const s=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ua?"cancelled":"rejected",error:r}}finally{t?.()}})(async()=>{ga(e),ga(a.signal);const t=await r({pause:va(a.signal),delay:ba(a.signal),signal:a.signal});return ga(a.signal),t},()=>pa(a,oa));return n?.autoJoin&&t.push(s.catch(ha)),{result:va(e)(s),cancel(){pa(a,sa)}}},_a=(e,t)=>(r,n)=>fa((async(r,n)=>{ga(t);let a=()=>{};const i=[new Promise((t,n)=>{let i=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});a=()=>{i(),n()}})];null!=n&&i.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await ya(t,Promise.race(i));return ga(t),e}finally{a()}})(r,n)),ja=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=zn(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Pa(21));return da(i),{predicate:a,type:t,effect:i}},Ea=xa(e=>{const{type:t,predicate:r,effect:n}=ja(e);return{id:Jn(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Pa(22))}}},{withTypes:()=>Ea}),Aa=(e,t)=>{const{type:r,effect:n,predicate:a}=ja(t);return Array.from(e.values()).find(e=>("string"===typeof r?e.type===r:e.predicate===a)&&e.effect===n)},ka=e=>{e.pending.forEach(e=>{pa(e,la)})},Ca=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Oa=xa(zn(`${Na}/add`),{withTypes:()=>Oa}),Ta=zn(`${Na}/removeAll`),Ra=xa(zn(`${Na}/remove`),{withTypes:()=>Ra}),Ia=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.error(`${Na}/error`,...t)},La=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,{extra:r,onError:n=Ia}=e;da(n);const a=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),t?.cancelActive&&ka(e)}))(Aa(t,e)??Ea(e));xa(a,{withTypes:()=>a});const i=e=>{const r=Aa(t,e);return r&&(r.unsubscribe(),e.cancelActive&&ka(r)),!!r};xa(i,{withTypes:()=>i});const s=async(e,i,s,o)=>{const l=new AbortController,c=_a(a,l.signal),u=[];try{e.pending.add(l),await Promise.resolve(e.effect(i,xa({},s,{getOriginalState:o,condition:(e,t)=>c(e,t).then(Boolean),take:c,delay:ba(l.signal),pause:va(l.signal),extra:r,signal:l.signal,fork:Sa(l.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==l&&(pa(e,la),r.delete(e))})},cancel:()=>{pa(l,la),e.pending.delete(l)},throwIfCancelled:()=>{ga(l.signal)}})))}catch(d){d instanceof ua||Ca(n,d,{raisedBy:"effect"})}finally{await Promise.all(u),pa(l,ca),e.pending.delete(l)}},o=(e=>()=>{e.forEach(ka),e.clear()})(t);return{middleware:e=>r=>l=>{if(!Gr(l))return r(l);if(Oa.match(l))return a(l.payload);if(Ta.match(l))return void o();if(Ra.match(l))return i(l.payload);let c=e.getState();const u=()=>{if(c===wa)throw new Error(Pa(23));return c};let d;try{if(d=r(l),t.size>0){const r=e.getState(),a=Array.from(t.values());for(const t of a){let a=!1;try{a=t.predicate(l,r,c)}catch(h){a=!1,Ca(n,h,{raisedBy:"predicate"})}a&&s(t,l,e,u)}}}finally{c=wa}return d},startListening:a,stopListening:i,clearListeners:o}};Symbol.for("rtk-state-proxy-original");function Pa(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Da(e,t){if(t){var r=Number.parseInt(t,10);if(!wr(r))return null===e||void 0===e?void 0:e[r]}}var Ma=ta({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Fa=Ma.reducer,{createEventEmitter:Ba}=Ma.actions;r(7237);function Ua(e){e()}var za={notify(){},get:()=>[]};function Ha(e,t){let r,n=za,a=0,i=!1;function s(){c.onStateChange&&c.onStateChange()}function o(){a++,r||(r=t?t.addNestedSub(s):e.subscribe(s),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Ua(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){n&&null!==e&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,r&&0===a&&(r(),r=void 0,n.clear(),n=za)}const c={addNestedSub:function(e){o();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:s,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,o())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>n};return c}var $a=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),qa=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),Ga=(()=>$a||qa?t.useLayoutEffect:t.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Wa=Symbol.for("react-redux-context"),Va="undefined"!==typeof globalThis?globalThis:{};function Ka(){if(!t.createContext)return{};const e=Va[Wa]??=new Map;let r=e.get(t.createContext);return r||(r=t.createContext(null),e.set(t.createContext,r)),r}var Ya=Ka();var Ja=function(e){const{children:r,context:n,serverState:a,store:i}=e,s=t.useMemo(()=>{const e=Ha(i);return{store:i,subscription:e,getServerState:a?()=>a:void 0}},[i,a]),o=t.useMemo(()=>i.getState(),[i]);Ga(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,o]);const l=n||Ya;return t.createElement(l.Provider,{value:s},r)};var Xa=Symbol.for("immer-nothing"),Qa=Symbol.for("immer-draftable"),Za=Symbol.for("immer-state");function ei(e){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ti=Object.getPrototypeOf;function ri(e){return!!e&&!!e[Za]}function ni(e){return!!e&&(ii(e)||Array.isArray(e)||!!e[Qa]||!!e.constructor?.[Qa]||ui(e)||di(e))}var ai=Object.prototype.constructor.toString();function ii(e){if(!e||"object"!==typeof e)return!1;const t=ti(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===ai}function si(e,t){0===oi(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function oi(e){const t=e[Za];return t?t.type_:Array.isArray(e)?1:ui(e)?2:di(e)?3:0}function li(e,t){return 2===oi(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ci(e,t,r){const n=oi(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function ui(e){return e instanceof Map}function di(e){return e instanceof Set}function hi(e){return e.copy_||e.base_}function fi(e,t){if(ui(e))return new Map(e);if(di(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=ii(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[Za];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(ti(e),t)}{const t=ti(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function mi(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return gi(e)||ri(e)||!ni(e)||(oi(e)>1&&(e.set=e.add=e.clear=e.delete=pi),Object.freeze(e),t&&Object.entries(e).forEach(e=>{let[t,r]=e;return mi(r,!0)})),e}function pi(){ei(2)}function gi(e){return Object.isFrozen(e)}var yi,vi={};function bi(e){const t=vi[e];return t||ei(0),t}function xi(){return yi}function wi(e,t){t&&(bi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ni(e){Si(e),e.drafts_.forEach(ji),e.drafts_=null}function Si(e){e===yi&&(yi=e.parent_)}function _i(e){return yi={drafts_:[],parent_:yi,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ji(e){const t=e[Za];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Ei(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[Za].modified_&&(Ni(t),ei(4)),ni(e)&&(e=Ai(t,e),t.parent_||Ci(t,e)),t.patches_&&bi("Patches").generateReplacementPatches_(r[Za].base_,e,t.patches_,t.inversePatches_)):e=Ai(t,r,[]),Ni(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Xa?e:void 0}function Ai(e,t,r){if(gi(t))return t;const n=t[Za];if(!n)return si(t,(a,i)=>ki(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Ci(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,i=!1;3===n.type_&&(a=new Set(t),t.clear(),i=!0),si(a,(a,s)=>ki(e,n,t,a,s,r,i)),Ci(e,t,!1),r&&e.patches_&&bi("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function ki(e,t,r,n,a,i,s){if(ri(a)){const s=Ai(e,a,i&&t&&3!==t.type_&&!li(t.assigned_,n)?i.concat(n):void 0);if(ci(r,n,s),!ri(s))return;e.canAutoFreeze_=!1}else s&&r.add(a);if(ni(a)&&!gi(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ai(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||Ci(e,a)}}function Ci(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mi(t,r)}var Oi={get(e,t){if(t===Za)return e;const r=hi(e);if(!li(r,t))return function(e,t,r){const n=Ii(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!ni(n)?n:n===Ri(e.base_,t)?(Pi(e),e.copy_[t]=Di(n,e)):n},has:(e,t)=>t in hi(e),ownKeys:e=>Reflect.ownKeys(hi(e)),set(e,t,r){const n=Ii(hi(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Ri(hi(e),t),a=n?.[Za];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,n)&&(void 0!==r||li(e.base_,t)))return!0;Pi(e),Li(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Ri(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Pi(e),Li(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=hi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){ei(11)},getPrototypeOf:e=>ti(e.base_),setPrototypeOf(){ei(12)}},Ti={};function Ri(e,t){const r=e[Za];return(r?hi(r):e)[t]}function Ii(e,t){if(!(t in e))return;let r=ti(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=ti(r)}}function Li(e){e.modified_||(e.modified_=!0,e.parent_&&Li(e.parent_))}function Pi(e){e.copy_||(e.copy_=fi(e.base_,e.scope_.immer_.useStrictShallowCopy_))}si(Oi,(e,t)=>{Ti[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ti.deleteProperty=function(e,t){return Ti.set.call(this,e,t,void 0)},Ti.set=function(e,t,r){return Oi.set.call(this,e[0],t,r,e[0])};function Di(e,t){const r=ui(e)?bi("MapSet").proxyMap_(e,t):di(e)?bi("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:xi(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Oi;r&&(a=[n],i=Ti);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=s,o}(e,t);return(t?t.scope_:xi()).drafts_.push(r),r}function Mi(e){if(!ni(e)||gi(e))return e;const t=e[Za];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=fi(e,t.scope_.immer_.useStrictShallowCopy_)}else r=fi(e,!0);return si(r,(e,t)=>{ci(r,e,Mi(t))}),t&&(t.finalized_=!1),r}var Fi=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return n.produce(e,e=>t.call(this,e,...i))}}let n;if("function"!==typeof t&&ei(6),void 0!==r&&"function"!==typeof r&&ei(7),ni(e)){const a=_i(this),i=Di(e,void 0);let s=!0;try{n=t(i),s=!1}finally{s?Ni(a):Si(a)}return wi(a,r),Ei(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===Xa&&(n=void 0),this.autoFreeze_&&mi(n,!0),r){const t=[],a=[];bi("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}ei(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;const i=this.produce(e,r,(e,t)=>{n=e,a=t});return[i,n,a]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ni(e)||ei(8),ri(e)&&(e=function(e){ri(e)||ei(10);return Mi(e)}(e));const t=_i(this),r=Di(e,void 0);return r[Za].isManual_=!0,Si(t),r}finishDraft(e,t){const r=e&&e[Za];r&&r.isManual_||ei(9);const{scope_:n}=r;return wi(n,t),Ei(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=bi("Patches").applyPatches_;return ri(e)?n(e,t):this.produce(e,e=>n(e,t))}};Fi.produce,Fi.produceWithPatches.bind(Fi),Fi.setAutoFreeze.bind(Fi),Fi.setUseStrictShallowCopy.bind(Fi),Fi.applyPatches.bind(Fi),Fi.createDraft.bind(Fi),Fi.finishDraft.bind(Fi);var Bi={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ui=ta({name:"tooltip",initialState:{itemInteraction:{click:Bi,hover:Bi},axisInteraction:{click:Bi,hover:Bi},keyboardInteraction:Bi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Dn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:zi,removeTooltipEntrySettings:Hi,setTooltipSettingsState:$i,setActiveMouseOverItemIndex:qi,mouseLeaveItem:Gi,mouseLeaveChart:Wi,setActiveClickItemIndex:Vi,setMouseOverAxisIndex:Ki,setMouseClickAxisIndex:Yi,setSyncInteraction:Ji,setKeyboardInteraction:Xi}=Ui.actions,Qi=Ui.reducer,Zi=ta({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:es,setDataStartEndIndexes:ts,setComputedData:rs}=Zi.actions,ns=Zi.reducer,as=ta({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:is,setLayout:ss,setChartSize:os,setScale:ls}=as.actions,cs=as.reducer;function us(e){if("function"!==typeof e)throw new TypeError(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received "+typeof e)}var ds=e=>Array.isArray(e)?e:[e];function hs(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const r=e.map(e=>"function"===typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var fs="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function ms(){return{s:0,v:void 0,o:null,p:null}}function ps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let a,i=0;function s(){let t=r;const{length:s}=arguments;for(let e=0,r=s;e<r;e++){const r=arguments[e];if("function"===typeof r||"object"===typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=ms(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=ms(),e.set(r,t)):t=n}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),i++,n){const e=a?.deref?.()??a;null!=e&&n(e,l)&&(l=e,0!==i&&i--);a="object"===typeof l&&null!==l||"function"===typeof l?new fs(l):l}return o.s=1,o.v=l,l}return s.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function gs(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const a="function"===typeof e?{memoize:e,memoizeOptions:r}:e,i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n,i=0,s=0,o={},l=t.pop();"object"===typeof l&&(o=l,l=t.pop()),us(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...a,...o},{memoize:u,memoizeOptions:d=[],argsMemoize:h=ps,argsMemoizeOptions:f=[],devModeChecks:m={}}=c,p=ds(d),g=ds(f),y=hs(t),v=u(function(){return i++,l.apply(null,arguments)},...p);const b=h(function(){s++;const e=function(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}(y,arguments);return n=v.apply(null,e),n},...g);return Object.assign(b,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>n,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:u,argsMemoize:h})};return Object.assign(i,{withTypes:()=>i}),i}var ys=gs(ps),vs=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ys;!function(e){if("object"!==typeof e)throw new TypeError(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received "+typeof e)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e),n=t(r.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t,n)=>(e[r[n]]=t,e),{})});return n},{withTypes:()=>vs}),bs=r(8443),xs=(0,t.createContext)(null),ws=e=>e,Ns=()=>{var e=(0,t.useContext)(xs);return e?e.store.dispatch:ws},Ss=()=>{},_s=()=>Ss,js=(e,t)=>e===t;function Es(e){var r=(0,t.useContext)(xs);return(0,bs.useSyncExternalStoreWithSelector)(r?r.subscription.addNestedSub:_s,r?r.store.getState:Ss,r?r.store.getState:Ss,r?e:Ss,js)}var As=r(3821),ks=r.n(As),Cs=e=>e.legend.settings;ys([e=>e.legend.payload,Cs],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?ks()(n,r):n});function Os(e,t){if((a=e.length)>1)for(var r,n,a,i=1,s=e[t[0]],o=s.length;i<a;++i)for(n=s,s=e[t[i]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}Array.prototype.slice;function Ts(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Rs(e){return function(){return e}}function Is(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Ls(e,t){return e[t]}function Ps(e){const t=[];return t.key=e,t}function Ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(r),!0).forEach(function(t){Fs(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ds(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Fs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bs=Math.PI/180,Us=e=>180*e/Math.PI,zs=(e,t,r,n)=>({x:e+Math.cos(-Bs*n)*r,y:t+Math.sin(-Bs*n)*r}),Hs=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},$s=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,s=((e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)})({x:r,y:n},{x:a,y:i});if(s<=0)return{radius:s,angle:0};var o=(r-a)/s,l=Math.acos(o);return n>i&&(l=2*Math.PI-l),{radius:s,angle:Us(l),angleInRadian:l}},qs=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360);return e+360*Math.min(a,i)},Gs=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=$s({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(a<s||a>o)return null;if(0===a)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-360*i,endAngle:r-360*i}})(t),d=i;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;l=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;l=d>=u&&d<=c}return l?Ms(Ms({},t),{},{radius:a,angle:qs(d,t)}):null};function Ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(r),!0).forEach(function(t){Ks(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ks(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ys(e,t,r){return Or(e)||Or(t)?r:_r(t)?br()(e,t,r):"function"===typeof t?t(e):r}var Js=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Xs=1e-4,Qs={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,s=0;s<t;++s){var o=wr(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,i=0,s=e[0].length;i<s;++i){for(a=r=0;r<n;++r)a+=e[r][i][1]||0;if(a)for(r=0;r<n;++r)e[r][i][1]/=a}Os(e,t)}},none:Os,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],i=a.length;n<i;++n){for(var s=0,o=0;s<r;++s)o+=e[s][n][1]||0;a[n][1]+=a[n][0]=-o/2}Os(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,i=0,s=1;s<n;++s){for(var o=0,l=0,c=0;o<a;++o){for(var u=e[t[o]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,f=0;f<o;++f){var m=e[t[f]];h+=(m[s][1]||0)-(m[s-1][1]||0)}l+=d,c+=h*d}r[s-1][1]+=r[s-1][0]=i,l&&(i-=c/l)}r[s-1][1]+=r[s-1][0]=i,Os(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var s=wr(e[i][r][1])?e[i][r][0]:e[i][r][1];s>=0?(e[i][r][0]=a,e[i][r][1]=a+s,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}}},Zs=(e,t,r)=>{var n=Qs[r],a=function(){var e=Rs([]),t=Is,r=Os,n=Ls;function a(a){var i,s,o=Array.from(e.apply(this,arguments),Ps),l=o.length,c=-1;for(const e of a)for(i=0,++c;i<l;++i)(o[i][c]=[0,+n(e,o[i].key,c,a)]).data=e;for(i=0,s=Ts(t(o));i<l;++i)o[s[i]].index=i;return r(o,s),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:Rs(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"===typeof e?e:Rs(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?Is:"function"===typeof e?e:Rs(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?Os:e,a):r},a}().keys(t).value((e,t)=>+Ys(e,t,0)).order(Is).offset(n);return a(e)};function eo(e){return null==e?void 0:String(e)}var to=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:s}=e;if("category"===t.type)return r[s]?r[s].coordinate+n:null;var o=Ys(i,t.dataKey,t.scale.domain()[s]);return Or(o)?null:t.scale(o)-a/2+n},ro=(e,t,r)=>{var n;if(null!=e)return n=Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:s}=i,o=s.reduce((e,n)=>{var a=(e=>{var t=e.flat(2).filter(Sr);return[Math.min(...t),Math.max(...t)]})(n.slice(t,r+1));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]),[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]},no=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ao=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,io=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=ks()(t,e=>e.coordinate),i=1/0,s=1,o=a.length;s<o;s++){var l=a[s],c=a[s-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function so(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return Vs(Vs({},t),{},{dataKey:r,payload:n,value:a,name:i})}function oo(e,t){return e?String(e):"string"===typeof t?t:void 0}var lo=e=>e.layout.width,co=e=>e.layout.height,uo=e=>e.layout.scale,ho=e=>e.layout.margin,fo=ys(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),mo=ys(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),po="data-recharts-item-index",go="data-recharts-item-data-key";function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(r),!0).forEach(function(t){bo(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xo=ys([lo,co,ho,e=>e.brush.height,fo,mo,Cs,e=>e.legend.size],(e,t,r,n,a,i,s,o)=>{var l=i.reduce((e,t)=>{var{orientation:r}=t;if(!t.mirror&&!t.hide){var n="number"===typeof t.width?t.width:60;return vo(vo({},e),{},{[r]:e[r]+n})}return e},{left:r.left||0,right:r.right||0}),c=a.reduce((e,t)=>{var{orientation:r}=t;return t.mirror||t.hide?e:vo(vo({},e),{},{[r]:br()(e,"".concat(r))+t.height})},{top:r.top||0,bottom:r.bottom||0}),u=vo(vo({},c),l),d=u.bottom;u.bottom+=n,u=((e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:s,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===s)&&"center"!==i&&Sr(e[i]))return Vs(Vs({},e),{},{[i]:e[i]+(n||0)});if(("horizontal"===o||"vertical"===o&&"center"===i)&&"middle"!==s&&Sr(e[s]))return Vs(Vs({},e),{},{[s]:e[s]+(a||0)})}return e})(u,s,o);var h=e-u.left-u.right,f=t-u.top-u.bottom;return vo(vo({brushBottom:d},u),{},{width:Math.max(h,0),height:Math.max(f,0)})}),wo=ys(xo,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),No=ys(lo,co,(e,t)=>({x:0,y:0,width:e,height:t})),So=(0,t.createContext)(null),_o=()=>null!=(0,t.useContext)(So),jo=e=>e.brush,Eo=ys([jo,xo,ho],(e,t,r)=>({height:e.height,x:Sr(e.x)?e.x:t.left,y:Sr(e.y)?e.y:t.top+t.height+t.brushBottom-((null===r||void 0===r?void 0:r.bottom)||0),width:Sr(e.width)?e.width:t.width})),Ao=()=>{var e,t=_o(),r=Es(wo),n=Es(Eo),a=null===(e=Es(jo))||void 0===e?void 0:e.padding;return t&&n&&a?{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}:r},ko={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Co=e=>e.layout.layoutType,Oo=()=>Es(Co),To=r(9859),Ro=r.n(To);function Io(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Lo(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class Po extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(Do(this,e))}has(e){return super.has(Do(this,e))}set(e,t){return super.set(Mo(this,e),t)}delete(e){return super.delete(Fo(this,e))}}Set;function Do(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):t}function Mo(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):(r.set(a,t),t)}function Fo(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)&&(t=r.get(a),r.delete(a)),t}function Bo(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Uo=Symbol("implicit");function zo(){var e=new Po,t=[],r=[],n=Uo;function a(a){let i=e.get(a);if(void 0===i){if(n!==Uo)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Po;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return zo(t,r).unknown(n)},Io.apply(a,arguments),a}function Ho(){var e,t,r=zo().unknown(void 0),n=r.domain,a=r.range,i=0,s=1,o=!1,l=0,c=0,u=.5;function d(){var r=n().length,d=s<i,h=d?s:i,f=d?i:s;e=(f-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(f-h-e*(r-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),i=new Array(a);++n<a;)i[n]=e+n*r;return i}(r).map(function(t){return h+e*t});return a(d?m.reverse():m)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([i,s]=e,i=+i,s=+s,d()):[i,s]},r.rangeRound=function(e){return[i,s]=e,i=+i,s=+s,o=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,d()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return Ho(n(),[i,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},Io.apply(d(),arguments)}function $o(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $o(t())},e}function qo(){return $o(Ho.apply(null,arguments).paddingInner(1))}const Go=Math.sqrt(50),Wo=Math.sqrt(10),Vo=Math.sqrt(2);function Ko(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=Go?10:i>=Wo?5:i>=Vo?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?Ko(e,t,2*r):[o,l,c]}function Yo(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,i,s]=n?Ko(t,e,r):Ko(e,t,r);if(!(i>=a))return[];const o=i-a+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(i-c)/-s;else for(let c=0;c<o;++c)l[c]=(i-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(a+c)/-s;else for(let c=0;c<o;++c)l[c]=(a+c)*s;return l}function Jo(e,t,r){return Ko(e=+e,t=+t,r=+r)[2]}function Xo(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?Jo(t,e,r):Jo(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Qo(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zo(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function el(e){let t,r,n;function a(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(n,n))return i;do{const t=a+i>>>1;r(e[t],n)<0?a=t+1:i=t}while(a<i)}return a}return 2!==e.length?(t=Qo,r=(t,r)=>Qo(e(t),r),n=(t,r)=>e(t)-r):(t=e===Qo||e===Zo?e:tl,r=e,n=e),{left:a,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=a(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(n,n))return i;do{const t=a+i>>>1;r(e[t],n)<=0?a=t+1:i=t}while(a<i)}return a}}}function tl(){return 0}function rl(e){return null===e?NaN:+e}const nl=el(Qo),al=nl.right,il=(nl.left,el(rl).center,al);function sl(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ol(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ll(){}var cl=.7,ul=1/cl,dl="\\s*([+-]?\\d+)\\s*",hl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ml=/^#([0-9a-f]{3,8})$/,pl=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),gl=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),yl=new RegExp(`^rgba\\(${dl},${dl},${dl},${hl}\\)$`),vl=new RegExp(`^rgba\\(${fl},${fl},${fl},${hl}\\)$`),bl=new RegExp(`^hsl\\(${hl},${fl},${fl}\\)$`),xl=new RegExp(`^hsla\\(${hl},${fl},${fl},${hl}\\)$`),wl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Nl(){return this.rgb().formatHex()}function Sl(){return this.rgb().formatRgb()}function _l(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ml.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?jl(t):3===r?new kl(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?El(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?El(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=pl.exec(e))?new kl(t[1],t[2],t[3],1):(t=gl.exec(e))?new kl(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=yl.exec(e))?El(t[1],t[2],t[3],t[4]):(t=vl.exec(e))?El(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=bl.exec(e))?Ll(t[1],t[2]/100,t[3]/100,1):(t=xl.exec(e))?Ll(t[1],t[2]/100,t[3]/100,t[4]):wl.hasOwnProperty(e)?jl(wl[e]):"transparent"===e?new kl(NaN,NaN,NaN,0):null}function jl(e){return new kl(e>>16&255,e>>8&255,255&e,1)}function El(e,t,r,n){return n<=0&&(e=t=r=NaN),new kl(e,t,r,n)}function Al(e,t,r,n){return 1===arguments.length?function(e){return e instanceof ll||(e=_l(e)),e?new kl((e=e.rgb()).r,e.g,e.b,e.opacity):new kl}(e):new kl(e,t,r,null==n?1:n)}function kl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function Cl(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}`}function Ol(){const e=Tl(this.opacity);return`${1===e?"rgb(":"rgba("}${Rl(this.r)}, ${Rl(this.g)}, ${Rl(this.b)}${1===e?")":`, ${e})`}`}function Tl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Il(e){return((e=Rl(e))<16?"0":"")+e.toString(16)}function Ll(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Dl(e,t,r,n)}function Pl(e){if(e instanceof Dl)return new Dl(e.h,e.s,e.l,e.opacity);if(e instanceof ll||(e=_l(e)),!e)return new Dl;if(e instanceof Dl)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,l=(i+a)/2;return o?(s=t===i?(r-n)/o+6*(r<n):r===i?(n-t)/o+2:(t-r)/o+4,o/=l<.5?i+a:2-i-a,s*=60):o=l>0&&l<1?0:s,new Dl(s,o,l,e.opacity)}function Dl(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function Ml(e){return(e=(e||0)%360)<0?e+360:e}function Fl(e){return Math.max(0,Math.min(1,e||0))}function Bl(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function Ul(e,t,r,n,a){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*r+(1+3*e+3*i-3*s)*n+s*a)/6}sl(ll,_l,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Nl,formatHex:Nl,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Pl(this).formatHsl()},formatRgb:Sl,toString:Sl}),sl(kl,Al,ol(ll,{brighter(e){return e=null==e?ul:Math.pow(ul,e),new kl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?cl:Math.pow(cl,e),new kl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kl(Rl(this.r),Rl(this.g),Rl(this.b),Tl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cl,formatHex:Cl,formatHex8:function(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}${Il(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ol,toString:Ol})),sl(Dl,function(e,t,r,n){return 1===arguments.length?Pl(e):new Dl(e,t,r,null==n?1:n)},ol(ll,{brighter(e){return e=null==e?ul:Math.pow(ul,e),new Dl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?cl:Math.pow(cl,e),new Dl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new kl(Bl(e>=240?e-240:e+120,a,n),Bl(e,a,n),Bl(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Dl(Ml(this.h),Fl(this.s),Fl(this.l),Tl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Tl(this.opacity);return`${1===e?"hsl(":"hsla("}${Ml(this.h)}, ${100*Fl(this.s)}%, ${100*Fl(this.l)}%${1===e?")":`, ${e})`}`}}));const zl=e=>()=>e;function Hl(e,t){return function(r){return e+r*t}}function $l(e){return 1===(e=+e)?ql:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):zl(isNaN(t)?r:t)}}function ql(e,t){var r=t-e;return r?Hl(e,r):zl(isNaN(e)?t:e)}const Gl=function e(t){var r=$l(t);function n(e,t){var n=r((e=Al(e)).r,(t=Al(t)).r),a=r(e.g,t.g),i=r(e.b,t.b),s=ql(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=e,n}(1);function Wl(e){return function(t){var r,n,a=t.length,i=new Array(a),s=new Array(a),o=new Array(a);for(r=0;r<a;++r)n=Al(t[r]),i[r]=n.r||0,s[r]=n.g||0,o[r]=n.b||0;return i=e(i),s=e(s),o=e(o),n.opacity=1,function(e){return n.r=i(e),n.g=s(e),n.b=o(e),n+""}}}Wl(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],i=e[n+1],s=n>0?e[n-1]:2*a-i,o=n<t-1?e[n+2]:2*i-a;return Ul((r-n/t)*t,s,a,i,o)}}),Wl(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],i=e[n%t],s=e[(n+1)%t],o=e[(n+2)%t];return Ul((r-n/t)*t,a,i,s,o)}});function Vl(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,i=new Array(a),s=new Array(n);for(r=0;r<a;++r)i[r]=tc(e[r],t[r]);for(;r<n;++r)s[r]=t[r];return function(e){for(r=0;r<a;++r)s[r]=i[r](e);return s}}function Kl(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Yl(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Jl(e,t){var r,n={},a={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=tc(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var Xl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ql=new RegExp(Xl.source,"g");function Zl(e,t){var r,n,a,i=Xl.lastIndex=Ql.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(r=Xl.exec(e))&&(n=Ql.exec(t));)(a=n.index)>i&&(a=t.slice(i,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,l.push({i:s,x:Yl(r,n)})),i=Ql.lastIndex;return i<t.length&&(a=t.slice(i),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function ec(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(r=0;r<n;++r)a[r]=e[r]*(1-i)+t[r]*i;return a}}function tc(e,t){var r,n=typeof t;return null==t||"boolean"===n?zl(t):("number"===n?Yl:"string"===n?(r=_l(t))?(t=r,Gl):Zl:t instanceof _l?Gl:t instanceof Date?Kl:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?ec:Array.isArray(t)?Vl:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Jl:Yl)(e,t)}function rc(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function nc(e){return+e}var ac=[0,1];function ic(e){return e}function sc(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function oc(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=sc(a,n),i=r(s,i)):(n=sc(n,a),i=r(i,s)),function(e){return i(n(e))}}function lc(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=sc(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(t){var r=il(e,t,1,n)-1;return i[r](a[r](t))}}function cc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uc(){var e,t,r,n,a,i,s=ac,o=ac,l=tc,c=ic;function u(){var e=Math.min(s.length,o.length);return c!==ic&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(s[0],s[e-1])),n=e>2?lc:oc,a=i=null,d}function d(t){return null==t||isNaN(t=+t)?r:(a||(a=n(s.map(e),o,l)))(e(c(t)))}return d.invert=function(r){return c(t((i||(i=n(o,s.map(e),Yl)))(r)))},d.domain=function(e){return arguments.length?(s=Array.from(e,nc),u()):s.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=rc,u()},d.clamp=function(e){return arguments.length?(c=!!e||ic,u()):c!==ic},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function dc(){return uc()(ic,ic)}var hc,fc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mc(e){if(!(t=fc.exec(e)))throw new Error("invalid format: "+e);var t;return new pc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function pc(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function gc(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function yc(e){return(e=gc(Math.abs(e)))?e[1]:NaN}function vc(e,t){var r=gc(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}mc.prototype=pc.prototype,pc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const bc={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vc(100*e,t),r:vc,s:function(e,t){var r=gc(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(hc=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+gc(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xc(e){return e}var wc,Nc,Sc,_c=Array.prototype.map,jc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Ec(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?xc:(t=_c.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,i=[],s=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),i.push(e.substring(a-=o,a+o)),!((l+=o+1)>n));)o=t[s=(s+1)%t.length];return i.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?xc:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(_c.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=mc(e)).fill,r=e.align,d=e.sign,h=e.symbol,f=e.zero,m=e.width,p=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(p=!0,v="g"):bc[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===t&&"="===r)&&(f=!0,t="0",r="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===h?i:/[%p]/.test(v)?l:"",w=bc[v],N=/[defgprs%]/.test(v);function S(e){var a,i,l,h=b,S=x;if("c"===v)S=w(e)+S,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==d&&(_=!1),h=(_?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===v?jc[8+hc/3]:"")+S+(_&&"("===d?")":""),N)for(a=-1,i=e.length;++a<i;)if(48>(l=e.charCodeAt(a))||l>57){S=(46===l?s+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}p&&!f&&(e=n(e,1/0));var j=h.length+e.length+S.length,E=j<m?new Array(m-j+1).join(t):"";switch(p&&f&&(e=n(E+e,E.length?m-S.length:1/0),E=""),r){case"<":e=h+e+S+E;break;case"=":e=h+E+e+S;break;case"^":e=E.slice(0,j=E.length>>1)+h+e+S+E.slice(j);break;default:e=E+h+e+S}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var r=d(((e=mc(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(yc(t)/3))),a=Math.pow(10,-n),i=jc[8+n/3];return function(e){return r(a*e)+i}}}}function Ac(e,t,r,n){var a,i=Xo(e,t,r);switch((n=mc(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(yc(t)/3)))-yc(Math.abs(e)))}(i,s))||(n.precision=a),Sc(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yc(t)-yc(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-yc(Math.abs(e)))}(i))||(n.precision=a-2*("%"===n.type))}return Nc(n)}function kc(e){var t=e.domain;return e.ticks=function(e){var r=t();return Yo(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return Ac(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,i=t(),s=0,o=i.length-1,l=i[s],c=i[o],u=10;for(c<l&&(a=l,l=c,c=a,a=s,s=o,o=a);u-- >0;){if((a=Jo(l,c,r))===n)return i[s]=l,i[o]=c,t(i);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function Cc(){var e=dc();return e.copy=function(){return cc(e,Cc())},Io.apply(e,arguments),kc(e)}function Oc(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,nc),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Oc(e).unknown(t)},e=arguments.length?Array.from(e,nc):[0,1],kc(r)}function Tc(e,t){var r,n=0,a=(e=e.slice()).length-1,i=e[n],s=e[a];return s<i&&(r=n,n=a,a=r,r=i,i=s,s=r),e[n]=t.floor(i),e[a]=t.ceil(s),e}function Rc(e){return Math.log(e)}function Ic(e){return Math.exp(e)}function Lc(e){return-Math.log(-e)}function Pc(e){return-Math.exp(-e)}function Dc(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Mc(e){return(t,r)=>-e(-t,r)}function Fc(e){const t=e(Rc,Ic),r=t.domain;let n,a,i=10;function s(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),a=function(e){return 10===e?Dc:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),r()[0]<0?(n=Mc(n),a=Mc(a),e(Lc,Pc)):e(Rc,Ic),t}return t.base=function(e){return arguments.length?(i=+e,s()):i},t.domain=function(e){return arguments.length?(r(e),s()):r()},t.ticks=e=>{const t=r();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let c,u,d=n(s),h=n(o);const f=null==e?10:+e;let m=[];if(!(i%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<i;++c)if(u=d<0?c/a(-d):c*a(d),!(u<s)){if(u>o)break;m.push(u)}}else for(;d<=h;++d)for(c=i-1;c>=1;--c)if(u=d>0?c/a(-d):c*a(d),!(u<s)){if(u>o)break;m.push(u)}2*m.length<f&&(m=Yo(s,o,f))}else m=Yo(d,h,Math.min(h-d,f)).map(a);return l?m.reverse():m},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===i?"s":","),"function"!==typeof r&&(i%1||null!=(r=mc(r)).precision||(r.trim=!0),r=Nc(r)),e===1/0)return r;const s=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*i<i-.5&&(t*=i),t<=s?r(e):""}},t.nice=()=>r(Tc(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function Bc(){const e=Fc(uc()).domain([1,10]);return e.copy=()=>cc(e,Bc()).base(e.base()),Io.apply(e,arguments),e}function Uc(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zc(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Hc(e){var t=1,r=e(Uc(t),zc(t));return r.constant=function(r){return arguments.length?e(Uc(t=+r),zc(t)):t},kc(r)}function $c(){var e=Hc(uc());return e.copy=function(){return cc(e,$c()).constant(e.constant())},Io.apply(e,arguments)}function qc(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Gc(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Wc(e){return e<0?-e*e:e*e}function Vc(e){var t=e(ic,ic),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(ic,ic):.5===r?e(Gc,Wc):e(qc(r),qc(1/r)):r},kc(t)}function Kc(){var e=Vc(uc());return e.copy=function(){return cc(e,Kc()).exponent(e.exponent())},Io.apply(e,arguments),e}function Yc(){return Kc.apply(null,arguments).exponent(.5)}function Jc(e){return Math.sign(e)*e*e}function Xc(){var e,t=dc(),r=[0,1],n=!1;function a(r){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(a)?e:n?Math.round(a):a}return a.invert=function(e){return t.invert(Jc(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((r=Array.from(e,nc)).map(Jc)),a):r.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(n=!!e,a):n},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Xc(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},Io.apply(a,arguments),kc(a)}function Qc(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function Zc(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function eu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qo;if(e===Qo)return tu;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function tu(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function ru(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?tu:eu(a);n>r;){if(n-r>600){const i=n-r+1,s=t-r+1,o=Math.log(i),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(i-l)/i)*(s-i/2<0?-1:1);ru(e,t,Math.max(r,Math.floor(t-s*l/i+c)),Math.min(n,Math.floor(t+(i-s)*l/i+c)),a)}const i=e[t];let s=r,o=n;for(nu(e,r,t),a(e[n],i)>0&&nu(e,r,n);s<o;){for(nu(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}0===a(e[r],i)?nu(e,r,o):(++o,nu(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function nu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function au(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return Zc(e);if(t>=1)return Qc(e);var n,a=(n-1)*t,i=Math.floor(a),s=Qc(ru(e,i).subarray(0,i+1));return s+(Zc(e.subarray(i+1))-s)*(a-i)}}function iu(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rl;if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e);return s+(+r(e[i+1],i+1,e)-s)*(a-i)}}function su(){var e,t=[],r=[],n=[];function a(){var e=0,a=Math.max(1,r.length);for(n=new Array(a-1);++e<a;)n[e-1]=iu(t,e/a);return i}function i(t){return null==t||isNaN(t=+t)?e:r[il(n,t)]}return i.invertExtent=function(e){var a=r.indexOf(e);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(Qo),a()},i.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return n.slice()},i.copy=function(){return su().domain(t).range(r).unknown(e)},Io.apply(i,arguments)}function ou(){var e,t=0,r=1,n=1,a=[.5],i=[0,1];function s(t){return null!=t&&t<=t?i[il(a,t,0,n)]:e}function o(){var e=-1;for(a=new Array(n);++e<n;)a[e]=((e+1)*r-(e-n)*t)/(n+1);return s}return s.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,o()):[t,r]},s.range=function(e){return arguments.length?(n=(i=Array.from(e)).length-1,o()):i.slice()},s.invertExtent=function(e){var s=i.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,a[0]]:s>=n?[a[n-1],r]:[a[s-1],a[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return a.slice()},s.copy=function(){return ou().domain([t,r]).range(i).unknown(e)},Io.apply(kc(s),arguments)}function lu(){var e,t=[.5],r=[0,1],n=1;function a(a){return null!=a&&a<=a?r[il(t,a,0,n)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return lu().domain(t).range(r).unknown(e)},Io.apply(a,arguments)}wc=Ec({thousands:",",grouping:[3],currency:["$",""]}),Nc=wc.format,Sc=wc.formatPrefix;const cu=1e3,uu=6e4,du=36e5,hu=864e5,fu=6048e5,mu=2592e6,pu=31536e6,gu=new Date,yu=new Date;function vu(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,i)=>{const s=[];if(r=a.ceil(r),i=null==i?1:Math.floor(i),!(r<n)||!(i>0))return s;let o;do{s.push(o=new Date(+r)),t(r,i),e(r)}while(o<r&&r<n);return s},a.filter=r=>vu(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(gu.setTime(+t),yu.setTime(+n),e(gu),e(yu),Math.floor(r(gu,yu))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const bu=vu(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bu.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?vu(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):bu:null);bu.range;const xu=vu(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*cu)},(e,t)=>(t-e)/cu,e=>e.getUTCSeconds()),wu=(xu.range,vu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cu)},(e,t)=>{e.setTime(+e+t*uu)},(e,t)=>(t-e)/uu,e=>e.getMinutes())),Nu=(wu.range,vu(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*uu)},(e,t)=>(t-e)/uu,e=>e.getUTCMinutes())),Su=(Nu.range,vu(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cu-e.getMinutes()*uu)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getHours())),_u=(Su.range,vu(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getUTCHours())),ju=(_u.range,vu(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uu)/hu,e=>e.getDate()-1)),Eu=(ju.range,vu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hu,e=>e.getUTCDate()-1)),Au=(Eu.range,vu(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hu,e=>Math.floor(e/hu)));Au.range;function ku(e){return vu(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uu)/fu)}const Cu=ku(0),Ou=ku(1),Tu=ku(2),Ru=ku(3),Iu=ku(4),Lu=ku(5),Pu=ku(6);Cu.range,Ou.range,Tu.range,Ru.range,Iu.range,Lu.range,Pu.range;function Du(e){return vu(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/fu)}const Mu=Du(0),Fu=Du(1),Bu=Du(2),Uu=Du(3),zu=Du(4),Hu=Du(5),$u=Du(6),qu=(Mu.range,Fu.range,Bu.range,Uu.range,zu.range,Hu.range,$u.range,vu(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Gu=(qu.range,vu(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Wu=(Gu.range,vu(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Wu.every=e=>isFinite(e=Math.floor(e))&&e>0?vu(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null;Wu.range;const Vu=vu(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Vu.every=e=>isFinite(e=Math.floor(e))&&e>0?vu(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null;Vu.range;function Ku(e,t,r,n,a,i){const s=[[xu,1,cu],[xu,5,5e3],[xu,15,15e3],[xu,30,3e4],[i,1,uu],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,du],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,hu],[n,2,1728e5],[r,1,fu],[t,1,mu],[t,3,7776e6],[e,1,pu]];function o(t,r,n){const a=Math.abs(r-t)/n,i=el(e=>{let[,,t]=e;return t}).right(s,a);if(i===s.length)return e.every(Xo(t/pu,r/pu,n));if(0===i)return bu.every(Math.max(Xo(t,r,n),1));const[o,l]=s[a/s[i-1][2]<s[i][2]/a?i-1:i];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"===typeof r.range?r:o(e,t,r),i=a?a.range(e,+t+1):[];return n?i.reverse():i},o]}const[Yu,Ju]=Ku(Vu,Gu,Mu,Au,_u,Nu),[Xu,Qu]=Ku(Wu,qu,Cu,ju,Su,wu);function Zu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ed(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function td(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var rd,nd,ad,id={"-":"",_:" ",0:"0"},sd=/^\s*\d+/,od=/^%/,ld=/[\\^$*+?|[\]().{}]/g;function cd(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function ud(e){return e.replace(ld,"\\$&")}function dd(e){return new RegExp("^(?:"+e.map(ud).join("|")+")","i")}function hd(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function fd(e,t,r){var n=sd.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function md(e,t,r){var n=sd.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function pd(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function gd(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function yd(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function vd(e,t,r){var n=sd.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function bd(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function xd(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function wd(e,t,r){var n=sd.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function Nd(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Sd(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function _d(e,t,r){var n=sd.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function jd(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Ed(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Ad(e,t,r){var n=sd.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function kd(e,t,r){var n=sd.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Cd(e,t,r){var n=sd.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Od(e,t,r){var n=od.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Td(e,t,r){var n=sd.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Rd(e,t,r){var n=sd.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Id(e,t){return cd(e.getDate(),t,2)}function Ld(e,t){return cd(e.getHours(),t,2)}function Pd(e,t){return cd(e.getHours()%12||12,t,2)}function Dd(e,t){return cd(1+ju.count(Wu(e),e),t,3)}function Md(e,t){return cd(e.getMilliseconds(),t,3)}function Fd(e,t){return Md(e,t)+"000"}function Bd(e,t){return cd(e.getMonth()+1,t,2)}function Ud(e,t){return cd(e.getMinutes(),t,2)}function zd(e,t){return cd(e.getSeconds(),t,2)}function Hd(e){var t=e.getDay();return 0===t?7:t}function $d(e,t){return cd(Cu.count(Wu(e)-1,e),t,2)}function qd(e){var t=e.getDay();return t>=4||0===t?Iu(e):Iu.ceil(e)}function Gd(e,t){return e=qd(e),cd(Iu.count(Wu(e),e)+(4===Wu(e).getDay()),t,2)}function Wd(e){return e.getDay()}function Vd(e,t){return cd(Ou.count(Wu(e)-1,e),t,2)}function Kd(e,t){return cd(e.getFullYear()%100,t,2)}function Yd(e,t){return cd((e=qd(e)).getFullYear()%100,t,2)}function Jd(e,t){return cd(e.getFullYear()%1e4,t,4)}function Xd(e,t){var r=e.getDay();return cd((e=r>=4||0===r?Iu(e):Iu.ceil(e)).getFullYear()%1e4,t,4)}function Qd(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+cd(t/60|0,"0",2)+cd(t%60,"0",2)}function Zd(e,t){return cd(e.getUTCDate(),t,2)}function eh(e,t){return cd(e.getUTCHours(),t,2)}function th(e,t){return cd(e.getUTCHours()%12||12,t,2)}function rh(e,t){return cd(1+Eu.count(Vu(e),e),t,3)}function nh(e,t){return cd(e.getUTCMilliseconds(),t,3)}function ah(e,t){return nh(e,t)+"000"}function ih(e,t){return cd(e.getUTCMonth()+1,t,2)}function sh(e,t){return cd(e.getUTCMinutes(),t,2)}function oh(e,t){return cd(e.getUTCSeconds(),t,2)}function lh(e){var t=e.getUTCDay();return 0===t?7:t}function ch(e,t){return cd(Mu.count(Vu(e)-1,e),t,2)}function uh(e){var t=e.getUTCDay();return t>=4||0===t?zu(e):zu.ceil(e)}function dh(e,t){return e=uh(e),cd(zu.count(Vu(e),e)+(4===Vu(e).getUTCDay()),t,2)}function hh(e){return e.getUTCDay()}function fh(e,t){return cd(Fu.count(Vu(e)-1,e),t,2)}function mh(e,t){return cd(e.getUTCFullYear()%100,t,2)}function ph(e,t){return cd((e=uh(e)).getUTCFullYear()%100,t,2)}function gh(e,t){return cd(e.getUTCFullYear()%1e4,t,4)}function yh(e,t){var r=e.getUTCDay();return cd((e=r>=4||0===r?zu(e):zu.ceil(e)).getUTCFullYear()%1e4,t,4)}function vh(){return"+0000"}function bh(){return"%"}function xh(e){return+e}function wh(e){return Math.floor(+e/1e3)}function Nh(e){return new Date(e)}function Sh(e){return e instanceof Date?+e:+new Date(+e)}function _h(e,t,r,n,a,i,s,o,l,c){var u=dc(),d=u.invert,h=u.domain,f=c(".%L"),m=c(":%S"),p=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(l(e)<e?f:o(e)<e?m:s(e)<e?p:i(e)<e?g:n(e)<e?a(e)<e?y:v:r(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,Sh)):h().map(Nh)},u.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var r=h();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(Tc(r,e)):u},u.copy=function(){return cc(u,_h(e,t,r,n,a,i,s,o,l,c))},u}function jh(){return Io.apply(_h(Xu,Qu,Wu,qu,Cu,ju,Su,wu,xu,nd).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Eh(){return Io.apply(_h(Yu,Ju,Vu,Gu,Mu,Eu,_u,Nu,xu,ad).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ah(){var e,t,r,n,a,i=0,s=1,o=ic,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([i,s]=a,e=n(i=+i),t=n(s=+s),r=e===t?0:1/(t-e),c):[i,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(tc),c.rangeRound=u(rc),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(i),t=a(s),r=e===t?0:1/(t-e),c}}function kh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ch(){var e=kc(Ah()(ic));return e.copy=function(){return kh(e,Ch())},Lo.apply(e,arguments)}function Oh(){var e=Fc(Ah()).domain([1,10]);return e.copy=function(){return kh(e,Oh()).base(e.base())},Lo.apply(e,arguments)}function Th(){var e=Hc(Ah());return e.copy=function(){return kh(e,Th()).constant(e.constant())},Lo.apply(e,arguments)}function Rh(){var e=Vc(Ah());return e.copy=function(){return kh(e,Rh()).exponent(e.exponent())},Lo.apply(e,arguments)}function Ih(){return Rh.apply(null,arguments).exponent(.5)}function Lh(){var e=[],t=ic;function r(r){if(null!=r&&!isNaN(r=+r))return t((il(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(Qo),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>au(e,n/t))},r.copy=function(){return Lh(t).domain(e)},Lo.apply(r,arguments)}function Ph(){var e,t,r,n,a,i,s,o=0,l=.5,c=1,u=1,d=ic,h=!1;function f(e){return isNaN(e=+e)?s:(e=.5+((e=+i(e))-t)*(u*e<u*t?n:a),d(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,d=function(e,t){void 0===t&&(t=e,e=tc);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return i[t](e-t)}}(e,[r,n,a]),f):[d(0),d(.5),d(1)]}}return f.domain=function(s){return arguments.length?([o,l,c]=s,e=i(o=+o),t=i(l=+l),r=i(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),u=t<e?-1:1,f):[o,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=m(tc),f.rangeRound=m(rc),f.unknown=function(e){return arguments.length?(s=e,f):s},function(s){return i=s,e=s(o),t=s(l),r=s(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),u=t<e?-1:1,f}}function Dh(){var e=kc(Ph()(ic));return e.copy=function(){return kh(e,Dh())},Lo.apply(e,arguments)}function Mh(){var e=Fc(Ph()).domain([.1,1,10]);return e.copy=function(){return kh(e,Mh()).base(e.base())},Lo.apply(e,arguments)}function Fh(){var e=Hc(Ph());return e.copy=function(){return kh(e,Fh()).constant(e.constant())},Lo.apply(e,arguments)}function Bh(){var e=Vc(Ph());return e.copy=function(){return kh(e,Bh()).exponent(e.exponent())},Lo.apply(e,arguments)}function Uh(){return Bh.apply(null,arguments).exponent(.5)}!function(e){rd=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=dd(a),u=hd(a),d=dd(i),h=hd(i),f=dd(s),m=hd(s),p=dd(o),g=hd(o),y=dd(l),v=hd(l),b={a:function(e){return s[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Id,e:Id,f:Fd,g:Yd,G:Xd,H:Ld,I:Pd,j:Dd,L:Md,m:Bd,M:Ud,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:xh,s:wh,S:zd,u:Hd,U:$d,V:Gd,w:Wd,W:Vd,x:null,X:null,y:Kd,Y:Jd,Z:Qd,"%":bh},x={a:function(e){return s[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Zd,e:Zd,f:ah,g:ph,G:yh,H:eh,I:th,j:rh,L:nh,m:ih,M:sh,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:xh,s:wh,S:oh,u:lh,U:ch,V:dh,w:hh,W:fh,x:null,X:null,y:mh,Y:gh,Z:vh,"%":bh},w={a:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=m.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=p.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return _(e,t,r,n)},d:Sd,e:Sd,f:Cd,g:bd,G:vd,H:jd,I:jd,j:_d,L:kd,m:Nd,M:Ed,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u.get(n[0].toLowerCase()),r+n[0].length):-1},q:wd,Q:Td,s:Rd,S:Ad,u:md,U:pd,V:gd,w:fd,W:yd,x:function(e,t,n){return _(e,r,t,n)},X:function(e,t,r){return _(e,n,t,r)},y:bd,Y:vd,Z:xd,"%":Od};function N(e,t){return function(r){var n,a,i,s=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(a=id[n=e.charAt(++o)])?n=e.charAt(++o):a="e"===n?" ":"0",(i=t[n])&&(n=i(r,a)),s.push(n),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function S(e,t){return function(r){var n,a,i=td(1900,void 0,1);if(_(i,e,r+="",0)!=r.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(n=ed(td(i.y,0,1))).getUTCDay(),n=a>4||0===a?Fu.ceil(n):Fu(n),n=Eu.offset(n,7*(i.V-1)),i.y=n.getUTCFullYear(),i.m=n.getUTCMonth(),i.d=n.getUTCDate()+(i.w+6)%7):(a=(n=Zu(td(i.y,0,1))).getDay(),n=a>4||0===a?Ou.ceil(n):Ou(n),n=ju.offset(n,7*(i.V-1)),i.y=n.getFullYear(),i.m=n.getMonth(),i.d=n.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?ed(td(i.y,0,1)).getUTCDay():Zu(td(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,ed(i)):Zu(i)}}function _(e,t,r,n){for(var a,i,s=0,o=t.length,l=r.length;s<o;){if(n>=l)return-1;if(37===(a=t.charCodeAt(s++))){if(a=t.charAt(s++),!(i=w[a in id?t.charAt(s++):a])||(n=i(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return b.x=N(r,b),b.X=N(n,b),b.c=N(t,b),x.x=N(r,x),x.X=N(n,x),x.c=N(t,x),{format:function(e){var t=N(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=N(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),nd=rd.format,rd.parse,ad=rd.utcFormat,rd.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var zh=e=>e.chartData,Hh=ys([zh],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),$h=(e,t,r,n)=>n?Hh(e):zh(e);function qh(e){return Number.isFinite(e)}function Gh(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function Wh(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(qh(t)&&qh(r))return!0}return!1}function Vh(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}var Kh=r(8210),Yh=r.n(Kh),Jh=e=>e,Xh={"@@functional/placeholder":!0},Qh=e=>e===Xh,Zh=e=>function t(){return 0===arguments.length||1===arguments.length&&Qh(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},ef=(e,t)=>1===e?t:Zh(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(e=>e!==Xh).length;return i>=e?t(...n):ef(e-i,Zh(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var i=n.map(e=>Qh(e)?r.shift():e);return t(...i,...r)}))}),tf=e=>ef(e.length,e),rf=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},nf=tf((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),af=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),sf=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((e,r)=>{var n;return e===(null===(n=t)||void 0===n?void 0:n[r])})?r:(t=a,r=e(...a))}};function of(e){return 0===e?1:Math.floor(new(Yh())(e).abs().log(10).toNumber())+1}function lf(e,t,r){for(var n=new(Yh())(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}tf((e,t,r)=>{var n=+e;return n+r*(+t-n)}),tf((e,t,r)=>{var n=t-+e;return(r-e)/(n=n||1/0)}),tf((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var cf=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},uf=(e,t,r)=>{if(e.lte(0))return new(Yh())(0);var n=of(e.toNumber()),a=new(Yh())(10).pow(n),i=e.div(a),s=1!==n?.05:.1,o=new(Yh())(Math.ceil(i.div(s).toNumber())).add(r).mul(s).mul(a);return t?new(Yh())(o.toNumber()):new(Yh())(Math.ceil(o.toNumber()))},df=(e,t,r)=>{var n=new(Yh())(1),a=new(Yh())(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new(Yh())(10).pow(of(e)-1),a=new(Yh())(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new(Yh())(Math.floor(e)))}else 0===e?a=new(Yh())(Math.floor((t-1)/2)):r||(a=new(Yh())(Math.floor(e)));var s=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return Jh;var n=t.reverse(),a=n[0],i=n.slice(1);return function(){return i.reduce((e,t)=>t(e),a(...arguments))}}(nf(e=>a.add(new(Yh())(e-s).mul(n)).toNumber()),rf);return o(0,t)},hf=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(Yh())(0),tickMin:new(Yh())(0),tickMax:new(Yh())(0)};var i,s=uf(new(Yh())(t).sub(e).div(r-1),n,a);i=e<=0&&t>=0?new(Yh())(0):(i=new(Yh())(e).add(t).div(2)).sub(new(Yh())(i).mod(s));var o=Math.ceil(i.sub(e).div(s).toNumber()),l=Math.ceil(new(Yh())(t).sub(i).div(s).toNumber()),c=o+l+1;return c>r?hf(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:s,tickMin:i.sub(new(Yh())(o).mul(s)),tickMax:i.add(new(Yh())(l).mul(s))})};var ff=sf(function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(n,2),[s,o]=cf([t,r]);if(s===-1/0||o===1/0){var l=o===1/0?[s,...rf(0,n-1).map(()=>1/0)]:[...rf(0,n-1).map(()=>-1/0),o];return t>r?af(l):l}if(s===o)return df(s,n,a);var{step:c,tickMin:u,tickMax:d}=hf(s,o,i,a,0),h=lf(u,d.add(new(Yh())(.1).mul(c)),c);return t>r?af(h):h}),mf=sf(function(e,t){var[r,n]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[i,s]=cf([r,n]);if(i===-1/0||s===1/0)return[r,n];if(i===s)return[i];var o=Math.max(t,2),l=uf(new(Yh())(s).sub(i).div(o-1),a,0),c=[...lf(new(Yh())(i),new(Yh())(s),l),s];return!1===a&&(c=c.map(e=>Math.round(e))),r>n?af(c):c}),pf=e=>e.rootProps.maxBarSize,gf=e=>e.rootProps.barCategoryGap,yf=e=>e.rootProps.stackOffset,vf=e=>e.options.chartName,bf=e=>e.rootProps.syncId,xf=e=>e.rootProps.syncMethod,wf=e=>e.options.eventEmitter,Nf=0,Sf="auto",_f=!0,jf=!1,Ef=!0,Af=0,kf="auto",Cf=!0,Of=5,Tf=(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t},Rf={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Nf,includeHidden:!1,name:void 0,reversed:!1,scale:Sf,tick:_f,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},If={allowDataOverflow:jf,allowDecimals:!1,allowDuplicatedCategory:Ef,dataKey:void 0,domain:void 0,id:Af,includeHidden:!1,name:void 0,reversed:!1,scale:kf,tick:Cf,tickCount:Of,ticks:void 0,type:"number",unit:void 0},Lf={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:Nf,includeHidden:!1,name:void 0,reversed:!1,scale:Sf,tick:_f,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Pf={allowDataOverflow:jf,allowDecimals:!1,allowDuplicatedCategory:Ef,dataKey:void 0,domain:void 0,id:Af,includeHidden:!1,name:void 0,reversed:!1,scale:kf,tick:Cf,tickCount:Of,ticks:void 0,type:"category",unit:void 0},Df=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?Lf:Rf,Mf=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?Pf:If,Ff=e=>e.polarOptions,Bf=ys([lo,co,xo],Hs),Uf=ys([Ff,Bf],(e,t)=>{if(null!=e)return Ar(e.innerRadius,t,0)}),zf=ys([Ff,Bf],(e,t)=>{if(null!=e)return Ar(e.outerRadius,t,.8*t)}),Hf=ys([Ff],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}),$f=(ys([Df,Hf],Tf),ys([Bf,Uf,zf],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]})),qf=(ys([Mf,$f],Tf),ys([Co,Ff,Uf,zf,lo,co],(e,t,r,n,a,i)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:s,cy:o,startAngle:l,endAngle:c}=t;return{cx:Ar(s,a,a/2),cy:Ar(o,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}})),Gf=(e,t)=>t,Wf=(e,t,r)=>r;function Vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Kf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(r),!0).forEach(function(t){Yf(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jf=[0,"auto"],Xf={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Qf=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return null==r?Xf:r},Zf={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Jf,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},em=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return null==r?Zf:r},tm={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},rm=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?tm:r},nm=(e,t,r)=>{switch(t){case"xAxis":return Qf(e,r);case"yAxis":return em(e,r);case"zAxis":return rm(e,r);case"angleAxis":return Df(e,r);case"radiusAxis":return Mf(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},am=(e,t,r)=>{switch(t){case"xAxis":return Qf(e,r);case"yAxis":return em(e,r);case"angleAxis":return Df(e,r);case"radiusAxis":return Mf(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},im=e=>e.graphicalItems.countOfBars>0;function sm(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var om=e=>e.graphicalItems.cartesianItems,lm=ys([Gf,Wf],sm),cm=(e,t,r)=>e.filter(r).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),um=ys([om,nm,lm],cm),dm=e=>e.filter(e=>void 0===e.stackId),hm=ys([um],dm),fm=e=>e.map(e=>e.data).filter(Boolean).flat(1),mm=ys([um],fm),pm=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},gm=ys([mm,$h],pm),ym=(e,t,r)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Ys(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Ys(e,t)}))):e.map(e=>({value:e})),vm=ys([gm,nm,um],ym);function bm(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function xm(e){return e.filter(e=>_r(e)||e instanceof Date).map(Number).filter(e=>!1===wr(e))}function wm(e,t,r){return!r||"number"!==typeof t||wr(t)?[]:r.length?xm(r.flatMap(r=>{var n,a,i=Ys(e,r.dataKey);if(Array.isArray(i)?[n,a]=i:n=a=i,qh(n)&&qh(a))return[t-n,t+a]})):[]}var Nm=(e,t,r)=>{var n=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(n).map(t=>{var[n,a]=t,i=a.map(e=>e.dataKey);return[n,{stackedData:Zs(e,i,r),graphicalItems:a}]}))},Sm=ys([gm,um,yf],Nm),_m=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if("zAxis"!==r){var i=ro(e,n,a);if(null==i||0!==i[0]||0!==i[1])return i}},jm=ys([Sm,zh,Gf],_m),Em=(e,t,r,n)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var a,i,s=null===(a=r.errorBars)||void 0===a?void 0:a.filter(e=>bm(n,e)),o=Ys(e,null!==(i=t.dataKey)&&void 0!==i?i:r.dataKey);return{value:o,errorDomain:wm(e,o,s)}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Ys(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})),Am=ys(gm,nm,hm,Gf,Em);function km(e){var{value:t}=e;if(_r(t)||t instanceof Date)return t}var Cm=e=>{var t;if(null==e||!("domain"in e))return Jf;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=xm(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:Jf},Om=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var a=n.flat();return[Math.min(...a),Math.max(...a)]}},Tm=e=>e.referenceElements.dots,Rm=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),Im=ys([Tm,Gf,Wf],Rm),Lm=e=>e.referenceElements.areas,Pm=ys([Lm,Gf,Wf],Rm),Dm=e=>e.referenceElements.lines,Mm=ys([Dm,Gf,Wf],Rm),Fm=(e,t)=>{var r=xm(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},Bm=ys(Im,Gf,Fm),Um=(e,t)=>{var r=xm(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},zm=ys([Pm,Gf],Um),Hm=(e,t)=>{var r=xm(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},$m=ys(Mm,Gf,Hm),qm=ys(Bm,$m,zm,(e,t,r)=>Om(e,r,t)),Gm=ys([nm],Cm),Wm=(e,t,r,n,a)=>{var i=function(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var r,n,[a,i]=e;if(qh(a))r=a;else if("function"===typeof a)return;if(qh(i))n=i;else if("function"===typeof i)return;var s=[r,n];if(Wh(s))return s}}(t,e.allowDataOverflow);return null!=i?i:function(e,t,r){if(r||null!=t){if("function"===typeof e&&null!=t)try{var n=e(t,r);if(Wh(n))return Vh(n,t,r)}catch(f){}if(Array.isArray(e)&&2===e.length){var a,i,[s,o]=e;if("auto"===s)null!=t&&(a=Math.min(...t));else if(Sr(s))a=s;else if("function"===typeof s)try{null!=t&&(a=s(null===t||void 0===t?void 0:t[0]))}catch(m){}else if("string"===typeof s&&no.test(s)){var l=no.exec(s);if(null==l||null==t)a=void 0;else{var c=+l[1];a=t[0]-c}}else a=null===t||void 0===t?void 0:t[0];if("auto"===o)null!=t&&(i=Math.max(...t));else if(Sr(o))i=o;else if("function"===typeof o)try{null!=t&&(i=o(null===t||void 0===t?void 0:t[1]))}catch(p){}else if("string"===typeof o&&ao.test(o)){var u=ao.exec(o);if(null==u||null==t)i=void 0;else{var d=+u[1];i=t[1]+d}}else i=null===t||void 0===t?void 0:t[1];var h=[a,i];if(Wh(h))return null==t?h:Vh(h,t,r)}}}(t,Om(r,a,(e=>{var t=e.flatMap(e=>[e.value,e.errorDomain]).flat(1),r=xm(t);if(0!==r.length)return[Math.min(...r),Math.max(...r)]})(n)),e.allowDataOverflow)},Vm=ys([nm,Gm,jm,Am,qm],Wm),Km=[0,1],Ym=(e,t,r,n,a,i,s)=>{if(null!=e&&null!=r&&0!==r.length){var{dataKey:o,type:l}=e,c=Js(t,i);return c&&null==o?Ro()(0,r.length):"category"===l?((e,t,r)=>{var n=e.map(km).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&kr(n))?Ro()(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,c):"expand"===a?Km:s}},Jm=ys([nm,Co,gm,vm,yf,Gf,Vm],Ym),Xm=(t,r,n,a,i)=>{if(null!=t){var{scale:s,type:o}=t;if("auto"===s)return"radial"===r&&"radiusAxis"===i?"band":"radial"===r&&"angleAxis"===i?"linear":"category"===o&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":"category"===o?"band":"linear";if("string"===typeof s){var l="scale".concat(Tr(s));return l in e?l:"point"}}},Qm=ys([nm,Co,im,vf,Gf],Xm);function Zm(t,r,n,a){if(null!=n&&null!=a){if("function"===typeof t.scale)return t.scale.copy().domain(n).range(a);var i=function(t){if(null!=t){if(t in e)return e[t]();var r="scale".concat(Tr(t));return r in e?e[r]():void 0}}(r);if(null!=i){var s=i.domain(n).range(a);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Xs,i=Math.max(n[0],n[1])+Xs,s=e(t[0]),o=e(t[r-1]);(s<a||s>i||o<a||o>i)&&e.domain([t[0],t[r-1]])}})(s),s}}}var ep=(e,t,r)=>{var n=Cm(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&Wh(e)?ff(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&Wh(e)?mf(e,t.tickCount,t.allowDecimals):void 0},tp=ys([Jm,am,Qm],ep),rp=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null===e||void 0===e?void 0:e.type)&&Wh(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],s=t[1],o=r[r.length-1];return[Math.min(a,i),Math.max(s,o)]}return t},np=ys([nm,Jm,tp,Gf],rp),ap=ys(vm,nm,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(xm(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(0===a)return 1/0;for(var i=0;i<n.length-1;i++){var s=n[i+1]-n[i];r=Math.min(r,s)}return r/a}}),ip=ys(ap,Co,gf,xo,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!qh(e))return 0;var i="vertical"===t?n.height:n.width;if("gap"===a)return e*i/2;if("no-gap"===a){var s=Ar(r,e*i),o=e*i/2;return o-s-(o-s)/i*s}return 0}),sp=ys(Qf,(e,t)=>{var r=Qf(e,t);return null==r||"string"!==typeof r.padding?0:ip(e,"xAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"===typeof a?{left:t,right:t}:{left:(null!==(r=a.left)&&void 0!==r?r:0)+t,right:(null!==(n=a.right)&&void 0!==n?n:0)+t}}),op=ys(em,(e,t)=>{var r=em(e,t);return null==r||"string"!==typeof r.padding?0:ip(e,"yAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"===typeof a?{top:t,bottom:t}:{top:(null!==(r=a.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=a.bottom)&&void 0!==n?n:0)+t}}),lp=ys([xo,sp,Eo,jo,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),cp=ys([xo,Co,op,Eo,jo,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:s}=a;return i?[n.height-s.bottom,s.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),up=(e,t,r,n)=>{var a;switch(t){case"xAxis":return lp(e,r,n);case"yAxis":return cp(e,r,n);case"zAxis":return null===(a=rm(e,r))||void 0===a?void 0:a.range;case"angleAxis":return Hf(e);case"radiusAxis":return $f(e,r);default:return}},dp=ys([nm,up],Tf),hp=ys([nm,Qm,np,dp],Zm);ys(um,Gf,(e,t)=>e.flatMap(e=>{var t;return null!==(t=e.errorBars)&&void 0!==t?t:[]}).filter(e=>bm(t,e)));function fp(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var mp=(e,t)=>t,pp=(e,t,r)=>r,gp=ys(fo,mp,pp,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(fp)),yp=ys(mo,mp,pp,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(fp)),vp=(e,t)=>({width:e.width,height:t.height}),bp=ys(xo,Qf,vp),xp=ys(co,xo,gp,mp,pp,(e,t,r,n,a)=>{var i,s={};return r.forEach(r=>{var o=vp(t,r);null==i&&(i=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!a||"bottom"===n&&a;s[r.id]=i-Number(l)*o.height,i+=(l?-1:1)*o.height}),s}),wp=ys(lo,xo,yp,mp,pp,(e,t,r,n,a)=>{var i,s={};return r.forEach(r=>{var o=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,r);null==i&&(i=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!a||"right"===n&&a;s[r.id]=i-Number(l)*o.width,i+=(l?-1:1)*o.width}),s}),Np=ys(xo,em,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),Sp=(e,t,r)=>{switch(t){case"xAxis":return bp(e,r).width;case"yAxis":return Np(e,r).height;default:return}},_p=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:a,type:i,dataKey:s}=r,o=Js(e,n),l=t.map(e=>e.value);return s&&o&&"category"===i&&a&&kr(l)?l:void 0}},jp=ys([Co,vm,nm,Gf],_p),Ep=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:a,scale:i}=r;return!Js(e,n)||"number"!==a&&"auto"===i?void 0:t.map(e=>e.value)}},Ap=ys([Co,vm,am,Gf],Ep),kp=(ys([Co,(e,t,r)=>{switch(t){case"xAxis":return Qf(e,r);case"yAxis":return em(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Qm,hp,jp,Ap,up,tp,Gf],(e,t,r,n,a,i,s,o,l)=>{if(null==t)return null;var c=Js(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:o,range:s,realScaleType:r,scale:n}}),ys([Co,am,Qm,hp,tp,up,jp,Ap,Gf],(e,t,r,n,a,i,s,o,l)=>{if(null!=t&&null!=n){var c=Js(e,l),{type:u,ticks:d,tickCount:h}=t,f="scaleBand"===r&&"function"===typeof n.bandwidth?n.bandwidth()/2:2,m="category"===u&&n.bandwidth?n.bandwidth()/f:0;m="angleAxis"===l&&null!=i&&i.length>=2?2*xr(i[0]-i[1])*m:m;var p=d||a;return p?p.map((e,t)=>{var r=s?s.indexOf(e):e;return{index:t,coordinate:n(r)+m,value:e,offset:m}}).filter(e=>!wr(e.coordinate)):c&&o?o.map((e,t)=>({coordinate:n(e)+m,value:e,index:t,offset:m})):n.ticks?n.ticks(h).map(e=>({coordinate:n(e)+m,value:e,offset:m})):n.domain().map((e,t)=>({coordinate:n(e)+m,value:s?s[e]:e,index:t,offset:m}))}})),Cp=ys([Co,am,hp,up,jp,Ap,Gf],(e,t,r,n,a,i,s)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var o=Js(e,s),{tickCount:l}=t,c=0;return c="angleAxis"===s&&(null===n||void 0===n?void 0:n.length)>=2?2*xr(n[0]-n[1])*c:c,o&&i?i.map((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c})):r.ticks?r.ticks(l).map(e=>({coordinate:r(e)+c,value:e,offset:c})):r.domain().map((e,t)=>({coordinate:r(e)+c,value:a?a[e]:e,index:t,offset:c}))}}),Op=ys(nm,hp,(e,t)=>{if(null!=e&&null!=t)return Kf(Kf({},e),{},{scale:t})}),Tp=ys([nm,Qm,Jm,dp],Zm),Rp=(ys((e,t,r)=>rm(e,r),Tp,(e,t)=>{if(null!=e&&null!=t)return Kf(Kf({},e),{},{scale:t})}),ys([Co,fo,mo],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),Ip=e=>e.options.defaultTooltipEventType,Lp=e=>e.options.validateTooltipEventTypes;function Pp(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function Dp(e,t){return Pp(t,Ip(e),Lp(e))}var Mp=(e,t)=>{var r,n=Number(t);if(!wr(n)&&null!=t)return n>=0?null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.value:void 0};function Fp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Bp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fp(Object(r),!0).forEach(function(t){Up(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Up(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zp=(e,t,r,n)=>{if(null==t)return Bi;var a=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==a)return Bi;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var i=!0===e.settings.active;if(null!=a.index){if(i)return Bp(Bp({},a),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Bp(Bp({},Bi),{},{coordinate:a.coordinate})},Hp=(e,t)=>{var r=null===e||void 0===e?void 0:e.index;if(null==r)return null;var n=Number(r);if(!qh(n))return r;var a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(0,Math.min(n,a)))},$p=(e,t,r,n,a,i,s,o)=>{if(null!=i&&null!=o){var l=s[0],c=null==l?void 0:o(l.positions,i);if(null!=c)return c;var u=null===a||void 0===a?void 0:a[Number(i)];if(u)return"horizontal"===r?{x:u.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:u.coordinate}}},qp=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(a="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===a});var a},Gp=e=>e.options.tooltipPayloadSearcher,Wp=e=>e.tooltip;function Vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Kp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vp(Object(r),!0).forEach(function(t){Yp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jp=(e,t,r,n,a,i,s)=>{if(null!=t&&null!=i){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=r;return e.reduce((e,r)=>{var d,h,f,m,p,g,{dataDefinedOnItem:y,settings:v}=r,b=function(e,t){return null!=e?e:t}(y,o),x=(h=b,f=c,m=u,Array.isArray(h)&&h&&f+m!==0?h.slice(f,m+1):h),w=null!==(d=null===v||void 0===v?void 0:v.dataKey)&&void 0!==d?d:null===n||void 0===n?void 0:n.dataKey,N=null===v||void 0===v?void 0:v.nameKey;(p=null!==n&&void 0!==n&&n.dataKey&&Array.isArray(x)&&!Array.isArray(x[0])&&"axis"===s?function(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):br()(e,t))===r)}(x,n.dataKey,a):i(x,t,l,N),Array.isArray(p))?p.forEach(t=>{var r=Kp(Kp({},v),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(so({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:Ys(t.payload,t.dataKey),name:t.name}))}):e.push(so({tooltipEntrySettings:v,dataKey:w,payload:p,value:Ys(p,w),name:null!==(g=Ys(p,N))&&void 0!==g?g:null===v||void 0===v?void 0:v.name}));return e},[])}},Xp=e=>{var t=Co(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},Qp=e=>e.tooltip.settings.axisId,Zp=e=>{var t=Xp(e),r=Qp(e);return am(e,t,r)},eg=ys([Zp,Co,im,vf,Xp],Xm),tg=ys([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),rg=ys([Xp,Qp],sm),ng=ys([tg,Zp,rg],cm),ag=ys([ng],fm),ig=ys([ag,zh],pm),sg=ys([ig,Zp,ng],ym),og=ys([Zp],Cm),lg=ys([ig,ng,yf],Nm),cg=ys([lg,zh,Xp],_m),ug=ys([ng],dm),dg=ys([ig,Zp,ug,Xp],Em),hg=ys([Tm,Xp,Qp],Rm),fg=ys([hg,Xp],Fm),mg=ys([Lm,Xp,Qp],Rm),pg=ys([mg,Xp],Um),gg=ys([Dm,Xp,Qp],Rm),yg=ys([gg,Xp],Hm),vg=ys([fg,yg,pg],Om),bg=ys([Zp,og,cg,dg,vg],Wm),xg=ys([Zp,Co,ig,sg,yf,Xp,bg],Ym),wg=ys([xg,Zp,eg],ep),Ng=ys([Zp,xg,wg,Xp],rp),Sg=e=>{var t=Xp(e),r=Qp(e);return up(e,t,r,!1)},_g=ys([Zp,Sg],Tf),jg=ys([Zp,eg,Ng,_g],Zm),Eg=ys([Co,sg,Zp,Xp],_p),Ag=ys([Co,sg,Zp,Xp],Ep),kg=ys([Co,Zp,eg,jg,Sg,Eg,Ag,Xp],(e,t,r,n,a,i,s,o)=>{if(t){var{type:l}=t,c=Js(e,o);if(n){var u="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,d="category"===l&&n.bandwidth?n.bandwidth()/u:0;return d="angleAxis"===o&&null!=a&&(null===a||void 0===a?void 0:a.length)>=2?2*xr(a[0]-a[1])*d:d,c&&s?s.map((e,t)=>({coordinate:n(e)+d,value:e,index:t,offset:d})):n.domain().map((e,t)=>({coordinate:n(e)+d,value:i?i[e]:e,index:t,offset:d}))}}}),Cg=ys([Ip,Lp,e=>e.tooltip.settings],(e,t,r)=>Pp(r.shared,e,t)),Og=e=>e.tooltip.settings.trigger,Tg=e=>e.tooltip.settings.defaultIndex,Rg=ys([Wp,Cg,Og,Tg],zp),Ig=ys([Rg,ig],Hp),Lg=ys([kg,Ig],Mp),Pg=ys([Rg],e=>{if(e)return e.dataKey}),Dg=ys([Wp,Cg,Og,Tg],qp),Mg=ys([lo,co,Co,xo,kg,Tg,Dg,Gp],$p),Fg=ys([Rg,Mg],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),Bg=ys([Rg],e=>e.active),Ug=ys([Dg,Ig,zh,Zp,Lg,Gp,Cg],Jp),zg=(ys([Ug],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}}),(e,t)=>t),Hg=(e,t,r)=>r,$g=(e,t,r,n)=>n,qg=ys(kg,e=>ks()(e,e=>e.coordinate)),Gg=ys([Wp,zg,Hg,$g],zp),Wg=ys([Gg,ig],Hp),Vg=ys([Wp,zg,Hg,$g],qp),Kg=ys([lo,co,Co,xo,kg,$g,Vg,Gp],$p),Yg=ys([Gg,Kg],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),Jg=ys(kg,Wg,Mp),Xg=ys([Vg,Wg,zh,Zp,Jg,Gp,zg],Jp),Qg=ys([Gg],e=>({isActive:e.active,activeIndex:e.index})),Zg=ys([(e,t)=>t,Co,qf,Xp,_g,kg,qg,xo],(e,t,r,n,a,i,s,o)=>{if(e&&t&&n&&a&&i){var l=function(e,t,r,n,a){return"horizontal"===r||"vertical"===r?e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height?{x:e,y:t}:null:n?Gs({x:e,y:t},n):null}(e.chartX,e.chartY,t,r,o);if(l){var c=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(l,t),u=((e,t,r,n,a)=>{var i,s=-1,o=null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:0;if(o<=1||null==e)return 0;if("angleAxis"===n&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,u=r[l].coordinate,d=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(xr(u-c)!==xr(d-u)){var f=[];if(xr(d-u)===xr(a[1]-a[0])){h=d;var m=u+a[1]-a[0];f[0]=Math.min(m,(m+c)/2),f[1]=Math.max(m,(m+c)/2)}else{h=c;var p=d+a[1]-a[0];f[0]=Math.min(u,(p+u)/2),f[1]=Math.max(u,(p+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){({index:s}=r[l]);break}}else{var y=Math.min(c,d),v=Math.max(c,d);if(e>(y+u)/2&&e<=(v+u)/2){({index:s}=r[l]);break}}}else if(t)for(var b=0;b<o;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:s}=t[b]);break}return s})(c,s,i,n,a),d=((e,t,r,n)=>{var a=t.find(e=>e&&e.index===r);if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var i=a.coordinate,{radius:s}=n;return Vs(Vs(Vs({},n),zs(n.cx,n.cy,s,i)),{},{angle:i,radius:s})}var o=a.coordinate,{angle:l}=n;return Vs(Vs(Vs({},n),zs(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}})(t,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}}),ey=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ty=zn("mouseClick"),ry=La();ry.startListening({actionCreator:ty,effect:(e,t)=>{var r=e.payload,n=Zg(t.getState(),ey(r));null!=(null===n||void 0===n?void 0:n.activeIndex)&&t.dispatch(Yi({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var ny=zn("mouseMove"),ay=La();function iy(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}function sy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sy(Object(r),!0).forEach(function(t){ly(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ly(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ay.startListening({actionCreator:ny,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Dp(n,n.tooltip.settings.shared),i=Zg(n,ey(r));"axis"===a&&(null!=(null===i||void 0===i?void 0:i.activeIndex)?t.dispatch(Ki({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Wi()))}});var cy=ta({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=oy(oy({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:uy,removeXAxis:dy,addYAxis:hy,removeYAxis:fy,addZAxis:my,removeZAxis:py,updateYAxisWidth:gy}=cy.actions,yy=cy.reducer,vy=ta({name:"graphicalItems",initialState:{countOfBars:0,cartesianItems:[],polarItems:[]},reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=Dn(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=Dn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Dn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:by,removeBar:xy,addCartesianGraphicalItem:wy,replaceCartesianGraphicalItem:Ny,removeCartesianGraphicalItem:Sy,addPolarGraphicalItem:_y,removePolarGraphicalItem:jy}=vy.actions,Ey=vy.reducer,Ay=ta({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Dn(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Dn(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Dn(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:ky,removeDot:Cy,addArea:Oy,removeArea:Ty,addLine:Ry,removeLine:Iy}=Ay.actions,Ly=Ay.reducer,Py={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Dy=ta({name:"brush",initialState:Py,reducers:{setBrushSettings:(e,t)=>null==t.payload?Py:t.payload}}),{setBrushSettings:My}=Dy.actions,Fy=Dy.reducer,By=ta({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Dn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Uy,setLegendSettings:zy,addLegendPayload:Hy,removeLegendPayload:$y}=By.actions,qy=By.reducer,Gy={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Wy=ta({name:"rootProps",initialState:Gy,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:Gy.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Vy=Wy.reducer,{updateOptions:Ky}=Wy.actions,Yy=ta({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Jy,removeRadiusAxis:Xy,addAngleAxis:Qy,removeAngleAxis:Zy}=Yy.actions,ev=Yy.reducer,tv=ta({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:rv}=tv.actions,nv=tv.reducer,av=zn("keyDown"),iv=zn("focus"),sv=La();sv.startListening({actionCreator:av,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var i=Number(Hp(n,ig(r))),s=kg(r);if("Enter"!==a){var o=i+("ArrowRight"===a?1:-1)*("left-to-right"===Rp(r)?1:-1);if(!(null==s||o>=s.length||o<0)){var l=Kg(r,"axis","hover",String(o));t.dispatch(Xi({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var c=Kg(r,"axis","hover",String(n.index));t.dispatch(Xi({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:c}))}}}}}),sv.startListening({actionCreator:iv,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var a=Kg(r,"axis","hover",String("0"));t.dispatch(Xi({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var ov=zn("externalEvent"),lv=La();lv.startListening({actionCreator:ov,effect:(e,t)=>{if(null!=e.payload.handler){var r=t.getState(),n={activeCoordinate:Fg(r),activeDataKey:Pg(r),activeIndex:Ig(r),activeLabel:Lg(r),activeTooltipIndex:Ig(r),isTooltipActive:Bg(r)};e.payload.handler(n,e.payload.reactEvent)}}});var cv=ys([Wp],e=>e.tooltipItemPayloads),uv=ys([cv,Gp,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(e=>e.settings.dataKey===n);if(null!=a){var{positions:i}=a;if(null!=i)return t(i,r)}}),dv=zn("touchMove"),hv=La();hv.startListening({actionCreator:dv,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Dp(n,n.tooltip.settings.shared);if("axis"===a){var i=Zg(n,ey({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null===i||void 0===i?void 0:i.activeIndex)&&t.dispatch(Ki({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if("item"===a){var s,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(po),u=null!==(s=l.getAttribute(go))&&void 0!==s?s:void 0,d=uv(t.getState(),c,u);t.dispatch(qi({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}});var fv=$r({brush:Fy,cartesianAxis:yy,chartData:ns,graphicalItems:Ey,layout:cs,legend:qy,options:Fa,polarAxis:ev,polarOptions:nv,referenceElements:Ly,rootProps:Vy,tooltip:Qi});function mv(e){var{preloadedState:r,children:n,reduxStoreName:a}=e,i=_o(),s=(0,t.useRef)(null);if(i)return n;null==s.current&&(s.current=function(e){return Kn({reducer:fv,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([ry.middleware,ay.middleware,sv.middleware,lv.middleware,hv.middleware]),devTools:{serialize:{replacer:iy},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(r,a));var o=xs;return t.createElement(Ja,{context:o,store:s.current},n)}var pv=e=>{var{chartData:r}=e,n=Ns(),a=_o();return(0,t.useEffect)(()=>a?()=>{}:(n(es(r)),()=>{n(es(void 0))}),[r,n,a]),null};function gv(e){var{layout:r,width:n,height:a,margin:i}=e,s=Ns(),o=_o();return(0,t.useEffect)(()=>{o||(s(ss(r)),s(os({width:n,height:a})),s(is(i)))},[s,o,r,n,a,i]),null}function yv(e){var r=Ns();return(0,t.useEffect)(()=>{r(Ky(e))},[r,e]),null}var vv=r(2086),bv=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xv=["points","pathLength"],wv={svg:["viewBox","children"],polygon:xv,polyline:xv},Nv=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Sv=(e,t,r)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];Nv.includes(a)&&"function"===typeof i&&(n||(n={}),n[a]=((e,t,r)=>n=>(e(t,r,n),null))(i,t,r))}),n},_v=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",jv=null,Ev=null,Av=e=>{if(e===jv&&Array.isArray(Ev))return Ev;var r=[];return t.Children.forEach(e,e=>{Or(e)||((0,vv.isFragment)(e)?r=r.concat(Av(e.props.children)):r.push(e))}),Ev=r,jv=e,r};function kv(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(e=>_v(e)):[_v(t)],Av(e).forEach(e=>{var t=br()(e,"type.displayName")||br()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}var Cv=(e,r,n)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var a=e;if((0,t.isValidElement)(e)&&(a=e.props),"object"!==typeof a&&"function"!==typeof a)return null;var i={};return Object.keys(a).forEach(e=>{var t;((e,t,r,n)=>{var a,i=null!==(a=n&&(null===wv||void 0===wv?void 0:wv[n]))&&void 0!==a?a:[];return t.startsWith("data-")||"function"!==typeof e&&(n&&i.includes(t)||bv.includes(t))||r&&Nv.includes(t)})(null===(t=a)||void 0===t?void 0:t[e],e,r,n)&&(i[e]=a[e])}),i},Ov=()=>Es(e=>e.rootProps.accessibilityLayer),Tv=["children","width","height","viewBox","className","style","title","desc"];function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rv.apply(null,arguments)}var Iv=(0,t.forwardRef)((e,r)=>{var{children:n,width:a,height:i,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Tv),h=s||{width:a,height:i,x:0,y:0},f=ft("recharts-surface",o);return t.createElement("svg",Rv({},Cv(d,!0,"svg"),{className:f,width:a,height:i,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:r}),t.createElement("title",null,c),t.createElement("desc",null,u),n)}),Lv=["children"];function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pv.apply(null,arguments)}var Dv={width:"100%",height:"100%"},Mv=(0,t.forwardRef)((e,r)=>{var n=Es(lo),a=Es(co),i=Ov();if(!Gh(n)||!Gh(a))return null;var s,o,{children:l,otherAttributes:c,title:u,desc:d}=e;return s="number"===typeof c.tabIndex?c.tabIndex:i?0:void 0,o="string"===typeof c.role?c.role:i?"application":void 0,t.createElement(Iv,Pv({},c,{title:u,desc:d,role:o,tabIndex:s,width:n,height:a,style:Dv,ref:r}),l)}),Fv=e=>{var{children:r}=e,n=Es(Eo);if(!n)return null;var{width:a,height:i,y:s,x:o}=n;return t.createElement(Iv,{width:a,height:i,x:o,y:s},r)},Bv=(0,t.forwardRef)((e,r)=>{var{children:n}=e,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Lv);return _o()?t.createElement(Fv,null,n):t.createElement(Mv,Pv({ref:r},a),n)});var Uv=new(r(8499)),zv="recharts.syncEvent.tooltip",Hv="recharts.syncEvent.brush";function $v(e){return e.tooltip.syncInteraction}var qv=()=>{};function Gv(){var e=Ns();(0,t.useEffect)(()=>{e(Ba())},[e]),function(){var e=Es(bf),r=Es(wf),n=Ns(),a=Es(xf),i=Es(kg),s=Oo(),o=Ao(),l=Es(e=>e.rootProps.className);(0,t.useEffect)(()=>{if(null==e)return qv;var t=(t,l,c)=>{if(r!==c&&e===t)if("index"!==a){if(null!=i){var u;if("function"===typeof a){var d={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},h=a(i,d);u=i[h]}else"value"===a&&(u=i.find(e=>String(e.value)===l.payload.label));var{coordinate:f}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=f&&null!=o){var{x:m,y:p}=f,g=Math.min(m,o.x+o.width),y=Math.min(p,o.y+o.height),v={x:"horizontal"===s?u.coordinate:g,y:"horizontal"===s?y:u.coordinate},b=Ji({active:l.payload.active,coordinate:v,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label});n(b)}else n(Ji({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}))}}else n(l)};return Uv.on(zv,t),()=>{Uv.off(zv,t)}},[l,n,r,e,a,i,s,o])}(),function(){var e=Es(bf),r=Es(wf),n=Ns();(0,t.useEffect)(()=>{if(null==e)return qv;var t=(t,a,i)=>{r!==i&&e===t&&n(ts(a))};return Uv.on(Hv,t),()=>{Uv.off(Hv,t)}},[n,r,e])}()}function Wv(e,r,n,a,i,s){var o=Es(t=>((e,t,r)=>{if(null!=t){var n=Wp(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(t,e,r)),l=Es(wf),c=Es(bf),u=Es(xf),d=Es($v),h=null===d||void 0===d?void 0:d.active;(0,t.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=Ji({active:s,coordinate:n,dataKey:o,index:i,label:"number"===typeof a?String(a):a});Uv.emit(zv,c,e,l)}},[h,n,o,i,a,l,c,u,s])}var Vv=(0,t.createContext)(null),Kv=(0,t.createContext)(null);function Yv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yv(Object(r),!0).forEach(function(t){Xv(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Xv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qv=(0,t.forwardRef)((e,r)=>{var{children:n,className:a,height:i,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:p,onTouchStart:g,style:y,width:v}=e,b=Ns(),[x,w]=(0,t.useState)(null),[N,S]=(0,t.useState)(null);Gv();var _=function(){var e=Ns(),[r,n]=(0,t.useState)(null),a=Es(uo);return(0,t.useEffect)(()=>{if(null!=r){var t=r.getBoundingClientRect().width/r.offsetWidth;qh(t)&&t!==a&&e(ls(t))}},[r,e,a]),n}(),j=(0,t.useCallback)(e=>{_(e),"function"===typeof r&&r(e),w(e),S(e)},[_,r,w,S]),E=(0,t.useCallback)(e=>{b(ty(e)),b(ov({handler:s,reactEvent:e}))},[b,s]),A=(0,t.useCallback)(e=>{b(ny(e)),b(ov({handler:u,reactEvent:e}))},[b,u]),k=(0,t.useCallback)(e=>{b(Wi()),b(ov({handler:d,reactEvent:e}))},[b,d]),C=(0,t.useCallback)(e=>{b(ny(e)),b(ov({handler:h,reactEvent:e}))},[b,h]),O=(0,t.useCallback)(()=>{b(iv())},[b]),T=(0,t.useCallback)(e=>{b(av(e.key))},[b]),R=(0,t.useCallback)(e=>{b(ov({handler:o,reactEvent:e}))},[b,o]),I=(0,t.useCallback)(e=>{b(ov({handler:l,reactEvent:e}))},[b,l]),L=(0,t.useCallback)(e=>{b(ov({handler:c,reactEvent:e}))},[b,c]),P=(0,t.useCallback)(e=>{b(ov({handler:f,reactEvent:e}))},[b,f]),D=(0,t.useCallback)(e=>{b(ov({handler:g,reactEvent:e}))},[b,g]),M=(0,t.useCallback)(e=>{b(dv(e)),b(ov({handler:p,reactEvent:e}))},[b,p]),F=(0,t.useCallback)(e=>{b(ov({handler:m,reactEvent:e}))},[b,m]);return t.createElement(Vv.Provider,{value:x},t.createElement(Kv.Provider,{value:N},t.createElement("div",{className:ft("recharts-wrapper",a),style:Jv({position:"relative",cursor:"default",width:v,height:i},y),onClick:E,onContextMenu:R,onDoubleClick:I,onFocus:O,onKeyDown:T,onMouseDown:L,onMouseEnter:A,onMouseLeave:k,onMouseMove:C,onMouseUp:P,onTouchEnd:F,onTouchMove:M,onTouchStart:D,ref:j},n)))}),Zv=ys([xo],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),eb=ys([Zv,lo,co],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),tb=()=>Es(eb),rb=(0,t.createContext)(void 0),nb=e=>{var{children:r}=e,[n]=(0,t.useState)("".concat(Er("recharts"),"-clip")),a=tb();if(null==a)return null;var{x:i,y:s,width:o,height:l}=a;return t.createElement(rb.Provider,{value:n},t.createElement("defs",null,t.createElement("clipPath",{id:n},t.createElement("rect",{x:i,y:s,height:l,width:o}))),r)},ab=["children","className","width","height","style","compact","title","desc"];var ib=(0,t.forwardRef)((e,r)=>{var{children:n,className:a,width:i,height:s,style:o,compact:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,ab),h=Cv(d,!1);return l?t.createElement(Bv,{otherAttributes:h,title:c,desc:u},n):t.createElement(Qv,{className:a,style:o,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},t.createElement(Bv,{otherAttributes:h,title:c,desc:u,ref:r},t.createElement(nb,null,n)))});function sb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ob(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lb(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sb(Object(r),!0).forEach(function(t){ob(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}var cb=["width","height"];function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ub.apply(null,arguments)}var db={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},hb=(0,t.forwardRef)(function(e,r){var n,a=lb(e.categoricalChartProps,db),{width:i,height:s}=a,o=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(a,cb);if(!Gh(i)||!Gh(s))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:h}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return t.createElement(mv,{preloadedState:{options:f},reduxStoreName:null!==(n=h.id)&&void 0!==n?n:l},t.createElement(pv,{chartData:h.data}),t.createElement(gv,{width:i,height:s,layout:a.layout,margin:a.margin}),t.createElement(yv,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),t.createElement(ib,ub({},o,{width:i,height:s,ref:r})))}),fb=["axis","item"],mb=(0,t.forwardRef)((e,r)=>t.createElement(hb,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fb,tooltipPayloadSearcher:Da,categoricalChartProps:e,ref:r}));function pb(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}var gb=["children","className"];function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yb.apply(null,arguments)}var vb=t.forwardRef((e,r)=>{var{children:n,className:a}=e,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,gb),s=ft("recharts-layer",a);return t.createElement("g",yb({className:s},Cv(i,!0),{ref:r}),n)}),bb=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function xb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xb(Object(r),!0).forEach(function(t){Nb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Nb(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sb={widthCache:{},cacheCount:0},_b={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},jb="recharts_measurement_span";var Eb=function(e){if(void 0===e||null===e||bb)return{width:0,height:0};var t=function(e){var t=wb({},e);return Object.keys(t).forEach(e=>{t[e]||delete t[e]}),t}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=JSON.stringify({text:e,copyStyle:t});if(Sb.widthCache[r])return Sb.widthCache[r];try{var n=document.getElementById(jb);n||((n=document.createElement("span")).setAttribute("id",jb),n.setAttribute("aria-hidden","true"),document.body.appendChild(n));var a=wb(wb({},_b),t);Object.assign(n.style,a),n.textContent="".concat(e);var i=n.getBoundingClientRect(),s={width:i.width,height:i.height};return Sb.widthCache[r]=s,++Sb.cacheCount>2e3&&(Sb.cacheCount=0,Sb.widthCache={}),s}catch(o){return{width:0,height:0}}},Ab=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kb=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Cb=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ob=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Tb={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Rb=Object.keys(Tb),Ib="NaN";class Lb{static parse(e){var t,[,r,n]=null!==(t=Ob.exec(e))&&void 0!==t?t:[];return new Lb(parseFloat(r),null!==n&&void 0!==n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,wr(e)&&(this.unit=""),""===t||Cb.test(t)||(this.num=NaN,this.unit=""),Rb.includes(t)&&(this.num=function(e,t){return e*Tb[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Lb(NaN,""):new Lb(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Lb(NaN,""):new Lb(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Lb(NaN,""):new Lb(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new Lb(NaN,""):new Lb(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return wr(this.num)}}function Pb(e){if(e.includes(Ib))return Ib;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=null!==(r=Ab.exec(t))&&void 0!==r?r:[],s=Lb.parse(null!==n&&void 0!==n?n:""),o=Lb.parse(null!==i&&void 0!==i?i:""),l="*"===a?s.multiply(o):s.divide(o);if(l.isNaN())return Ib;t=t.replace(Ab,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,h]=null!==(c=kb.exec(t))&&void 0!==c?c:[],f=Lb.parse(null!==u&&void 0!==u?u:""),m=Lb.parse(null!==h&&void 0!==h?h:""),p="+"===d?f.add(m):f.subtract(m);if(p.isNaN())return Ib;t=t.replace(kb,p.toString())}return t}var Db=/\(([^()]*)\)/;function Mb(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=Db.exec(r));){var[,n]=t;r=r.replace(Db,Pb(n))}return r}(t),t=Pb(t)}function Fb(e){var t=function(e){try{return Mb(e)}catch(t){return Ib}}(e.slice(5,-1));return t===Ib?"":t}var Bb=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Ub=["dx","dy","angle","className","breakAll"];function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zb.apply(null,arguments)}function Hb(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var $b=/[ \f\n\r\t\v\u2028\u2029]+/,qb=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];return Or(t)||(a=r?t.toString().split(""):t.toString().split($b)),{wordsWithComputedWidth:a.map(e=>({word:e,width:Eb(e,n).width})),spaceWidth:r?0:Eb("\xa0",n).width}}catch(i){return null}},Gb=e=>[{words:Or(e)?[]:e.toString().split($b)}],Wb=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:s}=e;if((t||r)&&!bb){var o=qb({breakAll:i,children:n,style:a});if(!o)return Gb(n);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,r,n,a)=>{var{maxLines:i,children:s,style:o,breakAll:l}=e,c=Sr(i),u=s,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{var{word:i,width:s}=t,o=e[e.length-1];if(o&&(null==n||a||o.width+s+r<Number(n)))o.words.push(i),o.width+=s+r;else{var l={words:[i],width:s};e.push(l)}return e},[])},h=d(t),f=e=>e.reduce((e,t)=>e.width>t.width?e:t);if(!c||a)return h;if(!(h.length>i||f(h).width>Number(n)))return h;for(var m,p=e=>{var t=u.slice(0,e),r=qb({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,a=d(r);return[a.length>i||f(a).width>Number(n),a]},g=0,y=u.length-1,v=0;g<=y&&v<=u.length-1;){var b=Math.floor((g+y)/2),x=b-1,[w,N]=p(x),[S]=p(b);if(w||S||(g=b+1),w&&S&&(y=b-1),!w&&S){m=N;break}v++}return m||h})({breakAll:i,children:n,maxLines:s,style:a},l,c,t,r)}return Gb(n)},Vb="#808080",Kb=(0,t.forwardRef)((e,r)=>{var{x:n=0,y:a=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=Vb}=e,d=Hb(e,Bb),h=(0,t.useMemo)(()=>Wb({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:f,dy:m,angle:p,className:g,breakAll:y}=d,v=Hb(d,Ub);if(!_r(n)||!_r(a))return null;var b,x=n+(Sr(f)?f:0),w=a+(Sr(m)?m:0);switch(c){case"start":b=Fb("calc(".concat(s,")"));break;case"middle":b=Fb("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:b=Fb("calc(".concat(h.length-1," * -").concat(i,")"))}var N=[];if(o){var S=h[0].width,{width:_}=d;N.push("scale(".concat(Sr(_)?_/S:1,")"))}return p&&N.push("rotate(".concat(p,", ").concat(x,", ").concat(w,")")),N.length&&(v.transform=N.join(" ")),t.createElement("text",zb({},Cv(v,!0),{ref:r,x:x,y:w,className:ft("recharts-text",g),textAnchor:l,fill:u.includes("url")?Vb:u}),h.map((e,r)=>{var n=e.words.join(y?"":" ");return t.createElement("tspan",{x:x,dy:0===r?b:i,key:"".concat(n,"-").concat(r)},n)}))});Kb.displayName="Text";var Yb=["offset"],Jb=["labelRef"];function Xb(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qb(Object(r),!0).forEach(function(t){ex(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ex(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tx(){return tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tx.apply(null,arguments)}var rx=e=>null!=e&&"function"===typeof e,nx=(e,r,n)=>{var a,i,{position:s,viewBox:o,offset:l,className:c}=e,{cx:u,cy:d,innerRadius:h,outerRadius:f,startAngle:m,endAngle:p,clockWise:g}=o,y=(h+f)/2,v=((e,t)=>xr(t-e)*Math.min(Math.abs(t-e),360))(m,p),b=v>=0?1:-1;"insideStart"===s?(a=m+b*l,i=g):"insideEnd"===s?(a=p-b*l,i=!g):"end"===s&&(a=p+b*l,i=g),i=v<=0?i:!i;var x=zs(u,d,y,a),w=zs(u,d,y,a+359*(i?1:-1)),N="M".concat(x.x,",").concat(x.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(i?0:1,",\n    ").concat(w.x,",").concat(w.y),S=Or(e.id)?Er("recharts-radial-line-"):e.id;return t.createElement("text",tx({},n,{dominantBaseline:"central",className:ft("recharts-radial-bar-label",c)}),t.createElement("defs",null,t.createElement("path",{id:S,d:N})),t.createElement("textPath",{xlinkHref:"#".concat(S)},r))};function ax(e){var r,{offset:n=5}=e,a=Zb({offset:n},Xb(e,Yb)),{viewBox:i,position:s,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:h}=a,f=Ao(),m=i||f;if(!m||Or(o)&&Or(l)&&!(0,t.isValidElement)(c)&&"function"!==typeof c)return null;if((0,t.isValidElement)(c)){var{labelRef:p}=a,g=Xb(a,Jb);return(0,t.cloneElement)(c,g)}if("function"===typeof c){if(r=(0,t.createElement)(c,a),(0,t.isValidElement)(r))return r}else r=(e=>{var{value:t,formatter:r}=e,n=Or(e.children)?t:e.children;return"function"===typeof r?r(n):n})(a);var y=(e=>"cx"in e&&Sr(e.cx))(m),v=Cv(a,!0);if(y&&("insideStart"===s||"insideEnd"===s||"end"===s))return nx(a,r,v);var b=y?(e=>{var{viewBox:t,offset:r,position:n}=e,{cx:a,cy:i,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if("outside"===n){var{x:d,y:h}=zs(a,i,o+r,u);return{x:d,y:h,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var f=(s+o)/2,{x:m,y:p}=zs(a,i,f,u);return{x:m,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(a):((e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:i,y:s,width:o,height:l}=t,c=l>=0?1:-1,u=c*n,d=c>0?"end":"start",h=c>0?"start":"end",f=o>=0?1:-1,m=f*n,p=f>0?"end":"start",g=f>0?"start":"end";if("top"===a)return Zb(Zb({},{x:i+o/2,y:s-c*n,textAnchor:"middle",verticalAnchor:d}),r?{height:Math.max(s-r.y,0),width:o}:{});if("bottom"===a)return Zb(Zb({},{x:i+o/2,y:s+l+u,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(r.y+r.height-(s+l),0),width:o}:{});if("left"===a){var y={x:i-m,y:s+l/2,textAnchor:p,verticalAnchor:"middle"};return Zb(Zb({},y),r?{width:Math.max(y.x-r.x,0),height:l}:{})}if("right"===a){var v={x:i+o+m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"};return Zb(Zb({},v),r?{width:Math.max(r.x+r.width-v.x,0),height:l}:{})}var b=r?{width:o,height:l}:{};return"insideLeft"===a?Zb({x:i+m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"},b):"insideRight"===a?Zb({x:i+o-m,y:s+l/2,textAnchor:p,verticalAnchor:"middle"},b):"insideTop"===a?Zb({x:i+o/2,y:s+u,textAnchor:"middle",verticalAnchor:h},b):"insideBottom"===a?Zb({x:i+o/2,y:s+l-u,textAnchor:"middle",verticalAnchor:d},b):"insideTopLeft"===a?Zb({x:i+m,y:s+u,textAnchor:g,verticalAnchor:h},b):"insideTopRight"===a?Zb({x:i+o-m,y:s+u,textAnchor:p,verticalAnchor:h},b):"insideBottomLeft"===a?Zb({x:i+m,y:s+l-u,textAnchor:g,verticalAnchor:d},b):"insideBottomRight"===a?Zb({x:i+o-m,y:s+l-u,textAnchor:p,verticalAnchor:d},b):a&&"object"===typeof a&&(Sr(a.x)||Nr(a.x))&&(Sr(a.y)||Nr(a.y))?Zb({x:i+Ar(a.x,o),y:s+Ar(a.y,l),textAnchor:"end",verticalAnchor:"end"},b):Zb({x:i+o/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},b)})(a,m);return t.createElement(Kb,tx({ref:h,className:ft("recharts-label",u)},v,b,{breakAll:d}),r)}ax.displayName="Label";var ix=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:i,r:s,radius:o,innerRadius:l,outerRadius:c,x:u,y:d,top:h,left:f,width:m,height:p,clockWise:g,labelViewBox:y}=e;if(y)return y;if(Sr(m)&&Sr(p)){if(Sr(u)&&Sr(d))return{x:u,y:d,width:m,height:p};if(Sr(h)&&Sr(f))return{x:h,y:f,width:m,height:p}}return Sr(u)&&Sr(d)?{x:u,y:d,width:0,height:0}:Sr(t)&&Sr(r)?{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:c||o||s||0,clockWise:g}:e.viewBox?e.viewBox:void 0};function sx(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ax.parseViewBox=ix,ax.renderCallByParent=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:a,labelRef:i}=e,s=ix(e),o=kv(a,ax).map((e,n)=>(0,t.cloneElement)(e,{viewBox:r||s,key:"label-".concat(n)}));if(!n)return o;var l=((e,r,n)=>{if(!e)return null;var a={viewBox:r,labelRef:n};return!0===e?t.createElement(ax,tx({key:"label-implicit"},a)):_r(e)?t.createElement(ax,tx({key:"label-implicit",value:e},a)):(0,t.isValidElement)(e)?e.type===ax?(0,t.cloneElement)(e,Zb({key:"label-implicit"},a)):t.createElement(ax,tx({key:"label-implicit",content:e},a)):rx(e)?t.createElement(ax,tx({key:"label-implicit",content:e},a)):e&&"object"===typeof e?t.createElement(ax,tx({},e,{key:"label-implicit"},a)):null})(e.label,r||s,i);return[l,...o]};class ox{static create(e){return new ox(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}sx(ox,"EPS",1e-4);function lx(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],a=0;a<e.length;a+=t){if(void 0!==r&&!0!==r(e[a]))return;n.push(e[a])}return n}function cx(e,t,r){return function(e){var{width:t,height:r}=e,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,i=Math.atan(r/t),s=a>i&&a<Math.PI-i?r/Math.sin(a):t/Math.cos(a);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},r)}function ux(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function dx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dx(Object(r),!0).forEach(function(t){fx(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dx(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fx(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mx(e,t,r){var n,{tick:a,ticks:i,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!i||!i.length||!a)return[];if(Sr(c)||bb)return null!==(n=function(e,t){return lx(e,t+1)}(i,Sr(c)?c:0))&&void 0!==n?n:[];var f=[],m="top"===l||"bottom"===l?"width":"height",p=d&&"width"===m?Eb(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(e,n)=>{var a="function"===typeof u?u(e.value,n):e.value;return"width"===m?cx(Eb(a,{fontSize:t,letterSpacing:r}),p,h):Eb(a,{fontSize:t,letterSpacing:r})[m]},y=i.length>=2?xr(i[1].coordinate-i[0].coordinate):1,v=function(e,t,r){var n="width"===r,{x:a,y:i,width:s,height:o}=e;return 1===t?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}(s,y,m);return"equidistantPreserveStart"===c?function(e,t,r,n,a){for(var i,s=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var t=null===n||void 0===n?void 0:n[c];if(void 0===t)return{v:lx(n,u)};var i,s=c,h=()=>(void 0===i&&(i=r(t,s)),i),f=t.coordinate,m=0===c||ux(e,f,h,d,l);m||(c=0,d=o,u+=1),m&&(d=f+e*(h()/2+a),c+=u)};u<=s.length;)if(i=h())return i.v;return[]}(y,v,g,i,o):(f="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,{start:l,end:c}=t;if(i){var u=n[o-1],d=r(u,o-1),h=e*(u.coordinate+e*d/2-c);s[o-1]=u=hx(hx({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),ux(e,u.tickCoord,()=>d,l,c)&&(c=u.tickCoord-e*(d/2+a),s[o-1]=hx(hx({},u),{},{isShow:!0}))}for(var f=i?o-1:o,m=function(t){var n,i=s[t],o=()=>(void 0===n&&(n=r(i,t)),n);if(0===t){var u=e*(i.coordinate-e*o()/2-l);s[t]=i=hx(hx({},i),{},{tickCoord:u<0?i.coordinate-u*e:i.coordinate})}else s[t]=i=hx(hx({},i),{},{tickCoord:i.coordinate});ux(e,i.tickCoord,o,l,c)&&(l=i.tickCoord+e*(o()/2+a),s[t]=hx(hx({},i),{},{isShow:!0}))},p=0;p<f;p++)m(p);return s}(y,v,g,i,o,"preserveStartEnd"===c):function(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,{start:o}=t,{end:l}=t,c=function(t){var n,c=i[t],u=()=>(void 0===n&&(n=r(c,t)),n);if(t===s-1){var d=e*(c.coordinate+e*u()/2-l);i[t]=c=hx(hx({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else i[t]=c=hx(hx({},c),{},{tickCoord:c.coordinate});ux(e,c.tickCoord,u,o,l)&&(l=c.tickCoord-e*(u()/2+a),i[t]=hx(hx({},c),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return i}(y,v,g,i,o),f.filter(e=>e.isShow))}var px=["viewBox"],gx=["viewBox"];function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(null,arguments)}function vx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vx(Object(r),!0).forEach(function(t){wx(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vx(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xx(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wx(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Nx extends t.Component{constructor(e){super(e),this.tickRefs=t.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,t){var{viewBox:r}=e,n=xx(e,px),a=this.props,{viewBox:i}=a,s=xx(a,gx);return!pb(r,i)||!pb(n,s)||!pb(t,this.state)}getTickLineCoord(e){var t,r,n,a,i,s,{x:o,y:l,width:c,height:u,orientation:d,tickSize:h,mirror:f,tickMargin:m}=this.props,p=f?-1:1,g=e.tickSize||h,y=Sr(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=r=e.coordinate,s=(n=(a=l+ +!f*u)-p*g)-p*m,i=y;break;case"left":n=a=e.coordinate,i=(t=(r=o+ +!f*c)-p*g)-p*m,s=y;break;case"right":n=a=e.coordinate,i=(t=(r=o+ +f*c)+p*g)+p*m,s=y;break;default:t=r=e.coordinate,s=(n=(a=l+ +f*u)+p*g)+p*m,i=y}return{line:{x1:t,y1:n,x2:r,y2:a},tick:{x:i,y:s}}}getTickTextAnchor(){var e,{orientation:t,mirror:r}=this.props;switch(t){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}getTickVerticalAnchor(){var{orientation:e,mirror:t}=this.props;switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}renderAxisLine(){var{x:e,y:r,width:n,height:a,orientation:i,mirror:s,axisLine:o}=this.props,l=bx(bx(bx({},Cv(this.props,!1)),Cv(o,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var c=+("top"===i&&!s||"bottom"===i&&s);l=bx(bx({},l),{},{x1:e,y1:r+c*a,x2:e+n,y2:r+c*a})}else{var u=+("left"===i&&!s||"right"===i&&s);l=bx(bx({},l),{},{x1:e+u*n,y1:r,x2:e+u*n,y2:r+a})}return t.createElement("line",yx({},l,{className:ft("recharts-cartesian-axis-line",br()(o,"className"))}))}static renderTickItem(e,r,n){var a,i=ft(r.className,"recharts-cartesian-axis-tick-value");if(t.isValidElement(e))a=t.cloneElement(e,bx(bx({},r),{},{className:i}));else if("function"===typeof e)a=e(bx(bx({},r),{},{className:i}));else{var s="recharts-cartesian-axis-tick-value";"boolean"!==typeof e&&(s=ft(s,e.className)),a=t.createElement(Kb,yx({},r,{className:s}),n)}return a}renderTicks(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],{tickLine:a,stroke:i,tick:s,tickFormatter:o,unit:l}=this.props,c=mx(bx(bx({},this.props),{},{ticks:n}),e,r),u=this.getTickTextAnchor(),d=this.getTickVerticalAnchor(),h=Cv(this.props,!1),f=Cv(s,!1),m=bx(bx({},h),{},{fill:"none"},Cv(a,!1)),p=c.map((e,r)=>{var{line:n,tick:p}=this.getTickLineCoord(e),g=bx(bx(bx(bx({textAnchor:u,verticalAnchor:d},h),{},{stroke:"none",fill:i},f),p),{},{index:r,payload:e,visibleTicksCount:c.length,tickFormatter:o});return t.createElement(vb,yx({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},Sv(this.props,e,r)),a&&t.createElement("line",yx({},m,n,{className:ft("recharts-cartesian-axis-tick-line",br()(a,"className"))})),s&&Nx.renderTickItem(s,g,"".concat("function"===typeof o?o(e.value,r):e.value).concat(l||"")))});return p.length>0?t.createElement("g",{className:"recharts-cartesian-axis-ticks"},p):null}render(){var{axisLine:e,width:r,height:n,className:a,hide:i}=this.props;if(i)return null;var{ticks:s}=this.props;return null!=r&&r<=0||null!=n&&n<=0?null:t.createElement(vb,{className:ft("recharts-cartesian-axis",a),ref:e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(t);var r=t[0];if(r){var n=window.getComputedStyle(r).fontSize,a=window.getComputedStyle(r).letterSpacing;n===this.state.fontSize&&a===this.state.letterSpacing||this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),ax.renderCallByParent(this.props))}}wx(Nx,"displayName","CartesianAxis"),wx(Nx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Sx=["children"],_x=["dangerouslySetInnerHTML","ticks"];function jx(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ex.apply(null,arguments)}function Ax(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kx(e){var r=Ns(),n=(0,t.useMemo)(()=>{var{children:t}=e;return Ax(e,Sx)},[e]),a=Es(e=>Qf(e,n.id)),i=n===a;return(0,t.useEffect)(()=>(r(uy(n)),()=>{r(dy(n))}),[n,r]),i?e.children:null}var Cx=e=>{var{xAxisId:r,className:n}=e,a=Es(No),i=_o(),s="xAxis",o=Es(e=>hp(e,s,r,i)),l=Es(e=>kp(e,s,r,i)),c=Es(e=>bp(e,r)),u=Es(e=>((e,t)=>{var r=xo(e),n=Qf(e,t);if(null!=n){var a=xp(e,n.orientation,n.mirror)[t];return null==a?{x:r.left,y:0}:{x:r.left,y:a}}})(e,r));if(null==c||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:h}=e,f=Ax(e,_x);return t.createElement(Nx,Ex({},f,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:ft("recharts-".concat(s," ").concat(s),n),viewBox:a,ticks:l}))},Ox=e=>{var r,n,a,i,s;return t.createElement(kx,{interval:null!==(r=e.interval)&&void 0!==r?r:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(a=e.angle)&&void 0!==a?a:0,minTickGap:null!==(i=e.minTickGap)&&void 0!==i?i:5,tick:null===(s=e.tick)||void 0===s||s,tickFormatter:e.tickFormatter},t.createElement(Cx,e))};class Tx extends t.Component{render(){return t.createElement(Ox,this.props)}}jx(Tx,"displayName","XAxis"),jx(Tx,"defaultProps",{allowDataOverflow:Xf.allowDataOverflow,allowDecimals:Xf.allowDecimals,allowDuplicatedCategory:Xf.allowDuplicatedCategory,height:Xf.height,hide:!1,mirror:Xf.mirror,orientation:Xf.orientation,padding:Xf.padding,reversed:Xf.reversed,scale:Xf.scale,tickCount:Xf.tickCount,type:Xf.type,xAxisId:0});var Rx=["dangerouslySetInnerHTML","ticks"];function Ix(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lx.apply(null,arguments)}function Px(e){var r=Ns();return(0,t.useEffect)(()=>(r(hy(e)),()=>{r(fy(e))}),[e,r]),null}var Dx=e=>{var r,{yAxisId:n,className:a,width:i,label:s}=e,o=(0,t.useRef)(null),l=(0,t.useRef)(null),c=Es(No),u=_o(),d=Ns(),h="yAxis",f=Es(e=>hp(e,h,n,u)),m=Es(e=>Np(e,n)),p=Es(e=>((e,t)=>{var r=xo(e),n=em(e,t);if(null!=n){var a=wp(e,n.orientation,n.mirror)[t];return null==a?{x:0,y:r.top}:{x:a,y:r.top}}})(e,n)),g=Es(e=>kp(e,h,n,u));if((0,t.useLayoutEffect)(()=>{var e;if("auto"===i&&m&&!rx(s)&&!(0,t.isValidElement)(s)){var r=o.current,a=null===r||void 0===r||null===(e=r.tickRefs)||void 0===e?void 0:e.current,{tickSize:c,tickMargin:u}=r.props,h=(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,s=0;if(t){t.forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>s&&(s=t.width)}});var o=r?r.getBoundingClientRect().width:0,l=s+(a+i)+o+(r?n:0);return Math.round(l)}return 0})({ticks:a,label:l.current,labelGapWithTick:5,tickSize:c,tickMargin:u});Math.round(m.width)!==Math.round(h)&&d(gy({id:n,width:h}))}},[o,null===o||void 0===o||null===(r=o.current)||void 0===r||null===(r=r.tickRefs)||void 0===r?void 0:r.current,null===m||void 0===m?void 0:m.width,m,d,s,n,i]),null==m||null==p)return null;var{dangerouslySetInnerHTML:y,ticks:v}=e,b=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,Rx);return t.createElement(Nx,Lx({},b,{ref:o,labelRef:l,scale:f,x:p.x,y:p.y,width:m.width,height:m.height,className:ft("recharts-".concat(h," ").concat(h),a),viewBox:c,ticks:g}))},Mx=e=>{var r,n,a,i,s;return t.createElement(t.Fragment,null,t.createElement(Px,{interval:null!==(r=e.interval)&&void 0!==r?r:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(a=e.angle)&&void 0!==a?a:0,minTickGap:null!==(i=e.minTickGap)&&void 0!==i?i:5,tick:null===(s=e.tick)||void 0===s||s,tickFormatter:e.tickFormatter}),t.createElement(Dx,e))},Fx={allowDataOverflow:Zf.allowDataOverflow,allowDecimals:Zf.allowDecimals,allowDuplicatedCategory:Zf.allowDuplicatedCategory,hide:!1,mirror:Zf.mirror,orientation:Zf.orientation,padding:Zf.padding,reversed:Zf.reversed,scale:Zf.scale,tickCount:Zf.tickCount,type:Zf.type,width:Zf.width,yAxisId:0};class Bx extends t.Component{render(){return t.createElement(Mx,this.props)}}Ix(Bx,"displayName","YAxis"),Ix(Bx,"defaultProps",Fx);var Ux=r(7950);function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zx.apply(null,arguments)}function Hx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hx(Object(r),!0).forEach(function(t){qx(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hx(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qx(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gx(e){return Array.isArray(e)&&_r(e[0])&&_r(e[1])?e.join(" ~ "):e}var Wx=e=>{var{separator:r=" : ",contentStyle:n={},itemStyle:a={},labelStyle:i={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:f=!1}=e,m=$x({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),p=$x({margin:0},i),g=!Or(d),y=g?d:"",v=ft("recharts-default-tooltip",c),b=ft("recharts-tooltip-label",u);g&&h&&void 0!==s&&null!==s&&(y=h(d,s));var x=f?{role:"status","aria-live":"assertive"}:{};return t.createElement("div",zx({className:v,style:m},x),t.createElement("p",{className:b,style:p},t.isValidElement(y)?y:"".concat(y)),(()=>{if(s&&s.length){var e=(l?ks()(s,l):s).map((e,n)=>{if("none"===e.type)return null;var i=e.formatter||o||Gx,{value:l,name:c}=e,u=l,d=c;if(i){var h=i(l,c,e,n,s);if(Array.isArray(h))[u,d]=h;else{if(null==h)return null;u=h}}var f=$x({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a);return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:f},_r(d)?t.createElement("span",{className:"recharts-tooltip-item-name"},d):null,_r(d)?t.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,t.createElement("span",{className:"recharts-tooltip-item-value"},u),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},Vx="recharts-tooltip-wrapper",Kx={visibility:"hidden"};function Yx(e){var{coordinate:t,translateX:r,translateY:n}=e;return ft(Vx,{["".concat(Vx,"-right")]:Sr(r)&&t&&Sr(t.x)&&r>=t.x,["".concat(Vx,"-left")]:Sr(r)&&t&&Sr(t.x)&&r<t.x,["".concat(Vx,"-bottom")]:Sr(n)&&t&&Sr(t.y)&&n>=t.y,["".concat(Vx,"-top")]:Sr(n)&&t&&Sr(t.y)&&n<t.y})}function Jx(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(i&&Sr(i[n]))return i[n];var u=r[n]-o-(a>0?a:0),d=r[n]+a;if(t[n])return s[n]?u:d;var h=l[n];return null==h?0:s[n]?u<h?Math.max(d,h):Math.max(u,h):null==c?0:d+o>h+c?Math.max(u,h):Math.max(d,h)}function Xx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xx(Object(r),!0).forEach(function(t){Zx(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xx(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zx(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ew extends t.PureComponent{constructor(){super(...arguments),Zx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Zx(this,"handleKeyDown",e=>{var t,r,n,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:s,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:f,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:y}=this.props,{cssClasses:v,cssProperties:b}=function(e){var t,r,n,{allowEscapeViewBox:a,coordinate:i,offsetTopLeft:s,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:d}=e;return t=c.height>0&&c.width>0&&i?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=Jx({allowEscapeViewBox:a,coordinate:i,key:"x",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=Jx({allowEscapeViewBox:a,coordinate:i,key:"y",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:u}):Kx,{cssProperties:t,cssClasses:Yx({translateX:r,translateY:n,coordinate:i})}}({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:f}),x=y?{}:Qx(Qx({transition:l&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),w=Qx(Qx({},x),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},m);return t.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:v,style:w,ref:g},i)}}var tw=r(4332),rw=r.n(tw);function nw(){}function aw(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function iw(e){this._context=e}function sw(e){this._context=e}function ow(e){this._context=e}iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:aw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:aw(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},sw.prototype={areaStart:nw,areaEnd:nw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:aw(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ow.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:aw(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class lw{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function cw(e){this._context=e}function uw(e){this._context=e}function dw(e){return new uw(e)}function hw(e){return e<0?-1:1}function fw(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(hw(i)+hw(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function mw(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function pw(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function gw(e){this._context=e}function yw(e){this._context=new vw(e)}function vw(e){this._context=e}function bw(e){this._context=e}function xw(e){var t,r,n=e.length-1,a=new Array(n),i=new Array(n),s=new Array(n);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,s[t]-=r*s[t-1];for(a[n-1]=s[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function ww(e,t){this._context=e,this._t=t}cw.prototype={areaStart:nw,areaEnd:nw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},gw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pw(this,this._t0,mw(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pw(this,mw(this,r=fw(this,e,t)),r);break;default:pw(this,this._t0,r=fw(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(yw.prototype=Object.create(gw.prototype)).point=function(e,t){gw.prototype.point.call(this,t,e)},vw.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}},bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=xw(e),a=xw(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},ww.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};const Nw=Math.PI,Sw=2*Nw,_w=1e-6,jw=Sw-_w;function Ew(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class Aw{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Ew:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ew;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,a,i){this._append`C${+e},${+t},${+r},${+n},${this._x1=+a},${this._y1=+i}`}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,o=r-e,l=n-t,c=i-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>_w)if(Math.abs(u*o-l*c)>_w&&a){let h=r-i,f=n-s,m=o*o+l*l,p=h*h+f*f,g=Math.sqrt(m),y=Math.sqrt(d),v=a*Math.tan((Nw-Math.acos((m+d-p)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>_w&&this._append`L${e+b*c},${t+b*u}`,this._append`A${a},${a},0,0,${+(u*h>c*f)},${this._x1=e+x*o},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,a,i){if(e=+e,t=+t,i=!!i,(r=+r)<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(n),o=r*Math.sin(n),l=e+s,c=t+o,u=1^i,d=i?n-a:a-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>_w||Math.abs(this._y1-c)>_w)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Sw+Sw),d>jw?this._append`A${r},${r},0,1,${u},${e-s},${t-o}A${r},${r},0,1,${u},${this._x1=l},${this._y1=c}`:d>_w&&this._append`A${r},${r},0,${+(d>=Nw)},${u},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function kw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new Aw(t)}function Cw(e){return e[0]}function Ow(e){return e[1]}function Tw(e,t){var r=Rs(!0),n=null,a=dw,i=null,s=kw(o);function o(o){var l,c,u,d=(o=Ts(o)).length,h=!1;for(null==n&&(i=a(u=s())),l=0;l<=d;++l)!(l<d&&r(c=o[l],l,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,o),+t(c,l,o));if(u)return i=null,u+""||null}return e="function"===typeof e?e:void 0===e?Cw:Rs(e),t="function"===typeof t?t:void 0===t?Ow:Rs(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Rs(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Rs(+e),o):t},o.defined=function(e){return arguments.length?(r="function"===typeof e?e:Rs(!!e),o):r},o.curve=function(e){return arguments.length?(a=e,null!=n&&(i=a(n)),o):a},o.context=function(e){return arguments.length?(null==e?n=i=null:i=a(n=e),o):n},o}function Rw(e,t,r){var n=null,a=Rs(!0),i=null,s=dw,o=null,l=kw(c);function c(c){var u,d,h,f,m,p=(c=Ts(c)).length,g=!1,y=new Array(p),v=new Array(p);for(null==i&&(o=s(m=l())),u=0;u<=p;++u){if(!(u<p&&a(f=c[u],u,c))===g)if(g=!g)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}g&&(y[u]=+e(f,u,c),v[u]=+t(f,u,c),o.point(n?+n(f,u,c):y[u],r?+r(f,u,c):v[u]))}if(m)return o=null,m+""||null}function u(){return Tw().defined(a).curve(s).context(i)}return e="function"===typeof e?e:void 0===e?Cw:Rs(+e),t="function"===typeof t?t:Rs(void 0===t?0:+t),r="function"===typeof r?r:void 0===r?Ow:Rs(+r),c.x=function(t){return arguments.length?(e="function"===typeof t?t:Rs(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:Rs(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Rs(+e),c):n},c.y=function(e){return arguments.length?(t="function"===typeof e?e:Rs(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:Rs(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Rs(+e),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:Rs(!!e),c):a},c.curve=function(e){return arguments.length?(s=e,null!=i&&(o=s(i)),c):s},c.context=function(e){return arguments.length?(null==e?i=o=null:o=s(i=e),c):i},c}function Iw(){return Iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iw.apply(null,arguments)}function Lw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(r),!0).forEach(function(t){Dw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Dw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mw={curveBasisClosed:function(e){return new sw(e)},curveBasisOpen:function(e){return new ow(e)},curveBasis:function(e){return new iw(e)},curveBumpX:function(e){return new lw(e,!0)},curveBumpY:function(e){return new lw(e,!1)},curveLinearClosed:function(e){return new cw(e)},curveLinear:dw,curveMonotoneX:function(e){return new gw(e)},curveMonotoneY:function(e){return new yw(e)},curveNatural:function(e){return new bw(e)},curveStep:function(e){return new ww(e,.5)},curveStepAfter:function(e){return new ww(e,1)},curveStepBefore:function(e){return new ww(e,0)}},Fw=e=>qh(e.x)&&qh(e.y),Bw=e=>e.x,Uw=e=>e.y,zw=e=>{var t,{type:r="linear",points:n=[],baseLine:a,layout:i,connectNulls:s=!1}=e,o=((e,t)=>{if("function"===typeof e)return e;var r="curve".concat(Tr(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?Mw[r]||dw:Mw["".concat(r).concat("vertical"===t?"Y":"X")]})(r,i),l=s?n.filter(Fw):n;if(Array.isArray(a)){var c=s?a.filter(e=>Fw(e)):a,u=l.map((e,t)=>Pw(Pw({},e),{},{base:c[t]}));return t="vertical"===i?Rw().y(Uw).x1(Bw).x0(e=>e.base.x):Rw().x(Bw).y1(Uw).y0(e=>e.base.y),t.defined(Fw).curve(o),t(u)}return(t="vertical"===i&&Sr(a)?Rw().y(Uw).x1(Bw).x0(a):Sr(a)?Rw().x(Bw).y1(Uw).y0(a):Tw().x(Bw).y(Uw)).defined(Fw).curve(o),t(l)},Hw=e=>{var{className:r,points:n,path:a,pathRef:i}=e;if((!n||!n.length)&&!a)return null;var s=n&&n.length?zw(e):a;return t.createElement("path",Iw({},Cv(e,!1),((e,r)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,t.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var a={};return Object.keys(n).forEach(e=>{Nv.includes(e)&&(a[e]=r||(t=>n[e](n,t)))}),a})(e),{className:ft("recharts-curve",r),d:null===s?void 0:s,ref:i}))},$w=["x","y","top","left","width","height","className"];function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qw.apply(null,arguments)}function Gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ww(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vw=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Kw=e=>{var{x:r=0,y:n=0,top:a=0,left:i=0,width:s=0,height:o=0,className:l}=e,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,$w),u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gw(Object(r),!0).forEach(function(t){Ww(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:n,top:a,left:i,width:s,height:o},c);return Sr(r)&&Sr(n)&&Sr(s)&&Sr(o)&&Sr(a)&&Sr(i)?t.createElement("path",qw({},Cv(u,!0),{className:ft("recharts-cross",l),d:Vw(r,n,s,o,a,i)})):null};var Yw=r(4250),Jw=r.n(Yw);var Xw=1e-4,Qw=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Zw=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),eN=(e,t)=>r=>{var n=Qw(e,t);return Zw(n,r)},tN=function(){for(var e,t,r,n,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];if(1===i.length)switch(i[0]){case"linear":[e,r,t,n]=[0,0,1,1];break;case"ease":[e,r,t,n]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,n]=[.42,0,1,1];break;case"ease-out":[e,r,t,n]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,n]=[0,0,.58,1];break;default:var o=i[0].split("(");"cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length&&([e,r,t,n]=o[1].split(")")[0].split(",").map(e=>parseFloat(e)))}else 4===i.length&&([e,r,t,n]=i);var l,c,u=eN(e,t),d=eN(r,n),h=(l=e,c=t,e=>{var t=[...Qw(l,c).map((e,t)=>e*t).slice(1),0];return Zw(t,e)}),f=e=>e>1?1:e<0?0:e,m=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=u(r)-t,i=h(r);if(Math.abs(a-t)<Xw||i<Xw)return d(r);r=f(r-a/i)}return d(r)};return m.isStepper=!1,m},rN=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tN(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,a=(e,a,i)=>{var s=i+(-(e-a)*t-i*r)*n/1e3,o=i*n/1e3+e;return Math.abs(o-a)<Xw&&Math.abs(s)<Xw?[a,0]:[o,s]};return a.isStepper=!0,a.dt=n,a}();default:if("cubic-bezier"===e.split("(")[0])return tN(e)}return"function"===typeof e?e:null};function nN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nN(Object(r),!0).forEach(function(t){iN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iN(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sN=(e,t)=>Object.keys(t).reduce((r,n)=>aN(aN({},r),{},{[n]:e(n,t[n])}),{});function oN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oN(Object(r),!0).forEach(function(t){cN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cN(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uN=(e,t,r)=>e+(t-e)*r,dN=e=>{var{from:t,to:r}=e;return t!==r},hN=(e,t,r)=>{var n=sN((t,r)=>{if(dN(r)){var[n,a]=e(r.from,r.to,r.velocity);return lN(lN({},r),{},{from:n,velocity:a})}return r},t);return r<1?sN((e,t)=>dN(t)?lN(lN({},t),{},{velocity:uN(t.velocity,n[e].velocity,r),from:uN(t.from,n[e].from,r)}):t,t):hN(e,n,r-1)};function fN(e,t,r,n,a,i){var s,o=n.reduce((r,n)=>lN(lN({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,c=n=>{s||(s=n);var u=(n-s)/r.dt;o=hN(r,o,u),a(lN(lN(lN({},e),t),sN((e,t)=>t.from,o))),s=n,Object.values(o).filter(dN).length&&(l=i.setTimeout(c))};return()=>(l=i.setTimeout(c),()=>{l()})}const mN=(e,t,r,n,a,i)=>{var s,o,l=(s=e,o=t,[Object.keys(s),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return!0===r.isStepper?fN(e,t,r,l,a,i):function(e,t,r,n,a,i,s){var o,l=null,c=a.reduce((r,n)=>lN(lN({},r),{},{[n]:[e[n],t[n]]}),{}),u=a=>{o||(o=a);var d=(a-o)/n,h=sN((e,t)=>uN(...t,r(d)),c);if(i(lN(lN(lN({},e),t),h)),d<1)l=s.setTimeout(u);else{var f=sN((e,t)=>uN(...t,r(1)),c);i(lN(lN(lN({},e),t),f))}};return()=>(l=s.setTimeout(u),()=>{l()})}(e,t,r,n,l,a,i)};class pN{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,a=i=>{i-r>=t?e(i):"function"===typeof requestAnimationFrame&&(n=requestAnimationFrame(a))};return n=requestAnimationFrame(a),()=>{cancelAnimationFrame(n)}}}var gN=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function yN(){return yN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yN.apply(null,arguments)}function vN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vN(Object(r),!0).forEach(function(t){xN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xN(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wN(){return function(e){var t=()=>null,r=!1,n=null,a=i=>{if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,[o,...l]=s;return"number"===typeof o?void(n=e.setTimeout(a.bind(null,l),o)):(a(o),void(n=e.setTimeout(a.bind(null,l))))}"object"===typeof i&&t(i),"function"===typeof i&&i()}};return{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new pN)}class NN extends t.PureComponent{constructor(e,t){super(e,t),xN(this,"mounted",!1),xN(this,"manager",null),xN(this,"stopJSAnimation",null),xN(this,"unSubscribe",null);var{isActive:r,attributeName:n,from:a,to:i,children:s,duration:o,animationManager:l}=this.props;if(this.manager=l,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||o<=0)return this.state={style:{}},void("function"===typeof s&&(this.state={style:i}));if(a){if("function"===typeof s)return void(this.state={style:a});this.state={style:n?{[n]:a}:a}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:t}=this.props;this.mounted=!0,e&&t&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:t,canBegin:r,attributeName:n,shouldReAnimate:a,to:i,from:s}=this.props,{style:o}=this.state;if(r)if(t){if(!(Jw()(e.to,i)&&e.canBegin&&e.isActive)){var l=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var c=l||a?s:e.to;if(this.state&&o){var u={style:n?{[n]:c}:c};(n&&o[n]!==c||!n&&o!==c)&&this.setState(u)}this.runAnimation(bN(bN({},this.props),{},{from:c,begin:0}))}}else{var d={style:n?{[n]:i}:i};this.state&&o&&(n&&o[n]!==i||!n&&o!==i)&&this.setState(d)}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:t,to:r,duration:n,easing:a,begin:i,onAnimationEnd:s,onAnimationStart:o}=e,l=mN(t,r,rN(a),n,this.changeStyle,this.manager.getTimeoutController());this.manager.start([o,i,()=>{this.stopJSAnimation=l()},n,s])}runAnimation(e){var{begin:t,duration:r,attributeName:n,to:a,easing:i,onAnimationStart:s,onAnimationEnd:o,children:l}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),"function"!==typeof i&&"function"!==typeof l&&"spring"!==i){var c=n?{[n]:a}:a,u=((e,t,r)=>e.map(e=>{return"".concat((n=e,n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var n}).join(","))(Object.keys(c),r,i);this.manager.start([s,t,bN(bN({},c),{},{transition:u}),r,o])}else this.runJSAnimation(e)}render(){var e=this.props,{children:r,begin:n,duration:a,attributeName:i,easing:s,isActive:o,from:l,to:c,canBegin:u,onAnimationEnd:d,shouldReAnimate:h,onAnimationReStart:f,animationManager:m}=e,p=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,gN),g=t.Children.count(r),y=this.state.style;if("function"===typeof r)return r(y);if(!o||0===g||a<=0)return r;var v=e=>{var{style:r={},className:n}=e.props;return(0,t.cloneElement)(e,bN(bN({},p),{},{style:bN(bN({},r),y),className:n}))};return 1===g?v(t.Children.only(r)):t.createElement("div",null,t.Children.map(r,e=>v(e)))}}xN(NN,"displayName","Animate"),xN(NN,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var SN=(0,t.createContext)(null);function _N(e){var r,n,a=(0,t.useContext)(SN);return t.createElement(NN,yN({},e,{animationManager:null!==(r=null!==(n=e.animationManager)&&void 0!==n?n:a)&&void 0!==r?r:wN()}))}function jN(){return jN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jN.apply(null,arguments)}var EN=(e,t,r,n,a)=>{var i,s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(s>0&&a instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=a[d]>s?s:a[d];i="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(i+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),i+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(i+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*u[1])),i+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(i+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+r-l*u[2],",").concat(t+n)),i+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(i+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*u[3])),i+="Z"}else if(s>0&&a===+a&&a>0){var h=Math.min(s,a);i="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else i="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return i},AN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kN=e=>{var r=lb(e,AN),n=(0,t.useRef)(null),[a,i]=(0,t.useState)(-1);(0,t.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(t){}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=r,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:p,isUpdateAnimationActive:g}=r;if(s!==+s||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var y=ft("recharts-rectangle",d);return g?t.createElement(_N,{canBegin:a>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:f,animationEasing:h,isActive:g},e=>{var{width:i,height:s,x:o,y:l}=e;return t.createElement(_N,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:p,easing:h},t.createElement("path",jN({},Cv(r,!0),{className:y,d:EN(o,l,i,s,u),ref:n})))}):t.createElement("path",jN({},Cv(r,!0),{className:y,d:EN(s,o,l,c,u)}))};function CN(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e;return{points:[zs(t,r,n,a),zs(t,r,n,i)],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function ON(){return ON=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ON.apply(null,arguments)}var TN=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,c=o*(s?1:-1)+n,u=Math.asin(o/c)/Bs,d=l?a:a+i*u,h=l?a-i*u:a;return{center:zs(t,r,c,d),circleTangency:zs(t,r,n,d),lineTangency:zs(t,r,c*Math.cos(u*Bs),h),theta:u}},RN=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:s}=e,o=((e,t)=>xr(t-e)*Math.min(Math.abs(t-e),359.999))(i,s),l=i+o,c=zs(t,r,a,i),u=zs(t,r,a,l),d="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(i>l),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(n>0){var h=zs(t,r,n,i),f=zs(t,r,n,l);d+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(i<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},IN={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},LN=e=>{var r=lb(e,IN),{cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=r;if(s<i||u===d)return null;var f,m=ft("recharts-sector",h),p=s-i,g=Ar(o,p,0,!0);return f=g>0&&Math.abs(u-d)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:c}=e,u=xr(c-l),{circleTangency:d,lineTangency:h,theta:f}=TN({cx:t,cy:r,radius:a,angle:l,sign:u,cornerRadius:i,cornerIsExternal:o}),{circleTangency:m,lineTangency:p,theta:g}=TN({cx:t,cy:r,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:o}),y=o?Math.abs(l-c):Math.abs(l-c)-f-g;if(y<0)return s?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*i,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(2*-i,",0\n      "):RN({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var v="M ".concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(p.x,",").concat(p.y,"\n  ");if(n>0){var{circleTangency:b,lineTangency:x,theta:w}=TN({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:N,lineTangency:S,theta:_}=TN({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),j=o?Math.abs(l-c):Math.abs(l-c)-w-_;if(j<0&&0===i)return"".concat(v,"L").concat(t,",").concat(r,"Z");v+="L".concat(S.x,",").concat(S.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(j>180),",").concat(+(u>0),",").concat(b.x,",").concat(b.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(x.x,",").concat(x.y,"Z")}else v+="L".concat(t,",").concat(r,"Z");return v})({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):RN({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d}),t.createElement("path",ON({},Cv(r,!0),{className:m,d:f}))};function PN(e,t,r){var n,a,i,s;if("horizontal"===e)i=n=t.x,a=r.top,s=r.top+r.height;else if("vertical"===e)s=a=t.y,n=r.left,i=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return CN(t);var{cx:o,cy:l,innerRadius:c,outerRadius:u,angle:d}=t,h=zs(o,l,c,d),f=zs(o,l,u,d);n=h.x,a=h.y,i=f.x,s=f.y}return[{x:n,y:a},{x:i,y:s}]}function DN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function MN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DN(Object(r),!0).forEach(function(t){FN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function FN(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BN=()=>{var e=Es(Zp),t=Es(kg),r=Es(jg);return io(MN(MN({},e),{},{scale:r}),t)};function UN(){return UN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UN.apply(null,arguments)}function zN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zN(Object(r),!0).forEach(function(t){$N(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qN(e){var r,n,{coordinate:a,payload:i,index:s,offset:o,tooltipAxisBandSize:l,layout:c,cursor:u,tooltipEventType:d,chartName:h}=e,f=a,m=i,p=s;if(!u||!f||"ScatterChart"!==h&&"axis"!==d)return null;if("ScatterChart"===h)r=f,n=Kw;else if("BarChart"===h)r=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(c,f,o,l),n=kN;else if("radial"===c){var{cx:g,cy:y,radius:v,startAngle:b,endAngle:x}=CN(f);r={cx:g,cy:y,startAngle:b,endAngle:x,innerRadius:v,outerRadius:v},n=LN}else r={points:PN(c,f,o)},n=Hw;var w="object"===typeof u&&"className"in u?u.className:void 0,N=HN(HN(HN(HN({stroke:"#ccc",pointerEvents:"none"},o),r),Cv(u,!1)),{},{payload:m,payloadIndex:p,className:ft("recharts-tooltip-cursor",w)});return(0,t.isValidElement)(u)?(0,t.cloneElement)(u,N):(0,t.createElement)(n,N)}function GN(e){var r=BN(),n=(()=>{var e;return null!==(e=Es(xo))&&void 0!==e?e:ko})(),a=Oo(),i=Es(vf);return t.createElement(qN,UN({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:a,tooltipAxisBandSize:r,chartName:i}))}function WN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function VN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WN(Object(r),!0).forEach(function(t){KN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KN(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YN(e){return e.dataKey}var JN=[],XN={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!bb,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function QN(e){var r=lb(e,XN),{active:n,allowEscapeViewBox:a,animationDuration:i,animationEasing:s,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:h,reverseDirection:f,useTranslate3d:m,wrapperStyle:p,cursor:g,shared:y,trigger:v,defaultIndex:b,portal:x,axisId:w}=r,N=Ns(),S="number"===typeof b?String(b):b;(0,t.useEffect)(()=>{N($i({shared:y,trigger:v,axisId:w,active:n,defaultIndex:S}))},[N,y,v,w,n,S]);var _=Ao(),j=Ov(),E=function(e){return Es(t=>Dp(t,e))}(y),{activeIndex:A,isActive:k}=Es(e=>Qg(e,E,v,S)),C=Es(e=>Xg(e,E,v,S)),O=Es(e=>Jg(e,E,v,S)),T=Es(e=>Yg(e,E,v,S)),R=C,I=(0,t.useContext)(Vv),L=null!==n&&void 0!==n?n:k,[P,D]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[r,n]=(0,t.useState)({height:0,left:0,top:0,width:0}),a=(0,t.useCallback)(e=>{if(null!=e){var t=e.getBoundingClientRect(),a={height:t.height,left:t.left,top:t.top,width:t.width};(Math.abs(a.height-r.height)>1||Math.abs(a.left-r.left)>1||Math.abs(a.top-r.top)>1||Math.abs(a.width-r.width)>1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,a]}([R,L]),M="axis"===E?O:void 0;Wv(E,v,T,M,A,L);var F=null!==x&&void 0!==x?x:I;if(null==F)return null;var B=null!==R&&void 0!==R?R:JN;L||(B=JN),l&&B.length&&(B=function(e,t,r){return!0===t?rw()(e,r):"function"===typeof t?rw()(e,t):e}(R.filter(e=>null!=e.value&&(!0!==e.hide||r.includeHidden)),d,YN));var U=B.length>0,z=t.createElement(ew,{allowEscapeViewBox:a,animationDuration:i,animationEasing:s,isAnimationActive:c,active:L,coordinate:T,hasPayload:U,offset:u,position:h,reverseDirection:f,useTranslate3d:m,viewBox:_,wrapperStyle:p,lastBoundingBox:P,innerRef:D,hasPortalFromProps:Boolean(x)},function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):"function"===typeof e?t.createElement(e,r):t.createElement(Wx,r)}(o,VN(VN({},r),{},{payload:B,label:M,active:L,coordinate:T,accessibilityLayer:j})));return t.createElement(t.Fragment,null,(0,Ux.createPortal)(z,F),L&&t.createElement(GN,{cursor:g,tooltipEventType:E,coordinate:T,payload:R,index:A}))}function ZN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZN(Object(r),!0).forEach(function(t){tS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tS(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rS(e){var r=Ns(),n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{var t=eS(eS({},e),{},{stackId:eo(e.stackId)});null===n.current?r(wy(t)):n.current!==t&&r(Ny({prev:n.current,next:t})),n.current=t},[r,e]),(0,t.useEffect)(()=>()=>{n.current&&(r(Sy(n.current)),n.current=null)},[r]),null}function nS(e){var r=Ns();return(0,t.useEffect)(()=>(r(_y(e)),()=>{r(jy(e))}),[r,e]),null}var aS=["children"];var iS=()=>{},sS=(0,t.createContext)({addErrorBar:iS,removeErrorBar:iS}),oS={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},lS=(0,t.createContext)(oS);function cS(e){var{children:r}=e,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,aS);return t.createElement(lS.Provider,{value:n},r)}var uS=e=>{var{children:r,xAxisId:n,yAxisId:a,zAxisId:i,dataKey:s,data:o,stackId:l,hide:c,type:u,barSize:d}=e,[h,f]=t.useState([]),m=(0,t.useCallback)(e=>{f(t=>[...t,e])},[f]),p=(0,t.useCallback)(e=>{f(t=>t.filter(t=>t!==e))},[f]),g=_o();return t.createElement(sS.Provider,{value:{addErrorBar:m,removeErrorBar:p}},t.createElement(rS,{type:u,data:o,xAxisId:n,yAxisId:a,zAxisId:i,dataKey:s,errorBars:h,stackId:l,hide:c,barSize:d,isPanorama:g}),r)};function dS(e){var{addErrorBar:r,removeErrorBar:n}=(0,t.useContext)(sS);return(0,t.useEffect)(()=>(r(e),()=>{n(e)}),[r,n,e]),null}var hS=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function fS(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mS(){return mS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mS.apply(null,arguments)}function pS(e){var{direction:r,width:n,dataKey:a,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:l}=e,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,hS),u=Cv(c,!1),{data:d,dataPointFormatter:h,xAxisId:f,yAxisId:m,errorBarOffset:p}=(0,t.useContext)(lS),g=(e=>{var t=_o();return Es(r=>Op(r,"xAxis",e,t))})(f),y=(e=>{var t=_o();return Es(r=>Op(r,"yAxis",e,t))})(m);if(null==(null===g||void 0===g?void 0:g.scale)||null==(null===y||void 0===y?void 0:y.scale)||null==d)return null;if("x"===r&&"number"!==g.type)return null;var v=d.map(e=>{var{x:c,y:d,value:f,errorVal:m}=h(e,a,r);if(!m)return null;var v,b,x=[];if(Array.isArray(m)?[v,b]=m:v=b=m,"x"===r){var{scale:w}=g,N=d+p,S=N+n,_=N-n,j=w(f-v),E=w(f+b);x.push({x1:E,y1:S,x2:E,y2:_}),x.push({x1:j,y1:N,x2:E,y2:N}),x.push({x1:j,y1:S,x2:j,y2:_})}else if("y"===r){var{scale:A}=y,k=c+p,C=k-n,O=k+n,T=A(f-v),R=A(f+b);x.push({x1:C,y1:R,x2:O,y2:R}),x.push({x1:k,y1:T,x2:k,y2:R}),x.push({x1:C,y1:T,x2:O,y2:T})}var I="".concat(c+p,"px ").concat(d+p,"px");return t.createElement(vb,mS({className:"recharts-errorBar",key:"bar-".concat(x.map(e=>"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)))},u),x.map(e=>{var r=i?{transformOrigin:"".concat(e.x1-5,"px")}:void 0;return t.createElement(_N,{from:{transform:"scaleY(0)",transformOrigin:I},to:{transform:"scaleY(1)",transformOrigin:I},begin:s,easing:l,isActive:i,duration:o,key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2),style:{transformOrigin:I}},t.createElement("line",mS({},e,{style:r})))}))});return t.createElement(vb,{className:"recharts-errorBars"},v)}var gS=(0,t.createContext)(void 0);function yS(e){var{direction:r,children:n}=e;return t.createElement(gS.Provider,{value:r},n)}var vS={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function bS(e){var r=function(e){var r=(0,t.useContext)(gS);return null!=e?e:null!=r?r:"x"}(e.direction),{width:n,isAnimationActive:a,animationBegin:i,animationDuration:s,animationEasing:o}=lb(e,vS);return t.createElement(t.Fragment,null,t.createElement(dS,{dataKey:e.dataKey,direction:r}),t.createElement(pS,mS({},e,{direction:r,width:n,isAnimationActive:a,animationBegin:i,animationDuration:s,animationEasing:o})))}class xS extends t.Component{render(){return t.createElement(bS,this.props)}}fS(xS,"defaultProps",vS),fS(xS,"displayName","ErrorBar");var wS=e=>null;wS.displayName="Cell";var NS=r(356),SS=r.n(NS),_S=["valueAccessor"],jS=["data","dataKey","clockWise","id","textBreakAll"];function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ES.apply(null,arguments)}function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AS(Object(r),!0).forEach(function(t){CS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function CS(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OS(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var TS=e=>Array.isArray(e.value)?SS()(e.value):e.value;function RS(e){var{valueAccessor:r=TS}=e,n=OS(e,_S),{data:a,dataKey:i,clockWise:s,id:o,textBreakAll:l}=n,c=OS(n,jS);return a&&a.length?t.createElement(vb,{className:"recharts-label-list"},a.map((e,n)=>{var a=Or(i)?r(e,n):Ys(e&&e.payload,i),u=Or(o)?{}:{id:"".concat(o,"-").concat(n)};return t.createElement(ax,ES({},Cv(e,!0),c,u,{parentViewBox:e.parentViewBox,value:a,textBreakAll:l,viewBox:ax.parseViewBox(Or(s)?e:kS(kS({},e),{},{clockWise:s})),key:"label-".concat(n),index:n}))})):null}RS.displayName="LabelList",RS.renderCallByParent=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:a}=e,i=kv(a,RS).map((e,n)=>(0,t.cloneElement)(e,{data:r,key:"labelList-".concat(n)}));if(!n)return i;var s=function(e,r){return e?!0===e?t.createElement(RS,{key:"labelList-implicit",data:r}):t.isValidElement(e)||rx(e)?t.createElement(RS,{key:"labelList-implicit",data:r,content:e}):"object"===typeof e?t.createElement(RS,ES({data:r},e,{key:"labelList-implicit"})):null:null}(e.label,r);return[s,...i]};var IS="Invariant failed";var LS=r(9397),PS=r.n(LS);function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DS.apply(null,arguments)}var MS=(e,t,r,n,a)=>{var i,s=r-n;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z")},FS={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BS=e=>{var r=lb(e,FS),n=(0,t.useRef)(),[a,i]=(0,t.useState)(-1);(0,t.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(t){}},[]);var{x:s,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=r,{animationEasing:h,animationDuration:f,animationBegin:m,isUpdateAnimationActive:p}=r;if(s!==+s||o!==+o||l!==+l||c!==+c||u!==+u||0===l&&0===c||0===u)return null;var g=ft("recharts-trapezoid",d);return p?t.createElement(_N,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:s,y:o},duration:f,animationEasing:h,isActive:p},e=>{var{upperWidth:i,lowerWidth:s,height:o,x:l,y:c}=e;return t.createElement(_N,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:h},t.createElement("path",DS({},Cv(r,!0),{className:g,d:MS(l,c,i,s,o),ref:n})))}):t.createElement("g",null,t.createElement("path",DS({},Cv(r,!0),{className:g,d:MS(s,o,l,c,u)})))};Math.abs,Math.atan2;const US=Math.cos,zS=(Math.max,Math.min,Math.sin),HS=Math.sqrt,$S=Math.PI,qS=2*$S;const GS={draw(e,t){const r=HS(t/$S);e.moveTo(r,0),e.arc(0,0,r,0,qS)}},WS={draw(e,t){const r=HS(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},VS=HS(1/3),KS=2*VS,YS={draw(e,t){const r=HS(t/KS),n=r*VS;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},JS={draw(e,t){const r=HS(t),n=-r/2;e.rect(n,n,r,r)}},XS=zS($S/10)/zS(7*$S/10),QS=zS(qS/10)*XS,ZS=-US(qS/10)*XS,e_={draw(e,t){const r=HS(.8908130915292852*t),n=QS*r,a=ZS*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const t=qS*i/5,s=US(t),o=zS(t);e.lineTo(o*r,-s*r),e.lineTo(s*n-o*a,o*n+s*a)}e.closePath()}},t_=HS(3),r_={draw(e,t){const r=-HS(t/(3*t_));e.moveTo(0,2*r),e.lineTo(-t_*r,-r),e.lineTo(t_*r,-r),e.closePath()}},n_=-.5,a_=HS(3)/2,i_=1/HS(12),s_=3*(i_/2+1),o_={draw(e,t){const r=HS(t/s_),n=r/2,a=r*i_,i=n,s=r*i_+r,o=-i,l=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,l),e.lineTo(n_*n-a_*a,a_*n+n_*a),e.lineTo(n_*i-a_*s,a_*i+n_*s),e.lineTo(n_*o-a_*l,a_*o+n_*l),e.lineTo(n_*n+a_*a,n_*a-a_*n),e.lineTo(n_*i+a_*s,n_*s-a_*i),e.lineTo(n_*o+a_*l,n_*l-a_*o),e.closePath()}};HS(3),HS(3);var l_=["type","size","sizeType"];function c_(){return c_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c_.apply(null,arguments)}function u_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u_(Object(r),!0).forEach(function(t){h_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h_(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f_={symbolCircle:GS,symbolCross:WS,symbolDiamond:YS,symbolSquare:JS,symbolStar:e_,symbolTriangle:r_,symbolWye:o_},m_=Math.PI/180,p_=e=>{var{type:r="circle",size:n=64,sizeType:a="area"}=e,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,l_),s=d_(d_({},i),{},{type:r,size:n,sizeType:a}),{className:o,cx:l,cy:c}=s,u=Cv(s,!0);return l===+l&&c===+c&&n===+n?t.createElement("path",c_({},u,{className:ft("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(c,")"),d:(()=>{var e=(e=>{var t="symbol".concat(Tr(e));return f_[t]||GS})(r),t=function(e,t){let r=null,n=kw(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"===typeof e?e:Rs(e||GS),t="function"===typeof t?t:Rs(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:Rs(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:Rs(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*m_;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,a,r));return t()})()})):null};p_.registerSymbol=(e,t)=>{f_["symbol".concat(Tr(e))]=t};var g_=["option","shapeType","propTransformer","activeClassName","isActive"];function y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y_(Object(r),!0).forEach(function(t){b_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b_(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x_(e,t){return v_(v_({},t),e)}function w_(e){var{shapeType:r,elementProps:n}=e;switch(r){case"rectangle":return t.createElement(kN,n);case"trapezoid":return t.createElement(BS,n);case"sector":return t.createElement(LN,n);case"symbols":if(function(e){return"symbols"===e}(r))return t.createElement(p_,n);break;default:return null}}function N_(e){var r,{option:n,shapeType:a,propTransformer:i=x_,activeClassName:s="recharts-active-shape",isActive:o}=e,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,g_);if((0,t.isValidElement)(n))r=(0,t.cloneElement)(n,v_(v_({},l),function(e){return(0,t.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)r=n(l);else if(PS()(n)&&"boolean"!==typeof n){var c=i(n,l);r=t.createElement(w_,{shapeType:a,elementProps:c})}else{var u=l;r=t.createElement(w_,{shapeType:a,elementProps:u})}return o?t.createElement(vb,{className:s},r):r}var S_=["x","y"];function __(){return __=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},__.apply(null,arguments)}function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j_(Object(r),!0).forEach(function(t){A_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A_(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k_(e,t){var{x:r,y:n}=e,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,S_),i="".concat(r),s=parseInt(i,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||a.height),u=parseInt(c,10),d="".concat(t.width||a.width),h=parseInt(d,10);return E_(E_(E_(E_(E_({},t),a),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function C_(e){return t.createElement(N_,__({shapeType:"rectangle",propTransformer:k_,activeClassName:"recharts-active-bar"},e))}var O_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,n)=>{if(Sr(e))return e;var a=Sr(r)||Or(r);return a?e(r,n):(a||function(e){if(!e)throw new Error(IS)}(!1),t)}},T_=(e,t)=>{var r=Ns();return(n,a)=>i=>{null===e||void 0===e||e(n,a,i),r(qi({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},R_=e=>{var t=Ns();return(r,n)=>a=>{null===e||void 0===e||e(r,n,a),t(Gi())}},I_=(e,t)=>{var r=Ns();return(n,a)=>i=>{null===e||void 0===e||e(n,a,i),r(Vi({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function L_(e){var{fn:r,args:n}=e,a=Ns(),i=_o();return(0,t.useEffect)(()=>{if(!i){var e=r(n);return a(zi(e)),()=>{a(Hi(e))}}},[r,n,a,i]),null}var P_=()=>{var e=Ns();return(0,t.useEffect)(()=>(e(by()),()=>{e(xy())})),null};function D_(e,t){var r,n,a=Es(t=>Qf(t,e)),i=Es(e=>em(e,t)),s=null!==(r=null===a||void 0===a?void 0:a.allowDataOverflow)&&void 0!==r?r:Xf.allowDataOverflow,o=null!==(n=null===i||void 0===i?void 0:i.allowDataOverflow)&&void 0!==n?n:Zf.allowDataOverflow;return{needClip:s||o,needClipX:s,needClipY:o}}function M_(e){var{xAxisId:r,yAxisId:n,clipPathId:a}=e,i=tb(),{needClipX:s,needClipY:o,needClip:l}=D_(r,n);if(!l)return null;var{x:c,y:u,width:d,height:h}=i;return t.createElement("clipPath",{id:"clipPath-".concat(a)},t.createElement("rect",{x:s?c:c-d/2,y:o?u:u-h/2,width:s?d:2*d,height:o?h:2*h}))}function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function B_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F_(Object(r),!0).forEach(function(t){U_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U_(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z_=(e,t,r,n,a)=>a,H_=(e,t,r)=>{var n=null!==r&&void 0!==r?r:e;if(!Or(n))return Ar(n,t,0)},$_=ys([Co,om,(e,t)=>t,(e,t,r)=>r,(e,t,r,n)=>n],(e,t,r,n,a)=>t.filter(t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===n).filter(e=>e.isPanorama===a).filter(e=>!1===e.hide).filter(e=>"bar"===e.type));function q_(e){return null!=e.stackId&&null!=e.dataKey}var G_=ys([$_,e=>e.rootProps.barSize,(e,t,r)=>"horizontal"===Co(e)?Sp(e,"xAxis",t):Sp(e,"yAxis",r)],(e,t,r)=>{var n=e.filter(q_),a=e.filter(e=>null==e.stackId),i=n.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{}),s=Object.entries(i).map(e=>{var[n,a]=e,i=a.map(e=>e.dataKey);return{stackId:n,dataKeys:i,barSize:H_(t,r,a[0].barSize)}}),o=a.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:H_(t,r,e.barSize)}));return[...s,...o]}),W_=(e,t,r,n)=>{var a,i;return"horizontal"===Co(e)?(a=Op(e,"xAxis",t,n),i=Cp(e,"xAxis",t,n)):(a=Op(e,"yAxis",r,n),i=Cp(e,"yAxis",r,n)),io(a,i)};var V_=ys([G_,pf,e=>e.rootProps.barGap,gf,(e,t,r,n,a)=>{var i,s,o,l,c=Co(e),u=pf(e),{maxBarSize:d}=a,h=Or(d)?u:d;return"horizontal"===c?(o=Op(e,"xAxis",t,n),l=Cp(e,"xAxis",t,n)):(o=Op(e,"yAxis",r,n),l=Cp(e,"yAxis",r,n)),null!==(i=null!==(s=io(o,l,!0))&&void 0!==s?s:h)&&void 0!==i?i:0},W_,(e,t,r,n,a)=>a.maxBarSize],(e,t,r,n,a,i,s)=>{var o=Or(s)?t:s,l=function(e,t,r,n,a){var i=n.length;if(!(i<1)){var s,o=Ar(e,r,0,!0),l=[];if(qh(n[0].barSize)){var c=!1,u=r/i,d=n.reduce((e,t)=>e+(t.barSize||0),0);(d+=(i-1)*o)>=r&&(d-=(i-1)*o,o=0),d>=r&&u>0&&(c=!0,d=i*(u*=.9));var h={offset:((r-d)/2|0)-o,size:0};s=n.reduce((e,t)=>{var r,n=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h.offset+h.size+o,size:c?u:null!==(r=t.barSize)&&void 0!==r?r:0}}];return h=n[n.length-1].position,n},l)}else{var f=Ar(t,r,0,!0);r-2*f-(i-1)*o<=0&&(o=0);var m=(r-2*f-(i-1)*o)/i;m>1&&(m>>=0);var p=qh(a)?Math.min(m,a):m;s=n.reduce((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:f+(m+o)*r+(m-p)/2,size:p}}],l)}return s}}(r,n,a!==i?a:i,e,o);return a!==i&&null!=l&&(l=l.map(e=>B_(B_({},e),{},{position:B_(B_({},e.position),{},{offset:e.position.offset-a/2})}))),l}),K_=ys([V_,z_],(e,t)=>{if(null!=e){var r=e.find(e=>e.stackId===t.stackId&&e.dataKeys.includes(t.dataKey));if(null!=r)return r.position}}),Y_=ys([om,z_],(e,t)=>{if(e.some(e=>"bar"===e.type&&t.dataKey===e.dataKey&&t.stackId===e.stackId&&t.stackId===e.stackId))return t}),J_=ys([(e,t,r,n)=>"horizontal"===Co(e)?Sm(e,"yAxis",r,n):Sm(e,"xAxis",t,n),z_],(e,t)=>{if(e&&null!=(null===t||void 0===t?void 0:t.dataKey)){var{stackId:r}=t;if(null!=r){var n=e[r];if(n){var{stackedData:a}=n;if(a)return a.find(e=>e.key===t.dataKey)}}}}),X_=ys([xo,(e,t,r,n)=>Op(e,"xAxis",t,n),(e,t,r,n)=>Op(e,"yAxis",r,n),(e,t,r,n)=>Cp(e,"xAxis",t,n),(e,t,r,n)=>Cp(e,"yAxis",r,n),K_,Co,$h,W_,J_,Y_,(e,t,r,n,a,i)=>i],(e,t,r,n,a,i,s,o,l,c,u,d)=>{var{chartData:h,dataStartIndex:f,dataEndIndex:m}=o;if(null!=u&&null!=i&&("horizontal"===s||"vertical"===s)&&null!=t&&null!=r&&null!=n&&null!=a&&null!=l){var p,{data:g}=u;if(null!=(p=null!=g&&g.length>0?g:null===h||void 0===h?void 0:h.slice(f,m+1)))return function(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:s,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:h,cells:f}=e,m="horizontal"===t?o:s,p=u?m.scale.domain():null,g=(e=>{var{numericAxis:t}=e,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]})({numericAxis:m});return d.map((e,d)=>{var m,y,v,b,x,w;u?m=((e,t)=>{if(!t||2!==t.length||!Sr(t[0])||!Sr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Sr(e[0])||e[0]<r)&&(a[0]=r),(!Sr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a})(u[d],p):(m=Ys(e,r),Array.isArray(m)||(m=[g,m]));var N=O_(n,gj)(m[1],d);if("horizontal"===t){var S,[_,j]=[o.scale(m[0]),o.scale(m[1])];y=to({axis:s,ticks:l,bandSize:i,offset:a.offset,entry:e,index:d}),v=null!==(S=null!==j&&void 0!==j?j:_)&&void 0!==S?S:void 0,b=a.size;var E=_-j;if(x=wr(E)?0:E,w={x:y,y:h.top,width:b,height:h.height},Math.abs(N)>0&&Math.abs(x)<Math.abs(N)){var A=xr(x||N)*(Math.abs(N)-Math.abs(x));v-=A,x+=A}}else{var[k,C]=[s.scale(m[0]),s.scale(m[1])];if(y=k,v=to({axis:o,ticks:c,bandSize:i,offset:a.offset,entry:e,index:d}),b=C-k,x=a.size,w={x:h.left,y:v,width:h.width,height:x},Math.abs(N)>0&&Math.abs(b)<Math.abs(N))b+=xr(b||N)*(Math.abs(N)-Math.abs(b))}return oj(oj({},e),{},{x:y,y:v,width:b,height:x,value:u?m:m[1],payload:e,background:w,tooltipPosition:{x:y+b/2,y:v+x/2}},f&&f[d]&&f[d].props)})}({layout:s,barSettings:u,pos:i,bandSize:l,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:c,displayedData:p,offset:e,cells:d})}}),Q_=()=>{};function Z_(e){var{legendPayload:r}=e,n=Ns(),a=_o();return(0,t.useEffect)(()=>a?Q_:(n(Hy(r)),()=>{n($y(r))}),[n,a,r]),null}function ej(e){var{legendPayload:r}=e,n=Ns(),a=Es(Co);return(0,t.useEffect)(()=>"centric"!==a&&"radial"!==a?Q_:(n(Hy(r)),()=>{n($y(r))}),[n,a,r]),null}function tj(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,t.useRef)(Er(r)),a=(0,t.useRef)(e);return a.current!==e&&(n.current=Er(r),a.current=e),n.current}var rj=["onMouseEnter","onMouseLeave","onClick"],nj=["value","background","tooltipPosition"],aj=["onMouseEnter","onClick","onMouseLeave"];function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ij.apply(null,arguments)}function sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sj(Object(r),!0).forEach(function(t){lj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function lj(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cj(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var uj=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:oo(r,t),payload:e}]};function dj(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:oo(i,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function hj(e){var r=Es(Ig),{data:n,dataKey:a,background:i,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=cj(s,rj),d=T_(o,a),h=R_(l),f=I_(c,a);if(!i||null==n)return null;var m=Cv(i,!1);return t.createElement(t.Fragment,null,n.map((e,n)=>{var{value:s,background:o,tooltipPosition:l}=e,c=cj(e,nj);if(!o)return null;var p=d(e,n),g=h(e,n),y=f(e,n),v=oj(oj(oj(oj(oj({option:i,isActive:String(n)===r},c),{},{fill:"#eee"},o),m),Sv(u,e,n)),{},{onMouseEnter:p,onMouseLeave:g,onClick:y,dataKey:a,index:n,className:"recharts-bar-background-rectangle"});return t.createElement(C_,ij({key:"background-bar-".concat(n)},v))}))}function fj(e){var{data:r,props:n,showLabels:a}=e,i=Cv(n,!1),{shape:s,dataKey:o,activeBar:l}=n,c=Es(Ig),u=Es(Pg),{onMouseEnter:d,onClick:h,onMouseLeave:f}=n,m=cj(n,aj),p=T_(d,o),g=R_(f),y=I_(h,o);return r?t.createElement(t.Fragment,null,r.map((e,r)=>{var n=l&&String(r)===c&&(null==u||o===u),a=n?l:s,d=oj(oj(oj({},i),e),{},{isActive:n,option:a,index:r,dataKey:o});return t.createElement(vb,ij({className:"recharts-bar-rectangle"},Sv(m,e,r),{onMouseEnter:p(e,r),onMouseLeave:g(e,r),onClick:y(e,r),key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(r)}),t.createElement(C_,d))}),a&&RS.renderCallByParent(n,r)):null}function mj(e){var{props:r,previousRectanglesRef:n}=e,{data:a,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=r,h=n.current,f=tj(r,"recharts-bar-"),[m,p]=(0,t.useState)(!1),g=(0,t.useCallback)(()=>{"function"===typeof u&&u(),p(!1)},[u]),y=(0,t.useCallback)(()=>{"function"===typeof d&&d(),p(!0)},[d]);return t.createElement(_N,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},onAnimationEnd:g,onAnimationStart:y,key:f},e=>{var{t:s}=e,o=1===s?a:a.map((e,t)=>{var r=h&&h[t];if(r){var n=Cr(r.x,e.x),a=Cr(r.y,e.y),o=Cr(r.width,e.width),l=Cr(r.height,e.height);return oj(oj({},e),{},{x:n(s),y:a(s),width:o(s),height:l(s)})}if("horizontal"===i){var c=Cr(0,e.height)(s);return oj(oj({},e),{},{y:e.y+e.height-c,height:c})}var u=Cr(0,e.width)(s);return oj(oj({},e),{},{width:u})});return s>0&&(n.current=o),t.createElement(vb,null,t.createElement(fj,{props:r,data:o,showLabels:!m}))})}function pj(e){var{data:r,isAnimationActive:n}=e,a=(0,t.useRef)(null);return n&&r&&r.length&&(null==a.current||a.current!==r)?t.createElement(mj,{previousRectanglesRef:a,props:e}):t.createElement(fj,{props:e,data:r,showLabels:!0})}var gj=0,yj=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ys(e,t)}};class vj extends t.PureComponent{constructor(){super(...arguments),lj(this,"id",Er("recharts-bar-"))}render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:s,needClip:o,background:l,id:c,layout:u}=this.props;if(e)return null;var d=ft("recharts-bar",a),h=Or(c)?this.id:c;return t.createElement(vb,{className:d},o&&t.createElement("defs",null,t.createElement(M_,{clipPathId:h,xAxisId:i,yAxisId:s})),t.createElement(vb,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):null},t.createElement(hj,{data:r,dataKey:n,background:l,allOtherBarProps:this.props}),t.createElement(pj,this.props)),t.createElement(yS,{direction:"horizontal"===u?"y":"x"},this.props.children))}}var bj={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!bb,legendType:"rect",minPointSize:gj,xAxisId:0,yAxisId:0};function xj(e){var r,{xAxisId:n,yAxisId:a,hide:i,legendType:s,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h}=lb(e,bj),{needClip:f}=D_(n,a),m=Oo(),p=_o(),g=(0,t.useMemo)(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:o,stackId:eo(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,o,e.stackId]),y=kv(e.children,wS),v=Es(e=>X_(e,n,a,p,g,y));if("vertical"!==m&&"horizontal"!==m)return null;var b=null===v||void 0===v?void 0:v[0];return r=null==b||null==b.height||null==b.width?0:"vertical"===m?b.height/2:b.width/2,t.createElement(cS,{xAxisId:n,yAxisId:a,data:v,dataPointFormatter:yj,errorBarOffset:r},t.createElement(vj,ij({},e,{layout:m,needClip:f,data:v,xAxisId:n,yAxisId:a,hide:i,legendType:s,minPointSize:o,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h})))}class wj extends t.PureComponent{render(){return t.createElement(uS,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},t.createElement(P_,null),t.createElement(Z_,{legendPayload:uj(this.props)}),t.createElement(L_,{fn:dj,args:this.props}),t.createElement(xj,this.props))}}function Nj(e){var r=Ns();return(0,t.useEffect)(()=>{r(rv(e))},[r,e]),null}lj(wj,"displayName","Bar"),lj(wj,"defaultProps",bj);var Sj=["width","height","layout"];function _j(){return _j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_j.apply(null,arguments)}var jj={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Ej=(0,t.forwardRef)(function(e,r){var n,a=lb(e.categoricalChartProps,jj),{width:i,height:s,layout:o}=a,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(a,Sj);if(!Gh(i)||!Gh(s))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h}=e,f={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return t.createElement(mv,{preloadedState:{options:f},reduxStoreName:null!==(n=a.id)&&void 0!==n?n:c},t.createElement(pv,{chartData:a.data}),t.createElement(gv,{width:i,height:s,layout:o,margin:a.margin}),t.createElement(yv,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),t.createElement(Nj,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),t.createElement(ib,_j({width:i,height:s},l,{ref:r})))}),Aj=["item"],kj={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Cj=(0,t.forwardRef)((e,r)=>{var n=lb(e,kj);return t.createElement(Ej,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Aj,tooltipPayloadSearcher:Da,categoricalChartProps:n,ref:r})}),Oj=e=>e.graphicalItems.polarItems,Tj=ys([Gf,Wf],sm),Rj=ys([Oj,nm,Tj],cm),Ij=ys([Rj],fm),Lj=ys([Ij,Hh],pm),Pj=ys([Lj,nm,Rj],ym),Dj=ys([Lj,nm,Rj],(e,t,r)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var n;return{value:Ys(e,null!==(n=t.dataKey)&&void 0!==n?n:r.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Ys(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),Mj=()=>{},Fj=ys([nm,Gm,Mj,Dj,Mj],Wm),Bj=ys([nm,Co,Lj,Pj,yf,Gf,Fj],Ym),Uj=ys([Bj,nm,Qm],ep);ys([nm,Bj,Uj,Gf],rp);function zj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Hj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zj(Object(r),!0).forEach(function(t){$j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qj=(e,t)=>t,Gj=[],Wj=(e,t,r)=>0===(null===r||void 0===r?void 0:r.length)?Gj:r,Vj=ys([Hh,qj,Wj],(e,t,r)=>{var n,{chartData:a}=e;if((n=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:a)&&n.length||null==r||(n=r.map(e=>Hj(Hj({},t.presentationProps),e.props))),null!=n)return n}),Kj=ys([Vj,qj,Wj],(e,t,r)=>{if(null!=e)return e.map((e,n)=>{var a,i,s=Ys(e,t.nameKey,t.name);return i=null!==r&&void 0!==r&&null!==(a=r[n])&&void 0!==a&&null!==(a=a.props)&&void 0!==a&&a.fill?r[n].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:oo(s,t.dataKey),color:i,payload:e,type:t.legendType}})}),Yj=ys([Oj,qj],(e,t)=>{if(e.some(e=>"pie"===e.type&&t.dataKey===e.dataKey&&t.data===e.data))return t}),Jj=ys([Vj,Yj,Wj,xo],(e,t,r,n)=>{if(null!=t&&null!=e)return function(e){var t,r,n,{pieSettings:a,displayedData:i,cells:s,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:u,dataKey:d,nameKey:h,tooltipType:f}=a,m=Math.abs(a.minAngle),p=sE(c,u),g=Math.abs(p),y=i.length<=1?0:null!==(t=a.paddingAngle)&&void 0!==t?t:0,v=i.filter(e=>0!==Ys(e,d,0)).length,b=g-v*m-(g>=360?v:v-1)*y,x=i.reduce((e,t)=>{var r=Ys(t,d,0);return e+(Sr(r)?r:0)},0);x>0&&(r=i.map((e,t)=>{var r,i=Ys(e,d,0),u=Ys(e,h,t),g=iE(a,o,e),v=(Sr(i)?i:0)/x,w=Zj(Zj({},e),s&&s[t]&&s[t].props),N=(r=t?n.endAngle+xr(p)*y*(0!==i?1:0):c)+xr(p)*((0!==i?m:0)+v*b),S=(r+N)/2,_=(g.innerRadius+g.outerRadius)/2,j=[{name:u,value:i,payload:w,dataKey:d,type:f}],E=zs(g.cx,g.cy,_,S);return n=Zj(Zj(Zj(Zj({},a.presentationProps),{},{percent:v,cornerRadius:l,name:u,tooltipPayload:j,midAngle:S,middleRadius:_,tooltipPosition:E},w),g),{},{value:Ys(e,d),startAngle:r,endAngle:N,payload:w,paddingAngle:xr(p)*y})}));return r}({offset:n,pieSettings:t,displayedData:e,cells:r})}),Xj=["onMouseEnter","onClick","onMouseLeave"];function Qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qj(Object(r),!0).forEach(function(t){eE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eE(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tE.apply(null,arguments)}function rE(e){var r=(0,t.useMemo)(()=>Cv(e,!1),[e]),n=(0,t.useMemo)(()=>kv(e.children,wS),[e.children]),a=(0,t.useMemo)(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:r}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,r]),i=Es(e=>Kj(e,a,n));return t.createElement(ej,{legendPayload:i})}function nE(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:i,fill:s,name:o,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:null===n||void 0===n?void 0:n.map(e=>e.tooltipPayload),positions:null===n||void 0===n?void 0:n.map(e=>e.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:s,dataKey:t,nameKey:r,name:oo(o,t),hide:l,type:c,color:s,unit:""}}}var aE=(e,t)=>e>t?"start":e<t?"end":"middle",iE=(e,t,r)=>{var{top:n,left:a,width:i,height:s}=t,o=Hs(i,s),l=a+Ar(e.cx,i,i/2),c=n+Ar(e.cy,s,s/2),u=Ar(e.innerRadius,o,0),d=((e,t,r)=>"function"===typeof t?t(e):Ar(t,r,.8*r))(r,e.outerRadius,o);return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:e.maxRadius||Math.sqrt(i*i+s*s)/2}},sE=(e,t)=>xr(t-e)*Math.min(Math.abs(t-e),360);function oE(e){var{sectors:r,props:n,showLabels:a}=e,{label:i,labelLine:s,dataKey:o}=n;if(!a||!i||!r)return null;var l=Cv(n,!1),c=Cv(i,!1),u=Cv(s,!1),d="object"===typeof i&&"offsetRadius"in i&&i.offsetRadius||20,h=r.map((e,r)=>{var n=(e.startAngle+e.endAngle)/2,a=zs(e.cx,e.cy,e.outerRadius+d,n),h=Zj(Zj(Zj(Zj({},l),e),{},{stroke:"none"},c),{},{index:r,textAnchor:aE(a.x,e.cx)},a),f=Zj(Zj(Zj(Zj({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:r,points:[zs(e.cx,e.cy,e.outerRadius,n),a],key:"line"});return t.createElement(vb,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(r)},s&&((e,r)=>{if(t.isValidElement(e))return t.cloneElement(e,r);if("function"===typeof e)return e(r);var n=ft("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return t.createElement(Hw,tE({},r,{type:"linear",className:n}))})(s,f),((e,r,n)=>{if(t.isValidElement(e))return t.cloneElement(e,r);var a=n;if("function"===typeof e&&(a=e(r),t.isValidElement(a)))return a;var i=ft("recharts-pie-label-text","boolean"!==typeof e&&"function"!==typeof e?e.className:"");return t.createElement(Kb,tE({},r,{alignmentBaseline:"middle",className:i}),a)})(i,h,Ys(e,o)))});return t.createElement(vb,{className:"recharts-pie-labels"},h)}function lE(e){var{sectors:r,activeShape:n,inactiveShape:a,allOtherPieProps:i,showLabels:s}=e,o=Es(Ig),{onMouseEnter:l,onClick:c,onMouseLeave:u}=i,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(i,Xj),h=T_(l,i.dataKey),f=R_(u),m=I_(c,i.dataKey);return null==r?null:t.createElement(t.Fragment,null,r.map((e,s)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==r.length)return null;var l=n&&String(s)===o,c=l?n:o?a:null,u=Zj(Zj({},e),{},{stroke:e.stroke,tabIndex:-1,[po]:s,[go]:i.dataKey});return t.createElement(vb,tE({tabIndex:-1,className:"recharts-pie-sector"},Sv(d,e,s),{onMouseEnter:h(e,s),onMouseLeave:f(e,s),onClick:m(e,s),key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(s)}),t.createElement(N_,tE({option:c,isActive:l,shapeType:"sector"},u)))}),t.createElement(oE,{sectors:r,props:i,showLabels:s}))}function cE(e){var{props:r,previousSectorsRef:n}=e,{sectors:a,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:h}=r,f=tj(r,"recharts-pie-"),m=n.current,[p,g]=(0,t.useState)(!0),y=(0,t.useCallback)(()=>{"function"===typeof h&&h(),g(!1)},[h]),v=(0,t.useCallback)(()=>{"function"===typeof d&&d(),g(!0)},[d]);return t.createElement(_N,{begin:s,duration:o,isActive:i,easing:l,from:{t:0},to:{t:1},onAnimationStart:v,onAnimationEnd:y,key:f},e=>{var{t:i}=e,s=[],o=(a&&a[0]).startAngle;return a.forEach((e,t)=>{var r=m&&m[t],n=t>0?br()(e,"paddingAngle",0):0;if(r){var a=Cr(r.endAngle-r.startAngle,e.endAngle-e.startAngle),l=Zj(Zj({},e),{},{startAngle:o+n,endAngle:o+a(i)+n});s.push(l),o=l.endAngle}else{var{endAngle:c,startAngle:u}=e,d=Cr(0,c-u)(i),h=Zj(Zj({},e),{},{startAngle:o+n,endAngle:o+d+n});s.push(h),o=h.endAngle}}),n.current=s,t.createElement(vb,null,t.createElement(lE,{sectors:s,activeShape:c,inactiveShape:u,allOtherPieProps:r,showLabels:!p}))})}function uE(e){var{sectors:r,isAnimationActive:n,activeShape:a,inactiveShape:i}=e,s=(0,t.useRef)(null),o=s.current;return n&&r&&r.length&&(!o||o!==r)?t.createElement(cE,{props:e,previousSectorsRef:s}):t.createElement(lE,{sectors:r,activeShape:a,inactiveShape:i,allOtherPieProps:e,showLabels:!0})}function dE(e){var{hide:r,className:n,rootTabIndex:a}=e,i=ft("recharts-pie",n);return r?null:t.createElement(vb,{tabIndex:a,className:i},t.createElement(uE,e))}var hE={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!bb,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function fE(e){var r=lb(e,hE),n=(0,t.useMemo)(()=>kv(e.children,wS),[e.children]),a=Cv(r,!1),i=(0,t.useMemo)(()=>({name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,data:r.data,dataKey:r.dataKey,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,minAngle:r.minAngle,paddingAngle:r.paddingAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,legendType:r.legendType,fill:r.fill,presentationProps:a}),[r.cornerRadius,r.cx,r.cy,r.data,r.dataKey,r.endAngle,r.innerRadius,r.minAngle,r.name,r.nameKey,r.outerRadius,r.paddingAngle,r.startAngle,r.tooltipType,r.legendType,r.fill,a]),s=Es(e=>Jj(e,i,n));return t.createElement(t.Fragment,null,t.createElement(L_,{fn:nE,args:Zj(Zj({},r),{},{sectors:s})}),t.createElement(dE,tE({},r,{sectors:s})))}class mE extends t.PureComponent{constructor(){super(...arguments),eE(this,"id",Er("recharts-pie-"))}render(){return t.createElement(t.Fragment,null,t.createElement(nS,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),t.createElement(rE,this.props),t.createElement(fE,this.props),this.props.children)}}eE(mE,"displayName","Pie"),eE(mE,"defaultProps",hE);const pE=lr("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),gE=lr("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),yE=lr("file-chart-column-increasing",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);var vE=r(6326);class bE extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class xE extends bE{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wE extends bE{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class NE extends bE{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var SE;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(SE||(SE={}));class _E{constructor(e){let{headers:t={},customFetch:r,region:n=SE.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,vE.__awaiter)(this,arguments,void 0,function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var n;let a,i;try{const{headers:s,method:o,body:l,signal:c,timeout:u}=r;let d={},{region:h}=r;h||(h=t.region);const f=new URL(`${t.url}/${e}`);let m;h&&"any"!==h&&(d["x-region"]=h,f.searchParams.set("forceFunctionRegion",h)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",m=l):"string"===typeof l?(d["Content-Type"]="text/plain",m=l):"undefined"!==typeof FormData&&l instanceof FormData?m=l:(d["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;let p=c;u&&(i=new AbortController,a=setTimeout(()=>i.abort(),u),c?(p=i.signal,c.addEventListener("abort",()=>i.abort())):p=i.signal);const g=yield t.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),t.headers),s),body:m,signal:p}).catch(e=>{throw new xE(e)}),y=g.headers.get("x-relay-error");if(y&&"true"===y)throw new wE(g);if(!g.ok)throw new NE(g);let v,b=(null!==(n=g.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return v="application/json"===b?yield g.json():"application/octet-stream"===b||"application/pdf"===b?yield g.blob():"text/event-stream"===b?g:"multipart/form-data"===b?yield g.formData():yield g.text(),{data:v,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof NE||s instanceof wE?s.context:void 0}}finally{a&&clearTimeout(a)}}()})}}var jE=r(7980),EE=r.t(jE,2);const{PostgrestClient:AE,PostgrestQueryBuilder:kE,PostgrestFilterBuilder:CE,PostgrestTransformBuilder:OE,PostgrestBuilder:TE,PostgrestError:RE}=jE||EE;const IE=class{constructor(){}static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(CA){return!1}}},LE="1.0.0",PE=LE,DE=1e4;var ME,FE,BE,UE,zE,HE;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(ME||(ME={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(FE||(FE={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(BE||(BE={})),function(e){e.websocket="websocket"}(UE||(UE={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(zE||(zE={}));class $E{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!==e&&void 0!==e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"===typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const n=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var t,r;const n=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:{},a=(new TextEncoder).encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,r){var n,a;const i=e.topic,s=null!==(n=e.ref)&&void 0!==n?n:"",o=null!==(a=e.join_ref)&&void 0!==a?a:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`metadata length ${u.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+s.length+i.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),m=0;f.setUint8(m++,this.KINDS.userBroadcastPush),f.setUint8(m++,o.length),f.setUint8(m++,s.length),f.setUint8(m++,i.length),f.setUint8(m++,l.length),f.setUint8(m++,u.length),f.setUint8(m++,t),Array.from(o,e=>f.setUint8(m++,e.charCodeAt(0))),Array.from(s,e=>f.setUint8(m++,e.charCodeAt(0))),Array.from(i,e=>f.setUint8(m++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(m++,e.charCodeAt(0))),Array.from(u,e=>f.setUint8(m++,e.charCodeAt(0)));var p=new Uint8Array(h.byteLength+r.byteLength);return p.set(new Uint8Array(h),0),p.set(new Uint8Array(r),h.byteLength),p.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"===typeof e){const r=JSON.parse(e),[n,a,i,s,o]=r;return t({join_ref:n,ref:a,topic:i,event:s,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,n)}_decodeUserBroadcast(e,t,r){const n=t.getUint8(1),a=t.getUint8(2),i=t.getUint8(3),s=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=r.decode(e.slice(o,o+n));o+=n;const c=r.decode(e.slice(o,o+a));o+=a;const u=r.decode(e.slice(o,o+i));o+=i;const d=e.slice(o,e.byteLength),h=s===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return i>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"===typeof e?Object.fromEntries(Object.entries(e).filter(e=>{let[r]=e;return t.includes(r)})):{}}}class qE{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(HE||(HE={}));const GE=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((r,a)=>(r[a]=WE(a,e,t,n),r),{}):{}},WE=(e,t,r,n)=>{const a=t.find(t=>t.name===e),i=null===a||void 0===a?void 0:a.type,s=r[e];return i&&!n.includes(i)?VE(i,s):KE(s)},VE=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return QE(t,r)}switch(e){case HE.bool:return YE(t);case HE.float4:case HE.float8:case HE.int2:case HE.int4:case HE.int8:case HE.numeric:case HE.oid:return JE(t);case HE.json:case HE.jsonb:return XE(t);case HE.timestamp:return ZE(t);case HE.abstime:case HE.date:case HE.daterange:case HE.int4range:case HE.int8range:case HE.money:case HE.reltime:case HE.text:case HE.time:case HE.timestamptz:case HE.timetz:case HE.tsrange:case HE.tstzrange:default:return KE(t)}},KE=e=>e,YE=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},JE=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},XE=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},QE=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const a=e.slice(1,r);try{n=JSON.parse("["+a+"]")}catch(yI){n=a?a.split(","):[]}return n.map(e=>VE(t,e))}return e},ZE=e=>"string"===typeof e?e.replace(" ","T"):e,eA=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class tA{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:DE;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rA,nA,aA,iA;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(rA||(rA={}));class sA{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sA.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=sA.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=sA.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const a=this.cloneDeep(e),i=this.transformState(t),s={},o={};return this.map(a,(e,t)=>{i[e]||(o[e]=t)}),this.map(i,(e,t)=>{const r=a[e];if(r){const n=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),i=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);i.length>0&&(s[e]=i),l.length>0&&(o[e]=l)}else s[e]=t}),this.syncDiff(a,{joins:s,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const i=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),i.length>0){const r=e[t].map(e=>e.presence_ref),n=i.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,i,n)}),this.map(i,(t,r)=>{let a=e[t];if(!a)return;const i=r.map(e=>e.presence_ref);a=a.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(nA||(nA={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(aA||(aA={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(iA||(iA={}));class oA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;var n,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=FE.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tA(this,BE.join,this.params,this.timeout),this.rejoinTimer=new qE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=FE.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=FE.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=FE.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=FE.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=FE.errored,this.rejoinTimer.scheduleTimeout())}),this._on(BE.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new sA(this),this.broadcastEndpointURL=eA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==FE.closed){const{config:{broadcast:i,presence:s,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[aA.PRESENCE]&&this.bindings[aA.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:i,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(iA.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(iA.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var n;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,a=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,i=[];for(let n=0;n<a;n++){const a=t[n],{filter:{event:s,schema:o,table:l,filter:c}}=a,u=r&&r[n];if(!u||u.event!==s||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=FE.errored,void(null===e||void 0===e||e(iA.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(iA.SUBSCRIBED))}null===e||void 0===e||e(iA.SUBSCRIBED)}).receive("error",t=>{this.state=FE.errored,null===e||void 0===e||e(iA.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(iA.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===FE.joined&&e===aA.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(void 0===t||null===t)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===s.status)return{success:!0};let o=s.statusText;try{const e=await s.json();o=e.error||e.message||o}catch(lR){}return Promise.reject(new Error(o))}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,a,i;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===i?void 0:i.ack)||r("ok"),s.receive("ok",()=>r("ok")),s.receive("error",()=>r("error")),s.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=FE.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(BE.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new tA(this,BE.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=FE.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),i}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new tA(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,a;const i=e.toLocaleLowerCase(),{close:s,error:o,leave:l,join:c}=BE;if(r&&[s,o,l,c].indexOf(i)>=0&&r!==this._joinRef())return;let u=this._onMessage(i,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===i}).map(e=>e.callback(u,r)):null===(a=this.bindings[i])||void 0===a||a.filter(e=>{var r,n,a,s,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,s=null===(r=e.filter)||void 0===r?void 0:r.event;return i&&(null===(n=t.ids)||void 0===n?void 0:n.includes(i))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(o=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:a,errors:i}=e,s={schema:t,table:r,commit_timestamp:n,eventType:a,new:{},old:{},errors:i};u=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===FE.closed}_isJoined(){return this.state===FE.joined}_isJoining(){return this.state===FE.joining}_isLeaving(){return this.state===FE.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&oA.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(BE.close,{},e)}_onError(e){this._on(BE.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=FE.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=GE(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=GE(e.columns,e.old_record)),t}}const lA=()=>{},cA=25e3,uA=10,dA=100,hA=[1e3,2e3,5e3,1e4];class fA{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DE,this.transport=null,this.heartbeatIntervalMs=cA,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lA,this.ref=0,this.reconnectTimer=null,this.vsn=PE,this.logger=lA,this.conn=null,this.sendBuffer=[],this.serializer=new $E,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${UE.websocket}`,this.httpEndpoint=eA(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=IE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"===typeof this.conn.close&&(e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ME.connecting:return zE.Connecting;case ME.open:return zE.Open;case ME.closing:return zE.Closing;default:return zE.Closed}}isConnected(){return this.connectionState()===zE.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new oA(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:a}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(EM){this.log("error","error in heartbeat callback",EM)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},dA)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(EM){this.log("error","error in heartbeat callback",EM)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(EM){this.log("error","error in heartbeat callback",EM)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(EM){this.log("error","error in heartbeat callback",EM)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:a}=e,i=a?`(${a})`:"",s=n.status||"";this.log("receive",`${s} ${t} ${r} ${i}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ME.open||this.conn.readyState===ME.connecting)try{this.conn.close()}catch(EM){this.log("error","Error closing connection",EM)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(BE.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:"realtime-js/2.86.0"};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(BE.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(EM){this.log("error",`error in ${e} callback`,EM)}})}catch(EM){this.log("error",`error triggering ${e} callbacks`,EM)}}_setupReconnectionTimer(){this.reconnectTimer=new qE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},uA)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,a,i,s,o,l,c,u,d,h;switch(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:DE,this.heartbeatIntervalMs=null!==(n=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:cA,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(i=null===e||void 0===e?void 0:e.accessToken)&&void 0!==i?i:null,this.heartbeatCallback=null!==(s=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==s?s:lA,this.vsn=null!==(o=null===e||void 0===e?void 0:e.vsn)&&void 0!==o?o:PE,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>hA[e-1]||1e4,this.vsn){case LE:this.encode=null!==(c=null===e||void 0===e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null===e||void 0===e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null===e||void 0===e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null===e||void 0===e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class mA extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pA(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class gA extends mA{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yA extends mA{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const vA=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},bA=e=>{if(Array.isArray(e))return e.map(e=>bA(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,n]=e;const a=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=bA(n)}),t},xA=e=>{var t;return e.msg||e.message||e.error_description||("string"===typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},wA=(e,t,r)=>(0,vE.__awaiter)(void 0,void 0,void 0,function*(){const n=yield Response;e instanceof n&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,a=(null===r||void 0===r?void 0:r.statusCode)||n+"";t(new gA(xA(r),n,a))}).catch(e=>{t(new yA(xA(e),e))}):t(new yA(xA(e),e))}),NA=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r)):a};function SA(e,t,r,n,a,i){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,NA(t,n,a,i)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>wA(e,o,n))})})}function _A(e,t,r,n){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return SA(e,"GET",t,r,n)})}function jA(e,t,r,n,a){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return SA(e,"POST",t,n,a,r)})}function EA(e,t,r,n,a){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return SA(e,"PUT",t,n,a,r)})}function AA(e,t,r,n,a){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return SA(e,"DELETE",t,n,a,r)})}class kA{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pA(e))return{data:null,error:e};throw e}})}}var CA;CA=Symbol.toStringTag;const OA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[CA]="BlobDownloadBuilder",this.promise=null}asStream(){return new kA(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pA(e))return{data:null,error:e};throw e}})}},TA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},RA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=vA(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},RA),n);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;if("undefined"!==typeof Blob&&r instanceof Blob)a=new FormData,a.append("cacheControl",i.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",r);else if("undefined"!==typeof FormData&&r instanceof FormData)a=r,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),o&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(o));else{a=r,s["cache-control"]=`max-age=${i.cacheControl}`,s["content-type"]=i.contentType,o&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!==typeof ReadableStream&&a instanceof ReadableStream||a&&"object"===typeof a&&"pipe"in a&&"function"===typeof a.pipe)&&!i.duplex&&(i.duplex="half")}(null===n||void 0===n?void 0:n.headers)&&(s=Object.assign(Object.assign({},s),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?EA:jA)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:s},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pA(a))return{data:null,error:a};throw a}})}upload(e,t,r){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return(0,vE.__awaiter)(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${i}`);s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:RA.upsert},n),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield EA(this.fetch,s.toString(),e,{headers:i})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(pA(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const a=yield jA(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),i=new URL(this.url+a.url),s=i.searchParams.get("token");if(!s)throw new mA("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pA(r))return{data:null,error:r};throw r}})}update(e,t,r){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield jA(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pA(n))return{data:null,error:n};throw n}})}copy(e,t,r){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield jA(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pA(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield jA(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const i=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pA(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{const n=yield jA(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pA(n))return{data:null,error:n};throw n}})}download(e,t){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e);return new OA(()=>_A(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield _A(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:bA(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pA(r))return{data:null,error:r};throw r}})}exists(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return SA(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pA(r)&&r instanceof yA){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&n.push(a);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&n.push(s);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${o}`)}}}remove(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield AA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}list(e,t,r){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},TA),t),{prefix:e||""});return{data:yield jA(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pA(n))return{data:null,error:n};throw n}})}listV2(e,t){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield jA(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pA(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const LA="2.86.0",PA={"X-Client-Info":`storage-js/${LA}`};class DA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const a=new URL(e);if(null===n||void 0===n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PA),t),this.fetch=vA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield _A(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield _A(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}createBucket(e){return(0,vE.__awaiter)(this,arguments,void 0,function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return function*(){try{return{data:yield jA(t.fetch,`${t.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(pA(n))return{data:null,error:n};throw n}}()})}updateBucket(e,t){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield EA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pA(r))return{data:null,error:r};throw r}})}emptyBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield jA(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield AA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var MA=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===t.icebergType?.includes("CommitState")}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function FA(e){const t=e.fetchImpl??globalThis.fetch;return{async request(r){let{method:n,path:a,query:i,body:s,headers:o}=r;const l=function(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))void 0!==i&&n.searchParams.set(a,i);return n.toString()}(e.baseUrl,a,i),c=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),u=await t(l,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...c,...o},body:s?JSON.stringify(s):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const e=h?f:void 0,t=e?.error;throw new MA(t?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:u.status,headers:u.headers,data:f}}}}function BA(e){return e.join("\x1f")}var UA=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:BA(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${BA(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${BA(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${BA(e.namespace)}`}),!0}catch(t){if(t instanceof MA&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof MA&&409===r.status)return;throw r}}};function zA(e){return e.join("\x1f")}var HA=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zA(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zA(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zA(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zA(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zA(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zA(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof MA&&404===r.status)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof MA&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},$A=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=FA({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new UA(this.client,t),this.tableOps=new HA(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class qA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PA),t),this.fetch=vA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield jA(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}listBuckets(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null===e||void 0===e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null===e||void 0===e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null===e||void 0===e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null===e||void 0===e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null===e||void 0===e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield _A(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield AA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pA(t))return{data:null,error:t};throw t}})}from(e){if(!(e=>!(!e||"string"!==typeof e)&&(!(0===e.length||e.length>100)&&(e.trim()===e&&(!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))))(e))throw new mA("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new $A({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>(0,vE.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const GA={"X-Client-Info":`storage-js/${LA}`,"Content-Type":"application/json"};class WA extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function VA(e){return"object"===typeof e&&null!==e&&"__isStorageVectorsError"in e}class KA extends WA{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class YA extends WA{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var JA;!function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}(JA||(JA={}));const XA=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},QA=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZA=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function ek(e,t,r,n,a,i){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,ZA(t,n,a,i)).then(e=>{if(!e.ok)throw e;if(null===n||void 0===n?void 0:n.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>s(e)).catch(e=>((e,t,r)=>(0,vE.__awaiter)(void 0,void 0,void 0,function*(){if(e&&"object"===typeof e&&"status"in e&&"ok"in e&&"number"===typeof e.status&&!(null===r||void 0===r?void 0:r.noResolveJson)){const r=e.status||500,n=e;if("function"===typeof n.json)n.json().then(e=>{const n=(null===e||void 0===e?void 0:e.statusCode)||(null===e||void 0===e?void 0:e.code)||r+"";t(new KA(QA(e),r,n))}).catch(()=>{const e=r+"",a=n.statusText||`HTTP ${r} error`;t(new KA(a,r,e))});else{const e=r+"",a=n.statusText||`HTTP ${r} error`;t(new KA(a,r,e))}}else t(new YA(QA(e),e))}))(e,o,n))})})}function tk(e,t,r,n,a){return(0,vE.__awaiter)(this,void 0,void 0,function*(){return ek(e,"POST",t,n,a,r)})}class rk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GA),t),this.fetch=XA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield tk(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}getIndex(e,t){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield tk(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(VA(r))return{data:null,error:r};throw r}})}listIndexes(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield tk(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield tk(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(VA(r))return{data:null,error:r};throw r}})}}class nk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GA),t),this.fetch=XA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield tk(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}getVectors(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield tk(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}listVectors(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield tk(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}queryVectors(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield tk(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}deleteVectors(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield tk(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}}class ak{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GA),t),this.fetch=XA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield tk(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield tk(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}listBuckets(){return(0,vE.__awaiter)(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return{data:yield tk(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(VA(r))return{data:null,error:r};throw r}}()})}deleteBucket(e){return(0,vE.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield tk(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(VA(t))return{data:null,error:t};throw t}})}}class ik extends ak{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t.headers||{},t.fetch)}from(e){return new sk(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,vE.__awaiter)(this,arguments,void 0,function(){var t=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listBuckets.call(t,r)}()})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class sk extends rk{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,vE.__awaiter)(this,arguments,void 0,function(){var t=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listIndexes.call(t,Object.assign(Object.assign({},r),{vectorBucketName:t.vectorBucketName}))}()})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new ok(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class ok extends nk{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,vE.__awaiter)(this,arguments,void 0,function(){var t=this;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){return e.listVectors.call(t,Object.assign(Object.assign({},r),{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}()})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,vE.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class lk extends DA{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new IA(this.url,this.headers,e,this.fetch)}get vectors(){return new ik(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qA(this.url+"/iceberg",this.headers,this.fetch)}}let ck="";ck="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const uk={headers:{"X-Client-Info":`supabase-js-${ck}/2.86.0`}},dk={schema:"public"},hk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fk={},mk=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},pk=(e,t,r)=>{const n=mk(r),a=Headers;return async(r,i)=>{var s;const o=null!==(s=await t())&&void 0!==s?s:e;let l=new a(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(r,Object.assign(Object.assign({},i),{headers:l}))}};const gk="2.86.0",yk=3e4,vk=9e4,bk={"X-Client-Info":`gotrue-js/${gk}`},xk="X-Supabase-Api-Version",wk={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Nk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Sk extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function _k(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class jk extends Sk{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Ek extends Sk{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ak extends Sk{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class kk extends Ak{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ck extends Ak{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ok extends Ak{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tk extends Ak{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rk extends Ak{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ik extends Ak{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Lk(e){return _k(e)&&"AuthRetryableFetchError"===e.name}class Pk extends Ak{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Dk extends Ak{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fk=" \t\n\r=".split(""),Bk=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Fk.length;t+=1)e[Fk[t].charCodeAt(0)]=-2;for(let t=0;t<Mk.length;t+=1)e[Mk[t].charCodeAt(0)]=t;return e})();function Uk(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Mk[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Mk[e]),t.queuedBits-=6}}function zk(e,t,r){const n=Bk[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Hk(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let s=0;s<e.length;s+=1)zk(e.charCodeAt(s),a,i);return t.join("")}function $k(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function qk(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}$k(n,t)}}function Gk(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)zk(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Wk(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Uk(e,r,n)),Uk(null,r,n),t.join("")}const Vk=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Kk={tested:!1,writable:!1},Yk=()=>{if(!Vk())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(EM){return!1}if(Kk.tested)return Kk.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kk.tested=!0,Kk.writable=!0}catch(EM){Kk.tested=!0,Kk.writable=!1}return Kk.writable};const Jk=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},Xk=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Qk=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(CA){return r}},Zk=async(e,t)=>{await e.removeItem(t)};class eC{constructor(){this.promise=new eC.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function tC(e){const t=e.split(".");if(3!==t.length)throw new Dk("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Nk.test(t[r]))throw new Dk("JWT not in base64url format");return{header:JSON.parse(Hk(t[0])),payload:JSON.parse(Hk(t[1])),signature:Gk(t[2]),raw:{header:t[0],payload:t[1]}}}function rC(e){return("0"+e.toString(16)).substr(-2)}async function nC(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function aC(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,rC).join("")}();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Xk(e,`${t}-code-verifier`,a);const i=await nC(n);return[i,n===i?"plain":"s256"]}eC.promiseConstructor=Promise;const iC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const sC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oC(e){if(!sC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lC(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cC(e){return JSON.parse(JSON.stringify(e))}const uC=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dC=[502,503,504];async function hC(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Ik(uC(e),0);if(dC.includes(e.status))throw new Ik(uC(e),e.status);let n,a;try{n=await e.json()}catch(EM){throw new Ek(uC(EM),EM)}const i=function(e){const t=e.headers.get(xk);if(!t)return null;if(!t.match(iC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(EM){return null}}(e);if(i&&i.getTime()>=wk.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?a=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new Pk(uC(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new kk}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Pk(uC(n),e.status,n.weak_password.reasons);throw new jk(uC(n),e.status||500,a)}async function fC(e,t,r,n){var a;const i=Object.assign({},null===n||void 0===n?void 0:n.headers);i[xk]||(i[xk]=wk.name),(null===n||void 0===n?void 0:n.jwt)&&(i.Authorization=`Bearer ${n.jwt}`);const s=null!==(a=null===n||void 0===n?void 0:n.query)&&void 0!==a?a:{};(null===n||void 0===n?void 0:n.redirectTo)&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await async function(e,t,r,n,a,i){const s=((e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))})(t,n,a,i);let o;try{o=await e(r,Object.assign({},s))}catch(EM){throw console.error(EM),new Ik(uC(EM),0)}o.ok||await hC(o);if(null===n||void 0===n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(EM){await hC(EM)}}(e,t,r+o,{headers:i,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function mC(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function pC(e){const t=mC(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function gC(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function yC(e){return{data:e,error:null}}function vC(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=(0,vE.__rest)(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},user:Object.assign({},s)},error:null}}function bC(e){return e}const xC=["global","local","others"];class wC{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=Jk(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xC[0];if(xC.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xC.join(", ")}`);try{return await fC(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_k(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await fC(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gC})}catch(r){if(_k(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=(0,vE.__rest)(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await fC(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:vC,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(_k(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await fC(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gC})}catch(t){if(_k(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,a,i,s,o;try{const l={nextPage:null,lastPage:0,total:0},c=await fC(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:bC});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(_k(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){oC(e);try{return await fC(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gC})}catch(t){if(_k(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){oC(e);try{return await fC(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:gC})}catch(r){if(_k(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];oC(e);try{return await fC(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:gC})}catch(r){if(_k(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){oC(e.userId);try{const{data:t,error:r}=await fC(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(_k(t))return{data:null,error:t};throw t}}async _deleteFactor(e){oC(e.userId),oC(e.id);try{return{data:await fC(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(_k(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,a,i,s,o;try{const l={nextPage:null,lastPage:0,total:0},c=await fC(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:bC});if(c.error)throw c.error;const u=await c.json(),d=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(_k(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await fC(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(_k(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await fC(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(_k(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await fC(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(_k(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await fC(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(_k(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await fC(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(_k(t))return{data:null,error:t};throw t}}}function NC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const SC=!!(globalThis&&Yk()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class _C extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jC extends _C{}async function EC(e,t,r){SC&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),SC&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw SC&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new jC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(SC)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(EM){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",EM)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}SC&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{SC&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}function AC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function kC(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class CC extends Error{constructor(e){let{message:t,code:r,cause:n,name:a}=e;var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(i=null!==a&&void 0!==a?a:n instanceof Error?n.name:void 0)&&void 0!==i?i:"Unknown Error",this.code=r}}class OC extends CC{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function TC(e){let{error:t,options:r}=e;var n,a,i;const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(r.signal instanceof AbortSignal)return new CC({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new CC({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===r.mediation&&"required"===(null===(a=s.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new CC({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(i=s.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new CC({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new CC({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new CC({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===s.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new CC({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new CC({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!FC(e))return new CC({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(s.rp.id!==e)return new CC({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new CC({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new CC({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new CC({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function RC(e){let{error:t,options:r}=e;const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(r.signal instanceof AbortSignal)return new CC({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new CC({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!FC(e))return new CC({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rpId!==e)return new CC({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new CC({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new CC({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const IC=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function LC(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=(0,vE.__rest)(e,["challenge","user","excludeCredentials"]),i=Gk(t).buffer,s=Object.assign(Object.assign({},r),{id:Gk(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Gk(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function PC(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=(0,vE.__rest)(e,["challenge","allowCredentials"]),a=Gk(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];i.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Gk(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return i}function DC(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Wk(new Uint8Array(e.response.attestationObject)),clientDataJSON:Wk(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function MC(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Wk(new Uint8Array(a.authenticatorData)),clientDataJSON:Wk(new Uint8Array(a.clientDataJSON)),signature:Wk(new Uint8Array(a.signature)),userHandle:a.userHandle?Wk(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function FC(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function BC(){var e,t;return!!(Vk()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const UC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function HC(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];for(const s of a)if(s)for(const n in s){const a=s[n];if(void 0!==a)if(Array.isArray(a))r[n]=a;else if(t(a))r[n]=a;else if(e(a)){const t=r[n];e(t)?r[n]=HC(t,a):r[n]=HC(a)}else r[n]=a}return r}class $C{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:r,webauthn:n,friendlyName:a,signal:i}=e;try{const{data:e,error:s}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!e)return{data:null,error:s};const o=null!==i&&void 0!==i?i:IC.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;t.name||(t.name=`${t.id}:${a}`),t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const n=function(e,t){return HC(UC,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:a,error:i}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new OC("Browser returned unexpected credential type",t)}:{data:null,error:new OC("Empty credential response",t)}}catch(AR){return{data:null,error:TC({error:AR,options:e})}}}({publicKey:n,signal:o});return a?{data:{factorId:r,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:i}}case"request":{const n=function(e,t){return HC(zC,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:a,error:i}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new OC("Browser returned unexpected credential type",t)}:{data:null,error:new OC("Empty credential response",t)}}catch(AR){return{data:null,error:RC({error:AR,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:n,signal:o}));return a?{data:{factorId:r,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:i}}}}catch(s){return _k(s)?{data:null,error:s}:{data:null,error:new Ek("Unexpected error in challenge",s)}}}async _verify(e){let{challengeId:t,factorId:r,webauthn:n}=e;return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate(e,t){let{factorId:r,webauthn:{rpId:n=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:i}={}}=e;if(!n)return{data:null,error:new Sk("rpId is required for WebAuthn authentication")};try{if(!BC())return{data:null,error:new Ek("Browser does not support WebAuthn",null)};const{data:e,error:s}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:a},signal:i},{request:t});if(!e)return{data:null,error:s};const{webauthn:o}=e;return this._verify({factorId:r,challengeId:e.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:a,credential_response:o.credential_response}})}catch(s){return _k(s)?{data:null,error:s}:{data:null,error:new Ek("Unexpected error in authenticate",s)}}}async _register(e,t){let{friendlyName:r,webauthn:{rpId:n=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:i}={}}=e;if(!n)return{data:null,error:new Sk("rpId is required for WebAuthn registration")};try{if(!BC())return{data:null,error:new Ek("Browser does not support WebAuthn",null)};const{data:e,error:s}=await this._enroll({friendlyName:r});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===r&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:s};const{data:o,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:i},{create:t});return o?this._verify({factorId:e.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(s){return _k(s)?{data:null,error:s}:{data:null,error:new Ek("Unexpected error in register",s)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(EM){"undefined"!==typeof self&&(self.globalThis=self)}}();const qC={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function GC(e,t,r){return await r()}const WC={};class VC{get jwks(){var e,t;return null!==(t=null===(e=WC[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){WC[this.storageKey]=Object.assign(Object.assign({},WC[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=WC[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){WC[this.storageKey]=Object.assign(Object.assign({},WC[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},qC),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=VC.nextInstanceID[this.storageKey])&&void 0!==t?t:0,VC.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"===typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Vk()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new wC({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Jk(a.fetch),this.lock=a.lock||GC,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Vk()&&(null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=EC:this.lock=GC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $C(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Yk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NC(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=NC(this.memoryStorage)),Vk()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(EM){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",EM)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${gk}) ${(new Date).toISOString()}`}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger(this._logPrefix(),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(Vk()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(EM){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Vk()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return _k(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return _k(t)?this._returnResult({error:t}):this._returnResult({error:new Ek("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const a=await fC(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:mC}),{data:i,error:s}=a;if(s||!i)return this._returnResult({data:{user:null,session:null},error:s});const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(_k(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,r,n;try{let a;if("email"in e){const{email:r,password:n,options:i}=e;let s=null,o=null;"pkce"===this.flowType&&([s,o]=await aC(this.storage,this.storageKey)),a=await fC(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:o},xform:mC})}else{if(!("phone"in e))throw new Ok("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:s}=e;a=await fC(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(r=null===s||void 0===s?void 0:s.data)&&void 0!==r?r:{},channel:null!==(n=null===s||void 0===s?void 0:s.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:mC})}}const{data:i,error:s}=a;if(s||!i)return this._returnResult({data:{user:null,session:null},error:s});const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(_k(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:a}=e;t=await fC(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:pC})}else{if(!("phone"in e))throw new Ok("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:a}=e;t=await fC(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:pC})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new Ck;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(_k(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,a,i,s,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:m,options:p}=e;let g;if(Vk())if("object"===typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof d||!(null===p||void 0===p?void 0:p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const y=new URL(null!==(t=null===p||void 0===p?void 0:p.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=AC(v[0]);let x=null===(r=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!x){x=function(e){return parseInt(e,16)}(await g.request({method:"eth_chainId"}))}h=function(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${u?`${u}://${n}`:n} wants you to sign in with your Ethereum account:\n${AC(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let m=`URI: ${d}\nVersion: ${h}\nChain ID: ${r}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(a&&(m+=`\nExpiration Time: ${a.toISOString()}`),o&&(m+=`\nNot Before: ${o.toISOString()}`),l&&(m+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}m+=e}return`${f}\n${m}`}({domain:y.host,address:b,statement:m,uri:y.href,version:"1",chainId:x,nonce:null===(n=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(i=null===(a=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==i?i:new Date,expirationTime:null===(s=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===s?void 0:s.expirationTime,notBefore:null===(o=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===p||void 0===p?void 0:p.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[kC(h),b]})}try{const{data:t,error:r}=await fC(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:mC});if(r)throw r;if(!t||!t.session||!t.user){const e=new Ck;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(m){if(_k(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var t,r,n,a,i,s,o,l,c,u,d,h;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:d,wallet:h,statement:p,options:g}=e;let y;if(Vk())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),p?{statement:p}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(n=null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:r}=await fC(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Wk(m)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:mC});if(r)throw r;if(!t||!t.session||!t.user){const e=new Ck;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(p){if(_k(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(e){const t=await Qk(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await fC(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:mC});if(await Zk(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!t||!t.session||!t.user){const e=new Ck;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:a})}catch(a){if(_k(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:a,nonce:i}=e,s=await fC(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:mC}),{data:o,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new Ck;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(_k(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,a,i;try{if("email"in e){const{email:n,options:a}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=await aC(this.storage,this.storageKey));const{error:o}=await fC(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:s},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:r}=e,{data:s,error:o}=await fC(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(i=null===r||void 0===r?void 0:r.channel)&&void 0!==i?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:o})}throw new Ok("You must provide either an email or phone number.")}catch(s){if(_k(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var t,r;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:i,error:s}=await fC(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:mC});if(s)throw s;if(!i){throw new Error("An error occurred on token verification.")}const o=i.session,l=i.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(n){if(_k(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n,a,i;try{let s=null,o=null;"pkce"===this.flowType&&([s,o]=await aC(this.storage,this.storageKey));const l=await fC(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:yC});return(null===(a=l.data)||void 0===a?void 0:a.url)&&Vk()&&!(null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(s){if(_k(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new kk;const{error:n}=await fC(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(_k(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:a}=e,{error:i}=await fC(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}if("phone"in e){const{phone:r,type:n,options:a}=e,{data:i,error:s}=await fC(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:s})}throw new Ok("You must provide either an email or phone number and a type")}catch(t){if(_k(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(EM){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(EM){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Qk(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<vk;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await Qk(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=lC()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"===typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!==typeof r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await fC(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gC}):await this._useSession(async e=>{var t,r,n;const{data:a,error:i}=e;if(i)throw i;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await fC(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:gC}):{data:{user:null},error:new kk}})}catch(t){if(_k(t))return function(e){return _k(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Zk(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new kk;const i=n.session;let s=null,o=null;"pkce"===this.flowType&&null!=e.email&&([s,o]=await aC(this.storage,this.storageKey));const{data:l,error:c}=await fC(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:o}),jwt:i.access_token,xform:gC});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(r){if(_k(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kk;const t=Date.now()/1e3;let r=t,n=!0,a=null;const{payload:i}=tC(e.access_token);if(i.exp&&(r=i.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:i}=await this._getUser(e.access_token);if(i)throw i;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(_k(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new kk;const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(_k(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Vk())throw new Tk("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tk(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Rk("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Tk("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rk("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:s,expires_at:o,token_type:l}=e;if(!a||!s||!i||!l)throw new Tk("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(s);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=yk&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:m,error:p}=await this._getUser(a);if(p)throw p;const g={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:u,expires_at:d,refresh_token:i,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(_k(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Qk(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({error:a});const i=null===(r=n.session)||void 0===r?void 0:r.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return _k(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await Zk(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(AR){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",AR),console.error(AR)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await aC(this.storage,this.storageKey,!0));try{return await fC(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(_k(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,a,i,s;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await fC(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==s?s:void 0})});if(n)throw n;return Vk()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null})}catch(r){if(_k(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:a}}=t;if(n)throw n;const{options:i,provider:s,token:o,access_token:l,nonce:c}=e,u=await fC(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null===a||void 0===a?void 0:a.access_token)&&void 0!==r?r:void 0,body:{provider:s,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:mC}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new Ck})}catch(n){if(_k(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:i}=t;if(i)throw i;return await fC(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await fC(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mC})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&Lk(t)&&Date.now()+r-a<yk},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!n(a,null,t))return void e(t)}catch(EM){if(!n(a,EM))return void t(EM)}})()}))}catch(a){if(this._debug(t,"error",a),_k(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Vk()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Qk(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Qk(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await Xk(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:lC()}else if(a&&!a.user&&!a.user){const e=await Qk(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await Zk(this.storage,this.storageKey+"-user"),await Xk(this.storage,this.storageKey,a)):a.user=lC()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const i=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<vk;if(this._debug(r,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Lk(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(AR){return this._debug(r,"error",AR),void console.error(AR)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new kk;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new eC;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new kk;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),_k(a)){const e={data:null,error:a};return Lk(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(EM){n.push(EM)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await Xk(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=cC(e);await Xk(this.storage,this.storageKey,n)}else{const e=cC(t);await Xk(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Zk(this.storage,this.storageKey),await Zk(this.storage,this.storageKey+"-code-verifier"),await Zk(this.storage,this.storageKey+"-user"),this.userStorage&&await Zk(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Vk()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(EM){console.error("removing visibilitychange callback failed",EM)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yk);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/yk);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(EM){console.error("Auto refresh tick failed with error. This is likely a transient error.",EM)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(EM){if(!(EM.isAcquireTimeout||EM instanceof _C))throw EM;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vk()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null===r||void 0===r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await aC(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?this._returnResult({data:null,error:a}):await fC(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await fC(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(n=null===o||void 0===o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?DC(e.webauthn.credential_response):MC(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:o}=await fC(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:o}))})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=await fC(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});if(i.error)return i;const{data:s}=i;if("webauthn"!==s.type)return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:LC(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:PC(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(a),"verified"===a.status&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=tC(r.access_token);let i=null;a.aal&&(i=a.aal);let s=i;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(s="aal2");return{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:a.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await fC(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new kk})})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new kk});const i=await fC(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&Vk()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(_k(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new kk});const i=await fC(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return i.data&&i.data.redirect_url&&Vk()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(_k(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await fC(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new kk})})}catch(e){if(_k(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?(await fC(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new kk})})}catch(t){if(_k(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:n,error:a}=await fC(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,t=n.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:a,signature:i,raw:{header:s,payload:o}}=tC(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:n,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,i,function(e){const t=[];return qk(e,e=>t.push(e)),new Uint8Array(t)}(`${s}.${o}`)))throw new Dk("Invalid JWT signature");return{data:{claims:a,header:n,signature:i},error:null}}catch(r){if(_k(r))return this._returnResult({data:null,error:r});throw r}}}VC.nextInstanceID={};const KC=VC;class YC extends KC{constructor(e){super(e)}}class JC{constructor(e,t,r){var n,a,i;this.supabaseUrl=e,this.supabaseKey=t;const s=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,n;const{db:a,auth:i,realtime:s,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(r=null===d||void 0===d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null===o||void 0===o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:dk,realtime:fk,auth:Object.assign(Object.assign({},hk),{storageKey:o}),global:uk});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=pk(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new AE(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new lk(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new _E(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:a,detectSessionInUrl:i,storage:s,userStorage:o,storageKey:l,flowType:c,lock:u,debug:d,throwOnError:h}=e;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YC({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),t),storageKey:l,autoRefreshToken:n,persistSession:a,detectSessionInUrl:i,storage:s,userStorage:o,flowType:c,lock:u,debug:d,throwOnError:h,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new fA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");console.log("\ud83d\udd0d Environment Variables Debug:"),console.log("REACT_APP_SUPABASE_URL:","https://sjvuqphtunkneopkgoeb.supabase.co"),console.log("REACT_APP_SUPABASE_ANON_KEY:","FOUND"),console.log("NODE_ENV:","production"),console.log("\u2705 Supabase environment variables found. Connecting to real database."),console.log("\ud83d\udd17 Supabase URL:","https://sjvuqphtunkneopkgoeb.supabase.co");const XC=((e,t,r)=>new JC(e,t,r))("https://sjvuqphtunkneopkgoeb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNqdnVxcGh0dW5rbmVvcGtnb2ViIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1OTMzMjksImV4cCI6MjA3MDE2OTMyOX0.p-rc0Y7FmCzPs9-hTCXRix8CWPTKpfn1_S74PjztqxI"),QC=e=>{if(console.error("Supabase error:",e),"PGRST116"===e.code)throw new Error("No data found");throw new Error(e.message||"Database operation failed")},ZC=async()=>{try{const{data:{user:e},error:t}=await XC.auth.getUser();if(t)throw t;return e}catch(e){return console.error("Error getting current user:",e),{id:"00000000-0000-0000-0000-000000000001",email:"demo@company.com"}}},eO=async(e,t)=>{const{data:r,error:n}=await XC.from(e).insert(t).select().single();return n&&QC(n),r},tO=async(e,t,r)=>{const{data:n,error:a}=await XC.from(e).update(r).eq("id",t).select().single();return a&&QC(a),n},rO=async(e,t)=>{const{data:r,error:n}=await XC.from(e).select("*").eq("id",t).single();return n&&QC(n),r},nO=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=XC.from(e).select("*");if(t.filters&&Object.entries(t.filters).forEach(e=>{let[t,n]=e;void 0!==n&&null!==n&&""!==n&&(r=r.eq(t,n))}),t.page&&t.limit){const e=(t.page-1)*t.limit,n=e+t.limit-1;r=r.range(e,n)}t.orderBy&&(r=r.order(t.orderBy.column,{ascending:t.orderBy.ascending}));const{data:n,error:a,count:i}=await r;if(a)throw console.error("Database list error:",a),new Error(a.message||"Failed to fetch data");return{data:n,count:i}}catch(r){throw console.error("Error in dbHelpers.list:",r),r}},aO={async getDashboardStats(){try{const[e,t,r,n,a,i,s]=await Promise.all([this.getCustomerStats(),this.getScreeningStats(),this.getCaseStats(),this.getReportStats(),this.getAlertStats(),this.getRiskStats(),this.getRecentActivity()]);return{success:!0,data:{customerStats:e,screeningStats:t,caseStats:r,reportStats:n,alertStats:a,riskStats:i,recentActivity:s},error:null}}catch(e){return console.error("Error in getDashboardStats:",e),{success:!1,data:null,error:e.message}}},async getCustomerStats(){try{const{count:e,error:t}=await XC.from("customers").select("*",{count:"exact",head:!0});if(t)throw t;const{data:r,error:n}=await XC.from("customers").select("risk_level").not("risk_level","is",null);if(n)throw n;const a=r.reduce((e,t)=>(e[t.risk_level]=(e[t.risk_level]||0)+1,e),{}),i=new Date;i.setDate(i.getDate()-7);const{count:s,error:o}=await XC.from("customers").select("*",{count:"exact",head:!0}).gte("created_at",i.toISOString());if(o)throw o;return{total:e||0,recent:s||0,riskLevels:a}}catch(e){return console.error("Error getting customer stats:",e),{total:0,recent:0,riskLevels:{}}}},async getScreeningStats(){try{const{count:e,error:t}=await XC.from("screening_logs").select("*",{count:"exact",head:!0});if(t)throw t;const r=new Date;r.setDate(r.getDate()-7);const{count:n,error:a}=await XC.from("screening_logs").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString());if(a)throw a;return{total:e||0,recent:n||0}}catch(e){return console.error("Error getting screening stats:",e),{total:0,recent:0}}},async getCaseStats(){try{const{count:e,error:t}=await XC.from("cases").select("*",{count:"exact",head:!0});if(t)throw t;const{data:r,error:n}=await XC.from("cases").select("status");if(n)throw n;const a=r.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),i=a.Open||0;return{total:e||0,open:i,inProgress:a["In Progress"]||0,statusStats:a}}catch(e){return console.error("Error getting case stats:",e),{total:0,open:0,inProgress:0,statusStats:{}}}},async getReportStats(){try{const{count:e,error:t}=await XC.from("reports").select("*",{count:"exact",head:!0});if(t)throw t;const{count:r,error:n}=await XC.from("reports").select("*",{count:"exact",head:!0}).ilike("report_type","%suspicious%");if(n)throw n;const a=new Date;a.setDate(a.getDate()-7);const{count:i,error:s}=await XC.from("reports").select("*",{count:"exact",head:!0}).gte("generated_at",a.toISOString());if(s)throw s;return{total:e||0,sar:r||0,recent:i||0}}catch(e){return console.error("Error getting report stats:",e),{total:0,sar:0,recent:0}}},async getAlertStats(){try{const{count:e,error:t}=await XC.from("transaction_alerts").select("*",{count:"exact",head:!0});if(t)throw t;const{count:r,error:n}=await XC.from("transaction_alerts").select("*",{count:"exact",head:!0}).eq("status","Pending");if(n)throw n;const{data:a,error:i}=await XC.from("transaction_alerts").select("severity");if(i)throw i;const s=a.reduce((e,t)=>(e[t.severity]=(e[t.severity]||0)+1,e),{}),o=new Date;o.setDate(o.getDate()-7);const{data:l,error:c}=await XC.from("transaction_alerts").select("created_at").gte("created_at",o.toISOString()).order("created_at",{ascending:!0});if(c)throw c;const u=l.reduce((e,t)=>{const r=new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e[r]=(e[r]||0)+1,e},{});return{total:e||0,pending:r||0,severityStats:s,alertsOverTime:Object.entries(u).map(e=>{let[t,r]=e;return{date:t,count:r}})}}catch(e){return console.error("Error getting alert stats:",e),{total:0,pending:0,severityStats:{},alertsOverTime:[]}}},async getRiskStats(){try{const{data:e,error:t}=await XC.from("customers").select("risk_level").not("risk_level","is",null);if(t)throw t;const r=e.reduce((e,t)=>(e[t.risk_level]=(e[t.risk_level]||0)+1,e),{});return{riskLevels:r,pieData:Object.entries(r).map(e=>{let[t,r]=e;return{name:t,value:r}})}}catch(e){return console.error("Error getting risk stats:",e),{riskLevels:{},pieData:[]}}},async getRecentActivity(){try{const{data:e,error:t}=await XC.from("system_logs").select("\n          *,\n          users (\n            first_name,\n            last_name\n          )\n        ").order("created_at",{ascending:!1}).limit(10);if(t)throw t;const r=e.map(e=>({id:e.id,action:e.action,module:e.module,user:e.users?`${e.users.first_name} ${e.users.last_name}`:"System",timestamp:new Date(e.created_at).toLocaleString(),description:this.formatActivityDescription(e)}));return r}catch(e){return console.error("Error getting recent activity:",e),[]}},async getHighRiskCustomers(){try{const{data:e,error:t}=await XC.from("customers").select("first_name, last_name, risk_level, created_at").eq("risk_level","High").order("created_at",{ascending:!1}).limit(5);if(t)throw t;return e.map(e=>({name:`${e.first_name} ${e.last_name}`,riskLevel:e.risk_level,created:new Date(e.created_at).toLocaleDateString()}))}catch(e){return console.error("Error getting high-risk customers:",e),[]}},async getPendingTasks(){try{const e=[],{count:t,error:r}=await XC.from("transaction_alerts").select("*",{count:"exact",head:!0}).eq("status","Pending");!r&&t>0&&e.push(`${t} alerts need manual review`);const{count:n,error:a}=await XC.from("customers").select("*",{count:"exact",head:!0}).eq("kyc_status","Pending");!a&&n>0&&e.push(`${n} customer KYC forms need verification`);const{count:i,error:s}=await XC.from("cases").select("*",{count:"exact",head:!0}).eq("status","Open");return!s&&i>0&&e.push(`${i} case(s) pending assignment`),e}catch(e){return console.error("Error getting pending tasks:",e),[]}},formatActivityDescription(e){let t=`${e.action} in ${e.module}`;return e.table_name&&(t+=` (${e.table_name})`),e.record_id&&(t+=` - Record ID: ${e.record_id}`),t}},iO=["#16a34a","#eab308","#dc2626"],sO=()=>{const e=re(),[r,n]=(0,t.useState)({customerStats:{total:0,recent:0,riskLevels:{}},screeningStats:{total:0,recent:0},caseStats:{total:0,open:0,inProgress:0,statusStats:{}},reportStats:{total:0,sar:0,recent:0},alertStats:{total:0,pending:0,severityStats:{},alertsOverTime:[]},riskStats:{riskLevels:{},pieData:[]},recentActivity:[]}),[a,i]=(0,t.useState)(!0),[s,o]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)([]),h=async()=>{try{i(!0),o(null);const e=await aO.getDashboardStats();e.success?n(e.data):(o(e.error||"Failed to fetch dashboard data"),Ht.error("Failed to load dashboard data"));const[t,r]=await Promise.all([aO.getPendingTasks(),aO.getHighRiskCustomers()]);c(t),d(r)}catch(s){console.error("Error fetching dashboard data:",s),o("Failed to fetch dashboard data"),Ht.error("Failed to load dashboard data")}finally{i(!1)}};(0,t.useEffect)(()=>{h()},[]);return a?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading dashboard..."})]})}):s?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[(0,Zt.jsx)("div",{className:"text-red-600 mb-2",children:(0,Zt.jsx)("svg",{className:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Zt.jsx)("p",{className:"text-red-800 mb-4",children:s}),(0,Zt.jsx)("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})}):(0,Zt.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AML Platform Dashboard"}),(0,Zt.jsxs)("button",{onClick:()=>{h()},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:[(0,Zt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"text-xl font-bold text-blue-600",children:r.customerStats.total}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:"Customers Onboarded"}),(0,Zt.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["+",r.customerStats.recent," this week"]})]})}),(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"text-xl font-bold text-purple-600",children:r.screeningStats.total}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:"Screenings Done"}),(0,Zt.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["+",r.screeningStats.recent," this week"]})]})}),(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"text-xl font-bold text-orange-600",children:r.caseStats.total}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:"Total Cases"}),(0,Zt.jsxs)("div",{className:"text-xs text-orange-600 mt-1",children:[r.caseStats.open," open, ",r.caseStats.inProgress," in progress"]})]})}),(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"text-xl font-bold text-red-600",children:r.reportStats.sar}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:"SAR Reports Filed"}),(0,Zt.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["+",r.reportStats.recent," this week"]})]})})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"font-semibold mb-2",children:"Alerts Over Time"}),r.alertStats.alertsOverTime.length>0?(0,Zt.jsx)(Dr,{width:"100%",height:200,children:(0,Zt.jsxs)(mb,{data:r.alertStats.alertsOverTime,children:[(0,Zt.jsx)(Tx,{dataKey:"date"}),(0,Zt.jsx)(Bx,{allowDecimals:!1}),(0,Zt.jsx)(QN,{}),(0,Zt.jsx)(wj,{dataKey:"count",fill:"#3b82f6",radius:[4,4,0,0]})]})}):(0,Zt.jsx)("div",{className:"flex items-center justify-center h-48 text-gray-500",children:"No alert data available"})]})}),(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"font-semibold mb-2",children:"Customer Risk Levels"}),r.riskStats.pieData.length>0?(0,Zt.jsx)(Dr,{width:"100%",height:200,children:(0,Zt.jsx)(Cj,{children:(0,Zt.jsx)(mE,{data:r.riskStats.pieData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,label:!0,children:r.riskStats.pieData.map((e,t)=>(0,Zt.jsx)(wS,{fill:iO[t%iO.length]},`cell-${t}`))})})}):(0,Zt.jsx)("div",{className:"flex items-center justify-center h-48 text-gray-500",children:"No risk data available"})]})})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"font-semibold mb-4",children:"Quick Actions"}),(0,Zt.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,Zt.jsxs)(pr,{variant:"outline",className:"flex items-center gap-2 hover:bg-blue-50 hover:border-blue-300 transition-colors",onClick:()=>e("/customer/onboarding"),children:[(0,Zt.jsx)(pE,{size:16})," Add New Customer"]}),(0,Zt.jsxs)(pr,{variant:"outline",className:"flex items-center gap-2 hover:bg-purple-50 hover:border-purple-300 transition-colors",onClick:()=>e("/screening/instant"),children:[(0,Zt.jsx)(gE,{size:16})," Start Screening"]}),(0,Zt.jsxs)(pr,{variant:"outline",className:"flex items-center gap-2 hover:bg-green-50 hover:border-green-300 transition-colors",onClick:()=>e("/reports/reportgeneration"),children:[(0,Zt.jsx)(yE,{size:16})," Generate Report"]})]})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"text-lg font-bold text-red-600",children:r.alertStats.pending}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:"Pending Alerts"}),(0,Zt.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Requires attention"})]})}),(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"text-lg font-bold text-yellow-600",children:r.caseStats.open}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:"Open Cases"}),(0,Zt.jsx)("div",{className:"text-xs text-yellow-600 mt-1",children:"Need assignment"})]})}),(0,Zt.jsx)(fr,{children:(0,Zt.jsxs)(mr,{className:"p-4",children:[(0,Zt.jsx)("div",{className:"text-lg font-bold text-green-600",children:r.reportStats.total}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:"Total Reports"}),(0,Zt.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Generated this month"})]})})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"font-semibold mb-4",children:"Pending Tasks"}),l.length>0?(0,Zt.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:l.map((e,t)=>(0,Zt.jsx)("li",{className:"text-red-600",children:e},t))}):(0,Zt.jsx)("p",{className:"text-sm text-green-600",children:"\u2705 All tasks completed!"})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"font-semibold mb-4",children:"Recent High-Risk Customers"}),u.length>0?(0,Zt.jsx)("ul",{className:"text-sm text-gray-700 space-y-2",children:u.map((e,t)=>(0,Zt.jsxs)("li",{className:"flex items-center gap-2",children:[(0,Zt.jsx)("span",{className:"text-red-500",children:"\ud83d\udd34"}),(0,Zt.jsx)("span",{className:"font-medium",children:e.name}),(0,Zt.jsxs)("span",{className:"text-gray-500",children:["- ",e.riskLevel," Risk"]}),(0,Zt.jsxs)("span",{className:"text-xs text-gray-400",children:["(Added ",e.created,")"]})]},t))}):(0,Zt.jsx)("p",{className:"text-sm text-green-600",children:"\u2705 No high-risk customers found"})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"font-semibold mb-4",children:"Recent Activity"}),r.recentActivity.length>0?(0,Zt.jsx)("ul",{className:"text-sm text-gray-700 space-y-2",children:r.recentActivity.slice(0,5).map((e,t)=>(0,Zt.jsxs)("li",{className:"flex items-center gap-2",children:[(0,Zt.jsx)("span",{className:"text-blue-500",children:"\u2705"}),(0,Zt.jsx)("span",{children:e.description}),(0,Zt.jsxs)("span",{className:"text-xs text-gray-400",children:["by ",e.user]}),(0,Zt.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.timestamp,")"]})]},t))}):(0,Zt.jsx)("p",{className:"text-sm text-gray-500",children:"No recent activity"})]})]})},oO=[{name:"Afghanistan",code:"AF",phone:"+93"},{name:"\xc5land Islands",code:"AX",phone:"+358"},{name:"Albania",code:"AL",phone:"+355"},{name:"Algeria",code:"DZ",phone:"+213"},{name:"American Samoa",code:"AS",phone:"+1 684"},{name:"Andorra",code:"AD",phone:"+376"},{name:"Angola",code:"AO",phone:"+244"},{name:"Anguilla",code:"AI",phone:"+1 264"},{name:"Antarctica",code:"AQ",phone:"+672"},{name:"Antigua And Barbuda",code:"AG",phone:"+1 268"},{name:"Argentina",code:"AR",phone:"+54"},{name:"Armenia",code:"AM",phone:"+374"},{name:"Aruba",code:"AW",phone:"+297"},{name:"Ascension Island",code:"AC",phone:"+247"},{name:"Australia",code:"AU",phone:"+61"},{name:"Austria",code:"AT",phone:"+43"},{name:"Azerbaijan",code:"AZ",phone:"+994"},{name:"Bahamas",code:"BS",phone:"+1 242"},{name:"Bahrain",code:"BH",phone:"+973"},{name:"Bangladesh",code:"BD",phone:"+880"},{name:"Barbados",code:"BB",phone:"+1 246"},{name:"Belarus",code:"BY",phone:"+375"},{name:"Belgium",code:"BE",phone:"+32"},{name:"Belize",code:"BZ",phone:"+501"},{name:"Benin",code:"BJ",phone:"+229"},{name:"Bermuda",code:"BM",phone:"+1 441"},{name:"Bhutan",code:"BT",phone:"+975"},{name:"Bolivia, Plurinational State Of",code:"BO",phone:"+591"},{name:"Bonaire, Saint Eustatius And Saba",code:"BQ",phone:"+599"},{name:"Bosnia & Herzegovina",code:"BA",phone:"+387"},{name:"Botswana",code:"BW",phone:"+267"},{name:"Brazil",code:"BR",phone:"+55"},{name:"British Indian Ocean Territory",code:"IO",phone:"+246"},{name:"Brunei Darussalam",code:"BN",phone:"+673"},{name:"Bulgaria",code:"BG",phone:"+359"},{name:"Burkina Faso",code:"BF",phone:"+226"},{name:"Burundi",code:"BI",phone:"+257"},{name:"Cabo Verde",code:"CV",phone:"+238"},{name:"Cambodia",code:"KH",phone:"+855"},{name:"Cameroon",code:"CM",phone:"+237"},{name:"Canada",code:"CA",phone:"+1"},{name:"Cayman Islands",code:"KY",phone:"+1 345"},{name:"Central African Republic",code:"CF",phone:"+236"},{name:"Chad",code:"TD",phone:"+235"},{name:"Chile",code:"CL",phone:"+56"},{name:"China",code:"CN",phone:"+86"},{name:"Christmas Island",code:"CX",phone:"+61"},{name:"Cocos (Keeling) Islands",code:"CC",phone:"+61"},{name:"Colombia",code:"CO",phone:"+57"},{name:"Comoros",code:"KM",phone:"+269"},{name:"Cook Islands",code:"CK",phone:"+682"},{name:"Costa Rica",code:"CR",phone:"+506"},{name:"C\xf4te d'Ivoire",code:"CI",phone:"+225"},{name:"Croatia",code:"HR",phone:"+385"},{name:"Cuba",code:"CU",phone:"+53"},{name:"Curacao",code:"CW",phone:"+599"},{name:"Cyprus",code:"CY",phone:"+357"},{name:"Czech Republic",code:"CZ",phone:"+420"},{name:"Democratic Republic Of Congo",code:"CD",phone:"+243"},{name:"Denmark",code:"DK",phone:"+45"},{name:"Djibouti",code:"DJ",phone:"+253"},{name:"Dominica",code:"DM",phone:"+1 767"},{name:"Dominican Republic",code:"DO",phone:"+1 809"},{name:"Ecuador",code:"EC",phone:"+593"},{name:"Egypt",code:"EG",phone:"+20"},{name:"El Salvador",code:"SV",phone:"+503"},{name:"Equatorial Guinea",code:"GQ",phone:"+240"},{name:"Eritrea",code:"ER",phone:"+291"},{name:"Estonia",code:"EE",phone:"+372"},{name:"Ethiopia",code:"ET",phone:"+251"},{name:"European Union",code:"EU",phone:"+388"},{name:"Falkland Islands",code:"FK",phone:"+500"},{name:"Faroe Islands",code:"FO",phone:"+298"},{name:"Fiji",code:"FJ",phone:"+679"},{name:"Finland",code:"FI",phone:"+358"},{name:"France",code:"FR",phone:"+33"},{name:"France, Metropolitan",code:"FX",phone:"+241"},{name:"French Guiana",code:"GF",phone:"+594"},{name:"French Polynesia",code:"PF",phone:"+689"},{name:"Gabon",code:"GA",phone:"+241"},{name:"Gambia",code:"GM",phone:"+220"},{name:"Georgia",code:"GE",phone:"+995"},{name:"Germany",code:"DE",phone:"+49"},{name:"Ghana",code:"GH",phone:"+233"},{name:"Gibraltar",code:"GI",phone:"+350"},{name:"Greece",code:"GR",phone:"+30"},{name:"Greenland",code:"GL",phone:"+299"},{name:"Grenada",code:"GD",phone:"+473"},{name:"Guadeloupe",code:"GP",phone:"+590"},{name:"Guam",code:"GU",phone:"+1 671"},{name:"Guatemala",code:"GT",phone:"+502"},{name:"Guernsey",code:"GG",phone:"+44"},{name:"Guinea",code:"GN",phone:"+224"},{name:"Guinea-bissau",code:"GW",phone:"+245"},{name:"Guyana",code:"GY",phone:"+592"},{name:"Haiti",code:"HT",phone:"+509"},{name:"Honduras",code:"HN",phone:"+504"},{name:"Hong Kong",code:"HK",phone:"+852"},{name:"Hungary",code:"HU",phone:"+36"},{name:"Iceland",code:"IS",phone:"+354"},{name:"India",code:"IN",phone:"+91"},{name:"Indonesia",code:"ID",phone:"+62"},{name:"Iran, Islamic Republic Of",code:"IR",phone:"+98"},{name:"Iraq",code:"IQ",phone:"+964"},{name:"Ireland",code:"IE",phone:"+353"},{name:"Isle Of Man",code:"IM",phone:"+44"},{name:"Israel",code:"IL",phone:"+972"},{name:"Italy",code:"IT",phone:"+39"},{name:"Jamaica",code:"JM",phone:"+1 876"},{name:"Japan",code:"JP",phone:"+81"},{name:"Jersey",code:"JE",phone:"+44"},{name:"Jordan",code:"JO",phone:"+962"},{name:"Kazakhstan",code:"KZ",phone:"+7"},{name:"Kenya",code:"KE",phone:"+254"},{name:"Kiribati",code:"KI",phone:"+686"},{name:"Korea, Democratic People's Republic Of",code:"KP",phone:"+850"},{name:"Korea, Republic Of",code:"KR",phone:"+82"},{name:"Kosovo",code:"XK",phone:"+383"},{name:"Kuwait",code:"KW",phone:"+965"},{name:"Kyrgyzstan",code:"KG",phone:"+996"},{name:"Lao People's Democratic Republic",code:"LA",phone:"+856"},{name:"Latvia",code:"LV",phone:"+371"},{name:"Lebanon",code:"LB",phone:"+961"},{name:"Lesotho",code:"LS",phone:"+266"},{name:"Liberia",code:"LR",phone:"+231"},{name:"Libya",code:"LY",phone:"+218"},{name:"Liechtenstein",code:"LI",phone:"+423"},{name:"Lithuania",code:"LT",phone:"+370"},{name:"Luxembourg",code:"LU",phone:"+352"},{name:"Macao",code:"MO",phone:"+853"},{name:"Macedonia, The Former Yugoslav Republic Of",code:"MK",phone:"+389"},{name:"Madagascar",code:"MG",phone:"+261"},{name:"Malawi",code:"MW",phone:"+265"},{name:"Malaysia",code:"MY",phone:"+60"},{name:"Maldives",code:"MV",phone:"+960"},{name:"Mali",code:"ML",phone:"+223"},{name:"Malta",code:"MT",phone:"+356"},{name:"Marshall Islands",code:"MH",phone:"+692"},{name:"Martinique",code:"MQ",phone:"+596"},{name:"Mauritania",code:"MR",phone:"+222"},{name:"Mauritius",code:"MU",phone:"+230"},{name:"Mayotte",code:"YT",phone:"+262"},{name:"Mexico",code:"MX",phone:"+52"},{name:"Micronesia, Federated States Of",code:"FM",phone:"+691"},{name:"Moldova",code:"MD",phone:"+373"},{name:"Monaco",code:"MC",phone:"+377"},{name:"Mongolia",code:"MN",phone:"+976"},{name:"Montenegro",code:"ME",phone:"+382"},{name:"Montserrat",code:"MS",phone:"+1 664"},{name:"Morocco",code:"MA",phone:"+212"},{name:"Mozambique",code:"MZ",phone:"+258"},{name:"Myanmar",code:"MM",phone:"+95"},{name:"Namibia",code:"NA",phone:"+264"},{name:"Nauru",code:"NR",phone:"+674"},{name:"Nepal",code:"NP",phone:"+977"},{name:"Netherlands",code:"NL",phone:"+31"},{name:"New Caledonia",code:"NC",phone:"+687"},{name:"New Zealand",code:"NZ",phone:"+64"},{name:"Nicaragua",code:"NI",phone:"+505"},{name:"Niger",code:"NE",phone:"+227"},{name:"Nigeria",code:"NG",phone:"+234"},{name:"Niue",code:"NU",phone:"+683"},{name:"Norfolk Island",code:"NF",phone:"+672"},{name:"Northern Mariana Islands",code:"MP",phone:"+1 670"},{name:"Norway",code:"NO",phone:"+47"},{name:"Oman",code:"OM",phone:"+968"},{name:"Pakistan",code:"PK",phone:"+92"},{name:"Palau",code:"PW",phone:"+680"},{name:"Palestinian Territory, Occupied",code:"PS",phone:"+970"},{name:"Panama",code:"PA",phone:"+507"},{name:"Papua New Guinea",code:"PG",phone:"+675"},{name:"Paraguay",code:"PY",phone:"+595"},{name:"Peru",code:"PE",phone:"+51"},{name:"Philippines",code:"PH",phone:"+63"},{name:"Pitcairn",code:"PN",phone:"+872"},{name:"Poland",code:"PL",phone:"+48"},{name:"Portugal",code:"PT",phone:"+351"},{name:"Puerto Rico",code:"PR",phone:"+1 787"},{name:"Qatar",code:"QA",phone:"+974"},{name:"Republic Of Congo",code:"CG",phone:"+242"},{name:"Reunion",code:"RE",phone:"+262"},{name:"Romania",code:"RO",phone:"+40"},{name:"Russian Federation",code:"RU",phone:"+7"},{name:"Rwanda",code:"RW",phone:"+250"},{name:"Saint Barth\xe9lemy",code:"BL",phone:"+590"},{name:"Saint Helena, Ascension And Tristan Da Cunha",code:"SH",phone:"+290"},{name:"Saint Kitts And Nevis",code:"KN",phone:"+1 869"},{name:"Saint Lucia",code:"LC",phone:"+1 758"},{name:"Saint Martin",code:"MF",phone:"+590"},{name:"Saint Pierre And Miquelon",code:"PM",phone:"+508"},{name:"Saint Vincent And The Grenadines",code:"VC",phone:"+1 784"},{name:"Samoa",code:"WS",phone:"+685"},{name:"San Marino",code:"SM",phone:"+378"},{name:"Sao Tome and Principe",code:"ST",phone:"+239"},{name:"Saudi Arabia",code:"SA",phone:"+966"},{name:"Senegal",code:"SN",phone:"+221"},{name:"Serbia",code:"RS",phone:"+381"},{name:"Seychelles",code:"SC",phone:"+248"},{name:"Sierra Leone",code:"SL",phone:"+232"},{name:"Singapore",code:"SG",phone:"+65"},{name:"Sint Maarten",code:"SX",phone:"+1 721"},{name:"Slovakia",code:"SK",phone:"+421"},{name:"Slovenia",code:"SI",phone:"+386"},{name:"Solomon Islands",code:"SB",phone:"+677"},{name:"Somalia",code:"SO",phone:"+252"},{name:"South Africa",code:"ZA",phone:"+27"},{name:"South Sudan",code:"SS",phone:"+211"},{name:"Spain",code:"ES",phone:"+34"},{name:"Sri Lanka",code:"LK",phone:"+94"},{name:"Sudan",code:"SD",phone:"+249"},{name:"Suriname",code:"SR",phone:"+597"},{name:"Svalbard And Jan Mayen",code:"SJ",phone:"+47"},{name:"Swaziland",code:"SZ",phone:"+268"},{name:"Sweden",code:"SE",phone:"+46"},{name:"Switzerland",code:"CH",phone:"+41"},{name:"Syrian Arab Republic",code:"SY",phone:"+963"},{name:"Taiwan",code:"TW",phone:"+886"},{name:"Tajikistan",code:"TJ",phone:"+992"},{name:"Tanzania, United Republic Of",code:"TZ",phone:"+255"},{name:"Thailand",code:"TH",phone:"+66"},{name:"Timor-Leste, Democratic Republic of",code:"TL",phone:"+670"},{name:"Togo",code:"TG",phone:"+228"},{name:"Tokelau",code:"TK",phone:"+690"},{name:"Tonga",code:"TO",phone:"+676"},{name:"Trinidad And Tobago",code:"TT",phone:"+1 868"},{name:"Tristan de Cunha",code:"TA",phone:"+290"},{name:"Tunisia",code:"TN",phone:"+216"},{name:"Turkey",code:"TR",phone:"+90"},{name:"Turkmenistan",code:"TM",phone:"+993"},{name:"Turks And Caicos Islands",code:"TC",phone:"+1 649"},{name:"Tuvalu",code:"TV",phone:"+688"},{name:"Uganda",code:"UG",phone:"+256"},{name:"Ukraine",code:"UA",phone:"+380"},{name:"United Arab Emirates",code:"AE",phone:"+971"},{name:"United Kingdom",code:"GB",phone:"+44"},{name:"United States",code:"US",phone:"+1"},{name:"United States Minor Outlying Islands",code:"UM",phone:"+1"},{name:"Uruguay",code:"UY",phone:"+598"},{name:"Uzbekistan",code:"UZ",phone:"+998"},{name:"Vanuatu",code:"VU",phone:"+678"},{name:"Vatican City State",code:"VA",phone:"+379"},{name:"Venezuela, Bolivarian Republic Of",code:"VE",phone:"+58"},{name:"Viet Nam",code:"VN",phone:"+84"},{name:"Virgin Islands (British)",code:"VG",phone:"+1 284"},{name:"Virgin Islands (US)",code:"VI",phone:"+1 340"},{name:"Wallis And Futuna",code:"WF",phone:"+681"},{name:"Western Sahara",code:"EH",phone:"+212"},{name:"Yemen",code:"YE",phone:"+967"},{name:"Zambia",code:"ZM",phone:"+260"},{name:"Zimbabwe",code:"ZW",phone:"+263"}],lO=new Map;oO.forEach(e=>{lO.set(e.code.toUpperCase(),e.name.toUpperCase())});const cO=e=>{const t=Number(e)||0;return t>=5?"Full name match":t>=3?"Partial name match":"No name match"},uO={customerType:"CUSTOMER TYPE",fullNameSanctionMatch:"Full Name Sanction",profession:"BUSINESS ACTIVITY",nationality:"Nationality",residencyStatus:"RESIDENCY STATUS",isDualNationality:"Dual Nationality",dualNationality:"Dual Nationality Countries",occupation:"BUSINESS ACTIVITY",pep:"PEP",countryOfBirth:"Country Of Birth",sourceOfFunds:"SOURCE OF FUND",countryOfResidence:"Country Of Residence"},dO={customerType:"CUSTOMER TYPE",fullNameSanctionMatch:"Full Name Sanction",businessActivity:"BUSINESS ACTIVITY",countryOfIncorporation:"Country Of Incorporation",licenseType:"LICENSE TYPE",countriesSourceOfFunds:"Countries Source Of Funds",countriesOfOperation:"OPERATION COUNTRIES",jurisdiction:"JURISDICTION",sourceOfFunds:"SOURCE OF FUND",residencyStatus:"RESIDENCY STATUS",licenseCategory:"LICENSE CATEGORY"},hO={fullNameSanctionMatch:"Full Name Sanction",countryOfResidence:"Country Of Residence",nationality:"Nationality",placeOfBirth:"Country Of Birth",isDualNationality:"Dual Nationality",dualNationality:"Dual Nationality Countries",occupation:"BUSINESS ACTIVITY",pep:"PEP",sourceOfFunds:"SOURCE OF FUND"},fO={fullNameSanctionMatch:"Full Name Sanction",businessActivity:"BUSINESS ACTIVITY",countryOfIncorporation:"Country Of Incorporation",licenseType:"LICENSE TYPE",countriesSourceOfFunds:"Countries Source Of Funds",countriesOfOperation:"OPERATION COUNTRIES",sourceOfFunds:"SOURCE OF FUND"},mO=new Map,pO=!1,gO=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=new Set;return"Natural Person"===e?(Object.values(uO).forEach(e=>r.add(e)),r.add("CUSTOMER TYPE"),t&&(Object.values(hO).forEach(e=>r.add(e)),Object.values(fO).forEach(e=>r.add(e)))):"Legal Entities"===e&&(Object.values(dO).forEach(e=>r.add(e)),Object.values(hO).forEach(e=>r.add(e)),Object.values(fO).forEach(e=>r.add(e)),r.add("CUSTOMER TYPE")),Array.from(r)}(e,t);if(0===n.length)return[];const a=`${e}_${t?"with_sh":"no_sh"}`,i=mO.get(a),s=Date.now();if(!r&&i&&s-i.timestamp<3e5)return i.rules;const{data:o,error:l}=await XC.from("risk_categories").select("id, name").eq("rule_type","ONBOARDING").in("name",n);if(l)throw l;if(!o||0===o.length)return[];const c=o.map(e=>e.id),u=new Map(o.map(e=>[e.id,e.name]));let d=[],h=0;const f=1e3;let m=!0;for(;m;){const{data:e,error:t}=await XC.from("risk_rules").select("*").eq("is_active",!0).in("category_id",c).range(h,h+f-1);if(t)throw t;e&&e.length>0?(d=[...d,...e],h+=f,m=e.length===f):m=!1}const p=d.map(e=>({id:e.id,categoryId:e.category_id,categoryName:u.get(e.category_id)||"Uncategorized",ruleText:e.rule_text,riskScore:e.risk_score,riskLogic:e.risk_logic}));return mO.set(a,{rules:p,timestamp:s}),p}catch(n){return console.error("Error fetching risk rules:",n),[]}},yO=e=>{const t=(e=>{const t=e.match(/^(.+?)\s*\(/);return t?t[1].trim():e.trim()})(e.ruleText),r=t.trim().toLowerCase().replace(/\s+/g," ");return{...e,normalizedLabel:r,originalLabel:t.trim()}},vO=(e,t)=>{if(!e)return null;if(Array.isArray(e))return e.map(e=>vO(e,t)).filter(e=>null!==e);let r=String(e).trim().toLowerCase().replace(/\s+/g," ");if(["Nationality","Country Of Birth","Country Of Residence","Dual Nationality Countries","Country Of Incorporation","Countries Source Of Funds","OPERATION COUNTRIES"].includes(t)&&2===e.length&&/^[A-Z]{2}$/i.test(e)){const t=lO.get(e.toUpperCase());t&&(r=t.toLowerCase())}return r},bO=(e,t)=>{var r,n;if("isDualNationality"===t||"is_dual_nationality"===t){var a,i,s;let r=null!==(a=null!==(i=null!==(s=e[t])&&void 0!==s?s:e[t.toLowerCase()])&&void 0!==i?i:e[t.replace(/([A-Z])/g,"_$1").toLowerCase()])&&void 0!==a&&a;return!0===r||"true"===r||"True"===r||"YES"===r||"Yes"===r||"yes"===r||1===r?"Yes":"No"}let o=null!==(r=null!==(n=e[t])&&void 0!==n?n:e[t.toLowerCase()])&&void 0!==r?r:e[t.replace(/([A-Z])/g,"_$1").toLowerCase()];if(void 0!==o&&null!==o){if(Array.isArray(o)){const e=o.filter(e=>null!==e&&void 0!==e&&""!==e);return e.length>0?e:void 0}if("string"===typeof o&&""!==o.trim()){const e=o.trim();if(e.startsWith("[")||e.startsWith("{"))try{const t=JSON.parse(e);if(Array.isArray(t)){const e=t.filter(e=>null!==e&&void 0!==e&&""!==e);return e.length>0?e:void 0}}catch(EM){}if(["businessActivity","countriesSourceOfFunds","countriesOfOperation","licenseCategory"].includes(t)&&e.includes(",")){const t=e.split(",").map(e=>e.trim()).filter(e=>""!==e);return t.length>0?t:void 0}}return o}},xO=e=>e>=0&&e<=1?"Low":e>1&&e<=2?"Medium Low":e>2&&e<=3?"Medium":e>3&&e<=4?"Medium High":e>4&&e<=5?"High":"Low",wO=e=>{const t=new Map;for(const r of e){const e=yO(r),n=r.categoryName;t.has(n)||t.set(n,new Map);const a=t.get(n),i=e.normalizedLabel;a.has(i)||a.set(i,[]),a.get(i).push(e)}return t},NO=function(e,t,r,n,a,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!e)return i;const o=vO(e,t);if(!o)return i;const l=r.get(t);if(!l)return i;const c=Array.isArray(o)?o:[o];for(const u of c){if(!u||"string"===typeof u&&""===u.trim())continue;const e=String(u).trim();if(!e)continue;const t=l.get(e)||[];pO;for(const r of t){const e=s?`${r.id}:${s}`:r.id;n.has(e)||(a.push({...r,triggeredByField:s||null}),n.add(e),i+=r.riskScore)}}return i},SO=async e=>{try{if(!e)return{score:0,level:"Low",triggeredRules:[]};const t=e.customerType||e.customer_type;let r;if("Natural Person"===t)r=await(async e=>{const t=await gO("Natural Person",!1);if(0===t.length)return{triggeredRules:[],totalScore:0,averageScore:0,ruleCount:0};const r=wO(t),n=[],a=new Set;let i=0;{const t=bO(e,"fullNameSanctionMatchCount"),s=cO(void 0!==t&&null!==t?t:0);i=NO(s,"Full Name Sanction",r,a,n,i,"fullNameSanctionMatch")}for(const[s,o]of Object.entries(uO)){if("fullNameSanctionMatch"===s)continue;const t=bO(e,s);if(t||"isDualNationality"===s){if("dualNationality"===s&&"Yes"!==bO(e,"isDualNationality"))continue;i=NO(t,o,r,a,n,i,s)}}return{triggeredRules:n,totalScore:i,averageScore:n.length>0?i/n.length:0,ruleCount:n.length}})(e);else{if("Legal Entities"!==t)return{score:0,level:"Low",triggeredRules:[]};r=await(async e=>{const t=e.shareholders&&Array.isArray(e.shareholders)&&e.shareholders.length>0,r=await gO("Legal Entities",t);if(0===r.length)return{triggeredRules:[],totalScore:0,averageScore:0,ruleCount:0};const n=wO(r),a=[],i=new Set;let s=0;{const t=bO(e,"fullNameSanctionMatchCount"),r=cO(void 0!==t&&null!==t?t:0);s=NO(r,"Full Name Sanction",n,i,a,s,"fullNameSanctionMatch")}for(const[l,c]of Object.entries(dO)){if("fullNameSanctionMatch"===l)continue;const t=bO(e,l);t&&(!Array.isArray(t)||t.length>0)&&(s=NO(t,c,n,i,a,s,l))}t&&e.shareholders.forEach((e,t)=>{const r=e.shareholderType||e.type||e.entity_type;{const r=bO(e,"fullNameSanctionMatchCount"),o=cO(void 0!==r&&null!==r?r:0);s=NO(o,"Full Name Sanction",n,i,a,s,`shareholder.${t}.fullNameSanctionMatch`)}const o="CUSTOMER TYPE",l=n.get(o);if(r&&l){const e=vO(r,o);if(e){const n=l.get(e)||[];for(const e of n){const n=`${e.id}_${t}`;i.has(n)||(a.push({...e,triggeredByField:`shareholder.type.${r}.${t}`}),i.add(n),s+=e.riskScore)}}}const c="Natural Person"===r?hO:fO;if("Natural Person"===r){const r=bO(e,"isDualNationality");s=NO(r,"Dual Nationality",n,i,a,s,`shareholder.${t}.isDualNationality`);for(const[o,l]of Object.entries(c)){if("isDualNationality"===o)continue;if("dualNationality"===o&&"Yes"!==r)continue;const c=bO(e,o);c&&(s=NO(c,l,n,i,a,s,`shareholder.${t}.${o}`))}}else for(const[u,d]of Object.entries(c)){const r=bO(e,u);r&&(!Array.isArray(r)||r.length>0)&&(s=NO(r,d,n,i,a,s,`shareholder.${t}.${u}`))}});const o=a.length>0?s/a.length:0;return{triggeredRules:a,totalScore:s,averageScore:o,ruleCount:a.length}})(e)}const n=xO(r.averageScore);return{score:r.averageScore,level:n,triggeredRules:r.triggeredRules.map(e=>({id:e.id,name:e.ruleText,score:e.riskScore,category:e.categoryName,fieldName:e.triggeredByField||null}))}}catch(t){return console.error("Error calculating risk score:",t),{score:0,level:"Low",triggeredRules:[],error:t.message}}},_O=e=>xO(e),jO={createCustomer:async e=>{try{0,console.log("\ud83d\udd17 Creating customer in real Supabase database...");const t={...e,created_at:(new Date).toISOString()},r=await eO("customers",t);if(e.shareholders&&e.shareholders.length>0){const t=e.shareholders.map(e=>({customer_id:r.id,...e}));await XC.from("customer_shareholders").insert(t)}if(e.directors&&e.directors.length>0){const t=e.directors.map(e=>({customer_id:r.id,...e}));await XC.from("customer_directors").insert(t)}if(e.bank_details&&e.bank_details.length>0){const t=e.bank_details.map(e=>({customer_id:r.id,...e}));await XC.from("customer_bank_details").insert(t)}if(e.ubos&&e.ubos.length>0){const t=e.ubos.map(e=>({customer_id:r.id,...e}));await XC.from("customer_ubos").insert(t)}return{success:!0,data:r,message:"Customer created successfully"}}catch(t){return console.error("Error creating customer:",t),{success:!1,error:t.message||"Failed to create customer"}}},getLatestRiskAssessment:async e=>{try{0;const{data:t,error:r}=await XC.from("risk_assessments").select("*").eq("customer_id",e).order("assessment_date",{ascending:!1}).limit(1);if(r)return console.error("Error fetching latest risk assessment:",r),{success:!1,data:null,error:r.message||"Failed to fetch assessment"};const n=t&&t.length>0?t[0]:null;return{success:!!n,data:n,error:n?null:"No risk assessment found"}}catch(t){return console.error("Unexpected error in getLatestRiskAssessment:",t),{success:!1,data:null,error:t.message||"Failed to fetch assessment"}}},saveRiskMitigation:async(e,t)=>{try{var r,n,a;0;const i=(new Date).toISOString(),s={customer_id:e,mitigation_answers:t.answers||{},per_control_scores:t.perControl||{},mitigation_score:null!==(r=t.mitigationScore)&&void 0!==r?r:0,residual_risk_score:null!==(n=t.residualRiskScore)&&void 0!==n?n:0,residual_risk_level:t.residualRiskLevel||null,created_at:i},{error:o}=await XC.from("risk_mitigations").insert(s);if(o)return console.error("\u274c Failed to save risk mitigation:",o),{success:!1,error:o.message||"Failed to save risk mitigation"};const l={risk_score:Math.round(100*(null!==(a=t.residualRiskScore)&&void 0!==a?a:0))/100,risk_level:t.residualRiskLevel||null,updated_at:i},{error:c}=await XC.from("customers").update(l).eq("id",e);return c?(console.error("\u26a0\ufe0f Failed to update customer residual risk:",c),{success:!1,error:c.message||"Failed to update customer residual risk"}):{success:!0,data:{...s,...l},message:"Risk mitigation and residual risk saved successfully"}}catch(i){return console.error("Unexpected error in saveRiskMitigation:",i),{success:!1,error:i.message||"Failed to save risk mitigation"}}},getLatestRiskMitigation:async e=>{try{0;const{data:t,error:r}=await XC.from("risk_mitigations").select("*").eq("customer_id",e).order("created_at",{ascending:!1}).limit(1);if(r)return console.error("Error fetching latest risk mitigation:",r),{success:!1,data:null,error:r.message||"Failed to fetch mitigation"};const n=t&&t.length>0?t[0]:null;return{success:!!n,data:n,error:n?null:"No mitigation found"}}catch(t){return console.error("Unexpected error in getLatestRiskMitigation:",t),{success:!1,data:null,error:t.message||"Failed to fetch mitigation"}}},uploadCustomerDocument:async function(e,t){let{category:r,description:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(!t)return{success:!1,error:"No file selected"};const a=await ZC().catch(()=>null),i="customer_documents",s=Date.now(),o=`customer-${e}/${s}-${t.name.replace(/\s+/g,"_")}`,{error:l}=await XC.storage.from(i).upload(o,t,{cacheControl:"3600",upsert:!1,contentType:t.type||void 0});if(l)return console.error("\u274c Error uploading document to storage:",l),{success:!1,error:l.message||"Failed to upload document"};const c={customer_id:e,bucket:i,object_path:o,file_name:t.name,file_type:t.type||null,file_size_bytes:t.size||null,category:r||null,description:n||null,uploaded_by:(null===a||void 0===a?void 0:a.id)||null},{data:u,error:d}=await XC.from("customer_documents").insert(c).select("*").single();return d?(console.error("\u274c Error inserting document metadata:",d),{success:!1,error:d.message||"Failed to save document metadata"}):{success:!0,data:u,message:"Document uploaded successfully"}}catch(a){return console.error("Unexpected error in uploadCustomerDocument:",a),{success:!1,error:a.message||"Failed to upload document"}}},getCustomerDocuments:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_documents").select("*").eq("customer_id",e).order("created_at",{ascending:!1});if(r)return console.error("\u274c Error fetching customer documents:",r),{success:!1,data:[],error:r.message||"Failed to fetch documents"};return{success:!0,data:await Promise.all(t.map(async e=>{const{data:t,error:r}=await XC.storage.from(e.bucket).createSignedUrl(e.object_path,3600);return r?(console.error("Error creating signed URL for",e.object_path,r),{...e,publicUrl:null}):{...e,publicUrl:(null===t||void 0===t?void 0:t.signedUrl)||null}}))}}catch(t){return console.error("Unexpected error in getCustomerDocuments:",t),{success:!1,data:[],error:t.message||"Failed to fetch documents"}}},deleteCustomerDocument:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_documents").select("*").eq("id",e).single();if(r)return console.error("\u274c Error fetching document before delete:",r),{success:!1,error:r.message||"Document not found"};if(t.bucket&&t.object_path){const{error:e}=await XC.storage.from(t.bucket).remove([t.object_path]);e&&console.error("\u26a0\ufe0f Error deleting document from storage:",e)}const{error:n}=await XC.from("customer_documents").delete().eq("id",e);return n?(console.error("\u274c Error deleting document metadata:",n),{success:!1,error:n.message||"Failed to delete document"}):{success:!0,message:"Document deleted successfully"}}catch(t){return console.error("Unexpected error in deleteCustomerDocument:",t),{success:!1,error:t.message||"Failed to delete document"}}},getCustomers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{0,console.log("\ud83d\udd17 Fetching customers from real Supabase database...");const{data:r,error:n}=await XC.from("customers").select("\n          *,\n          natural_person_details(*),\n          legal_entity_details(*)\n        ").order("created_at",{ascending:!1}).range((e-1)*t,e*t-1);if(n)throw new Error(n.message);if(console.log("\ud83d\udd0d Raw customers data:",r),r&&r.length>0){const e=r.map(e=>e.id),{data:t,error:n}=await XC.from("natural_person_details").select("*").in("customer_id",e);n?console.warn("\u26a0\ufe0f Error fetching natural person details:",n):console.log("\ud83d\udc64 Natural person details:",t);const{data:a,error:i}=await XC.from("legal_entity_details").select("*").in("customer_id",e);i?console.warn("\u26a0\ufe0f Error fetching legal entity details:",i):console.log("\ud83c\udfe2 Legal entity details:",a),(t||a)&&r.forEach(e=>{if("Natural Person"===e.customer_type){const r=null===t||void 0===t?void 0:t.find(t=>t.customer_id===e.id);r&&(e.natural_person_details=r)}else if("Legal Entities"===e.customer_type){const t=null===a||void 0===a?void 0:a.find(t=>t.customer_id===e.id);t&&(e.legal_entity_details=t)}})}const{count:a}=await XC.from("customers").select("*",{count:"exact",head:!0});return{success:!0,data:r||[],count:a||0}}catch(r){return console.error("Error fetching customers:",r),{success:!1,error:r.message||"Failed to fetch customers"}}},getCustomerById:async e=>{try{const{data:r,error:n}=await XC.from("customers").select("\n          *,\n          natural_person_details(*),\n          legal_entity_details(*),\n          customer_directors(*),\n          customer_bank_details(*),\n          customer_ubos(*)\n        ").eq("id",e).single();if(n&&QC(n),r&&!r.natural_person_details&&!r.legal_entity_details)if("Natural Person"===r.customer_type){const{data:t,error:n}=await XC.from("natural_person_details").select("*").eq("customer_id",e).single();!n&&t&&(r.natural_person_details=t)}else if("Legal Entities"===r.customer_type){const{data:t,error:n}=await XC.from("legal_entity_details").select("*").eq("customer_id",e).single();!n&&t&&(r.legal_entity_details=t)}if(r)try{console.log("\ud83d\udd0d Fetching shareholders for customer:",e);const{data:t,error:n}=await XC.from("customer_shareholders").select("*").eq("customer_id",e);if(console.log("\ud83d\udd0d Main shareholders result:",{mainShareholders:t,mainError:n}),n)console.error("\ud83d\udc65 Error fetching main shareholders:",n),r.shareholders=[];else if(t&&0!==t.length){const e=[];for(const r of t){let t={id:r.id,type:r.entity_type,shareholding:r.shareholding_percentage};if("Natural Person"===r.entity_type){const{data:e,error:n}=await XC.from("shareholder_natural_person_details").select("*").eq("shareholder_id",r.id).single();!n&&e&&(t={...t,fullName:e.full_name,alias:e.alias,countryOfResidence:e.country_of_residence,nationality:e.nationality,dateOfBirth:e.date_of_birth,placeOfBirth:e.place_of_birth,phone:e.phone,email:e.email,address:e.address,sourceOfFunds:e.source_of_funds,sourceOfWealth:e.source_of_wealth,occupation:e.occupation,expectedIncome:e.expected_income_range,pep:e.pep_status,dualNationality:e.dual_nationality,isDirector:e.is_director,isUbo:e.is_ubo})}else if("Legal Entities"===r.entity_type){const{data:e,error:n}=await XC.from("shareholder_legal_entity_details").select("*").eq("shareholder_id",r.id).single();!n&&e&&(t={...t,legalName:e.legal_name,alias:e.alias,dateOfIncorporation:e.date_of_incorporation,countryOfIncorporation:e.country_of_incorporation,entityClass:e.entity_class,licenseType:e.license_type,licenseNumber:e.license_number,licenseIssueDate:e.license_issue_date,licenseExpiryDate:e.license_expiry_date,businessActivity:e.business_activity,countriesOfOperation:e.countries_of_operation,countriesSourceOfFunds:e.countries_source_of_funds,sourceOfFunds:e.source_of_funds,registeredOfficeAddress:e.registered_office_address,email:e.email,phone:e.phone,otherDetails:e.other_details})}else if("Trust"===r.entity_type){const{data:e,error:n}=await XC.from("shareholder_trust_details").select("*").eq("shareholder_id",r.id).single();!n&&e&&(t={...t,trustName:e.trust_name,alias:e.alias,trustRegistered:e.trust_registered,trustType:e.trust_type,jurisdictionOfLaw:e.jurisdiction_of_law,registeredAddress:e.registered_address,trusteeName:e.trustee_name,trusteeType:e.trustee_type})}e.push(t)}r.shareholders=e}else r.shareholders=[]}catch(t){console.error("Error fetching shareholders:",t),r.shareholders=[]}if(r)try{console.log("\ud83d\udc64 Fetching UBOs for customer:",e),console.log("\ud83d\udc64 Querying customer_ubos table for customer_id:",e);const{data:t,error:n}=await XC.from("customer_ubos").select("*").eq("customer_id",e).order("created_at",{ascending:!0});if(console.log("\ud83d\udc64 UBOs result:",{ubos:t,ubosError:n}),t&&t.length>0&&(console.log("\ud83d\udc64 Raw UBO from database:",t[0]),console.log("\ud83d\udc64 Raw UBO fields:",Object.keys(t[0])),console.log("\ud83d\udc64 Raw UBO values:",Object.values(t[0]))),n)console.error("\ud83d\udc64 Error fetching UBOs:",n),r.ubos=[];else if(t&&0!==t.length){const e=t.map(e=>({id:e.id,fullName:e.full_name||"",alias:e.alias||"",countryOfResidence:e.country_of_residence||"",nationality:e.nationality||"",dateOfBirth:e.date_of_birth||"",placeOfBirth:e.place_of_birth||"",phone:e.phone||"",email:e.email||"",address:e.address||"",sourceOfFunds:e.source_of_funds||"",sourceOfWealth:e.source_of_wealth||"",occupation:e.occupation||"",expectedIncome:e.expected_income||"",pep:e.pep||"",shareholding:e.shareholding?e.shareholding.toString():"",dualNationality:e.dual_nationality||""}));r.ubos=e,console.log("\ud83d\udc64 Transformed UBOs:",r.ubos),e.length>0&&(console.log("\ud83d\udc64 Transformed UBO fields:",Object.keys(e[0])),console.log("\ud83d\udc64 Transformed UBO values:",Object.values(e[0])))}else r.ubos=[]}catch(t){console.error("Error fetching UBOs:",t),r.ubos=[]}return r}catch(t){QC(t)}},updateCustomer:async(e,t)=>{try{const r={updated_at:(new Date).toISOString()};Object.prototype.hasOwnProperty.call(t,"core_system_id")&&(r.core_system_id=t.core_system_id),Object.prototype.hasOwnProperty.call(t,"customer_type")&&(r.customer_type=t.customer_type),Object.prototype.hasOwnProperty.call(t,"email")&&(r.email=t.email),Object.prototype.hasOwnProperty.call(t,"phone")&&(r.phone=t.phone),Object.prototype.hasOwnProperty.call(t,"channel")&&(r.channel=t.channel),Object.prototype.hasOwnProperty.call(t,"transaction_product")&&(r.transaction_product=t.transaction_product),Object.prototype.hasOwnProperty.call(t,"transaction_amount_limit")&&(r.transaction_amount_limit=t.transaction_amount_limit),Object.prototype.hasOwnProperty.call(t,"transaction_limit")&&(r.transaction_limit=t.transaction_limit),Object.prototype.hasOwnProperty.call(t,"kyc_status")&&(r.kyc_status=t.kyc_status),Object.prototype.hasOwnProperty.call(t,"kyc_remarks")&&(r.kyc_remarks=t.kyc_remarks),Object.prototype.hasOwnProperty.call(t,"due_diligence_level")&&(r.due_diligence_level=t.due_diligence_level);const n=await tO("customers",e,r);if("Natural Person"===t.customer_type){const r={profession:t.profession,firstname:t.firstname,lastname:t.lastname,alias:t.alias,dateofbirth:t.dateofbirth,nationality:t.nationality,residencystatus:t.residencyStatus,idtype:t.idType,idnumber:t.idNumber,issuedate:t.issueDate,expirydate:t.expiryDate,isdualnationality:t.isDualNationality,dualnationality:t.isDualNationality?t.dualNationality:null,dualpassportnumber:t.isDualNationality?t.dualPassportNumber:null,dualpassportissuedate:t.isDualNationality?t.dualPassportIssueDate:null,dualpassportexpirydate:t.isDualNationality?t.dualPassportExpiryDate:null,countryofbirth:t.countryOfBirth,address:t.address,occupation:t.occupation,sourceofwealth:t.sourceOfWealth,pep:t.pep,sourceoffunds:t.sourceOfFunds,pobox:t.poBox,gender:t.gender,employer:t.employer},{data:n}=await XC.from("natural_person_details").select("customer_id").eq("customer_id",e).single();n?await XC.from("natural_person_details").update(r).eq("customer_id",e):await XC.from("natural_person_details").insert({customer_id:e,...r})}else if("Legal Entities"===t.customer_type){const r={businessactivity:Array.isArray(t.businessactivity)?JSON.stringify(t.businessactivity):t.businessactivity,legalname:t.legalname,alias:t.alias,dateofincorporation:t.dateofincorporation||null,countryofincorporation:t.countryofincorporation,licensetype:t.licensetype,licensenumber:t.licensenumber,licenseissuedate:t.licenseissuedate||null,licenseexpirydate:t.licenseexpirydate||null,registeredofficeaddress:t.registeredofficeaddress,city:t.city,countriessourceoffunds:Array.isArray(t.countriessourceoffunds)?JSON.stringify(t.countriessourceoffunds):t.countriessourceoffunds,managementcompany:t.managementcompany,countriesofoperation:Array.isArray(t.countriesofoperation)?JSON.stringify(t.countriesofoperation):t.countriesofoperation,jurisdiction:t.jurisdiction,sourceoffunds:t.sourceoffunds,residencystatus:t.residencystatus,licensingauthority:t.licensingauthority,trn:t.trn,licensecategory:t.licensecategory,addressexpirydate:t.addressexpirydate||null},{data:n}=await XC.from("legal_entity_details").select("customer_id").eq("customer_id",e).single();n?await XC.from("legal_entity_details").update(r).eq("customer_id",e):await XC.from("legal_entity_details").insert({customer_id:e,...r})}if(t.shareholders&&t.shareholders.length>0){const{data:r}=await XC.from("customer_shareholders").select("id").eq("customer_id",e);for(let n=0;n<t.shareholders.length;n++){const a=t.shareholders[n],i={customer_id:e,entity_type:a.type,shareholding_percentage:a.shareholding||null};if(r&&r[n]){await XC.from("customer_shareholders").update(i).eq("id",r[n].id);const e=r[n].id;if("Natural Person"===a.type){const t={full_name:a.fullName,alias:a.alias,country_of_residence:a.countryOfResidence,nationality:a.nationality,date_of_birth:a.dateOfBirth||null,place_of_birth:a.placeOfBirth,phone:a.phone,email:a.email,address:a.address,source_of_funds:a.sourceOfFunds,source_of_wealth:a.sourceOfWealth,occupation:a.occupation,expected_income_range:a.expectedIncome,pep_status:a.pep,dual_nationality:a.dualNationality,is_director:a.isDirector,is_ubo:a.isUbo},{data:r}=await XC.from("shareholder_natural_person_details").select("id").eq("shareholder_id",e).single();r?await XC.from("shareholder_natural_person_details").update(t).eq("shareholder_id",e):await XC.from("shareholder_natural_person_details").insert({shareholder_id:e,...t})}else if("Legal Entities"===a.type){const t={legal_name:a.legalName,alias:a.alias,date_of_incorporation:a.dateOfIncorporation||null,country_of_incorporation:a.countryOfIncorporation,entity_class:a.entityClass,license_type:a.licenseType,license_number:a.licenseNumber,license_issue_date:a.licenseIssueDate||null,license_expiry_date:a.licenseExpiryDate||null,business_activity:Array.isArray(a.businessActivity)?JSON.stringify(a.businessActivity):a.businessActivity,countries_of_operation:Array.isArray(a.countriesOfOperation)?JSON.stringify(a.countriesOfOperation):a.countriesOfOperation,countries_source_of_funds:Array.isArray(a.countriesSourceOfFunds)?JSON.stringify(a.countriesSourceOfFunds):a.countriesSourceOfFunds,source_of_funds:a.sourceOfFunds,registered_office_address:a.registeredOfficeAddress,email:a.email,phone:a.phone,other_details:a.otherDetails},{data:r}=await XC.from("shareholder_legal_entity_details").select("id").eq("shareholder_id",e).single();r?await XC.from("shareholder_legal_entity_details").update(t).eq("shareholder_id",e):await XC.from("shareholder_legal_entity_details").insert({shareholder_id:e,...t})}else if("Trust"===a.type){const t={trust_name:a.trustName,alias:a.alias,trust_registered:a.trustRegistered,trust_type:a.trustType,jurisdiction_of_law:a.jurisdictionOfLaw,registered_address:a.registeredAddress,trustee_name:a.trusteeName,trustee_type:a.trusteeType},{data:r}=await XC.from("shareholder_trust_details").select("id").eq("shareholder_id",e).single();r?await XC.from("shareholder_trust_details").update(t).eq("shareholder_id",e):await XC.from("shareholder_trust_details").insert({shareholder_id:e,...t})}}else{const e=await XC.from("customer_shareholders").insert(i).select().single();if(e.error){console.error("Error inserting new shareholder:",e.error);continue}const t=e.data.id;if("Natural Person"===a.type){const e={shareholder_id:t,full_name:a.fullName,alias:a.alias,country_of_residence:a.countryOfResidence,nationality:a.nationality,date_of_birth:a.dateOfBirth||null,place_of_birth:a.placeOfBirth,phone:a.phone,email:a.email,address:a.address,source_of_funds:a.sourceOfFunds,source_of_wealth:a.sourceOfWealth,occupation:a.occupation,expected_income_range:a.expectedIncome,pep_status:a.pep,dual_nationality:a.dualNationality,is_director:a.isDirector,is_ubo:a.isUbo};await XC.from("shareholder_natural_person_details").insert(e)}else if("Legal Entities"===a.type){const e={shareholder_id:t,legal_name:a.legalName,alias:a.alias,date_of_incorporation:a.dateOfIncorporation||null,country_of_incorporation:a.countryOfIncorporation,entity_class:a.entityClass,license_type:a.licenseType,license_number:a.licenseNumber,license_issue_date:a.licenseIssueDate||null,license_expiry_date:a.licenseExpiryDate||null,business_activity:Array.isArray(a.businessActivity)?JSON.stringify(a.businessActivity):a.businessActivity,countries_of_operation:Array.isArray(a.countriesOfOperation)?JSON.stringify(a.countriesOfOperation):a.countriesOfOperation,countries_source_of_funds:Array.isArray(a.countriesSourceOfFunds)?JSON.stringify(a.countriesSourceOfFunds):a.countriesSourceOfFunds,source_of_funds:a.sourceOfFunds,registered_office_address:a.registeredOfficeAddress,email:a.email,phone:a.phone,other_details:a.otherDetails};await XC.from("shareholder_legal_entity_details").insert(e)}else if("Trust"===a.type){const e={shareholder_id:t,trust_name:a.trustName,alias:a.alias,trust_registered:a.trustRegistered,trust_type:a.trustType,jurisdiction_of_law:a.jurisdictionOfLaw,registered_address:a.registeredAddress,trustee_name:a.trusteeName,trustee_type:a.trusteeType};await XC.from("shareholder_trust_details").insert(e)}}}if(r&&r.length>t.shareholders.length){const e=r.slice(t.shareholders.length).map(e=>e.id);for(const t of e)await XC.from("shareholder_natural_person_details").delete().eq("shareholder_id",t),await XC.from("shareholder_legal_entity_details").delete().eq("shareholder_id",t),await XC.from("shareholder_trust_details").delete().eq("shareholder_id",t);await XC.from("customer_shareholders").delete().in("id",e)}}else{const{data:t}=await XC.from("customer_shareholders").select("id").eq("customer_id",e);if(t&&t.length>0)for(const e of t)await XC.from("shareholder_natural_person_details").delete().eq("shareholder_id",e.id),await XC.from("shareholder_legal_entity_details").delete().eq("shareholder_id",e.id),await XC.from("shareholder_trust_details").delete().eq("shareholder_id",e.id);await XC.from("customer_shareholders").delete().eq("customer_id",e)}if(t.directors&&t.directors.length>0){const{data:r}=await XC.from("customer_directors").select("id").eq("customer_id",e);for(let n=0;n<t.directors.length;n++){const a=t.directors[n],i={customer_id:e,first_name:a.firstName,alias:a.alias,last_name:a.lastName,country_of_residence:a.countryOfResidence,nationality:a.nationality,date_of_birth:a.dateOfBirth,phone:a.phone,place_of_birth:a.placeOfBirth,email:a.email,address:a.address,city:a.city,occupation:a.occupation,pep_status:a.pepStatus,is_ceo:a.isCeo,is_representative:a.isRepresentative,dual_nationality:a.dualNationality};r&&r[n]?await XC.from("customer_directors").update(i).eq("id",r[n].id):await XC.from("customer_directors").insert(i)}if(r&&r.length>t.directors.length){const e=r.slice(t.directors.length).map(e=>e.id);await XC.from("customer_directors").delete().in("id",e)}}else await XC.from("customer_directors").delete().eq("customer_id",e);if(t.bankDetails&&t.bankDetails.length>0){const{data:r}=await XC.from("customer_bank_details").select("id").eq("customer_id",e);for(let n=0;n<t.bankDetails.length;n++){const a=t.bankDetails[n],i={customer_id:e,bank_name:a.bankName,alias:a.alias,account_type:a.accountType,currency:a.currency,bank_account_details:a.bankAccountDetails,account_number:a.accountNumber,iban:a.iban,swift:a.swift,mode_of_signatory:a.modeOfSignatory,internet_banking:a.internetBanking,bank_signatories:a.bankSignatories};r&&r[n]?await XC.from("customer_bank_details").update(i).eq("id",r[n].id):await XC.from("customer_bank_details").insert(i)}if(r&&r.length>t.bankDetails.length){const e=r.slice(t.bankDetails.length).map(e=>e.id);await XC.from("customer_bank_details").delete().in("id",e)}}else await XC.from("customer_bank_details").delete().eq("customer_id",e);if(t.ubos&&t.ubos.length>0){const{data:r}=await XC.from("customer_ubos").select("id").eq("customer_id",e);for(let n=0;n<t.ubos.length;n++){const a=t.ubos[n],i={customer_id:e,full_name:a.fullName||"",alias:a.alias||"",country_of_residence:a.countryOfResidence||"",nationality:a.nationality||"",date_of_birth:a.dateOfBirth||null,place_of_birth:a.placeOfBirth||"",phone:a.phone||"",email:a.email||"",address:a.address||"",source_of_funds:a.sourceOfFunds||"",source_of_wealth:a.sourceOfWealth||"",occupation:a.occupation||"",expected_income:a.expectedIncome||"",pep:a.pep||"",shareholding:a.shareholding?parseFloat(a.shareholding):null,dual_nationality:a.dualNationality||""};r&&r[n]?await XC.from("customer_ubos").update(i).eq("id",r[n].id):await XC.from("customer_ubos").insert(i)}if(r&&r.length>t.ubos.length){const e=r.slice(t.ubos.length).map(e=>e.id);await XC.from("customer_ubos").delete().in("id",e)}}else await XC.from("customer_ubos").delete().eq("customer_id",e);const a=await jO.getCustomerById(e),i=await SO(a);return await tO("customers",e,{risk_score:i.score,risk_level:i.level}),{success:!0,data:n,message:"Customer updated successfully"}}catch(r){return console.error("Error updating customer:",r),{success:!1,error:r.message||"Failed to update customer"}}},updateKYCStatus:async(e,t)=>{try{const r=await ZC(),n={customer_id:e,...t,updated_by:r.id,updated_at:(new Date).toISOString()},{data:a}=await XC.from("kyc_details").select("id").eq("customer_id",e).single();return a?await tO("kyc_details",a.id,n):await eO("kyc_details",n),await XC.from("kyc_status_logs").insert({customer_id:e,status:t.status,reason:t.reason||"",updated_by:r.id,created_at:(new Date).toISOString()}),{success:!0,message:"KYC status updated successfully"}}catch(r){QC(r)}},updateRiskProfile:async(e,t)=>{try{const r=await ZC(),n={customer_id:e,...t,updated_by:r.id,updated_at:(new Date).toISOString()},{data:a}=await XC.from("risk_profile_overrides").select("id").eq("customer_id",e).single();return a?await tO("risk_profile_overrides",a.id,n):await eO("risk_profile_overrides",n),{success:!0,message:"Risk profile updated successfully"}}catch(r){QC(r)}},getCustomerStats:async()=>{try{const{data:e}=await XC.from("customers").select("id",{count:"exact"}),{data:t}=await XC.from("customers").select("risk_level"),r={total:(null===e||void 0===e?void 0:e.length)||0,byRiskLevel:{Low:(null===t||void 0===t?void 0:t.filter(e=>"Low"===e.risk_level).length)||0,Medium:(null===t||void 0===t?void 0:t.filter(e=>"Medium"===e.risk_level).length)||0,High:(null===t||void 0===t?void 0:t.filter(e=>"High"===e.risk_level).length)||0},byStatus:{Active:(null===t||void 0===t?void 0:t.filter(e=>"Active"===e.status).length)||0,Inactive:(null===t||void 0===t?void 0:t.filter(e=>"Inactive"===e.status).length)||0}};return r}catch(e){QC(e)}},searchCustomers:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{0,console.log("\ud83d\udd17 Searching customers in real Supabase database...");const r=e.toLowerCase(),n=new Set;let a=XC.from("customers").select("id").or(`first_name.ilike.%${e}%,last_name.ilike.%${e}%,email.ilike.%${e}%`);Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&(a=a.eq(t,r))});const{data:i,error:s}=await a;i&&i.forEach(e=>n.add(e.id));const{data:o,error:l}=await XC.from("natural_person_details").select("customer_id").or(`firstname.ilike.%${e}%,lastname.ilike.%${e}%`);o&&o.forEach(e=>n.add(e.customer_id));const{data:c,error:u}=await XC.from("legal_entity_details").select("customer_id").or(`legalname.ilike.%${e}%,alias.ilike.%${e}%`);if(c&&c.forEach(e=>n.add(e.customer_id)),0===n.size)return{success:!0,data:[]};let d=XC.from("customers").select("\n          *,\n          natural_person_details (*),\n          legal_entity_details (*)\n        ").in("id",Array.from(n));Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&(d=d.eq(t,r))});const{data:h,error:f}=await d;if(f)return console.error("Supabase fetch error:",f),{success:!1,error:f.message};return{success:!0,data:(h||[]).filter(e=>("Natural Person"===e.customer_type&&e.natural_person_details?`${e.natural_person_details.firstname||""} ${e.natural_person_details.lastname||""}`.trim().toLowerCase():"Legal Entities"===e.customer_type&&e.legal_entity_details?(e.legal_entity_details.legalname||e.legal_entity_details.alias||"").toLowerCase():`${e.first_name||""} ${e.last_name||""}`.trim().toLowerCase()).includes(r)||e.email&&e.email.toLowerCase().includes(r)||e.first_name&&e.first_name.toLowerCase().includes(r)||e.last_name&&e.last_name.toLowerCase().includes(r)||e.id&&e.id.toLowerCase().includes(r))}}catch(r){return console.error("Error searching customers:",r),{success:!1,error:r.message||"Failed to search customers"}}},reEvaluateAllRiskScores:async()=>{try{console.log("\ud83d\udd04 Starting risk score re-evaluation for all customers...");let t=[],r=1;const n=1e3;let a=!0;for(;a;){const e=await jO.getCustomers(r,n);if(!e.success){console.error(`Error fetching customers page ${r}:`,e.error);break}e.data&&e.data.length>0?(t=[...t,...e.data],a=e.data.length===n,r++):a=!1}if(0===t.length)return{success:!0,message:"No customers found to re-evaluate",updatedCount:0,errorCount:0};console.log(`\ud83d\udcca Found ${t.length} customers to re-evaluate`);let i=0,s=0;for(const o of t)try{const e=await jO.getCustomerById(o.id);if(!e){console.warn(`\u26a0\ufe0f Could not fetch complete data for customer ${o.id}`),s++;continue}const t=await jO.calculateAndUpdateRiskScore(o.id,e);t.success?(i++,console.log(`\u2705 Updated customer ${o.id}: Risk Score=${t.data.risk_score}, Level=${t.data.risk_level}`)):(console.error(`\u274c Failed to update customer ${o.id}:`,t.error),s++)}catch(e){console.error(`\u274c Error processing customer ${o.id}:`,e),s++}return console.log(`\u2705 Risk re-evaluation completed: ${i} updated, ${s} errors`),{success:!0,message:`Re-evaluated ${t.length} customers: ${i} updated successfully, ${s} errors`,updatedCount:i,errorCount:s,totalCustomers:t.length}}catch(e){return console.error("Error in risk re-evaluation:",e),{success:!1,error:e.message||"Failed to re-evaluate risk scores"}}},reEvaluateCustomerRiskScore:async e=>{try{const t=await jO.getCustomerById(e);if(!t)return{success:!1,error:"Customer not found"};const r=await SO(t);return await jO.updateCustomer(e,{risk_score:r.score,risk_level:r.level}),{success:!0,message:"Risk score updated successfully",data:{risk_score:r.score,risk_level:r.level}}}catch(t){return console.error("Error re-evaluating customer risk score:",t),{success:!1,error:t.message||"Failed to re-evaluate risk score"}}},saveNaturalPersonDetails:async(e,t)=>{try{console.log("\ud83d\udcbe Saving natural person details for customer:",e);const r={customer_id:e,...t},n=await XC.from("natural_person_details").insert(r).select();if(n.error)throw new Error(n.error.message);return{success:!0,data:n.data[0],message:"Natural person details saved successfully"}}catch(r){return console.error("Error saving natural person details:",r),{success:!1,error:r.message||"Failed to save natural person details"}}},saveLegalEntityDetails:async(e,t)=>{try{console.log("\ud83d\udcbe Saving legal entity details for customer:",e),console.log("\ud83d\udcbe Detail data received:",t),console.log("\ud83d\udcbe Detail data type:",typeof t),console.log("\ud83d\udcbe Detail data keys:",Object.keys(t));const r={customer_id:e,...t};console.log("\ud83d\udcbe Final payload to insert:",r);const n=await XC.from("legal_entity_details").insert(r).select();if(console.log("\ud83d\udcbe Supabase insert result:",n),n.error)throw console.error("\ud83d\udcbe Supabase insert error:",n.error),new Error(n.error.message);return{success:!0,data:n.data[0],message:"Legal entity details saved successfully"}}catch(r){return console.error("Error saving legal entity details:",r),{success:!1,error:r.message||"Failed to save legal entity details"}}},getNaturalPersonDetails:async e=>{try{console.log("\ud83d\udd0d Fetching natural person details for customer:",e);const{data:t,error:r}=await XC.from("natural_person_details").select("*").eq("customer_id",e).single();if(r){if("PGRST116"===r.code)return console.log("\ud83d\udd0d No natural person details found for customer:",e),null;throw new Error(r.message)}return console.log("\ud83d\udd0d Natural person details fetched:",t),t}catch(t){return console.error("Error fetching natural person details:",t),null}},getLegalEntityDetails:async e=>{try{console.log("\ud83d\udd0d Fetching legal entity details for customer:",e);const{data:t,error:r}=await XC.from("legal_entity_details").select("*").eq("customer_id",e).single();if(r){if("PGRST116"===r.code)return console.log("\ud83d\udd0d No legal entity details found for customer:",e),null;throw new Error(r.message)}return console.log("\ud83d\udd0d Legal entity details fetched:",t),t}catch(t){return console.error("Error fetching legal entity details:",t),null}},getShareholderById:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_shareholders").select("*").eq("id",e).single();if(r)throw console.error("\ud83d\udc65 Error fetching main shareholder:",r),new Error(`Failed to fetch main shareholder: ${r.message}`);if(!t)return{success:!0,data:null,message:"Shareholder not found"};let n={id:t.id,type:t.entity_type,shareholding:t.shareholding_percentage};if("Natural Person"===t.entity_type){const{data:e,error:r}=await XC.from("shareholder_natural_person_details").select("*").eq("shareholder_id",t.id).single();r?console.error("\ud83d\udc65 Error fetching natural person details:",r):e&&(n={...n,fullName:e.full_name,alias:e.alias,countryOfResidence:e.country_of_residence,nationality:e.nationality,dateOfBirth:e.date_of_birth,placeOfBirth:e.place_of_birth,phone:e.phone,email:e.email,address:e.address,sourceOfFunds:e.source_of_funds,sourceOfWealth:e.source_of_wealth,occupation:e.occupation,expectedIncome:e.expected_income_range,pep:e.pep_status,isDualNationality:e.is_dual_nationality,dualNationalityCountry:e.dual_nationality,dualNationality:e.dual_nationality,dualPassportNumber:e.dual_passport_number,dualPassportIssueDate:e.dual_passport_issue_date,dualPassportExpiryDate:e.dual_passport_expiry_date,idType:e.id_type,idNumber:e.id_number,idIssueDate:e.id_issue_date,idExpiryDate:e.id_expiry_date,isDirector:e.is_director,isUbo:e.is_ubo})}else if("Legal Entities"===t.entity_type){const{data:e,error:r}=await XC.from("shareholder_legal_entity_details").select("*").eq("shareholder_id",t.id).single();r?console.error("\ud83d\udc65 Error fetching legal entity details:",r):e&&(n={...n,legalName:e.legal_name,alias:e.alias,dateOfIncorporation:e.date_of_incorporation,countryOfIncorporation:e.country_of_incorporation,entityClass:e.entity_class,licenseType:e.license_type,licenseNumber:e.license_number,licenseIssueDate:e.license_issue_date,licenseExpiryDate:e.license_expiry_date,businessActivity:e.business_activity,countriesOfOperation:e.countries_of_operation,countriesSourceOfFunds:e.countries_source_of_funds,sourceOfFunds:e.source_of_funds,registeredOfficeAddress:e.registered_office_address,email:e.email,phone:e.phone,otherDetails:e.other_details})}else if("Trust"===t.entity_type){const{data:e,error:r}=await XC.from("shareholder_trust_details").select("*").eq("shareholder_id",t.id).single();r?console.error("\ud83d\udc65 Error fetching trust details:",r):e&&(n={...n,trustName:e.trust_name,alias:e.alias,trustRegistered:e.trust_registered,trustType:e.trust_type,jurisdictionOfLaw:e.jurisdiction_of_law,registeredAddress:e.registered_address,trusteeName:e.trustee_name,trusteeType:e.trustee_type})}return{success:!0,data:n,message:"Shareholder fetched successfully from normalized structure"}}catch(t){return console.error("Error fetching shareholder:",t),{success:!1,error:t.message||"Failed to fetch shareholder"}}},getShareholders:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_shareholders").select("*").eq("customer_id",e);if(r)throw console.error("\ud83d\udc65 Error fetching main shareholders:",r),new Error(`Failed to fetch main shareholders: ${r.message}`);if(!t||0===t.length)return{success:!0,data:[],message:"No shareholders found"};const n=[];for(const e of t){let t={id:e.id,type:e.entity_type,shareholding:e.shareholding_percentage};if("Natural Person"===e.entity_type){const{data:r,error:n}=await XC.from("shareholder_natural_person_details").select("*").eq("shareholder_id",e.id).single();if(n){console.error("\ud83d\udc65 Error fetching natural person details:",n);continue}r&&(t={...t,fullName:r.full_name,alias:r.alias,countryOfResidence:r.country_of_residence,nationality:r.nationality,dateOfBirth:r.date_of_birth,placeOfBirth:r.place_of_birth,phone:r.phone,email:r.email,address:r.address,sourceOfFunds:r.source_of_funds,sourceOfWealth:r.source_of_wealth,occupation:r.occupation,expectedIncome:r.expected_income_range,pep:r.pep_status,isDualNationality:r.is_dual_nationality,dualNationalityCountry:r.dual_nationality,dualNationality:r.dual_nationality,dualPassportNumber:r.dual_passport_number,dualPassportIssueDate:r.dual_passport_issue_date,dualPassportExpiryDate:r.dual_passport_expiry_date,idType:r.id_type,idNumber:r.id_number,idIssueDate:r.id_issue_date,idExpiryDate:r.id_expiry_date,isDirector:r.is_director,isUbo:r.is_ubo})}else if("Legal Entities"===e.entity_type){const{data:r,error:n}=await XC.from("shareholder_legal_entity_details").select("*").eq("shareholder_id",e.id).single();if(n){console.error("\ud83d\udc65 Error fetching legal entity details:",n);continue}console.log("\ud83d\udd0d Legal Entity details fetched:",r),r&&(t={...t,legalName:r.legal_name,alias:r.alias,dateOfIncorporation:r.date_of_incorporation,countryOfIncorporation:r.country_of_incorporation,entityClass:r.entity_class,licenseType:r.license_type,licenseNumber:r.license_number,licenseIssueDate:r.license_issue_date,licenseExpiryDate:r.license_expiry_date,businessActivity:(()=>{try{const e="string"===typeof r.business_activity&&r.business_activity?JSON.parse(r.business_activity):r.business_activity;return Array.isArray(e)?e:e?[e]:[]}catch(EM){return r.business_activity?[r.business_activity]:[]}})(),countriesOfOperation:(()=>{try{const e="string"===typeof r.countries_of_operation&&r.countries_of_operation?JSON.parse(r.countries_of_operation):r.countries_of_operation;return Array.isArray(e)?e:e?[e]:[]}catch(EM){return r.countries_of_operation?[r.countries_of_operation]:[]}})(),countriesSourceOfFunds:(()=>{try{const e="string"===typeof r.countries_source_of_funds&&r.countries_source_of_funds?JSON.parse(r.countries_source_of_funds):r.countries_source_of_funds;return Array.isArray(e)?e:e?[e]:[]}catch(EM){return r.countries_source_of_funds?[r.countries_source_of_funds]:[]}})(),sourceOfFunds:r.source_of_funds,registeredOfficeAddress:r.registered_office_address,email:r.email,phone:r.phone,otherDetails:r.other_details},console.log("\ud83d\udd0d Legal Entity shareholderData after mapping:",t))}else if("Trust"===e.entity_type){const{data:r,error:n}=await XC.from("shareholder_trust_details").select("*").eq("shareholder_id",e.id).single();if(n){console.error("\ud83d\udc65 Error fetching trust details:",n);continue}console.log("\ud83d\udd0d Trust details fetched:",r),r&&(t={...t,trustName:r.trust_name,alias:r.alias,trustRegistered:r.trust_registered,trustType:r.trust_type,jurisdictionOfLaw:r.jurisdiction_of_law,registeredAddress:r.registered_address,trusteeName:r.trustee_name,trusteeType:r.trustee_type},console.log("\ud83d\udd0d Trust shareholderData after mapping:",t))}n.push(t)}return{success:!0,data:n,message:"Shareholders fetched successfully from normalized structure"}}catch(t){return console.error("Error fetching shareholders:",t),{success:!1,error:t.message||"Failed to fetch shareholders"}}},saveShareholders:async(e,t)=>{try{if(console.log("\ud83d\udc65 Saving shareholders for customer:",e),console.log("\ud83d\udc65 Shareholders data:",t),!t||0===t.length)return{success:!0,message:"No shareholders to save"};for(const r of t){const t={customer_id:e,entity_type:r.type,shareholding_percentage:r.shareholding||null},n=await XC.from("customer_shareholders").insert(t).select().single();if(n.error)throw console.error("\ud83d\udc65 Error inserting main shareholder:",n.error),new Error(`Failed to insert main shareholder: ${n.error.message}`);const a=n.data.id;if(console.log("\ud83d\udc65 Main shareholder inserted with ID:",a),"Natural Person"===r.type){const e={shareholder_id:a,full_name:r.fullName,alias:r.alias,country_of_residence:r.countryOfResidence,nationality:r.nationality,date_of_birth:r.dateOfBirth||null,place_of_birth:r.placeOfBirth,phone:r.phone,email:r.email,address:r.address,source_of_funds:r.sourceOfFunds,source_of_wealth:r.sourceOfWealth,occupation:r.occupation,expected_income_range:r.expectedIncome,pep_status:r.pep,dual_nationality:r.dualNationalityCountry||r.dualNationality||null,is_dual_nationality:r.isDualNationality||!1,dual_passport_number:r.dualPassportNumber||null,dual_passport_issue_date:r.dualPassportIssueDate||null,dual_passport_expiry_date:r.dualPassportExpiryDate||null,id_type:r.idType||null,id_number:r.idNumber||null,id_issue_date:r.idIssueDate||null,id_expiry_date:r.idExpiryDate||null,is_director:r.isDirector,is_ubo:r.isUbo},t=await XC.from("shareholder_natural_person_details").insert(e);if(t.error)throw console.error("\ud83d\udc65 Error inserting natural person details:",t.error),new Error(`Failed to insert natural person details: ${t.error.message}`)}else if("Legal Entities"===r.type){const e={shareholder_id:a,legal_name:r.legalName,alias:r.alias,date_of_incorporation:r.dateOfIncorporation||null,country_of_incorporation:r.countryOfIncorporation,entity_class:r.entityClass,license_type:r.licenseType,license_number:r.licenseNumber,license_issue_date:r.licenseIssueDate||null,license_expiry_date:r.licenseExpiryDate||null,business_activity:Array.isArray(r.businessActivity)?JSON.stringify(r.businessActivity):r.businessActivity,countries_of_operation:Array.isArray(r.countriesOfOperation)?JSON.stringify(r.countriesOfOperation):r.countriesOfOperation,countries_source_of_funds:Array.isArray(r.countriesSourceOfFunds)?JSON.stringify(r.countriesSourceOfFunds):r.countriesSourceOfFunds,source_of_funds:r.sourceOfFunds,registered_office_address:r.registeredOfficeAddress,email:r.email,phone:r.phone,other_details:r.otherDetails},t=await XC.from("shareholder_legal_entity_details").insert(e);if(t.error)throw console.error("\ud83d\udc65 Error inserting legal entity details:",t.error),new Error(`Failed to insert legal entity details: ${t.error.message}`)}else if("Trust"===r.type){const e={shareholder_id:a,trust_name:r.trustName,alias:r.alias,trust_registered:r.trustRegistered,trust_type:r.trustType,jurisdiction_of_law:r.jurisdictionOfLaw,registered_address:r.registeredAddress,trustee_name:r.trusteeName,trustee_type:r.trusteeType},t=await XC.from("shareholder_trust_details").insert(e);if(t.error)throw console.error("\ud83d\udc65 Error inserting trust details:",t.error),new Error(`Failed to insert trust details: ${t.error.message}`)}}return{success:!0,message:"Shareholders saved successfully to normalized structure"}}catch(r){return console.error("Error saving shareholders:",r),{success:!1,error:r.message||"Failed to save shareholders"}}},deleteShareholderById:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_shareholders").select("entity_type").eq("id",e).single();if(r)throw console.error("\ud83d\udc65 Error fetching shareholder for deletion:",r),new Error(`Failed to fetch shareholder for deletion: ${r.message}`);if("Natural Person"===t.entity_type){const{error:t}=await XC.from("shareholder_natural_person_details").delete().eq("shareholder_id",e);if(t)throw console.error("\ud83d\udc65 Error deleting natural person details:",t),new Error(`Failed to delete natural person details: ${t.message}`)}else if("Legal Entities"===t.entity_type){const{error:t}=await XC.from("shareholder_legal_entity_details").delete().eq("shareholder_id",e);if(t)throw console.error("\ud83d\udc65 Error deleting legal entity details:",t),new Error(`Failed to delete legal entity details: ${t.message}`)}else if("Trust"===t.entity_type){const{error:t}=await XC.from("shareholder_trust_details").delete().eq("shareholder_id",e);if(t)throw console.error("\ud83d\udc65 Error deleting trust details:",t),new Error(`Failed to delete trust details: ${t.message}`)}const{error:n}=await XC.from("customer_shareholders").delete().eq("id",e);if(n)throw console.error("\ud83d\udc65 Error deleting main shareholder:",n),new Error(`Failed to delete main shareholder: ${n.message}`);return{success:!0,message:"Shareholder deleted successfully"}}catch(t){return console.error("Error deleting shareholder:",t),{success:!1,error:t.message||"Failed to delete shareholder"}}},deleteShareholders:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_shareholders").select("id").eq("customer_id",e);if(r)throw console.error("\ud83d\udc65 Error fetching shareholders for deletion:",r),new Error(`Failed to fetch shareholders for deletion: ${r.message}`);if(t&&t.length>0)for(const e of t)await XC.from("shareholder_natural_person_details").delete().eq("shareholder_id",e.id),await XC.from("shareholder_legal_entity_details").delete().eq("shareholder_id",e.id),await XC.from("shareholder_trust_details").delete().eq("shareholder_id",e.id);const{error:n}=await XC.from("customer_shareholders").delete().eq("customer_id",e);if(n)throw console.error("\ud83d\udc65 Error deleting main shareholders:",n),new Error(`Failed to delete main shareholders: ${n.message}`);return{success:!0,message:"Shareholders deleted successfully"}}catch(t){return console.error("Error deleting shareholders:",t),{success:!1,error:t.message||"Failed to delete shareholders"}}},getDirectors:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_directors").select("*").eq("customer_id",e);if(r)throw console.error("\ud83d\udc54 Error fetching directors:",r),new Error(`Failed to fetch directors: ${r.message}`);return{success:!0,data:t.map(e=>({id:e.id,firstName:e.first_name,alias:e.alias,lastName:e.last_name,countryOfResidence:e.country_of_residence,nationality:e.nationality,dateOfBirth:e.date_of_birth,phone:e.phone,placeOfBirth:e.place_of_birth,email:e.email,address:e.address,city:e.city,occupation:e.occupation,pepStatus:e.pep_status,isCeo:e.is_ceo,isRepresentative:e.is_representative,dualNationality:e.dual_nationality})),message:"Directors fetched successfully"}}catch(t){return console.error("Error fetching directors:",t),{success:!1,error:t.message||"Failed to fetch directors"}}},getDirectorById:async e=>{try{0;const{data:t,error:r}=await XC.from("customer_directors").select("*").eq("id",e).single();if(r)throw console.error("\ud83d\udc54 Error fetching director:",r),new Error(`Failed to fetch director: ${r.message}`);return{success:!0,data:{id:t.id,firstName:t.first_name,alias:t.alias,lastName:t.last_name,countryOfResidence:t.country_of_residence,nationality:t.nationality,dateOfBirth:t.date_of_birth,phone:t.phone,placeOfBirth:t.place_of_birth,email:t.email,address:t.address,city:t.city,occupation:t.occupation,pepStatus:t.pep_status,isCeo:t.is_ceo,isRepresentative:t.is_representative,dualNationality:t.dual_nationality},message:"Director fetched successfully"}}catch(t){return console.error("Error fetching director:",t),{success:!1,error:t.message||"Failed to fetch director"}}},deleteDirectorById:async e=>{try{0;const{error:t}=await XC.from("customer_directors").delete().eq("id",e);if(t)throw console.error("\ud83d\udc54 Error deleting director:",t),new Error(`Failed to delete director: ${t.message}`);return{success:!0,message:"Director deleted successfully"}}catch(t){return console.error("Error deleting director:",t),{success:!1,error:t.message||"Failed to delete director"}}},saveDirectors:async(e,t)=>{try{if(console.log("\ud83d\udc54 Saving directors for customer:",e),console.log("\ud83d\udc54 Directors data:",t),console.log("\ud83d\udc54 First director fields:",t[0]?Object.keys(t[0]):"No directors"),console.log("\ud83d\udc54 First director values:",t[0]?Object.values(t[0]):"No directors"),!t||0===t.length)return{success:!0,message:"No directors to save"};const r=t.map(t=>({customer_id:e,first_name:t.firstName,last_name:t.lastName,alias:t.alias,country_of_residence:t.countryOfResidence,nationality:t.nationality,date_of_birth:t.dateOfBirth||null,phone:t.phone,place_of_birth:t.placeOfBirth,email:t.email,address:t.address,city:t.city,occupation:t.occupation,pep_status:t.pepStatus,is_ceo:t.isCeo,is_representative:t.isRepresentative,dual_nationality:t.dualNationality}));console.log("\ud83d\udc54 Final directors payload:",r);const n=await XC.from("customer_directors").insert(r).select();if(console.log("\ud83d\udc54 Supabase insert result:",n),n.error)throw console.error("\ud83d\udc54 Supabase insert error:",n.error),new Error(n.error.message);return{success:!0,data:n.data,message:"Directors saved successfully"}}catch(r){return console.error("Error saving directors:",r),{success:!1,error:r.message||"Failed to save directors"}}},saveBankDetails:async(e,t)=>{try{if(console.log("\ud83c\udfe6 Saving bank details for customer:",e),console.log("\ud83c\udfe6 Bank details data:",t),console.log("\ud83c\udfe6 First bank detail fields:",t[0]?Object.keys(t[0]):"No bank details"),console.log("\ud83c\udfe6 First bank detail values:",t[0]?Object.values(t[0]):"No bank details"),!t||0===t.length)return{success:!0,message:"No bank details to save"};const r=t.map(t=>({customer_id:e,bank_name:t.bankName,alias:t.alias,account_type:t.accountType,currency:t.currency,bank_account_details:t.bankAccountDetails,account_number:t.accountNumber,iban:t.iban,swift:t.swift,mode_of_signatory:t.modeOfSignatory,internet_banking:t.internetBanking,bank_signatories:t.bankSignatories}));console.log("\ud83c\udfe6 Final bank details payload:",r);const n=await XC.from("customer_bank_details").insert(r).select();if(console.log("\ud83c\udfe6 Supabase insert result:",n),n.error)throw console.error("\ud83c\udfe6 Supabase insert error:",n.error),new Error(n.error.message);return{success:!0,data:n.data,message:"Bank details saved successfully"}}catch(r){return console.error("Error saving bank details:",r),{success:!1,error:r.message||"Failed to save bank details"}}},getBankDetails:async e=>{try{console.log("\ud83c\udfe6 Fetching bank details for customer:",e);const{data:t,error:r}=await XC.from("customer_bank_details").select("*").eq("customer_id",e);if(r)throw new Error(r.message);return console.log("\ud83c\udfe6 Bank details fetched:",t),{success:!0,data:t||[]}}catch(t){return console.error("Error fetching bank details:",t),{success:!1,error:t.message||"Failed to fetch bank details"}}},saveUbos:async(e,t)=>{try{if(console.log("\ud83d\udc64 Saving UBOs for customer:",e),console.log("\ud83d\udc64 UBOs data:",t),!t||0===t.length)return{success:!0,message:"No UBOs to save"};const r=t.map(t=>({customer_id:e,full_name:t.fullName||"",alias:t.alias||"",country_of_residence:t.countryOfResidence||"",nationality:t.nationality||"",date_of_birth:t.dateOfBirth||null,place_of_birth:t.placeOfBirth||"",phone:t.phone||"",email:t.email||"",address:t.address||"",source_of_funds:t.sourceOfFunds||"",source_of_wealth:t.sourceOfWealth||"",occupation:t.occupation||"",expected_income:t.expectedIncome||"",pep:t.pep||"",shareholding:t.shareholding?parseFloat(t.shareholding):null,dual_nationality:t.dualNationality||""}));console.log("\ud83d\udc64 Final UBOs payload:",r);const n=await XC.from("customer_ubos").insert(r).select();if(console.log("\ud83d\udc64 Supabase insert result:",n),n.error)throw console.error("\ud83d\udc64 Supabase insert error:",n.error),new Error(n.error.message);return{success:!0,data:n.data,message:"UBOs saved successfully"}}catch(r){return console.error("Error saving UBOs:",r),{success:!1,error:r.message||"Failed to save UBOs"}}},getUbos:async e=>{try{console.log("\ud83d\udc64 Fetching UBOs for customer:",e);const{data:t,error:r}=await XC.from("customer_ubos").select("*").eq("customer_id",e).order("created_at",{ascending:!0});if(r)throw console.error("\ud83d\udc64 Error fetching UBOs:",r),new Error(r.message);const n=t.map(e=>({id:e.id,fullName:e.full_name||"",alias:e.alias||"",countryOfResidence:e.country_of_residence||"",nationality:e.nationality||"",dateOfBirth:e.date_of_birth||"",placeOfBirth:e.place_of_birth||"",phone:e.phone||"",email:e.email||"",address:e.address||"",sourceOfFunds:e.source_of_funds||"",sourceOfWealth:e.source_of_wealth||"",occupation:e.occupation||"",expectedIncome:e.expected_income||"",pep:e.pep||"",shareholding:e.shareholding||"",dualNationality:e.dual_nationality||""}));return console.log("\ud83d\udc64 Transformed UBOs:",n),{success:!0,data:n,message:"UBOs fetched successfully"}}catch(t){return console.error("Error fetching UBOs:",t),{success:!1,error:t.message||"Failed to fetch UBOs"}}},getUboById:async e=>{try{console.log("\ud83d\udc64 Fetching UBO by ID:",e);const{data:t,error:r}=await XC.from("customer_ubos").select("*").eq("id",e).single();if(r)throw console.error("\ud83d\udc64 Error fetching UBO:",r),new Error(r.message);if(!t)return{success:!1,error:"UBO not found"};return{success:!0,data:{id:t.id,fullName:t.full_name||"",alias:t.alias||"",countryOfResidence:t.country_of_residence||"",nationality:t.nationality||"",dateOfBirth:t.date_of_birth||"",placeOfBirth:t.place_of_birth||"",phone:t.phone||"",email:t.email||"",address:t.address||"",sourceOfFunds:t.source_of_funds||"",sourceOfWealth:t.source_of_wealth||"",occupation:t.occupation||"",expectedIncome:t.expected_income||"",pep:t.pep||"",shareholding:t.shareholding?t.shareholding.toString():"",dualNationality:t.dual_nationality||""},message:"UBO fetched successfully"}}catch(t){return console.error("Error fetching UBO:",t),{success:!1,error:t.message||"Failed to fetch UBO"}}},deleteUboById:async e=>{try{console.log("\ud83d\udc64 Deleting UBO by ID:",e);const{error:t}=await XC.from("customer_ubos").delete().eq("id",e);if(t)throw console.error("\ud83d\udc64 Error deleting UBO:",t),new Error(t.message);return{success:!0,message:"UBO deleted successfully"}}catch(t){return console.error("Error deleting UBO:",t),{success:!1,error:t.message||"Failed to delete UBO"}}},checkCoreSystemIdExists:async e=>{try{console.log("\ud83d\udd0d Checking if core system ID exists:",e);const{data:t,error:r}=await XC.from("customers").select("id").eq("core_system_id",e).single();if(r&&"PGRST116"!==r.code)throw new Error(r.message);const n=!!t;return{exists:n,message:n?"Core System ID already exists":"Core System ID is available"}}catch(t){return console.error("Error checking core system ID:",t),{exists:!1,error:t.message||"Failed to check core system ID"}}},calculateAndUpdateRiskScore:async(e,t)=>{try{var r,n;console.log("\ud83d\udd04 Calculating risk score for customer:",e),console.log("\ud83d\udcca Customer data structure:",{customerType:null===t||void 0===t?void 0:t.customer_type,hasNaturalPersonDetails:!(null===t||void 0===t||!t.natural_person_details),hasLegalEntityDetails:!(null===t||void 0===t||!t.legal_entity_details),hasShareholders:!!(null!==t&&void 0!==t&&t.shareholders&&t.shareholders.length>0)});let i={customerType:t.customer_type||t.customer_type,customer_type:t.customer_type,...t};if(t.natural_person_details){const e=t.natural_person_details;i={...i,profession:e.profession,nationality:e.nationality,residencyStatus:e.residencystatus||e.residency_status,dualNationality:e.dualinationality||e.dual_nationality,isDualNationality:e.isdualnationality||e.is_dual_nationality,occupation:e.occupation,pep:e.pep||e.pep_status,countryOfBirth:e.countryofbirth||e.country_of_birth,sourceOfFunds:e.sourceoffunds||e.source_of_funds}}if(t.legal_entity_details){const e=t.legal_entity_details;i={...i,businessActivity:e.businessactivity||e.business_activity,countryOfIncorporation:e.countryofincorporation||e.country_of_incorporation,licenseType:e.licensetype||e.license_type,countriesSourceOfFunds:e.countriessourceoffunds||e.countries_source_of_funds,countriesOfOperation:e.countriesofoperation||e.countries_of_operation,jurisdiction:e.jurisdiction,sourceOfFunds:e.sourceoffunds||e.source_of_funds,residencyStatus:e.residencystatus||e.residency_status,licenseCategory:e.licensecategory||e.license_category}}t.shareholders&&Array.isArray(t.shareholders)&&(i.shareholders=t.shareholders.map(e=>{const t={shareholderType:e.type||e.entity_type,type:e.type||e.entity_type,entity_type:e.entity_type||e.type,...e};return"Natural Person"!==e.type&&"Natural Person"!==e.entity_type||(t.countryOfResidence=e.countryOfResidence||e.country_of_residence,t.nationality=e.nationality,t.placeOfBirth=e.placeOfBirth||e.place_of_birth,t.dualNationality=e.dualNationality||e.dual_nationality,t.isDualNationality=e.isDualNationality||e.is_dual_nationality,t.occupation=e.occupation,t.pep=e.pep||e.pep_status,t.sourceOfFunds=e.sourceOfFunds||e.source_of_funds),"Legal Entities"!==e.type&&"Legal Entities"!==e.entity_type||(t.businessActivity=e.businessActivity||e.business_activity,t.countryOfIncorporation=e.countryOfIncorporation||e.country_of_incorporation,t.licenseType=e.licenseType||e.license_type,t.countriesSourceOfFunds=e.countriesSourceOfFunds||e.countries_source_of_funds,t.countriesOfOperation=e.countriesOfOperation||e.countries_of_operation,t.sourceOfFunds=e.sourceOfFunds||e.source_of_funds),t})),console.log("\ud83d\udccb Flattened data for risk calculation:",{customerType:i.customerType||i.customer_type,hasShareholders:!!(i.shareholders&&i.shareholders.length>0),sampleFields:{nationality:i.nationality,occupation:i.occupation,businessActivity:i.businessActivity}});const s=await SO(i);console.log("\ud83d\udcca Risk calculation result:",{score:s.score,level:s.level,triggeredRules:(null===(r=s.triggeredRules)||void 0===r?void 0:r.length)||0});let o="Simplified Customer Due Diligence";const l=s.level;"High"===l?o="Enhanced Customer Due Diligence":"Medium High"===l?o="Customer Due Diligence":"Low"!==l&&"Medium Low"!==l&&"Medium"!==l||(o="Simplified Customer Due Diligence");const c=Math.round(100*s.score)/100,u={risk_score:c,risk_level:s.level,due_diligence_level:o,updated_at:(new Date).toISOString()};console.log("\ud83d\udcbe Updating customer with risk data:",u);const d=await XC.from("customers").update(u).eq("id",e).select();if(d.error)throw console.error("\u274c Database update error:",d.error),new Error(d.error.message);console.log("\u2705 Customer updated successfully:",null===(n=d.data)||void 0===n?void 0:n[0]);try{const t={customer_id:e,risk_score:c,risk_level:s.level,triggered_rules:s.triggeredRules||[],assessment_date:(new Date).toISOString()};console.log("\ud83d\udcdd Saving risk assessment snapshot:",{customer_id:t.customer_id,risk_score:t.risk_score,risk_level:t.risk_level,triggered_rules_count:t.triggered_rules.length});const{error:r}=await XC.from("risk_assessments").insert(t);r&&console.error("\u26a0\ufe0f Failed to save risk assessment snapshot:",r)}catch(a){console.error("\u26a0\ufe0f Error while saving risk assessment snapshot:",a)}return{success:!0,data:u,message:"Risk score calculated and updated successfully"}}catch(i){return console.error("Error calculating and updating risk score:",i),{success:!1,error:i.message||"Failed to calculate and update risk score"}}},deleteCustomer:async e=>{try{console.log("\ud83d\uddd1\ufe0f Deleting customer and all related data:",e);const{data:t,error:r}=await XC.from("customers").select("customer_type").eq("id",e).single();if(r)throw console.error("Error fetching customer type:",r),new Error(`Failed to fetch customer type: ${r.message}`);console.log("\ud83d\udd0d Customer type:",t.customer_type);const{data:n,error:a}=await XC.from("customer_ubos").select("id").eq("customer_id",e).limit(1);if(a)throw console.error("Error checking UBOs:",a),new Error(`Failed to check UBOs: ${a.message}`);const i=n&&n.length>0;console.log("\ud83d\udd0d Customer has UBOs:",i);const{data:s,error:o}=await XC.from("customer_shareholders").select("id").eq("customer_id",e).limit(1);if(o)throw console.error("Error checking shareholders:",o),new Error(`Failed to check shareholders: ${o.message}`);const l=s&&s.length>0;console.log("\ud83d\udd0d Customer has shareholders:",l);const{data:c,error:u}=await XC.from("customer_directors").select("id").eq("customer_id",e).limit(1);if(u)throw console.error("Error checking directors:",u),new Error(`Failed to check directors: ${u.message}`);const d=c&&c.length>0;console.log("\ud83d\udd0d Customer has directors:",d);const{data:h,error:f}=await XC.from("customer_bank_details").select("id").eq("customer_id",e).limit(1);if(f)throw console.error("Error checking bank details:",f),new Error(`Failed to check bank details: ${f.message}`);const m=h&&h.length>0;if(console.log("\ud83d\udd0d Customer has bank details:",m),i){console.log("\ud83d\uddd1\ufe0f Deleting UBOs...");const{error:t}=await XC.from("customer_ubos").delete().eq("customer_id",e);if(t)throw console.error("Error deleting UBOs:",t),new Error(`Failed to delete UBOs: ${t.message}`);console.log("\u2705 UBOs deleted successfully")}else console.log("\u23ed\ufe0f Skipping UBOs deletion - no UBOs exist");if(m){console.log("\ud83d\uddd1\ufe0f Deleting bank details...");const{error:t}=await XC.from("customer_bank_details").delete().eq("customer_id",e);if(t)throw console.error("Error deleting bank details:",t),new Error(`Failed to delete bank details: ${t.message}`);console.log("\u2705 Bank details deleted successfully")}else console.log("\u23ed\ufe0f Skipping bank details deletion - no bank details exist");if(d){console.log("\ud83d\uddd1\ufe0f Deleting directors...");const{error:t}=await XC.from("customer_directors").delete().eq("customer_id",e);if(t)throw console.error("Error deleting directors:",t),new Error(`Failed to delete directors: ${t.message}`);console.log("\u2705 Directors deleted successfully")}else console.log("\u23ed\ufe0f Skipping directors deletion - no directors exist");if(l){console.log("\ud83d\uddd1\ufe0f Deleting shareholders and details...");const{data:t,error:r}=await XC.from("customer_shareholders").select("id").eq("customer_id",e);if(r)throw console.error("Error fetching shareholders:",r),new Error(`Failed to fetch shareholders: ${r.message}`);if(t&&t.length>0){const e=t.map(e=>e.id);console.log(`\ud83d\udd0d Found ${t.length} shareholders to delete`);const{error:r}=await XC.from("shareholder_natural_person_details").delete().in("shareholder_id",e);if(r)throw console.error("Error deleting natural person details:",r),new Error(`Failed to delete natural person details: ${r.message}`);console.log("\u2705 Shareholder natural person details deleted");const{error:n}=await XC.from("shareholder_legal_entity_details").delete().in("shareholder_id",e);if(n)throw console.error("Error deleting legal entity details:",n),new Error(`Failed to delete legal entity details: ${n.message}`);console.log("\u2705 Shareholder legal entity details deleted");const{error:a}=await XC.from("shareholder_trust_details").delete().in("shareholder_id",e);if(a)throw console.error("Error deleting trust details:",a),new Error(`Failed to delete trust details: ${a.message}`);console.log("\u2705 Shareholder trust details deleted")}const{error:n}=await XC.from("customer_shareholders").delete().eq("customer_id",e);if(n)throw console.error("Error deleting shareholders:",n),new Error(`Failed to delete shareholders: ${n.message}`);console.log("\u2705 Main shareholder records deleted")}else console.log("\u23ed\ufe0f Skipping shareholders deletion - no shareholders exist");if("Natural Person"===t.customer_type){console.log("\ud83d\uddd1\ufe0f Deleting natural person details...");const{error:t}=await XC.from("natural_person_details").delete().eq("customer_id",e);if(t)throw console.error("Error deleting natural person details:",t),new Error(`Failed to delete natural person details: ${t.message}`);console.log("\u2705 Natural person details deleted")}else if("Legal Entities"===t.customer_type){console.log("\ud83d\uddd1\ufe0f Deleting legal entity details...");const{error:t}=await XC.from("legal_entity_details").delete().eq("customer_id",e);if(t)throw console.error("Error deleting legal entity details:",t),new Error(`Failed to delete legal entity details: ${t.message}`);console.log("\u2705 Legal entity details deleted")}else console.log("\u26a0\ufe0f Unknown customer type:",t.customer_type);console.log("\ud83d\uddd1\ufe0f Deleting main customer record...");const{error:p}=await XC.from("customers").delete().eq("id",e);if(p)throw console.error("Error deleting customer:",p),new Error(`Failed to delete customer: ${p.message}`);return console.log("\u2705 Main customer record deleted"),console.log("\ud83c\udf89 Customer and all related data deleted successfully!"),{success:!0,message:"Customer and all related data deleted successfully"}}catch(t){return console.error("Error deleting customer:",t),{success:!1,error:t.message||"Failed to delete customer"}}}},EO={screenCustomer:async e=>{await new Promise(e=>setTimeout(e,800));const t=[];"Iran"!==e.nationality&&"North Korea"!==e.nationality||t.push({id:"DJ001",recordType:"Individual",name:e.fullName,score:95,searchType:"Exact",primaryName:e.fullName,searchList:"Sanctions",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"Sanctioned Individual",source:"Dow Jones"}),e.fullName.toLowerCase().includes("khan")&&"Pakistan"===e.nationality&&t.push({id:"DJ002",recordType:"Individual",name:e.fullName,score:85,searchType:"Broad",primaryName:e.fullName,searchList:"PEP",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"Potential PEP",source:"Dow Jones"});return{success:!0,matches:[...t,{id:"DJ003",recordType:"Individual",name:"John Smith",score:92,searchType:"Near",primaryName:"John A. Smith",searchList:"PEP",dob:"1980-06-20",country:"UK",gender:"Male",isSubsidiary:!1,title:"Minister",source:"Dow Jones"},{id:"DJ004",recordType:"Entity",name:"Global FinCorp",score:88,searchType:"Exact",primaryName:"Global FinCorp Ltd.",searchList:"Sanctions",dob:"N/A",country:"USA",gender:"N/A",isSubsidiary:!0,title:"Subsidiary",source:"Dow Jones"},{id:"DJ005",recordType:"Individual",name:"Sarah Johnson",score:85,searchType:"Broad",primaryName:"S. Johnson",searchList:"PEP",dob:"1975-03-15",country:"Canada",gender:"Female",isSubsidiary:!1,title:"Senator",source:"Dow Jones"}],totalScreened:1,timestamp:(new Date).toISOString(),source:"Dow Jones"}},screenBatch:async e=>{await new Promise(e=>setTimeout(e,1200));const t=[];for(const r of e){const e=await EO.screenCustomer(r);t.push(e)}return{success:!0,batchId:`BATCH-${Date.now()}`,results:t,totalProcessed:e.length,timestamp:(new Date).toISOString()}}},AO=async e=>{await new Promise(e=>setTimeout(e,500));const t=[];(e.fullName.toLowerCase().includes("al-qaeda")||e.fullName.toLowerCase().includes("terrorist"))&&t.push({id:"OFAC001",recordType:"Individual",name:e.fullName,score:100,searchType:"Exact",primaryName:e.fullName,searchList:"OFAC SDN",dob:e.dob||"N/A",country:"USA",gender:e.gender||"N/A",isSubsidiary:!1,title:"Terrorist Organization",source:"Free Source"});return{success:!0,matches:[...t,{id:"OFAC002",recordType:"Individual",name:"Jane Doe",score:85,searchType:"Broad",primaryName:"J. Doe",searchList:"Watchlists",dob:"1975-02-15",country:"USA",gender:"Female",isSubsidiary:!1,title:"Advisor",source:"Free Source"},{id:"OFAC003",recordType:"Entity",name:"Terrorist Corp",score:95,searchType:"Exact",primaryName:"Terrorist Corporation",searchList:"OFAC SDN",dob:"N/A",country:"Syria",gender:"N/A",isSubsidiary:!1,title:"Terrorist Organization",source:"Free Source"}],source:"Free Sanctions Lists"}},kO=async e=>{await new Promise(e=>setTimeout(e,400));const t=[];return"North Korea"===e.nationality&&e.fullName.toLowerCase().includes("kim")&&t.push({id:"UN001",recordType:"Individual",name:e.fullName,score:98,searchType:"Exact",primaryName:e.fullName,searchList:"UN Sanctions",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"UN Sanctioned",source:"UN Sanctions"}),{success:!0,matches:t,source:"UN Sanctions"}},CO=async e=>{await new Promise(e=>setTimeout(e,600));const t=[];return(e.fullName.toLowerCase().includes("fugitive")||e.fullName.toLowerCase().includes("wanted"))&&t.push({id:"INTERPOL001",recordType:"Individual",name:e.fullName,score:90,searchType:"Exact",primaryName:e.fullName,searchList:"Interpol Red Notice",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"Fugitive",source:"Interpol"}),{success:!0,matches:t,source:"Interpol Red Notices"}},OO=async e=>{await new Promise(e=>setTimeout(e,450));const t=[];return"Russia"===e.nationality&&e.fullName.toLowerCase().includes("oligarch")&&t.push({id:"EU001",recordType:"Individual",name:e.fullName,score:92,searchType:"Exact",primaryName:e.fullName,searchList:"EU Sanctions",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"EU Sanctioned",source:"EU Sanctions"}),{success:!0,matches:t,source:"EU Sanctions"}},TO={screenCentralBank:async e=>{await new Promise(e=>setTimeout(e,700));const t=[];"UAE"===e.nationality&&e.fullName.toLowerCase().includes("al-nahyan")&&t.push({id:"UAE001",recordType:"Individual",name:e.fullName,score:94,searchType:"Exact",primaryName:e.fullName,searchList:"UAE Central Bank",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"Royal Family",source:"UAE Central Bank"}),"Saudi Arabia"===e.nationality&&e.fullName.toLowerCase().includes("al-saud")&&t.push({id:"SAUDI001",recordType:"Individual",name:e.fullName,score:96,searchType:"Exact",primaryName:e.fullName,searchList:"Saudi Central Bank",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"Royal Family",source:"Saudi Central Bank"});return{success:!0,matches:[...t,{id:"CB001",recordType:"Individual",name:"John Smith",score:92,searchType:"Near",primaryName:"John A. Smith",searchList:"PEP",dob:"1980-06-20",country:"UK",gender:"Male",isSubsidiary:!1,title:"Minister",source:"Central Bank"},{id:"CB002",recordType:"Entity",name:"SafeBank Inc.",score:87,searchType:"Exact",primaryName:"SafeBank International",searchList:"Sanctions",dob:"N/A",country:"Canada",gender:"N/A",isSubsidiary:!1,title:"Financial",source:"Central Bank"},{id:"CB003",recordType:"Individual",name:"Maria Garcia",score:89,searchType:"Broad",primaryName:"M. Garcia",searchList:"PEP",dob:"1982-11-08",country:"Spain",gender:"Female",isSubsidiary:!1,title:"Deputy Minister",source:"Central Bank"}],source:"Central Bank Lists"}},screenMultipleCentralBanks:async e=>{await new Promise(e=>setTimeout(e,1e3));const t=[];if("UAE"===e.nationality){const r=await TO.screenCentralBank(e);t.push(...r.matches)}if("Saudi Arabia"===e.nationality){const r=await TO.screenCentralBank(e);t.push(...r.matches)}if("Kuwait"===e.nationality){const r=await TO.screenCentralBank(e);t.push(...r.matches)}return{success:!0,matches:t,source:"Multiple Central Banks",banksChecked:["UAE","Saudi Arabia","Kuwait"]}}},RO={screenWhitelist:async e=>{await new Promise(e=>setTimeout(e,300));const t=[];"Organization"===e.entityType&&e.fullName.toLowerCase().includes("microsoft")&&t.push({id:"WL001",recordType:"Entity",name:e.fullName,score:65,searchType:"Exact",primaryName:e.fullName,searchList:"Whitelist",dob:"N/A",country:"USA",gender:"N/A",isSubsidiary:!1,title:"IT Company",source:"Company Whitelist"}),"Organization"===e.entityType&&e.fullName.toLowerCase().includes("apple")&&t.push({id:"WL002",recordType:"Entity",name:e.fullName,score:60,searchType:"Exact",primaryName:e.fullName,searchList:"Whitelist",dob:"N/A",country:"USA",gender:"N/A",isSubsidiary:!1,title:"Technology",source:"Company Whitelist"});return{success:!0,matches:[...t,{id:"WL003",recordType:"Entity",name:"TechWhiz Ltd.",score:65,searchType:"Exact",primaryName:"TechWhiz",searchList:"Whitelist",dob:"N/A",country:"USA",gender:"N/A",isSubsidiary:!1,title:"IT Company",source:"Company Whitelist"},{id:"WL004",recordType:"Entity",name:"Green Energy Corp",score:60,searchType:"Broad",primaryName:"Green Energy",searchList:"Whitelist",dob:"N/A",country:"Germany",gender:"N/A",isSubsidiary:!1,title:"Renewable Energy",source:"Company Whitelist"}],source:"Company Whitelist"}},screenBlacklist:async e=>{await new Promise(e=>setTimeout(e,400));const t=[];"Organization"===e.entityType&&e.fullName.toLowerCase().includes("fakebank")&&t.push({id:"BL001",recordType:"Entity",name:e.fullName,score:95,searchType:"Exact",primaryName:e.fullName,searchList:"Blacklist",dob:"N/A",country:"Russia",gender:"N/A",isSubsidiary:!1,title:"Fraudulent Bank",source:"Company Blacklist"}),"Organization"===e.entityType&&e.fullName.toLowerCase().includes("ghostcorp")&&t.push({id:"BL002",recordType:"Entity",name:e.fullName,score:91,searchType:"Broad",primaryName:e.fullName,searchList:"Blacklist",dob:"N/A",country:"North Korea",gender:"N/A",isSubsidiary:!0,title:"Shell Company",source:"Company Blacklist"});return{success:!0,matches:[...t,{id:"BL003",recordType:"Entity",name:"PyramidFX",score:89,searchType:"Near",primaryName:"Pyramid FX Ltd.",searchList:"Blacklist",dob:"N/A",country:"India",gender:"N/A",isSubsidiary:!1,title:"Ponzi Scheme",source:"Company Blacklist"},{id:"BL004",recordType:"Entity",name:"ScamCorp International",score:93,searchType:"Exact",primaryName:"ScamCorp",searchList:"Blacklist",dob:"N/A",country:"Nigeria",gender:"N/A",isSubsidiary:!1,title:"Fraudulent Company",source:"Company Blacklist"}],source:"Company Blacklist"}},screenCompanyLists:async e=>{const[t,r]=await Promise.all([RO.screenWhitelist(e),RO.screenBlacklist(e)]);return{success:!0,whitelist:t.matches,blacklist:r.matches,source:"Company Lists"}}},IO={screenUAELists:async e=>{await new Promise(e=>setTimeout(e,600));const t=[];"UAE"===e.nationality&&e.fullName.toLowerCase().includes("al-maktoum")&&t.push({id:"UAE001",recordType:"Individual",name:e.fullName,score:96,searchType:"Exact",primaryName:e.fullName,searchList:"UAE Lists",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"Royal Family",source:"UAE Lists"}),"UAE"===e.nationality&&e.fullName.toLowerCase().includes("al-qasimi")&&t.push({id:"UAE002",recordType:"Individual",name:e.fullName,score:81,searchType:"Broad",primaryName:e.fullName,searchList:"UAE Lists",dob:e.dob||"N/A",country:e.nationality,gender:e.gender||"N/A",isSubsidiary:!1,title:"Businesswoman",source:"UAE Lists"}),"Organization"===e.entityType&&e.fullName.toLowerCase().includes("emirates")&&t.push({id:"UAE003",recordType:"Entity",name:e.fullName,score:83,searchType:"Near",primaryName:e.fullName,searchList:"UAE Lists",dob:"N/A",country:"UAE",gender:"N/A",isSubsidiary:!1,title:"Logistics",source:"UAE Lists"});return{success:!0,matches:[...t,{id:"UAE004",recordType:"Individual",name:"Faisal Al Nahyan",score:94,searchType:"Exact",primaryName:"Faisal A. Nahyan",searchList:"UAE List",dob:"1970-10-05",country:"UAE",gender:"Male",isSubsidiary:!1,title:"Minister",source:"UAE Lists"},{id:"UAE005",recordType:"Entity",name:"Desert Traders",score:85,searchType:"Near",primaryName:"Desert Trading Co.",searchList:"UAE List",dob:"N/A",country:"UAE",gender:"N/A",isSubsidiary:!1,title:"Trading Company",source:"UAE Lists"},{id:"UAE006",recordType:"Individual",name:"Aisha Al Mansouri",score:87,searchType:"Broad",primaryName:"A. Al Mansouri",searchList:"UAE List",dob:"1985-07-22",country:"UAE",gender:"Female",isSubsidiary:!1,title:"Business Leader",source:"UAE Lists"}],source:"UAE Specific Lists"}},screenMultipleUAELists:async e=>{await new Promise(e=>setTimeout(e,800));const t=[],r=await IO.screenUAELists(e);if(t.push(...r.matches),"Organization"===e.entityType){const r=await IO.screenUAELists(e);t.push(...r.matches)}const n=await IO.screenUAELists(e);return t.push(...n.matches),{success:!0,matches:t,source:"Multiple UAE Lists",listsChecked:["UAE PEP","UAE Business Registry","UAE FSA"]}}},LO={performComprehensiveScreening:async e=>{try{console.log("Starting comprehensive screening for:",e.fullName);const[t,r,n,a,i,s,o,l,c]=await Promise.all([EO.screenCustomer(e),AO(e),kO(e),CO(e),OO(e),TO.screenCentralBank(e),RO.screenWhitelist(e),RO.screenBlacklist(e),IO.screenUAELists(e)]),u=[...t.matches,...r.matches,...n.matches,...a.matches,...i.matches,...s.matches,...o.matches,...l.matches,...c.matches],d=Math.max(...u.map(e=>e.score),0),h={dowjones:t.matches,sanctions:[...r.matches,...n.matches,...i.matches],interpol:a.matches,centralBank:s.matches,companyWhitelist:o.matches,companyBlacklist:l.matches,uaeList:c.matches},f={success:!0,screeningId:`SCR-${Date.now()}`,customerId:e.customerId,customerName:e.fullName,timestamp:(new Date).toISOString(),totalSources:9,totalMatches:u.length,overallRiskScore:d,riskLevel:d>=70?"High":d>=40?"Medium":"Low",results:h,sources:["Dow Jones","OFAC Sanctions","UN Sanctions","Interpol","EU Sanctions","Central Banks","Company Whitelist","Company Blacklist","UAE Lists"],summary:{highRiskMatches:u.filter(e=>e.score>=70).length,mediumRiskMatches:u.filter(e=>e.score>=40&&e.score<70).length,lowRiskMatches:u.filter(e=>e.score<40).length,totalSourcesChecked:9}};return console.log("Screening completed:",f),f}catch(t){return console.error("Screening error:",t),{success:!1,error:t.message,timestamp:(new Date).toISOString()}}},performInstantScreening:async e=>{try{console.log("Starting instant screening for:",e.fullName);const[t,r,n,a]=await Promise.all([EO.screenCustomer(e),AO(e),TO.screenCentralBank(e),RO.screenCompanyLists(e)]),i=[...t.matches,...r.matches,...n.matches,...a.whitelist,...a.blacklist],s=Math.max(...i.map(e=>e.score),0);return{success:!0,screeningId:`INSTANT-${Date.now()}`,customerId:e.customerId,customerName:e.fullName,timestamp:(new Date).toISOString(),totalSources:4,totalMatches:i.length,overallRiskScore:s,riskLevel:s>=70?"High":s>=40?"Medium":"Low",results:{dowjones:t.matches,sanctions:r.matches,centralBank:n.matches,companyWhitelist:a.whitelist,companyBlacklist:a.blacklist}}}catch(t){return console.error("Instant screening error:",t),{success:!1,error:t.message,timestamp:(new Date).toISOString()}}},performBatchScreening:async e=>{try{console.log("Starting batch screening for",e.length,"customers");const t=[],r=Date.now();for(const a of e){const e=await LO.performInstantScreening(a);t.push(e)}const n=Date.now()-r;return{success:!0,batchId:`BATCH-${Date.now()}`,results:t,totalProcessed:e.length,duration:n,timestamp:(new Date).toISOString(),summary:{totalCustomers:e.length,highRiskCustomers:t.filter(e=>e.overallRiskScore>=70).length,mediumRiskCustomers:t.filter(e=>e.overallRiskScore>=40&&e.overallRiskScore<70).length,lowRiskCustomers:t.filter(e=>e.overallRiskScore<40).length}}}catch(t){return console.error("Batch screening error:",t),{success:!1,error:t.message,timestamp:(new Date).toISOString()}}}},PO={customerRiskAssessment:{title:"Customer Risk Assessment Report",template:{header:{companyName:"AML Platform",reportTitle:"Customer Risk Assessment Report",generatedDate:"{{generatedDate}}",reportId:"{{reportId}}"},customerInfo:{customerId:"{{customerId}}",fullName:"{{fullName}}",nationality:"{{nationality}}",entityType:"{{entityType}}",riskScore:"{{riskScore}}",riskLevel:"{{riskLevel}}",assessmentDate:"{{assessmentDate}}"},riskFactors:[{factor:"PEP Status",score:"{{pepScore}}",details:"{{pepDetails}}"},{factor:"Sanctions Check",score:"{{sanctionsScore}}",details:"{{sanctionsDetails}}"},{factor:"Geographic Risk",score:"{{geoScore}}",details:"{{geoDetails}}"},{factor:"Business Activity",score:"{{businessScore}}",details:"{{businessDetails}}"}],recommendations:["{{recommendation1}}","{{recommendation2}}","{{recommendation3}}"]}},transactionMonitoring:{title:"Transaction Monitoring Report",template:{header:{companyName:"AML Platform",reportTitle:"Transaction Monitoring Report",period:"{{startDate}} - {{endDate}}",generatedDate:"{{generatedDate}}",reportId:"{{reportId}}"},summary:{totalTransactions:"{{totalTransactions}}",flaggedTransactions:"{{flaggedTransactions}}",blockedTransactions:"{{blockedTransactions}}",totalAmount:"{{totalAmount}}",averageRiskScore:"{{averageRiskScore}}"},highRiskTransactions:[{transactionId:"{{txId}}",customerName:"{{customerName}}",amount:"{{amount}}",riskScore:"{{riskScore}}",reason:"{{reason}}"}],riskDistribution:{lowRisk:"{{lowRiskCount}}",mediumRisk:"{{mediumRiskCount}}",highRisk:"{{highRiskCount}}"}}},screeningResults:{title:"Screening Results Report",template:{header:{companyName:"AML Platform",reportTitle:"Screening Results Report",screeningDate:"{{screeningDate}}",reportId:"{{reportId}}"},customerInfo:{customerId:"{{customerId}}",fullName:"{{fullName}}",nationality:"{{nationality}}"},screeningSummary:{totalSources:"{{totalSources}}",totalMatches:"{{totalMatches}}",overallRiskScore:"{{overallRiskScore}}",riskLevel:"{{riskLevel}}"},matchesBySource:[{source:"Dow Jones",matches:"{{dowJonesMatches}}",riskScore:"{{dowJonesScore}}"},{source:"OFAC Sanctions",matches:"{{ofacMatches}}",riskScore:"{{ofacScore}}"},{source:"Central Banks",matches:"{{centralBankMatches}}",riskScore:"{{centralBankScore}}"}],detailedMatches:[{id:"{{matchId}}",name:"{{matchName}}",source:"{{matchSource}}",score:"{{matchScore}}",type:"{{matchType}}",country:"{{matchCountry}}"}]}},caseManagement:{title:"Case Management Report",template:{header:{companyName:"AML Platform",reportTitle:"Case Management Report",period:"{{startDate}} - {{endDate}}",generatedDate:"{{generatedDate}}",reportId:"{{reportId}}"},summary:{totalCases:"{{totalCases}}",openCases:"{{openCases}}",resolvedCases:"{{resolvedCases}}",averageResolutionTime:"{{avgResolutionTime}}"},casesByStatus:[{status:"Open",count:"{{openCount}}",percentage:"{{openPercentage}}"},{status:"In Progress",count:"{{inProgressCount}}",percentage:"{{inProgressPercentage}}"},{status:"Resolved",count:"{{resolvedCount}}",percentage:"{{resolvedPercentage}}"}],casesByRisk:[{riskLevel:"High",count:"{{highRiskCount}}",percentage:"{{highRiskPercentage}}"},{riskLevel:"Medium",count:"{{mediumRiskCount}}",percentage:"{{mediumRiskPercentage}}"},{riskLevel:"Low",count:"{{lowRiskCount}}",percentage:"{{lowRiskPercentage}}"}],recentCases:[{caseId:"{{caseId}}",customerName:"{{customerName}}",riskLevel:"{{riskLevel}}",status:"{{status}}",createdDate:"{{createdDate}}"}]}},complianceDashboard:{title:"Compliance Dashboard Report",template:{header:{companyName:"AML Platform",reportTitle:"Compliance Dashboard Report",period:"{{startDate}} - {{endDate}}",generatedDate:"{{generatedDate}}",reportId:"{{reportId}}"},keyMetrics:{totalCustomers:"{{totalCustomers}}",totalTransactions:"{{totalTransactions}}",totalScreenings:"{{totalScreenings}}",totalCases:"{{totalCases}}",complianceScore:"{{complianceScore}}"},riskDistribution:{customers:{lowRisk:"{{lowRiskCustomers}}",mediumRisk:"{{mediumRiskCustomers}}",highRisk:"{{highRiskCustomers}}"},transactions:{normal:"{{normalTransactions}}",flagged:"{{flaggedTransactions}}",blocked:"{{blockedTransactions}}"}},screeningStatistics:{totalScreenings:"{{totalScreenings}}",positiveMatches:"{{positiveMatches}}",falsePositives:"{{falsePositives}}",averageResponseTime:"{{avgResponseTime}}"},caseStatistics:{totalCases:"{{totalCases}}",resolvedCases:"{{resolvedCases}}",pendingCases:"{{pendingCases}}",averageResolutionTime:"{{avgResolutionTime}}"}}},regulatoryReport:{title:"Suspicious Activity Report",template:{header:{companyName:"AML Platform",reportTitle:"Suspicious Activity Report",reportId:"{{reportId}}",filingDate:"{{filingDate}}",reportingPeriod:"{{reportingPeriod}}"},subjectInfo:{name:"{{subjectName}}",dateOfBirth:"{{dateOfBirth}}",nationality:"{{nationality}}",identification:"{{identification}}",address:"{{address}}"},suspiciousActivity:{activityType:"{{activityType}}",dateRange:"{{dateRange}}",totalAmount:"{{totalAmount}}",currency:"{{currency}}",description:"{{description}}"},redFlags:["{{redFlag1}}","{{redFlag2}}","{{redFlag3}}"],supportingEvidence:[{type:"{{evidenceType}}",description:"{{evidenceDescription}}",date:"{{evidenceDate}}"}],conclusion:"{{conclusion}}",recommendations:["{{recommendation1}}","{{recommendation2}}"]}},auditTrail:{title:"Audit Trail Report",template:{header:{companyName:"AML Platform",reportTitle:"Audit Trail Report",period:"{{startDate}} - {{endDate}}",generatedDate:"{{generatedDate}}",reportId:"{{reportId}}"},summary:{totalEvents:"{{totalEvents}}",uniqueUsers:"{{uniqueUsers}}",systemEvents:"{{systemEvents}}",userEvents:"{{userEvents}}"},eventsByType:[{eventType:"Login",count:"{{loginCount}}",percentage:"{{loginPercentage}}"},{eventType:"Customer Creation",count:"{{customerCreationCount}}",percentage:"{{customerCreationPercentage}}"},{eventType:"Screening",count:"{{screeningCount}}",percentage:"{{screeningPercentage}}"},{eventType:"Case Creation",count:"{{caseCreationCount}}",percentage:"{{caseCreationPercentage}}"}],recentEvents:[{timestamp:"{{timestamp}}",user:"{{user}}",action:"{{action}}",details:"{{details}}",ipAddress:"{{ipAddress}}"}]}}},DO={generateCustomerRiskAssessment:async e=>{await new Promise(e=>setTimeout(e,500));return{success:!0,reportType:"Customer Risk Assessment",data:{generatedDate:(new Date).toISOString(),reportId:`CRA-${Date.now()}`,customerId:e.customerId||"CUST001",fullName:e.fullName||"John Doe",nationality:e.nationality||"USA",entityType:e.entityType||"Individual",riskScore:e.riskScore||65,riskLevel:e.riskLevel||"Medium",assessmentDate:(new Date).toISOString(),pepScore:40,pepDetails:"Customer has potential PEP connections",sanctionsScore:0,sanctionsDetails:"No sanctions matches found",geoScore:25,geoDetails:"Customer from medium-risk jurisdiction",businessScore:20,businessDetails:"Standard business activities",recommendation1:"Conduct enhanced due diligence",recommendation2:"Monitor transactions closely",recommendation3:"Review risk assessment quarterly"},template:PO.customerRiskAssessment.template}},generateTransactionMonitoring:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await new Promise(e=>setTimeout(e,800));return{success:!0,reportType:"Transaction Monitoring",data:{startDate:e.startDate||"2024-01-01",endDate:e.endDate||"2024-01-31",generatedDate:(new Date).toISOString(),reportId:`TM-${Date.now()}`,totalTransactions:1250,flaggedTransactions:45,blockedTransactions:12,totalAmount:"$2,450,000",averageRiskScore:35,highRiskTransactions:[{transactionId:"TX001",customerName:"Ahmad Khan",amount:"$50,000",riskScore:85,reason:"High amount, suspicious pattern"},{transactionId:"TX002",customerName:"Maria Lopez",amount:"$75,000",riskScore:92,reason:"PEP connection detected"}],lowRiskCount:980,mediumRiskCount:225,highRiskCount:45},template:PO.transactionMonitoring.template}},generateScreeningResults:async e=>{await new Promise(e=>setTimeout(e,600));return{success:!0,reportType:"Screening Results",data:{screeningDate:(new Date).toISOString(),reportId:`SR-${Date.now()}`,customerId:e.customerId||"CUST001",fullName:e.customerName||"John Doe",nationality:e.nationality||"USA",totalSources:9,totalMatches:3,overallRiskScore:75,riskLevel:"High",dowJonesMatches:1,dowJonesScore:85,ofacMatches:0,ofacScore:0,centralBankMatches:2,centralBankScore:70,detailedMatches:[{id:"MATCH001",name:"John Smith",source:"Dow Jones",score:85,type:"PEP",country:"UK"},{id:"MATCH002",name:"Global FinCorp",source:"Central Bank",score:70,type:"Entity",country:"USA"}]},template:PO.screeningResults.template}},generateCaseManagement:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await new Promise(e=>setTimeout(e,700));return{success:!0,reportType:"Case Management",data:{startDate:e.startDate||"2024-01-01",endDate:e.endDate||"2024-01-31",generatedDate:(new Date).toISOString(),reportId:`CM-${Date.now()}`,totalCases:156,openCases:45,resolvedCases:111,avgResolutionTime:"3.2 days",openCount:45,openPercentage:28.8,inProgressCount:67,inProgressPercentage:42.9,resolvedCount:44,resolvedPercentage:28.2,highRiskCount:23,highRiskPercentage:14.7,mediumRiskCount:89,mediumRiskPercentage:57.1,lowRiskCount:44,lowRiskPercentage:28.2,recentCases:[{caseId:"CASE001",customerName:"Ahmad Khan",riskLevel:"High",status:"Open",createdDate:"2024-01-15"},{caseId:"CASE002",customerName:"Maria Lopez",riskLevel:"Medium",status:"In Progress",createdDate:"2024-01-14"}]},template:PO.caseManagement.template}},generateComplianceDashboard:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await new Promise(e=>setTimeout(e,1e3));return{success:!0,reportType:"Compliance Dashboard",data:{startDate:e.startDate||"2024-01-01",endDate:e.endDate||"2024-01-31",generatedDate:(new Date).toISOString(),reportId:`CD-${Date.now()}`,totalCustomers:1250,totalTransactions:8500,totalScreenings:1800,totalCases:156,complianceScore:94.5,lowRiskCustomers:875,mediumRiskCustomers:300,highRiskCustomers:75,normalTransactions:7800,flaggedTransactions:600,blockedTransactions:100,positiveMatches:45,falsePositives:12,avgResponseTime:"2.3 seconds",resolvedCases:111,pendingCases:45,avgResolutionTime:"3.2 days"},template:PO.complianceDashboard.template}},generateRegulatoryReport:async e=>{await new Promise(e=>setTimeout(e,900));return{success:!0,reportType:"Regulatory Report",data:{reportId:`SAR-${Date.now()}`,filingDate:(new Date).toISOString(),reportingPeriod:"2024-01-01 to 2024-01-31",subjectName:e.customerName||"Ahmad Khan",dateOfBirth:e.dateOfBirth||"1980-01-01",nationality:e.nationality||"Pakistan",identification:e.identification||"Passport: PK123456",address:e.address||"123 Main St, Karachi, Pakistan",activityType:"Suspicious Transaction Pattern",dateRange:"2024-01-15 to 2024-01-25",totalAmount:"$125,000",currency:"USD",description:"Multiple high-value transactions with no clear business purpose",redFlag1:"Unusual transaction pattern",redFlag2:"High-risk jurisdiction",redFlag3:"PEP connection detected",evidenceType:"Transaction Records",evidenceDescription:"Bank statements showing multiple transfers",evidenceDate:"2024-01-20",conclusion:"Suspicious activity requiring regulatory reporting",recommendation1:"File SAR with regulatory authority",recommendation2:"Continue monitoring customer activities"},template:PO.regulatoryReport.template}},generateAuditTrail:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await new Promise(e=>setTimeout(e,600));return{success:!0,reportType:"Audit Trail",data:{startDate:e.startDate||"2024-01-01",endDate:e.endDate||"2024-01-31",generatedDate:(new Date).toISOString(),reportId:`AT-${Date.now()}`,totalEvents:2450,uniqueUsers:15,systemEvents:1200,userEvents:1250,loginCount:450,loginPercentage:18.4,customerCreationCount:125,customerCreationPercentage:5.1,screeningCount:1800,screeningPercentage:73.5,caseCreationCount:75,caseCreationPercentage:3.1,recentEvents:[{timestamp:"2024-01-15T10:30:00Z",user:"john.doe@company.com",action:"Customer Screening",details:"Screened customer Ahmad Khan",ipAddress:"192.168.1.100"},{timestamp:"2024-01-15T10:25:00Z",user:"jane.smith@company.com",action:"Case Creation",details:"Created case for suspicious activity",ipAddress:"192.168.1.101"}]},template:PO.auditTrail.template}},generateAllReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await Promise.all([DO.generateCustomerRiskAssessment({}),DO.generateTransactionMonitoring(e),DO.generateScreeningResults({}),DO.generateCaseManagement(e),DO.generateComplianceDashboard(e),DO.generateRegulatoryReport({}),DO.generateAuditTrail(e)]);return{success:!0,reports:t,generatedDate:(new Date).toISOString(),totalReports:t.length}}},MO={performInstantScreening:async(e,t)=>{try{const r=await ZC(),n={customer_id:e,screening_type:"Instant",status:"In Progress",search_criteria:t,created_by:r.id,created_at:(new Date).toISOString()},a=await eO("screenings",n),i=e?await rO("customers",e):null,s=await LO.performInstantScreening({customerId:e,fullName:i?i.first_name+" "+i.last_name:t.fullName,nationality:i?i.nationality:t.nationality,entityType:i?i.entity_type:t.entityType,...t});if(await tO("screenings",a.id,{results:s.results,status:"Completed",completed_at:(new Date).toISOString(),risk_score:s.overallRiskScore||0}),s.results){const t=[...s.results.dowjones||[],...s.results.sanctions||[],...s.results.centralBank||[],...s.results.companyWhitelist||[],...s.results.companyBlacklist||[],...s.results.uaeList||[]];if(t.length>0){const r=t.map(t=>({screening_id:a.id,customer_id:e,match_id:t.id,match_name:t.name,match_source:t.source,match_score:t.score,match_type:t.recordType,match_country:t.country,match_details:t}));await XC.from("screening_matches").insert(r)}}return await XC.from("screening_logs").insert({screening_id:a.id,customer_id:e,action:"Instant Screening Completed",details:`Screening completed with ${s.totalMatches} matches`,created_by:r.id,created_at:(new Date).toISOString()}),{...a,...s}}catch(r){QC(r)}},startOngoingScreening:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Daily";try{const r={customer_id:e,screening_type:"Ongoing",status:"Active",frequency:t,created_by:(await ZC()).id,created_at:(new Date).toISOString()};return await eO("screenings",r)}catch(r){QC(r)}},getScreeningHistory:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{const n={page:t,limit:r,filters:{customer_id:e},orderBy:{column:"created_at",ascending:!1}};return await nO("screenings",n)}catch(n){QC(n)}},getScreeningResults:async e=>{try{const{data:t,error:r}=await XC.from("screenings").select("\n          *,\n          screening_matches(*)\n        ").eq("id",e).single();return r&&QC(r),t}catch(t){QC(t)}},updateScreeningStatus:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const n={status:t,notes:r,updated_by:(await ZC()).id,updated_at:(new Date).toISOString()};return"Completed"===t&&(n.completed_at=(new Date).toISOString()),await tO("screenings",e,n)}catch(n){QC(n)}},getScreeningStats:async()=>{try{const{data:e}=await XC.from("screenings").select("*"),{data:t}=await XC.from("screening_matches").select("*"),r={total:(null===e||void 0===e?void 0:e.length)||0,byType:{Instant:(null===e||void 0===e?void 0:e.filter(e=>"Instant"===e.screening_type).length)||0,Ongoing:(null===e||void 0===e?void 0:e.filter(e=>"Ongoing"===e.screening_type).length)||0},byStatus:{"In Progress":(null===e||void 0===e?void 0:e.filter(e=>"In Progress"===e.status).length)||0,Completed:(null===e||void 0===e?void 0:e.filter(e=>"Completed"===e.status).length)||0,Active:(null===e||void 0===e?void 0:e.filter(e=>"Active"===e.status).length)||0},totalMatches:(null===t||void 0===t?void 0:t.length)||0,averageRiskScore:(null===e||void 0===e?void 0:e.reduce((e,t)=>e+(t.risk_score||0),0))/((null===e||void 0===e?void 0:e.length)||1)||0};return r}catch(e){QC(e)}},getOngoingScreeningResults:async e=>{try{const{data:t,error:r}=await XC.from("ongoing_screening_results").select("*").eq("customer_id",e).order("created_at",{ascending:!1});return r&&QC(r),t}catch(t){QC(t)}},performBatchScreening:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{await ZC();const r=[];for(const n of e){const e=await MO.performInstantScreening(n,t);r.push(e)}return{success:!0,totalProcessed:e.length,results:r,timestamp:(new Date).toISOString()}}catch(r){QC(r)}},getScreeningLogs:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t={filters:e,orderBy:{column:"created_at",ascending:!1}};return await nO("screening_logs",t)}catch(t){QC(t)}}},FO=async e=>{try{0,console.log("\ud83d\udd17 Creating transaction in real Supabase database...");const t=await ZC(),{risk_assessment_data:r,...n}=e,a={customer_id:n.customer_id,director_id:n.director_id||null,transaction_type:n.transaction_type||null,amount:n.amount||0,currency:n.currency,transaction_date:n.transaction_date||(new Date).toISOString(),source_account:n.source_account||null,destination_account:n.destination_account||null,description_of_report:n.description_of_report||null,action_taken_by_reporting_entity:n.action_taken_by_reporting_entity||null,internal_reference_number:n.internal_reference_number||null,transaction_product:n.transaction_product||null,payment_mode:n.payment_mode||null,channel:n.channel||null,source_of_funds:n.source_of_funds||null,transaction_purpose:n.transaction_purpose||null,rate:n.rate?parseFloat(n.rate):null,invoice_amount:n.invoice_amount?parseFloat(n.invoice_amount):null,amount_lc:n.amount_lc?parseFloat(n.amount_lc):null,estimated_amount:n.estimated_amount?parseFloat(n.estimated_amount):null,item_type:n.item_type||null,item_size:n.item_size||null,item_unit:n.item_unit||null,status_code:n.status_code||null,status_comments:n.status_comments||null,beneficiary_name:n.beneficiary_name||null,beneficiary_comments:n.beneficiary_comments||null,late_deposit:n.late_deposit||null,branch:n.branch||null,indemnified_for_repatriation:n.indemnified_for_repatriation||null,executed_by:n.executed_by||null,carrier_name:n.carrier_name||null,carrier_details:n.carrier_details||null,is_str_istr:n.is_str_istr||!1,reason:n.reason||null,description:n.description||null,risk_score:0,status:"Pending",created_by:t.id,created_at:(new Date).toISOString()};console.log("\ud83d\udcca Transaction payload being sent to database:",a);const{data:i,error:s}=await XC.from("transactions").insert(a).select().single();if(s)throw console.error("\u274c Error inserting transaction:",s),new Error("Failed to create transaction");return console.log("\ud83d\udcca Real transaction created:",i),i}catch(t){return console.error("Error creating transaction:",t),{success:!1,error:t.message||"Failed to create transaction"}}},BO=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{0,console.log("\ud83d\udd17 Fetching transactions from real Supabase database...");let n=null;if(r.search){r.search.toLowerCase();const e=new Set,{data:t,error:a}=await XC.from("customers").select("id").ilike("email",`%${r.search}%`);!a&&t&&t.forEach(t=>e.add(t.id));const{data:i,error:s}=await XC.from("natural_person_details").select("customer_id").or(`firstname.ilike.%${r.search}%,lastname.ilike.%${r.search}%`);!s&&i&&i.forEach(t=>e.add(t.customer_id));const{data:o,error:l}=await XC.from("legal_entity_details").select("customer_id").or(`legalname.ilike.%${r.search}%,alias.ilike.%${r.search}%`);if(!l&&o&&o.forEach(t=>e.add(t.customer_id)),!(e.size>0))return{success:!0,data:[],count:0};n=Array.from(e)}let a=XC.from("transactions").select("\n          *,\n          customers (\n            id,\n            email,\n            customer_type,\n            natural_person_details (\n              firstname,\n              lastname\n            ),\n            legal_entity_details (\n              legalname,\n              alias\n            )\n          )\n        ");if(n&&(a=a.in("customer_id",n)),r.dateFrom&&(a=a.gte("transaction_date",r.dateFrom)),r.dateTo&&(a=a.lte("transaction_date",r.dateTo)),r.statusFilter&&Array.isArray(r.statusFilter)&&r.statusFilter.length>0)if(1===r.statusFilter.length)a=a.eq("status",r.statusFilter[0]);else{const e=r.statusFilter.map(e=>`status.eq.${e}`).join(",");a=a.or(e)}else r.status&&(a=a.eq("status",r.status));r.risk_score&&(a=a.gte("risk_score",r.risk_score)),"yes"===r.xmlGenerated?a=a.not("xml_generated_at","is",null):"no"===r.xmlGenerated&&(a=a.is("xml_generated_at",null));let i=XC.from("transactions").select("*",{count:"exact",head:!0});if(n&&(i=i.in("customer_id",n)),r.dateFrom&&(i=i.gte("transaction_date",r.dateFrom)),r.dateTo&&(i=i.lte("transaction_date",r.dateTo)),r.statusFilter&&Array.isArray(r.statusFilter)&&r.statusFilter.length>0)if(1===r.statusFilter.length)i=i.eq("status",r.statusFilter[0]);else{const e=r.statusFilter.map(e=>`status.eq.${e}`).join(",");i=i.or(e)}else r.status&&(i=i.eq("status",r.status));r.risk_score&&(i=i.gte("risk_score",r.risk_score)),"yes"===r.xmlGenerated?i=i.not("xml_generated_at","is",null):"no"===r.xmlGenerated&&(i=i.is("xml_generated_at",null));const{count:s}=await i;a=a.order("created_at",{ascending:!1});const o=(e-1)*t,l=o+t-1;a=a.range(o,l);const{data:c,error:u}=await a;return u?(console.error("Supabase query error:",u),{success:!1,error:u.message||"Failed to fetch transactions"}):{success:!0,data:c||[],count:s||0}}catch(n){return console.error("Error fetching transactions:",n),{success:!1,error:n.message||"Failed to fetch transactions"}}},UO=async e=>{try{0,console.log("\ud83d\udd17 Fetching transaction details from real Supabase database...");const{data:t,error:r}=await XC.from("transactions").select("\n          *,\n          customers (\n            id,\n            email,\n            customer_type,\n            natural_person_details (\n              firstname,\n              lastname\n            ),\n            legal_entity_details (\n              legalname,\n              alias\n            )\n          )\n        ").eq("id",e).single();if(r)throw console.error("Supabase query error:",r),new Error(r.message||"Failed to fetch transaction details");return t}catch(t){throw console.error("Error fetching transaction details:",t),new Error(t.message||"Failed to fetch transaction details")}},zO=async(e,t)=>{try{const r={...t,updated_at:(new Date).toISOString()},{data:n,error:a}=await XC.from("transactions").update(r).eq("id",e).select().single();if(a)throw console.error("Error updating transaction:",a),new Error(a.message||"Failed to update transaction");return{success:!0,data:n}}catch(r){throw console.error("Error updating transaction:",r),QC(r),r}},HO=async e=>{try{const t={status:"Approved",approved_by:(await ZC()).id,approved_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:r,error:n}=await XC.from("transactions").update(t).eq("id",e).select().single();if(n)throw console.error("Error approving transaction:",n),new Error(n.message||"Failed to approve transaction");return r}catch(t){throw console.error("Error approving transaction:",t),new Error(t.message||"Failed to approve transaction")}},$O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const r={status:"Rejected",rejection_reason:t,approved_by:(await ZC()).id,approved_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:n,error:a}=await XC.from("transactions").update(r).eq("id",e).select().single();if(a)throw console.error("Error rejecting transaction:",a),new Error(a.message||"Failed to reject transaction");return n}catch(r){throw console.error("Error rejecting transaction:",r),new Error(r.message||"Failed to reject transaction")}},qO=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const n=await ZC(),{data:a,error:i}=await XC.from("transaction_xml_history").select("version_number").eq("transaction_id",e).order("version_number",{ascending:!1}).limit(1).single(),s=a?a.version_number+1:1,{data:o,error:l}=await XC.from("transaction_xml_history").insert({transaction_id:e,xml_content:t,generated_by:n.id,version_number:s,notes:r||`XML generated - Version ${s}`}).select().single();return l?(console.error("Error saving XML history:",l),{success:!1,error:l.message}):{success:!0,data:o}}catch(n){return console.error("Error saving XML history:",n),{success:!1,error:n.message}}},GO=async e=>{try{const{data:t,error:r}=await XC.from("transaction_xml_history").select("*").eq("transaction_id",e).order("version_number",{ascending:!1}).limit(1).single();return r?"PGRST116"===r.code?{success:!0,data:null}:(console.error("Error fetching latest XML:",r),{success:!1,error:r.message}):{success:!0,data:t}}catch(t){return console.error("Error fetching latest XML:",t),{success:!1,error:t.message}}},WO={createCase:async e=>{try{0,console.log("\ud83d\udd17 Creating case in real Supabase database...");const t=await ZC(),r=`CASE-${Date.now()}-${Math.floor(1e3*Math.random())}`,n={...e,case_number:r,status:e.status||"Open",created_by:t.id,created_at:(new Date).toISOString()};return await eO("cases",n)}catch(t){return console.error("Error creating case:",t),{success:!1,error:t.message||"Failed to create case"}}},getCases:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let n=XC.from("cases").select("\n          *,\n          customers (\n            id,\n            first_name,\n            last_name,\n            email\n          )\n        ");r.status&&(n=n.eq("status",r.status)),r.risk_level&&(n=n.eq("risk_level",r.risk_level)),r.case_type&&(n=n.eq("case_type",r.case_type)),r.assigned_to&&(n=n.eq("assigned_to",r.assigned_to)),r.date_from&&(n=n.gte("created_at",r.date_from)),r.date_to&&(n=n.lte("created_at",r.date_to));const a=(e-1)*t,i=a+t-1;n=n.range(a,i),n=n.order("created_at",{ascending:!1});const{data:s,error:o,count:l}=await n;return o&&QC(o),{data:s,count:l}}catch(n){QC(n)}},getCaseById:async e=>{try{const{data:t,error:r}=await XC.from("cases").select("\n          *,\n          customers (*),\n          case_details (*),\n          case_actions (*)\n        ").eq("id",e).single();return r&&QC(r),t}catch(t){QC(t)}},updateCase:async(e,t)=>{try{const r=await ZC(),n={...t,updated_by:r.id,updated_at:(new Date).toISOString()};return await tO("cases",e,n)}catch(r){QC(r)}},assignCase:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const n=await ZC(),a={assigned_to:t,assigned_at:(new Date).toISOString(),assigned_by:n.id,updated_by:n.id,updated_at:(new Date).toISOString()},i=await tO("cases",e,a);return await WO.addCaseAction(e,{action_type:"Assignment",description:`Case assigned to ${t}`,notes:r}),i}catch(n){QC(n)}},addCaseAction:async(e,t)=>{try{0,console.log("\ud83d\udd17 Creating case action in real Supabase database...");const r=await ZC(),n={case_id:e,...t,created_by:r.id,created_at:(new Date).toISOString()};return await eO("case_actions",n)}catch(r){return console.error("Error creating case action:",r),{success:!1,error:r.message||"Failed to create case action"}}},updateCaseStatus:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const n={status:t,updated_by:(await ZC()).id,updated_at:(new Date).toISOString()};"Resolved"===t&&(n.resolved_at=(new Date).toISOString());const a=await tO("cases",e,n);return await WO.addCaseAction(e,{action_type:"Status Change",description:`Case status changed to ${t}`,notes:r}),a}catch(n){QC(n)}},resolveCase:async(e,t)=>{try{const r=await ZC();await WO.updateCaseStatus(e,"Resolved");const n={case_id:e,resolution_type:t.resolution_type,resolution_details:t.resolution_details,outcome:t.outcome,created_by:r.id,created_at:(new Date).toISOString()};return await eO("resolved_cases",n),{success:!0,message:"Case resolved successfully"}}catch(r){QC(r)}},getCaseActions:async e=>{try{const{data:t,error:r}=await XC.from("case_actions").select("*").eq("case_id",e).order("created_at",{ascending:!0});return r&&QC(r),t}catch(t){QC(t)}},getCaseStats:async()=>{try{const{data:e}=await XC.from("cases").select("*"),t={total:(null===e||void 0===e?void 0:e.length)||0,byStatus:{Open:(null===e||void 0===e?void 0:e.filter(e=>"Open"===e.status).length)||0,"In Progress":(null===e||void 0===e?void 0:e.filter(e=>"In Progress"===e.status).length)||0,Resolved:(null===e||void 0===e?void 0:e.filter(e=>"Resolved"===e.status).length)||0,Closed:(null===e||void 0===e?void 0:e.filter(e=>"Closed"===e.status).length)||0},byRiskLevel:{Low:(null===e||void 0===e?void 0:e.filter(e=>"Low"===e.risk_level).length)||0,Medium:(null===e||void 0===e?void 0:e.filter(e=>"Medium"===e.risk_level).length)||0,High:(null===e||void 0===e?void 0:e.filter(e=>"High"===e.risk_level).length)||0},byType:{Screening:(null===e||void 0===e?void 0:e.filter(e=>"Screening"===e.case_type).length)||0,Transaction:(null===e||void 0===e?void 0:e.filter(e=>"Transaction"===e.case_type).length)||0,KYC:(null===e||void 0===e?void 0:e.filter(e=>"KYC"===e.case_type).length)||0},averageResolutionTime:0};return t}catch(e){QC(e)}},getCasesByCustomer:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{const n={page:t,limit:r,filters:{customer_id:e},orderBy:{column:"created_at",ascending:!1}};return await nO("cases",n)}catch(n){QC(n)}},getCasesByAssignedUser:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{const n={page:t,limit:r,filters:{assigned_to:e},orderBy:{column:"created_at",ascending:!1}};return await nO("cases",n)}catch(n){QC(n)}}},VO={generateCustomerRiskAssessment:async e=>{try{const t=await ZC(),r=await rO("customers",e),n=await DO.generateCustomerRiskAssessment({customerId:r.id,fullName:r.first_name+" "+r.last_name,nationality:r.nationality,entityType:r.entity_type,riskScore:r.risk_score,riskLevel:r.risk_level}),a={report_type:"Customer Risk Assessment",customer_id:e,report_data:n.data,report_template:n.template,generated_by:t.id,generated_at:(new Date).toISOString()};return{...await eO("reports",a),...n}}catch(t){QC(t)}},generateTransactionMonitoring:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await ZC(),r=await DO.generateTransactionMonitoring(e),n={report_type:"Transaction Monitoring",report_data:r.data,report_template:r.template,filters:e,generated_by:t.id,generated_at:(new Date).toISOString()};return{...await eO("reports",n),...r}}catch(t){QC(t)}},generateScreeningResults:async e=>{try{const t=await ZC(),r=await rO("screenings",e),n=await rO("customers",r.customer_id),a=await DO.generateScreeningResults({customerId:n.id,customerName:n.first_name+" "+n.last_name,nationality:n.nationality}),i={report_type:"Screening Results",screening_id:e,customer_id:r.customer_id,report_data:a.data,report_template:a.template,generated_by:t.id,generated_at:(new Date).toISOString()};return{...await eO("reports",i),...a}}catch(t){QC(t)}},generateCaseManagement:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await ZC(),r=await DO.generateCaseManagement(e),n={report_type:"Case Management",report_data:r.data,report_template:r.template,filters:e,generated_by:t.id,generated_at:(new Date).toISOString()};return{...await eO("reports",n),...r}}catch(t){QC(t)}},generateComplianceDashboard:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await ZC(),r=await DO.generateComplianceDashboard(e),n={report_type:"Compliance Dashboard",report_data:r.data,report_template:r.template,filters:e,generated_by:t.id,generated_at:(new Date).toISOString()};return{...await eO("reports",n),...r}}catch(t){QC(t)}},generateRegulatoryReport:async e=>{try{const t=await ZC(),r=await rO("cases",e),n=await rO("customers",r.customer_id),a=await DO.generateRegulatoryReport({customerName:n.first_name+" "+n.last_name,nationality:n.nationality,dateOfBirth:n.date_of_birth}),i={report_type:"Regulatory Report",case_id:e,customer_id:r.customer_id,report_data:a.data,report_template:a.template,generated_by:t.id,generated_at:(new Date).toISOString()};return{...await eO("reports",i),...a}}catch(t){QC(t)}},generateAuditTrail:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await ZC(),r=await DO.generateAuditTrail(e),n={report_type:"Audit Trail",report_data:r.data,report_template:r.template,filters:e,generated_by:t.id,generated_at:(new Date).toISOString()};return{...await eO("reports",n),...r}}catch(t){QC(t)}},getReports:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const n={page:e,limit:t,filters:r,orderBy:{column:"generated_at",ascending:!1}};return await nO("reports",n)}catch(n){QC(n)}},getReportById:async e=>{try{return await rO("reports",e)}catch(t){QC(t)}},exportReportToPDF:async e=>{try{return{success:!0,reportId:e,data:await VO.getReportById(e),format:"PDF",downloadUrl:`/api/reports/${e}/download`}}catch(t){QC(t)}},exportReportToExcel:async e=>{try{return{success:!0,reportId:e,data:await VO.getReportById(e),format:"Excel",downloadUrl:`/api/reports/${e}/download`}}catch(t){QC(t)}},getReportStats:async()=>{try{const{data:e}=await XC.from("reports").select("*"),t={total:(null===e||void 0===e?void 0:e.length)||0,byType:{"Customer Risk Assessment":(null===e||void 0===e?void 0:e.filter(e=>"Customer Risk Assessment"===e.report_type).length)||0,"Transaction Monitoring":(null===e||void 0===e?void 0:e.filter(e=>"Transaction Monitoring"===e.report_type).length)||0,"Screening Results":(null===e||void 0===e?void 0:e.filter(e=>"Screening Results"===e.report_type).length)||0,"Case Management":(null===e||void 0===e?void 0:e.filter(e=>"Case Management"===e.report_type).length)||0,"Compliance Dashboard":(null===e||void 0===e?void 0:e.filter(e=>"Compliance Dashboard"===e.report_type).length)||0,"Regulatory Report":(null===e||void 0===e?void 0:e.filter(e=>"Regulatory Report"===e.report_type).length)||0,"Audit Trail":(null===e||void 0===e?void 0:e.filter(e=>"Audit Trail"===e.report_type).length)||0},byDate:{today:(null===e||void 0===e?void 0:e.filter(e=>new Date(e.generated_at).toDateString()===(new Date).toDateString()).length)||0,thisWeek:(null===e||void 0===e?void 0:e.filter(e=>{const t=new Date(e.generated_at),r=new Date;return r.setDate(r.getDate()-7),t>=r}).length)||0,thisMonth:(null===e||void 0===e?void 0:e.filter(e=>{const t=new Date(e.generated_at),r=new Date;return r.setMonth(r.getMonth()-1),t>=r}).length)||0}};return t}catch(e){QC(e)}}},KO={getRiskRules:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=XC.from("risk_categories").select("*");e&&(t=t.eq("rule_type",e));const{data:r,error:n}=await t;if(n)throw n;if(!r||0===r.length)return{success:!0,rules:[],categories:[],total:0};const a=r.map(e=>e.id);let i=[],s=0;const o=1e3;let l=!0;for(;l;){let e=XC.from("risk_rules").select("*").in("category_id",a).range(s,s+o-1);const{data:t,error:r}=await e;if(r)throw r;t&&t.length>0?(i=[...i,...t],s+=o,l=t.length===o):l=!1}const c=i,u=new Map((r||[]).map(e=>[e.id,e])),d=(c||[]).map(e=>{const t=u.get(e.category_id);return{id:e.id,ruleText:e.rule_text,riskScore:e.risk_score,riskLogic:e.risk_logic,isActive:e.is_active,sortOrder:e.sort_order,categoryId:e.category_id,categoryName:(null===t||void 0===t?void 0:t.name)||"Uncategorized",categoryCode:(null===t||void 0===t?void 0:t.code)||null,categoryRuleType:(null===t||void 0===t?void 0:t.rule_type)||null}});return{success:!0,rules:d,categories:r||[],total:d.length}}catch(t){return console.error("Error loading risk rules:",t),{success:!1,rules:[],total:0,error:t.message||"Failed to load risk rules"}}},calculateRiskScore:async e=>{try{const{data:e,error:t}=await XC.from("risk_rules").select("id, risk_score, risk_logic, is_active").eq("is_active",!0);if(t)throw t;return{success:!0,riskScore:0,riskLevel:"Low",triggeredRules:[],totalRules:(e||[]).length}}catch(t){return console.error("Error in calculateRiskScore:",t),{success:!1,riskScore:0,riskLevel:"Low",triggeredRules:[],totalRules:0,error:t.message||"Failed to calculate risk score"}}},performRiskAssessment:async e=>{try{console.log("Starting risk assessment for customer ID:",e);const n=await ZC();console.log("Current user:",n);const a=await rO("customers",e);console.log("Customer data:",a);const i=await KO.calculateRiskScore(a);if(console.log("Risk calculation result:",i),!i.success)throw new Error(i.error||"Failed to calculate risk score");const s={customer_id:e,risk_score:i.riskScore,risk_level:i.riskLevel,triggered_rules:i.triggeredRules,assessment_date:(new Date).toISOString(),created_by:n.id,created_at:(new Date).toISOString()};let o,l;console.log("Assessment payload:",s);try{o=await eO("risk_assessments",s),console.log("Assessment saved:",o)}catch(t){console.error("Failed to save assessment:",t),o={id:"mock-assessment-id"}}try{l=await tO("customers",e,{risk_score:i.riskScore,risk_level:i.riskLevel,last_risk_assessment:(new Date).toISOString()}),console.log("Customer updated:",l)}catch(r){throw console.error("Failed to update customer:",r),new Error("Failed to update customer risk profile")}return{success:!0,data:{...o,...i},message:"Risk assessment completed successfully"}}catch(n){return console.error("Error in performRiskAssessment:",n),{success:!1,data:null,error:n.message||"Failed to perform risk assessment"}}},createRiskRule:async e=>{try{var t;const r={category_id:e.categoryId,rule_text:e.ruleText,risk_score:e.riskScore,risk_logic:e.riskLogic,is_active:null===(t=e.isActive)||void 0===t||t},{data:n,error:a}=await XC.from("risk_rules").insert(r).select("*").single();if(a)throw a;return{success:!0,rule:n}}catch(r){return console.error("Error creating risk rule:",r),{success:!1,error:r.message||"Failed to create risk rule"}}},updateRiskRule:async(e,t)=>{try{var r;const n={category_id:t.categoryId,rule_text:t.ruleText,risk_score:t.riskScore,risk_logic:t.riskLogic,is_active:null===(r=t.isActive)||void 0===r||r},{data:a,error:i}=await XC.from("risk_rules").update(n).eq("id",e).select("*").single();if(i)throw i;return{success:!0,rule:a}}catch(n){return console.error("Error updating risk rule:",n),{success:!1,error:n.message||"Failed to update risk rule"}}},getRiskStats:async()=>{try{const{data:e,error:t}=await XC.from("customers").select("risk_score, risk_level");if(t)throw console.error("Error fetching customers for stats:",t),new Error("Failed to fetch customer statistics");const{data:r,error:n}=await XC.from("risk_assessments").select("*");n&&console.error("Error fetching assessments for stats:",n);const a={totalCustomers:(null===e||void 0===e?void 0:e.length)||0,byRiskLevel:{Low:(null===e||void 0===e?void 0:e.filter(e=>"Low"===e.risk_level).length)||0,Medium:(null===e||void 0===e?void 0:e.filter(e=>"Medium"===e.risk_level).length)||0,High:(null===e||void 0===e?void 0:e.filter(e=>"High"===e.risk_level).length)||0},averageRiskScore:(null===e||void 0===e?void 0:e.reduce((e,t)=>e+(t.risk_score||0),0))/((null===e||void 0===e?void 0:e.length)||1)||0,totalAssessments:(null===r||void 0===r?void 0:r.length)||0,assessmentsThisMonth:(null===r||void 0===r?void 0:r.filter(e=>{const t=new Date(e.assessment_date),r=new Date;return r.setMonth(r.getMonth()-1),t>=r}).length)||0};return a}catch(e){return console.error("Error in getRiskStats:",e),{totalCustomers:0,byRiskLevel:{Low:0,Medium:0,High:0},averageRiskScore:0,totalAssessments:0,assessmentsThisMonth:0}}},getCustomersByRiskLevel:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{const n={page:t,limit:r,filters:e?{risk_level:e}:{},orderBy:{column:"risk_score",ascending:!1}},a=await nO("customers",n);return{success:!0,data:a.data||[],count:a.count||0,error:null}}catch(n){return console.error("Error in getCustomersByRiskLevel:",n),{success:!1,data:[],count:0,error:n.message||"Failed to fetch customers"}}}},YO={async saveVerificationChecks(e,t){try{var r;const{data:n}=await XC.auth.getUser(),a=(null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.id)||"00000000-0000-0000-0000-000000000001",{error:i}=await XC.from("customer_verification_checks").delete().eq("customer_id",e).is("entity_type",null);if(i)return console.error("Error deleting existing checks:",i),{success:!1,error:i.message};const s=Object.entries(t).filter(e=>{let[t,r]=e;return r.answer}).map(t=>{let[r,n]=t;return{customer_id:e,check_type:r,check_question:n.question||this.getQuestionByType(r),answer:n.answer,notes:n.notes||null,checked_by:a,checked_at:(new Date).toISOString()}});if(0===s.length)return{success:!0,data:[],message:"No verification checks to save"};const{data:o,error:l}=await XC.from("customer_verification_checks").insert(s).select();return l?(console.error("Error saving verification checks:",l),{success:!1,error:l.message}):{success:!0,data:o,message:"Verification checks saved successfully"}}catch(n){return console.error("Error in saveVerificationChecks:",n),{success:!1,error:n.message}}},async loadVerificationChecks(e){try{const{data:t,error:r}=await XC.from("customer_verification_checks").select("*").eq("customer_id",e).is("entity_type",null).order("created_at",{ascending:!0});if(r)return console.error("Error loading verification checks:",r),{success:!1,error:r.message};const n={};return t.forEach(e=>{n[e.check_type]={answer:e.answer,notes:e.notes||"",question:e.check_question}}),{success:!0,data:n}}catch(t){return console.error("Error in loadVerificationChecks:",t),{success:!1,error:t.message}}},async saveEntityVerificationChecks(e,t,r,n){try{var a;const{data:i}=await XC.auth.getUser(),s=(null===i||void 0===i||null===(a=i.user)||void 0===a?void 0:a.id)||"00000000-0000-0000-0000-000000000001";if(!t||!r)return{success:!1,error:"Entity type and ID are required"};const{error:o}=await XC.from("customer_verification_checks").delete().eq("customer_id",e).eq("entity_type",t).eq("entity_id",r);if(o)return console.error("Error deleting existing entity checks:",o),{success:!1,error:o.message};const l=Object.entries(n).filter(e=>{let[t,r]=e;return r.answer}).map(n=>{let[a,i]=n;return{customer_id:e,entity_type:t,entity_id:r,check_type:a,check_question:i.question||this.getQuestionByType(a),answer:i.answer,notes:i.notes||null,checked_by:s,checked_at:(new Date).toISOString()}});if(0===l.length)return{success:!0,data:[],message:"No verification checks to save"};const{data:c,error:u}=await XC.from("customer_verification_checks").insert(l).select();return u?(console.error("Error saving entity verification checks:",u),{success:!1,error:u.message}):{success:!0,data:c,message:"Entity verification checks saved successfully"}}catch(i){return console.error("Error in saveEntityVerificationChecks:",i),{success:!1,error:i.message}}},async loadEntityVerificationChecks(e,t,r){try{if(!t||!r)return{success:!0,data:{}};const{data:n,error:a}=await XC.from("customer_verification_checks").select("*").eq("customer_id",e).eq("entity_type",t).eq("entity_id",r).order("created_at",{ascending:!0});if(a)return console.error("Error loading entity verification checks:",a),{success:!1,error:a.message};const i={};return n.forEach(e=>{i[e.check_type]={answer:e.answer,notes:e.notes||"",question:e.check_question}}),{success:!0,data:i}}catch(n){return console.error("Error in loadEntityVerificationChecks:",n),{success:!1,error:n.message}}},async loadAllEntityVerificationChecks(e){try{const{data:t,error:r}=await XC.from("customer_verification_checks").select("*").eq("customer_id",e).not("entity_type","is",null).order("created_at",{ascending:!0});if(r)return console.error("Error loading all entity verification checks:",r),{success:!1,error:r.message};const n={shareholders:{},ubos:{},directors:{}};return t.forEach(e=>{e.entity_type,e.entity_id;n[e.entity_type][e.entity_id]||(n[e.entity_type][e.entity_id]={}),n[e.entity_type][e.entity_id][e.check_type]={answer:e.answer,notes:e.notes||"",question:e.check_question}}),{success:!0,data:n}}catch(t){return console.error("Error in loadAllEntityVerificationChecks:",t),{success:!1,error:t.message}}},getQuestionByType:e=>({adverseMedia:"1. Any adverse media or criminal records found?",sanctionsMatch:"2. Any sanctions list matches or watchlist hits?",sourceOfFunds:"3. Source of Funds \u2014 Are they legitimate and verifiable?",sourceOfWealth:"4. Source of Wealth \u2014 Sufficient evidence or rationale provided?",documentAuthenticity:"5. Are all submitted documents authentic and valid?",identityVerified:"6. Has identity been verified against reliable sources?",pepCheck:"7. Is the individual a politically exposed person (PEP)?",elevatedRisk:"8. Any elevated risk indicators that require EDD?"}[e]||e),getDefaultQuestions(){const e={"Simplified Customer Due Diligence":[{type:"heading",label:"Background checks:"},{label:"1. Has a Google search been conducted in order to check any adverse media news?",key:"googleSearchAdverseMedia"},{label:"2. Have the directors, shareholders and beneficial owners been screened?",key:"directorsShareholdersScreened"},{label:"3. Are there any adverse report on the client or any of its principals?",key:"adverseReport"},{type:"heading",label:"Source of funds/source of wealth:"},{label:"4. Has the source of funds been determined?",key:"sourceOfFundsDetermined"},{label:"5. Has the source of wealth of the client been determined?",key:"sourceOfWealthDetermined"}],"Customer Due Diligence":[{type:"heading",label:"Background checks:"},{label:"1. Have the directors, shareholders and beneficial owners been screened?",key:"directorsShareholdersScreened"},{label:"2. Has a Google search been conducted in order to check any adverse media news?",key:"googleSearchAdverseMedia"},{label:"3. Are there any adverse report on the client or any of its principals?",key:"adverseReport"},{label:"4. Have the negative allegations been assessed",key:"negativeAllegationsAssessed"},{label:"5. Has the Compliance Officer been informed of the adverse report?",key:"complianceOfficerInformed"},{type:"heading",label:"Body Corporate:"},{label:"6. the full name of the Body Corporate and any trading name?",key:"bodyCorporateFullName"},{label:"7. the address of its registered office and, if different, its principal place of business?",key:"bodyCorporateAddress"},{label:"8. the date and place of incorporation or registration?",key:"bodyCorporateIncorporationDate"},{label:"9. the incorporation number or business registration number?",key:"bodyCorporateRegistrationNumber"},{label:"10. certificate of incorporation or certificate of registration?",key:"bodyCorporateCertificate"},{label:"11. memorandum and articles of association?",key:"bodyCorporateMemorandum"},{label:"12. the full names of the members and persons exercising a senior management position?",key:"bodyCorporateMembers"},{type:"heading",label:"Foundations:"},{label:"13. the founder?",key:"foundationFounder"},{label:"14. the foundation council members?",key:"foundationCouncilMembers"},{label:"15. the guardian, if any?",key:"foundationGuardian"},{label:"16. each beneficiary of the foundation?",key:"foundationBeneficiaries"},{label:"17. any natural person who has control over the foundation?",key:"foundationControlPersons"},{type:"heading",label:"Individual:"},{label:"18. full name (including any alias)?",key:"individualFullName"},{label:"19. date of birth?",key:"individualDateOfBirth"},{label:"20. unique identification number?",key:"individualIdNumber"},{label:"21. nationality?",key:"individualNationality"},{label:"22. legal domicile?",key:"individualLegalDomicile"},{label:"23. current residential address based on a recent utility bill?",key:"individualResidentialAddress"},{label:"24. Occupation?",key:"individualOccupation"},{type:"heading",label:"Source of funds/source of wealth:"},{label:"25. Has the source of funds been determined?",key:"sourceOfFundsDetermined"},{label:"26. Has the source of wealth of the client been determined?",key:"sourceOfWealthDetermined"},{type:"heading",label:"Trust:"},{label:"27. the settlor of the trust?",key:"trustSettlor"},{label:"28. any other trustee(s)?",key:"trustTrustees"},{label:"29. each beneficiary of the trust?",key:"trustBeneficiaries"},{label:"30. any natural person who has control over the trust?",key:"trustControlPersons"}],"Enhanced Customer Due Diligence":[{type:"heading",label:"Adverse Media and Negative Check:"},{label:"1. Has his identity been obtained from reliable, credible and independent documents?",key:"identityFromReliableDocuments"},{label:"2. Have the directors, shareholders and beneficial owners been screened?",key:"directorsShareholdersScreened"},{label:"3. Has the beneficial owner's identity been verified?",key:"beneficialOwnerIdentityVerified"},{label:"4. Has an online search been conducted on the family members or known associates?",key:"onlineSearchFamilyAssociates"},{type:"heading",label:"Obtain Additional Identifying Information:"},{label:"5. Has the beneficial owner's identity been verified?",key:"beneficialOwnerIdentityVerified2"},{label:"6. Has information about his family members and close business partners been obtained?",key:"familyBusinessPartnersInfo"},{label:"7. Has more information about the client and the nature and purpose of the business relationship been obtained?",key:"clientBusinessRelationshipInfo"},{label:"8. Are the client's files kept up to date?",key:"clientFilesUpToDate"},{type:"heading",label:"Politically Exposed Person:"},{label:"9. Is the beneficial owner a Politically Exposed Person (PEP)?",key:"beneficialOwnerPEP"},{type:"heading",label:"Public Record Due Diligence:"},{label:"10. Has a detailed online research on the beneficial owner been conducted?",key:"detailedOnlineResearchBeneficialOwner"},{type:"heading",label:"Ultimate Beneficial Ownership (UBO):"},{label:"11. Public Record Due Diligence",key:"uboPublicRecordDueDiligence"}]};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Simplified Customer Due Diligence"]||e["Simplified Customer Due Diligence"]}},JO={getTransactionActivityRules:async()=>{try{const{data:e,error:t}=await XC.from("transaction_activity_rules").select("*").order("rule_number",{ascending:!0});if(t)throw console.error("Error fetching transaction activity rules:",t),new Error(t.message||"Failed to fetch transaction activity rules");return{success:!0,data:e||[],total:(null===e||void 0===e?void 0:e.length)||0}}catch(e){return console.error("Error in getTransactionActivityRules:",e),{success:!1,error:e.message||"Failed to fetch transaction activity rules",data:[]}}},getTransactionActivityRuleById:async e=>{try{const{data:t,error:r}=await XC.from("transaction_activity_rules").select("*").eq("id",e).single();if(r)throw console.error("Error fetching transaction activity rule:",r),new Error(r.message||"Failed to fetch transaction activity rule");return{success:!0,data:t}}catch(t){return console.error("Error in getTransactionActivityRuleById:",t),{success:!1,error:t.message||"Failed to fetch transaction activity rule"}}},getNextRuleNumber:async()=>{try{const{data:e,error:t}=await XC.from("transaction_activity_rules").select("rule_number").order("rule_number",{ascending:!1}).limit(1).single();if(t&&"PGRST116"!==t.code)throw console.error("Error getting next rule number:",t),new Error(t.message||"Failed to get next rule number");return{success:!0,ruleNumber:e?e.rule_number+1:1}}catch(e){return console.error("Error in getNextRuleNumber:",e),{success:!1,error:e.message||"Failed to get next rule number",ruleNumber:1}}},createTransactionActivityRule:async e=>{try{let t=e.rule_number;if(!t){const e=await JO.getNextRuleNumber();t=e.success?e.ruleNumber:1}const r={rule_number:t,transaction_type:e.transaction_type||null,parameter:e.parameter||null,count_match_type:e.count_match_type||null,transaction_count:e.transaction_count||null,threshold_match_type:e.threshold_match_type||null,threshold:e.threshold||null,frequency:e.frequency||null,is_active:void 0===e.is_active||e.is_active,activity_rule_score:e.activity_rule_score||0,rule_display_name:e.rule_display_name||"",rule_description:e.rule_description||null,updated_at:(new Date).toISOString()},{data:n,error:a}=await XC.from("transaction_activity_rules").insert(r).select().single();if(a)throw console.error("Error creating transaction activity rule:",a),new Error(a.message||"Failed to create transaction activity rule");return{success:!0,data:n}}catch(t){return console.error("Error in createTransactionActivityRule:",t),{success:!1,error:t.message||"Failed to create transaction activity rule"}}},updateTransactionActivityRule:async(e,t)=>{try{const r={...t,updated_at:(new Date).toISOString()},{data:n,error:a}=await XC.from("transaction_activity_rules").update(r).eq("id",e).select().single();if(a)throw console.error("Error updating transaction activity rule:",a),new Error(a.message||"Failed to update transaction activity rule");return{success:!0,data:n}}catch(r){return console.error("Error in updateTransactionActivityRule:",r),{success:!1,error:r.message||"Failed to update transaction activity rule"}}},deleteTransactionActivityRule:async e=>{try{const{error:t}=await XC.from("transaction_activity_rules").delete().eq("id",e);if(t)throw console.error("Error deleting transaction activity rule:",t),new Error(t.message||"Failed to delete transaction activity rule");return{success:!0}}catch(t){return console.error("Error in deleteTransactionActivityRule:",t),{success:!1,error:t.message||"Failed to delete transaction activity rule"}}},toggleRuleStatus:async(e,t)=>{try{const{data:r,error:n}=await XC.from("transaction_activity_rules").update({is_active:t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw console.error("Error toggling rule status:",n),new Error(n.message||"Failed to toggle rule status");return{success:!0,data:r}}catch(r){return console.error("Error in toggleRuleStatus:",r),{success:!1,error:r.message||"Failed to toggle rule status"}}}},XO=["Natural Person","Legal Entities"],QO=["Blue Collar","Partner","Pink Collar","Red Collar","White Collar"],ZO=["Emirates ID","Passport","GCC National ID"],eT=["Yes","No"],tT=["Resident","Non-Resident"],rT=["Face to Face","Non Face to Face"],nT=["Male","Female"],aT=["Inheritance","Dividend"],iT=["Salary","Personal Savings","End of Services Funds","Loan from Friends and Family","Loan from Financial Institutions","Funds From Schemes and Raffles","Funds from Dividend Payouts","Other sources","LOANS","INVESTMENTS","Bank Statement","Bank - Cash withdrawal Slip","Business Proceeds","Bonuses","Pension","Retirement benefit payouts","Interest income on bonds","Dividend income","Return on investments","Proceeds of real-estate sale transaction","Inheritance or gifts","Winnings from lottery or casino","Lawsuit settlement","Divorce settlement","Sale of artworks","Sale of a fixed asset","Sale of products and services","Business income","Sale of investments and properties","Shares and securities","Royalties","Patents"],sT=["Standard Project","Capital Markets","Commercial Dispute Resolution Notes","Commercial","Competition","Corporate Intelligence","Employment","Criminal Litigation","Gold Bars","Silver Bars","Gold Grains","Silver Grains","GOLD","SILVER","DIAMOND","JEWELLERY","OffPlan property","Secondary property","PLATINUM","Audit","Accountancy","Consultancy","Primary Property","Company Service Provider"],oT=["ACCESSORIES","ACCESSORIES/SPARE PARTS TYRES","Accounting","Adult Entertainment","Advertising, Marketing and PR","Advocacy Organizations","Aerospace and Defense","AGENTS &/OR DISTRIBUTORS","AGRICULTURAL/PRODUCTREQUISITES","Agriculture & Mining Other","AIR","Air Couriers and Caro Services","Aircraft","AIRPORT","Airport, Harbor, and Terminal Operations","Alcoholic Beverages","Alternative Energy Sources","ALUMINIUM","Amusement Parks and Attractions","Apparel Wholesalers","Apparel&Accessories","ARCHEIVE CLERK","Architect & Archivist","Architecture, Engineering and Design","Assistant","Audio, Video and Photography","AUDIO/VIDEO STUDIO","Automobile Dealers","Automobile Parts and Supplies","Automobile Parts Wholesalers","Automobiles, Boats and Motor Vehicles","Automotive Repair and Maintenance","BANK","BEAUTY SHOPS","Beer, Wine and Liquor Stores","Beer, Wine and Liquor Wholesalers","Biotechnology","Blue Collar","BOTTLED & CANNED SOFT DRINKS","BRICKS & MARBLE","Brokerage","BROKERS","BUILDING MATERIAL & GYPSUM PROD","BUILDING MATERIAL/MARBLE","BUILDING PURCHASE","BUILDING RENOVATION","BUILDINGS","Business","BUSINESS CENTRES","Business Services Other","Cable and Television Providers","CallCenters","CAR RENTAL","CAR WASH","CARGO","CargoHandling","CATERING","CEMENT","CERAMICS & SANITARY WARES","Charitable Organizations and Foundations","Chemicals and Petrochemicals","Chemicals and Plastics Wholesalers","CINEMA/THEATRE","CIVIL & GENERAL","CIVIL/GENERAL","Cleaner","CLOTHING & LEATHER","Clothing and Shoe Stores","CLUBS","COFFEE SHOPS","COLD STORES","Colleges and Universities","COMBINATION","COMMERCIAL AGENTS","COMMUNICATION SERVICES","Company Holding Services","Computer and Electronics Other","COMPUTER EDUCATION CENTRES","COMPUTER PROGRAMMING","COMPUTERS & RELATED PRODUCTS","Computers, Parts and Repair","Concrete, Glass and Building Materials","Construction and Remodeling","Construction Equipment and Supplies","CONSULTANCY","Consumer Electronics, Parts and Repair","CONSUMER LOANS","Consumer Services Other","ConsumerProducts","CONTRACTING","Cosmetics","COURIER","CRAFTSMANSHIP","CREDIT CARDS","Credit Cards and Related Services","Cruise Ship Operations","CRYSTAL PRODUCTS TRADING","DAIRY PRODUCTS","Data Analytics, Management, and Internet","Data and Records Management","DENTAL CENTERS","Department Stores","DEPATMENT STORES","DESIGNERS","Diagnostic Laboratories","Diamonds","Diamonds, Pearls And Precious Stones Trading","Diamonds, Precious Stones and Jewellery","DISINFECTING","Doctors and Health Care Practitioners","DRILLING OF WELLS","DRIVER","E-Commerce and Internet Business","Education","ELECTRICAL","ELECTRICITY","ELECTRICITY GENERATION","ELECTRONICS/ELECTRICAL APPLIANCES","Elementary and Secondary Schools","EMPLOYMENT AGENCIES","ENGINEERING","ENTERTAINMENT","Entertainment&Leisure","EXCHANGE HOUSES","EXHIBITION","EXPLORATION","FABRICS","Facilities Management and Maintenance","Farming and Mining Machinery and Equipment","Farming and Ranching","FERTILIZERS","FINANCE COMPANIES","FINANCIAL INSTITUTION","FINANCIAL SERVICES","FinancialServices","FIRE EQUIPMENT","FISHING SPORT REQUISITES","Fishing, Hunting and Forestry and Logging","FOOD","Food and Dairy Product Manufacturing and Packaging","Food,Beverage&Tobacco","FOODSTUFFS","FOREIGN LABOR RECRUITMENT","Freight Hauling (Rail and Truck)","FRUITS & VEGETABLES","Fund Management","Funeral Homes and Services","FURNITURE & WOOD","Furniture Manufacturing","Furniture Stores","FURNITURE/CARPETS/CURTAINS","Gambling and Gaming","Garments & Textites","GAS","GAS DISTRIBUTION","GAS/PETROLEUM SERVICES","Gasoline and Oil Refineries","GENERAL MERCHANDISE","General Trading","GIFTS TRADING","Gold & DIamonds Trading Import & export","GOLD AND PRECIOUS METAL","GOLD AND PRECIOUS METAL CASTING","GOLD REFINERY","GOLDSMITH","GOVERNMENT","Government Other","Grocery","hand Presser","Hardware and Building Material Dealers","Health, Pharmaceuticals, and Biotech Other","HealthCare","HEAVY EQUIPMENT","HEAVY INDUSTRY","Holding Activity","Hospitals","HOTEL & RESTAURANTS","Hotels","HOUSE WIFE","HOUSEHOLD ITEMS","HOUSING & ESTABLISHMENT","HR and Recruiting Services","IMPORTER/EXPORTER","INDIVIDUALS","INDUSTRIAL EQUIPMENT","INDUSTRIAL GASES","INDUSTRIAL MANUFACTURING","Instruments and Controls","INSURANCE","Insurance and Risk Management","INTERIOR DECORATION","International Bodies and Organizations","InternetPublishing","INVESTMENT","Investment Banking and Venture Capital","INVESTMENT COMPANIES","INVESTMENT FUNDS","IRRIGATION","IT and Network Services and Support","Jewellery","JEWELLERY TRADING","Jewelry Precious Metal","KITCHEN/SANITARY WARES","LABOURE","LAND","LAND PURCHASE","LANGUAGE TEACHING CENTRES","Laundry and Dry Cleaning","LEATHER & LEATHER PRODCUTS","Legal","Lending and Mortgage","Libraries, Archives and Museums","LIQUIFIED GAS","LIVE ANIMALS","LOADING AND UNLOADING","LUBRICANTS","MACHINERY EQPT & ELECTRICAL APPLIANCES","MAIL ORDER","MAIL/TELEGRAPH","MAINT & CLEANING AIRCONDITIONER","MAINT & CLEANING -REAL ESTATE","MAINTENANCE","MAINTENANCE & CLEANING","MALL/ SHOPPING CENTRE","MALLS","Management Consulting","MARBLE CUTTING","MARINE","Marine and Inland Shipping","MEAT/POULTRY/FISH","Mechanic","Media and Entertainment Other","Medical Devices","MEDICAL EQUIPMENT","MEDICAL SECTOR","Medical Supplies and Equipment","Messenger","Metal and Mineral Wholesalers","METAL RELATED & INDUSTRIAL PRDN","Mining and Quarrying","MINISTRIES","MISCELLANEOUS SERVICES","Motion Picture and Recording Producers","Motion Picture Exhibitors","Moving Companies and Services","Music","MUSIC TAPES/VIDEO CASSETTES/OTHERS","National Government","Network Security Products","Networking equipment and Systems","NEWSPAPER","NewspaperPublishers","Newspapers, Books, and Periodicals","NONE","NON-MANUFACTURED PRECIOUS METAL TRADING","NOVELITIES TRADING","Nurse","OFFICE BUILDINGS","Office Equipment and Suppliers Wholesalers","Office Machinery and Equipment","OFFICE MANAGER","Office Supplies Stores","OIL","OIL & GAS","OIL FIELD MAINTENANCE","OnlineAuctions","OTHER ACTIVITES","OTHER AMUSEMENT/RECREATION","OTHER CLINICS","OTHER CONSUMER LOANS","OTHER CONTRACTING","OTHER EDUCATIONAL SERVICES","OTHER HOUSING","OTHER PRODUCTION","OTHER TRANSPORTATION","OTHER TRDG ACTIVITIES","OTHERS","PACKAGING","Painter","PAPER & ALLIED PRODUCTS","Paper and Paper Products","Parking Lots and Garage Management","Participatory Sports and Recreation","Partner","Partner","Passenger Airlines","Payroll Services","PEARLS AND PRECIOUS STONES TRADING","PENS","PensionFunds","Performing Arts","PERFUMES","Peripherals Manufacturing","Personal Care","Personal Financial Planning and Private Banking","Personal Health Care Products","PERSONAL ITEMS","PERSONAL SERVICES","PETROCHEMICALS","PETROL STATIONS","PETROLEUM","Petroleum Products Wholesalers","PETROLEUM REFINERY","PF/CASE BY CASE","PF/GLOBAL LIMIT","PHARMACIES","PHOTO PRINTING/STUDIO","Photofinishing Services","PHOTOGRAPHY EQUIPMENT","Pink Collar","PLASTICS","Plastics and Rubber Manufacturing","Postal, Express Delivery and Couriers","PRESSURED GAS","PRINTING","PRIVATE HOUSING","PRIVATE SECTOR","PrivateEquity","PRODUCTION","PRODUCTION & MANUFACTURING","PRODUCTION AND FILLING","Property Leasing and Management","PUBLIC SECTOR/LISTED CO","PUBLIC UTILITIES","PVT.BKG CUSTOMER","RADIO","Radio, Television Broadcasting","READY MADE CLOTHES","Real Estate Agents and Appraisers","Real Estate and Construction Other","Real Estate Investment and Development","REAL ESTATE PURCH & RENOVATION","REAL ESTATE RETAIL  MANAGEMENT","RealEstate","Red Collar","Religious Organizations","Rental Cars","REPAIR OF ELECTRICAL APPLIANCES","RESIDENTIAL","Residential and Long-term Care Facilities","RESIDENTIAL BUILDINGWITH SHOPS","Resorts and Casinos","RESTAURANTS","Restaurants and Bars","Retail Others","Retail&Wholesale","RETIRED","RULING FAMILY","SAFETY EQUIPMENT","SALE PERSON","SCHOOLS","SCRAPES","SEA","Securities Agents and Brokers","Securities&CommodityExchanges","Security Services","Semiconductor and Microchip Manufacturing","SENSITIVE BUSINESS","Service Based Professional Client","Sewage Treatment Facilities","SEWERAGE","Shipered","SHOE REPAIR","Shop Keeper","SMALL SOUQS","Soap&Detergent","SOCIAL & PHILANTHROPIC SOCIETIES","Social and Membership Organizations","Software","SPECIAL RESTRICTED ACCT","Spectator Sports and Teams","SPONSORING FOREIGN AGENTS","SPORTS CLOTHES/EQUIPMENT","Sports, Arts, and Recreation Instruction","STAFF LOANS","STATIONARY/BOOKSTORES","STEEL","STEEL & ALLIED PRODUCTS","Steel Industries and Steel contracting","STUDENT","SUPERMARKETS/GROCERIES","SWEETS/BAKERIES","TAILORING REQUIREMENTS","TAILORS","Taxi, Buses and Transit Systems","Technical and Trade Schools","Telecommunications Equipment and Accessories","Telephone Service Providers and Carriers","Test Preparation","TESTING LABORATORIES","Textiles, Apparel and Accessories","Timber products ans Services","TOOL & WORKSHOP REQUISITES","Tools, Hardware and Light Machinery","TOYS","Trade Groups and Labor Unions","TRADING","Trading in Computer Equiments and Others","Trading of Jewellery and Accessories made of Gold and Silver","Trading of raw Gold and Precious Metals","Transportation","Travel Agents and Services","Travel, Recreations and Leisure Other","Trucking","Trust, Fiduciary, and Custody Activities","UNDER SETTLEMENT-CONTRACTING","UNDER SETTLEMENT-HOUSING & EST","UNDER SETTLEMENT-OTHERS","UNDER SETTLEMENT-PERSONAL","UNDER SETTLEMENT-PRODUCTION","UNDER SETTLEMENT-SERVICES","UNDER SETTLEMENT-TRADING","Used Cars","USED JEWELLERY TRADIN","USED MERCHANDISE","V.I.P","V.V.I.P","VEHICLE LOANS","VEHICLE SERVICE GARAGES","VEHICLES","Veterinary Clinics and Services","Video and Teleconferencing","VIDEO CLUBS","VILLAS","Waiter","Warehousing and Storage","Waste Management and Recycling","WATCH AND CLOCK AND SPARE PARTS TRADING","WATCHES","WATER","WATER DISTRIBUTION","WATER SUPPLY","Water Treatment and Utilities","Welder","White Collar","Wholesale and Distribution Other","Wireless and Mobile","YOUNG INVESTOR"],lT=["Commercial License","Industrial License","Professional License","Civil Organization License","Service License","Trading License","Business License","Certificate of Incorporation","Virtual Asset License"],cT=["Proprietory","Partnership","LLC","FZC","FZE","Office of Foreign Company","Offshore Companies","Solo Establishment","Public Limited Liability","Private Limited Company","DMCC","FZ LLC","Non profitable organization","Civil Company"],uT=["Main Land","Free Zone","Outsite UAE","Offshore Company"],dT=["Natural Person","Legal Entities","Trust"],hT=["Class A","Class B"],fT=["Discretionary","Charitable","Purpose"],mT=["Natural Person","Legal Entities"],pT=["Yes","No"],gT=["Cash Transaction","Bank Transfer","Exchange of Metal","Card","Cheque"],yT=["Silver Manufacturing","Gold Manufacturing","Sale of Property","Purchase of Property","Purchase of Diamonds","Sale of Diamonds","Export Purchase of Diamonds","Import Purchase of Diamonds","Purchase of Gold","Sale of Scrap Gold","Purchase of Scrap Gold","Export Sale of Silver","Import Purchase of Silver","Export Sale of Gold","Import  Purchase of Gold","Sale of Silver","Puchase of Silver","Sale of Gold","Used Cars","Travel Agents and Services","Trade Credits And Advance Receivable -TCR","TRADE","Tools, Hardware and Light Machinery","Technical Trade-Related And Other Business Service","purchase of textiles","purchase of gold","Purchase of Electronics","purchase of  house hold items","IMPORT AND EXPORTS OF GOODS","Goods Sold (Exports In Fob Value)-GDE","GOLD AND PRECIOUS METAL - GOL","Food,Beverage&amp;Tobacco","FMCG PURCHASE","Financial Services-FIS","Entertainment","Cosmetics","Family Support (Workers  Remittances) -FAM","Construction Equipment and Supplies","Automobile Parts Wholesalers","REMITTANCE OUTWARD","REMITTANCE INWARD","CUSTOMER PROFILING","Apparel Wholesalers","INSURANCE SERVICES","COMMERCIAL INVESTMENTS ","SALARY ADVANCE","AIR TRANSPORT ","INFORMATION SERVICES","COMPUTER SERVICES","AGENCY COMMISSION ","OWN ACCOUNT TRANSFER","CHARITABLE CONTRIBUTIONS","GOODS BOUGHT OR SOLD","PERSONAL INVESTMENTS","EDUCATIONAL SUPPORT","MEDICAL PUPOUSES","SALE OF PLATINUM","PURCHASE OF PLATINUM","PURCHASE OF ELECTRONICS","OTHERS","REFUND \u2013 OTHERS","INVESTEMENT","TOURISM","HOME REMITTANCE","FAMILY MAINTENANCE","REFUND OF INVESTMENT","PURCHASE OF PROPERTY","IMPORT/EXPORT OF GOODS"],vT=["ACTIVE CONTINGENT","ACTIVE OPTION","ACTIVE UNDER CONTRACT","CANCELLED","DESTROYED","DONATED","EXCHANGED","FROZEN/CONFISCATED/IMPOUND","INHERITED","LEASDED","LET","MORTGAGED","PENDING","SOLD","TEMPORARLY OFF THE MARKET","UNCLAIMED","UNDER APPLICATION","UNKNOWN","WITHDRAWN","PURCHASED","MANUFACTURING"],bT=["ACCOUNTANCY (CONSULTANCY)","APARTMENT","BROKER COMMISSION","PLATINUM","SILVER","CHEMICAL PRODUCTS ","CIGAR","CIGARETTE","COMMERCIAL BUILDING","COMPLIANCE AUDIT","CONSTRUCTION AUDIT","DIAMOND","DISTRIBUTION CENTER","EDUCATION (CONSULTANCY)","EDUCATION (CONSULTANCY)","ELECTRONIC DEVICES","EQUIPMENT","FINANCE CONSULTANCY","FINANCIAL AUDIT","FOOD &amp; BEVERAGE","FRUIT","FUEL OIL","GOLD","OPERATIONAL AUDIT","ORPHANAGE","PIPE TOBACCO","PROPERTY","RESIDENTIAL BUILDING","SCIENCE (CONSULTANCY)","SECURITY DEVICES","SECURITY SERVICES","SECURITY SOFTWARE","SECURITY OFFICE","SHOPPING MALL","TAX AUDIT","TEXTILES","TOBACCO","UNKNOWN","VEGETABLES","VEHICLE","WAREHOUSE","WATCH","WEAPON"],xT=["System","User","Manager","Admin","Automated"],wT=["ACCOUNTANT","ACCOUNTING MANAGER","ACCOUNTS CLERK","ACTOR","ADMINISTRATION CLERK","ADMINISTRATION MANAGER","ADMINISTRATION OFFICER","ADMINISTRATIVE SUPERVISOR","ADVERTISING DESIGNER","ADVERTISING REPRESENTATIVE","AGED CARE SERVICES MANAGER","AGRICULTURAL MANAGER","AGRICULTURAL MECHANIC","AGRICULTURAL TECHNICIAN","AGRICULTURE ENGINEER","AGRICULTURE LABOURER","AIR CONDITIONING ASSISTANT","AIR CONDITIONING MECHANIC","AIR FREIGHT CLERK","AIR TRAFFIC CONTROLLER","AIR TRAFFIC SAFETY ELECTRONICS TECHNICIAN","AIRCRAFT DEPORT OPERATOR","AIRCRAFT ELECTRICIAN","AIRCRAFT ENGINE MECHANIC","AIRCRAFT FUELLING OPERATOR","AIRCRAFT PILOT","AIRCRAFT TECHNICIAN","AIRCRAFT TEST PILOT","AIRFRAME MECHANIC","AIRPORT CHECK-IN AGENT","AIRPORT DIRECTOR","ALL VEHICLES DRIVER","ALUMINIUM FABRICATOR","ANAESTHETIST","ANALYST","AQUACULTURE PRODUCTION MANAGER","AQUACULTURE REARING TECHNICIAN","ARABIC COFFEE MAKER","ARABIC FOOD COOK","ARABIC LANGUAGE TEACHER","ARCHITECT","ARCHITECTURAL TECHNICIAN","ARCHITECTURE DRAFTSPERSON","ARCHIVE CLERK","ARCHIVIST","AREA MANAGER","ARTIFICIAL FLOWER MAKER","ASPHALT ROOFER","ASPHALT SPREADER DRIVER","ASSISTANT ACCOUNTANT","ASSISTANT MANAGER","ASSISTANT MIDWIFE","ASSISTANT PROFESSOR","ASSISTANT TEACHER","ASSOCIATE VICE PRESIDENT","AUCTIONEER","AUDITING CLERK","AUDITOR","AUTO BODY REPAIRER","AUTO DEALER","AUTO ELECTRICIAN","AUTO MECHANIC","AUTO MECHANICS","BABYSITTER","BAKER","BAKERY SALES ASSISTANT","BANK NOTES COUNTING CLERK","BANK OFFICER","BANK TELLER","BANKER","BANKING CONSULTANT","BANKING OPERATIONS MANAGER","BARBER (HAIRDRESSER)","BARISTA","BARTENDER","BEAUTICIAN","BEEKEEPER","BEVERAGE MAKER","BICYCLE ASSEMBLER","BICYCLE MECHANIC","BIOCHEMIST","BIOLOGIST","BIRD BREEDER","BLACKSMITH","BLASTER","BLUE COLLOR WORKER","BOATMASTER","BOILER OPERATOR","BOOKBINDER","BOOKKEEPER","BOTANIST","BRANCH MANAGER","BRICK KILN OPERATOR","BRICKLAYER","BRICKLAYER ASSISTANT","BROADCASTING DIRECTOR","BROKERAGE CLERK","BUILDING ARCHITECT","BUILDING CARETAKER","BUILDING EXTERIOR CLEANER","BUILDING LABOURER","BUILDING SERVICES ENGINEER","BUILDING SURVEYOR","BULLDOZER DRIVER","BUS ATTENDANT","BUS DRIVER","BUS SUPERVISOR","BUSINESS SERVICE MANAGER","BUSINESSMAN/OWNER","BUTCHER","CABIN CREW","CABLE AND ROPE SPLICING MACHINE OPERATOR","CALL CENTER AGENT","CAMEL RIDER","CAMP BOSS","CANE FURNITURE MAKER","CANTILEVER CRANE OPERATOR","CAPTAIN","CAR WASHER","CARDIOLOGIST","CARGO SUPERVISOR","CARPENTER","CARPENTRY WORK SUPERVISOR","CARPET LAYER","CARTOONIST","CASH DESK CLERK","CASHIER","CASTING MACHINE OPERATOR","CATERING ASSISTANT","CATERING MANAGER","CEILING FIXER","CEO","CHAIRMAN OF THE BOARD","CHARTERED ACCOUNTANT","CHEF/COOK","CHEMICAL ANALYST","CHEMICAL ENGINEER","CHEMICAL ENGINEERING TECHNICIAN","CHEMICAL PROCESSING PLANT CONTROLLER","CHEMICAL PRODUCTS MACHINE OPERATOR","CHEMICAL TECHNICIAN","CHEMIST","CHIEF EXECUTIVE","CHIEF EXECUTIVE OFFICER","CHIEF FIRE OFFICER","CHILDCARE SERVICES MANAGER","CHIMNEY SWEEPER","CHIROPRACTOR","CHOREOGRAPHER","CINEMA MANAGER","CINEMATOGRAPHER","CIRCUS PERFORMER","CIVIL ENGINEER","CIVIL ENGINEER LABOURER","CIVIL REGISTRAR","CLEANER","CLEANING SUPERVISOR","CLERK","CLINIC MANAGER","CLOWN","CLUB DIRECTOR","CNC OPERATOR","COFFEE SHOP MANAGER","COLLEGE DEAN","COMMERCIAL SALES REPRESENTATIVE","COMMODITY BROKER","COMPLEMENTARY MEDICINE ASSOCIATE","COMPLIANCE OFFICER","COMPANY FORMATION AGENT","COMPOSER","COMPUTER ENGINEER","COMPUTER NETWORK ANALYST","COMPUTER NETWORK AND SYSTEMS TECHNICIAN","COMPUTER OPERATOR","COMPUTER PROGRAMMER","COMPUTER SYSTEMS MANAGER","CONCRETE MACHINE","CONCRETE MASON","CONFECTIONER","CONFERENCE SUPERVISOR","CONSTRUCTION CONTRACTOR","CONSTRUCTION MANAGER","CONSTRUCTION SAFETY OFFICER","CONSTRUCTION SUPERVISOR","CONSTRUCTION WORKER","CONSULTANT ENGINEER","CONTRACTS MANAGER","COOK","COPPERSMITH","CORPSE WASHER","COURT CLERK","CRANE OPERATOR","CRANE OPERATOR ASSISTANT","CREDIT ANALYST","CREDIT MANAGER","CREDIT OFFICER","CRITIC","CROP AND ANIMAL FARMER","CRYPTOCURRENCY TRADERS/EXCHANGERS","CURTAIN FITTER","CUSTOM AND BORDER INSPECTOR","CUSTOMER SERVICE CLERK","CUSTOMER SERVICE MANAGER","CUSTOMER SERVICE REPRESENTATIVE","CUSTOMS CLEARANCE AGENT","CUSTOMS CLEARING AGENT","CUSTOMS CLEARING CLERK","CUSTOMS REPRESENTATIVE","CYTOLOGIST","DAIRY PRODUCTS MAKER","DANCER","DATA ENTRY CLERK","DATA PROCESSING SUPERVISOR","DATABASE DESIGNER","DEALER PRECIOUS STONE AND METLES","DEBT COLLECTOR","DECK OFFICER","DECKHAND","DECORATIVE PAINTER","DECORATOR","DELIVERY BOY/STAFF","DEMOLITION LABOURER","DENTAL ASSISTANT","DENTAL SURGEON","DENTAL TECHNICIAN","DENTIST","DEPUTY DIRECTOR","DERMATOLOGIST","DIE MAKER","DIETICIAN","DIPLOMAT","DIRECTOR","DIRECTOR GENERAL","DISABLED CARE SPECIALIST","DIVER","DOCTOR","DOCUMENTATION IN CHARGE","DOCUMENTS CONTROLLER","DOMESTIC CLEANER","DOMESTIC HELPER","DOMESTIC HOUSEKEEPER","DOMESTIC WORKER","DOORMAN","DRAUGHTSMAN","DREDGER DRIVER","DRESSMAKER","DRILL OPERATOR","DRILLING SUPERVISOR","DRIVER","DRIVERS","DRIVING EXAMINER","DRIVING INSTRUCTOR","ECONOMIST","EDITOR IN CHIEF","EDUCATION AFFAIRS DIRECTOR","EDUCATION EXPERT","EDUCATION METHODS SPECIALIST","ELECTRICAL DRAFTSPERSON","ELECTRICAL ENGINEER","ELECTRICAL ENGINEER TECHNICIAN","ELECTRICAL EQUIPMENT ASSEMBLER","ELECTRICAL MECHANIC","ELECTRICAL POWERLINE INSTALLER","ELECTRICIAN","ELECTRICIAN ASSISTANT","ELECTRONIC DRAFTSPERSON","ELECTRONIC ENGINEER","ELECTRONIC EQUIPMENT ASSEMBLER","ELECTRONICS ENGINEERING TECHNICIAN","ELECTRONICS MECHANIC","ELEVATOR OPERATOR","EMBROIDER","EMERGENCY AMBULANCE DRIVER","EMPLOYMENT AGENT","ENGINEER","ENGINEER IT","ENGLISH LANGUAGE TEACHER","ENGRAVER","ENTREPRENEUR","ENVIRONMENT ENGINEER","ENVIRONMENTAL PROTECTION OFFICER","EVENT PLANNER","EXECUTIVE DIRECTOR","EXECUTIVE SECRETARY","EXHIBITION DESIGNER","EXPLICIT SERVICES","FABRICATOR","FACIAL THERAPIST","FACTORY HAND","FARM LABOURER","FARM MANAGER","FARMER","FASHION DESIGNER","FASHION MODEL","FAST FOOD MAKER","FIBRE WINDING MACHINE OPERATOR","FIBREGLASS MACHINE OPERATOR","FIELD CROP AND VEGETABLE GROWER","FILING CLERK","FINANCE MANAGER","FINANCE MANGER","FINANCIAL ACCOUNTING AFFAIRS DIRECTOR","FINANCIAL ADVISOR","FINANCIAL ANALYST","FINANCIAL AUDITOR","FINANCIAL OFFICER","FIRE FIGHTER","FIRE FIGHTER INSTRUCTOR","FIRE INVESTIGATOR","FISH COOK","FISH FILLETER","FISHERY LABOURER","FISHMONGER","FITTER","FLIGHT ATTENDANT","FLIGHT INSTRUCTOR","FLORIST","FOLLOW UP CLERK","FOLLOW UP MANAGER","FOOD AND BEVERAGE MANAGER","FOOD PROCESSING MACHINE OPERATOR","FOOD SERVICE COUNTER ATTENDANT","FOOD SERVICE SUPERVISOR","FOOTWEAR MACHINE OPERATOR","FOREIGN CURRENCY TRADER","FOREIGN FOOD COOK","FOREIGN GOVT SR. OFFICIALS","FOREIGN LANGUAGE TEACHER","FOREMAN","FORESTRY LABOURER","FORESTRY TECHNICIAN","FORKLIFT DRIVER","FORKLIFT OPERATOR","FREIGHT FORWARDER","FREIGHT HANDLER","FRUIT AND VEGETABLE PRESERVER","FUMIGATOR","FUND MANAGER","FURNITURE UPHOLSTERER","GARBAGE TRUCK DRIVER","GARDEN LABOURER","GARDENER","GARMENT AND PATTERN CUTTER","GAS FITTER","GAS STATION ATTENDANT","GENERAL CLEANER","GENERAL MANAGER","GENERAL MEDICAL PRACTITIONER","GEOGRAPHER","GEOLOGIST","GEOLOGY TECHNICIAN","GLASS AND CERAMIC PLANT OPERATOR","GLASS FINISHER","GLASS MAKER","GLAZIER","GOLD SMITH","GOVERNMENT LICENSING OFFICIAL","GOVERNMENT MINISTERS","GOVERNMENT TAX OFFICIAL","GOVT JUDICIALS","GOVT OFFICIALS, LEGISLATIVES, ADMINISTRATORS","GRAPHIC AND MULTIMEDIA DESIGNER","GRAPHICS DESIGNER","GRAVE DIGGER","GROCER","GUNSMITH","GYNECOLOGIST","HAIRDRESSER","HAIRSTYLIST","HAND PRESSER","HANDICRAFT KNITTER","HAPPINESS CONSULTANT","HARVESTING MACHINE DRIVER","HEAD CHEF","HEAD WAITER","HEALTH AFFAIRS DIRECTOR","HEALTH AND SAFETY ENGINEER","HEALTH CARE ASSISTANT","HEALTH SERVICES MANAGER","HEAVY TRUCK DRIVER","HELICOPTER PILOT","HELPER","HENNA APPLICATOR","HOLLY QURAN READER","HORSE TRAINER","HORTICULTURIST","HOSPITAL ADMISSIONS CLERK","HOSPITAL CLEANER","HOSPITAL DIRECTOR","HOSPITAL PORTER","HOTEL CLEANER","HOTEL CONCIERGE","HOTEL MANAGER","HOTEL RECEPTIONIST","HOUSE BUILDER","HOUSE KEEPER","HOUSE WIFE","HOUSEKEEPING SUPERVISOR","HR OFFICER","HSE OFFICER","HUMAN RESOURCE COORDINATOR","HUMAN RESOURCE MANAGER","HUNTER","HUNTING DOGS TRAINER","HUNTING EAGLES TRAINER","ICT OPERATIONS TECHNICIAN","ICT SALES REPRESENTATIVE","ICT SECURITY SPECIALIST","ICT SERVICE MANAGER","ICT TRAINER","ICT USER SUPPORT TECHNICIAN","IMAM/PRIEST","IMAN","INDUSTRIAL ELECTRICIAN","INDUSTRIAL ENGINEER","INDUSTRIAL MAINTENANCE MECHANIC","INDUSTRIAL MAINTENANCE SUPERVISOR","INDUSTRIAL RELATIONS MANAGER","INFORMATION CLERK","INFORMATION TECHNOLOGY MANAGER","INLAND FISHER","INSTRUMENTALIST","INSULATION WORKER","INSURANCE AGENT","INSURANCE CLAIMS CLERK","INSURANCE MANAGER","INTERIOR DESIGNER","INTERNAL AUDITING MANAGER","INTERNATIONAL ORGANISATION SR. MANAGEMENT","INTERPRETER","INVESTMENT MANAGER","IT CONSULTANT","IT PROFESSIONAL","JEWELLER","JOCKEY","JOINER","JOURNALIST","JUDGE","JUNIOR OFFICER","KEY MAKER","KINDERGARTEN DIRECTOR","KINDERGARTEN TEACHER","KITCHEN HELPER","KNITTING MACHINE OPERATOR","LAB TECHNICIAN","LABOR COUNSELLOR","LABORER","LABOUR SUPERVISOR","LAND SURVEYOR","LANDSCAPE ARCHITECT","LAUNDERER","LAUNDRY MACHINE OPERATOR","LAWYER","LEATHER PREPARING MACHINE","LECTURER","LEGAL ADVISOR","LEGAL ASSISTANT","LEGAL DIRECTOR","LEGAL SECRETARY","LENS MAKER","LIBRARIAN","LIBRARY CLERK","LIBRARY DIRECTOR","LIFE GUARD","LIFE SCIENCE TECHNICIAN","LIGHT VEHICLE DRIVER","LINGUIST","LITERARY WRITER","LIVESTOCK AND DAIRY FARMER","LIVESTOCK FARM LABOURER","LIVESTOCK FARM MANAGER","LOADING AND UNLOADING WORKER","LOCKSMITH","LOGISTIC ASSISTANT","LOGISTIC COORDINATOR","LOOM MACHINE OPERATOR","LUGGAGE MACHINE OPERATOR","MACHINE ASSEMBLER","MACHINE TOOL OPERATOR","MAID","MAILING CLERK","MAKE UP ARTIST","MANAGEMENT CONSULTANT","MANAGEMENT STAFF","MANAGER","MANICURIST","MANUFACTURING MANAGER","MANUFACTURING SUPERVISOR","MARINA ATTENDANT","MARINE ENGINEER","MARINE OFFICER","MARINE TRAFFIC CONTROLLER","MARKETING EXECUTIVE","MARKETING MANAGER","MARKETING SPECIALIST","MASON","MASSEUR","MATERIAL ENGINEER","MATHEMATICIAN","MECHANIC","MECHANIC ASSISTANT","MECHANICAL DRAFTSPERSON","MECHANICAL ENGINEER","MECHANICAL ENGINEERING TECHNICIAN","MEDIA PRESENTER","MEDICAL ASSISTANT","MEDICAL IMAGING TECHNICIAN","MEDICAL LABORATORY ASSISTANT","MEDICAL LABORATORY TECHNICIAN","MEDICAL RECORDS CLERK","MEDICAL SALES REPRESENTATIVE","MEDICAL SECRETARY","MESSENGER","METAL FURNACE OPERATOR","METAL MACHINE PROCESSING OPERATOR","METAL PLATING OPERATOR","METAL PRODUCTION PROCESS CONTROLLER","METER READER","MIDWIFE","MILITARY","MINER","MINING ENGINEER","MINING LABOURER","MINING TECHNICIAN","MIXED CROP GROWER","MOBILE TECHNICIAN","MODEL MAKER","MORTGAGE AGENT","MOTORCYCLIST","MOULDER AND COREMAKER","MOULDING MAKER","MOVIE PRODUCER","MULTIMEDIA DEVELOPER","MUSEUM CURATOR","MUSEUM DIRECTOR","MUSIC INSTRUCTOR","MUSICAL INSTRUMENT MAKER","MUSICIAN","NANNY","NEUROLOGIST","NOTARY","NUCLEAR PHYSICIST","NUCLEAR POWER ENGINEER","NUCLEAR REACTOR OPERATOR","NUCLEAR TECHNICIAN","NURSE","NURSE ASSISTANT","NURSEMAID","NURSERY SUPERVISOR","OCCUPATIONAL HEALTH AND SAFETY ADVISER","OCCUPATIONAL HEALTH AND SAFETY INSPECTOR","OFFICE BOY","OFFICE CLEANER","OFFICE CLERK","OFFICE GIRL","OFFICE MANAGER","OFFICE SUPERVISOR","OFFICER","OIL AND GAS PRODUCTION MANAGER","OILER","OPERATING THEATRE TECHNICIAN","OPERATIONS MANAGER","OPERATOR","OPTICIAN","OPTOMETRIST","PACKAGING MACHINE OPERATOR","PACKER","PAINTER","PAINTER ASSISTANT","PAPER PRODUCTS MACHINE OPERATOR","PAPER PULP MACHINE OPERATOR","PARAMEDICAL PRACTITIONER","PASTRY MAKER","PATHOLOGIST","PERSONAL COMPANION","PERSONAL TRAINER","PERSONNEL MANAGER","PERSONNEL OFFICER","PESTICIDES CONTROLLER","PETROL FILLER","PETROLEUM AND NATURAL GAS REFINING PLANT OPERATOR","PETROLEUM ENGINEER","PHARMACIST","PHARMACIST ASSISTANT","PHARMACIST TECHNICIAN","PHARMACOLOGIST","PHOTOGRAPHER","PHOTOGRAPHIC PRODUCT MACHINE OPERATOR","PHYSICIAN","PHYSICIST","PHYSICS TECHNICIAN","PHYSIOTHERAPIST","PILOT/AEROSPACE TRAINER","PIPE FITTER","PIPELINE PUMPS OPERATOR","PISCICULTURE SPECIALIST","PLANT MANAGER","PLASTERER","PLASTIC PRODUCTS MACHINE OPERATOR","PLASTIC SURGEON","PLATE PRINTING MAKER","PLUMBER","PLUMBER ASSISTANT","POLICE","POLICE DETECTIVE","POLICE INSPECTOR","POLICE OFFICER","POLICY AND PLANNING MANAGER","POLITICAL ADVISOR","POLITICAL SCIENTIST","PORTER","POSTAL CLERK","POSTMAN","POTTER","POULTRY FARM MANAGER","POULTRY PRODUCER","POWER PRODUCTION PLANT OPERATOR","PRECISION INSTRUMENT MAKER","PRIEST","PRIMARY ARABIC TEACHER","PRIMARY SCHOOL TEACHER","PRINTER","PRINTING PRESS MACHINE OPERATOR","PRISON GUARD","PRIVATE CAR DRIVER","PRIVATE COACH","PRIVATE NURSE","PRIVATE REPRESENTATIVE","PRIVATE TUTOR","PROCUREMENT OFFICER","PROCUREMENT SPECIALIST","PRODUCT QUALITY CONTROLLER","PRODUCTION CLERK","PRODUCTION ENGINEER","PRODUCTION MANAGER","PROFESSIONAL ATHLETE","PROFESSOR","PROJECT ENGINEER","PROJECT MANAGER","PROJECTIONIST","PROMOTION MANAGER","PROPERTY APPRAISER","PROPERTY AGENT","PROSTHESIS TECHNICIAN","PSYCHOANALYST","PSYCHOLOGIST","PUBLIC RELATION OFFICER","PUBLIC RELATIONS CLERK","PUBLIC RELATIONS MANAGER","PUBLIC RELATIONS OFFICER","PUBLICATION DESIGNER","PUPPET ARTIST","PURCHASE OFFICER","PURCHASING MANAGER","PURCHASING REPRESENTATIVE","PURCHASING SUPERVISOR","QUALITY ENGINEER","QUALITY SERVICE MANAGER","QUANTITY SURVEYOR","QUARRY SUPERVISOR","RADIATION PROTECTION TECHNICIAN","RADIOLOGIST","RAILWAY STATION MANAGER","REAL ESTATE AGENT","REAL ESTATE PROPERTY MANAGER","RECEPTIONIST","REFRIGERATION MECHANIC","REFUSE COLLECTOR","RELATIONSHIP MANAGER","RESEARCH AND DEVELOPMENT MANAGER","RESEARCH STUDIES MANAGER","RESERVATION OFFICER","RESTAURANT ASSISTANT","RESTAURANT MANAGER","RETAIL CATEGORY MANAGER","RETAIL OPERATIONS MANAGER","RETAIL SALES ASSISTANT","RETAIL STORE MANAGER","RETIRED","RIGGER","ROAD MAINTENANCE LABOURER","RUBBER MACHINE OPERATOR","SACRISTAN","SADDLER","SALES ASSISTANT","SALES DEMONSTRATOR","SALES EXECUTIVE","SALES MANAGER","SALES REPRESENTATIVE","SALES SUPERVISOR","SCAFFOLDER","SCAFFOLDER SUPERVISOR","SCHOOL ATTENDANCE CLERK","SCHOOL DEPARTMENT HEAD","SCHOOL DEPUTY PRINCIPAL","SCHOOL HEALTH NURSE","SCHOOL PRINCIPAL","SCRAP MERCHANT","SCULPTOR","SEA FISHER","SEAMAN","SEAMSTRESS","SECONDARY EDUCATION TEACHER","SECRETARY","SECURITY GUARD","SENIOR GOVERNMENT OFFICIAL","SENIOR PROJECT QUANTITY SURVEYOR","SERVICE STATION CASHIER","SERVICE STATION MANAGER","SEWAGE PIPELAYER","SEWERAGE CLEANER","SEWING MACHINE OPERATOR","SHEET METAL WORKER","SHEPHERD","SHIP CAPTAIN","SHIP ELECTRICIAN","SHIP ENGINEER","SHIPPING AGENT","SHIPPING SERVICES CLERK","SHIPWRIGHT","SHOE POLISHER","SHOEMAKER","SHOP SUPERVISOR","SHOVEL OPERATION DRIVER","SIGNAL OPERATOR","SITE SUPERVISOR","SKILLED FORESTER","SLAUGHTERER","SOCIAL SERVICES SPECIALIST","SOCIAL WELFARE MANAGER","SOCIAL WORKER","SOCIOLOGIST","SOFTWARE DEVELOPER","SOFTWARE ENGINEER","SOUND TECHNICIAN","SOURCING LEADER","SOUS CHEF","SPA THERAPIST","SPECIAL EDUCATION NEEDS TEACHER","SPECIALIST PHYSICIAN","SPEECH THERAPIST","SPORTS REFEREE","SPORTS TRAINER","SPOUSE VISA","SPRAY PAINTER","STABLE GROOM","STAFF CLERK","STALL AND MARKET ASSISTANT","STALL AND MARKET SALESPERSON","STATISTICAL ASSISTANT","STATISTICIAN","STEAM ROLLER DRIVER","STEEL FIXER","STEVEDORE","STEWARD/STEWARDESS","STOCK BROKER","STOCK CLERK","STOCK FILLER","STONE CARVER","STONE POLISHER","STONE PROCESSING PLANT OPERATOR","STONEMASON","STORE KEEPER","STOREKEEPER","STREAM PRESS MACHINE OPERATOR","STREET SWEEPER","STREET VENDOR","STUDENT","STUDENT AFFAIRS SUPERVISOR","SUPERMARKET SUPERVISOR","SUPERVISOR","SUPPLY AND DISTRIBUTION MANAGER","SUPPLY CHAIN ANALYST","SUPPLY CHAIN MANAGER","SURGEON","SURVEY AND MARKET RESEARCH INTERVIEWER","SURVEY ENGINEER","SWITCH BOARD OPERATOR","SYSTEM ADMINISTRATOR","SYSTEMS ANALYST","TABACCO PRODUCTS MAKER","TAILOR","TANNER","TAX ADVISOR","TAXI DRIVER","TEACHER","TECHNICAL MANAGER","TECHNICIAN","TELECOM TECHNICIAN","TELECOMMUNICATION ASSISTANT","TELECOMMUNICATION ENGINEER","TELECOMMUNICATION LINE INSTALLER","TELECOMMUNICATIONS ENGINEERING TECHNICIAN","TELECOMMUNICATIONS EQUIPMENT REPAIRER","TELEPHONE SWITCHBOARD OPERATOR","TELEVISION DIRECTOR","TEXTILE MACHINE OPERATOR","THEATRE DIRECTOR","TICKET COLLECTOR","TICKET CONDUCTOR","TICKETING CLERK","TILE LAYER","TILE LAYER ASSISTANT","TILE POLISHER","TIME KEEPER","TOOL GRINDER AND SHARPENER","TOUR GUIDE","TOURIST","TOURIST GUIDE","TOURIST INFORMATION CLERK","TOURIST INFORMATION MANAGER","TRACTOR DRIVER","TRAFFIC PLANNER","TRAIN DRIVER","TRAIN FITTER","TRAINER","TRAINING MANAGER","TRANSLATOR","TRANSPORT CLERK","TRANSPORTATION MANAGER","TRAVEL AGENCY MANAGER","TRAVEL AGENT","TRAVEL SERVICES CLERK","TRAVEL TICKETS CLERK","TREE AND SHRUB CROP GROWER","TRENCH DIGGER OPERATOR","TRUSTEE","TUG MASTER","TURBINE MECHANIC","TURBINE OPERATION SUPERVISOR","TURBINE OPERATOR","TURNER","TYPESETTER","TYPIST","TYRE REPAIRER","UNDERWATER DIVER","UNEMPLOYED","UNEMPLOYED - HUSBAND SPONSOR","UNEMPLOYED - WIFE SPONSOR","UNIVERSITY PRESIDENT","UNIVERSITY PROFESSOR","UNIVERSITY VICE-PRESIDENT","UPHOLSTERER ASSISTANT","URBAN PLANNER","VEHICLE ASSEMBLER","VEHICLE CLEANER","VEHICLE MAINTENANCE SUPERVISOR","VEHICLE MECHANIC","VEHICLE RENTAL AGENT","VEHICLE SALES REPRESENTATIVE","VEHICLE UPHOLSTERER","VEHICLES MECHANIC ASSISTANT","VENEREOLOGIST","VETERINARIAN","VETERINARY TECHNICIAN","VICE PRESIDENT OF THE UAE","VISITORS GUIDE","VOCATIONAL TEACHER","VOCATIONAL TRAINER","WAGES CLERK","WAITER","WAITER/WAITRESS/SUPPLIER","WAREHOUSE INCHARGE","WAREHOUSE MANAGER","WAREHOUSE WORKER","WATCH MAN","WATCHMAKER","WATER TREATMENT PLANT OPERATOR","WEATHER FORECASTER","WEAVER","WEB DEVELOPER","WEB TECHNICIAN","WEIGHTING CLERK","WELDER","WELDER ASSISTANT","WELDING SUPERVISOR","WHOLESALE MANAGER","WINDOW CLEANER","WOOD PROCESSING PLANT OPERATOR","WOOD TREATER","WOOD TURNER","YARN DYEING MACHINE OPERATOR","YOUTH SPORT DIRECTOR","ZOOLOGIST","PARTNER","OTHER"],NT=e=>{let{formData:t,onInputChange:r,onFieldBlur:n,errors:a,touched:i}=e;return(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profession"}),(0,Zt.jsxs)("select",{className:"input",value:t.profession,onChange:e=>r("profession",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Profession"}),QO.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:"input "+(a.firstName?"border-red-500":""),value:t.firstName,onChange:e=>r("firstName",e.target.value),onBlur:()=>n("firstName")}),a.firstName&&i.firstName&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:a.firstName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:"input",value:t.lastName,onChange:e=>r("lastName",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input",value:t.alias,onChange:e=>r("alias",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date of Birth ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"date",className:"input "+(a.dateOfBirth?"border-red-500":""),value:t.dateOfBirth,onChange:e=>r("dateOfBirth",e.target.value),onBlur:()=>n("dateOfBirth")}),a.dateOfBirth&&i.dateOfBirth&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:a.dateOfBirth})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nationality ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.nationality,onChange:e=>r("nationality",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Residency Status ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.residencyStatus,onChange:e=>r("residencyStatus",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Residency Status"}),tT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ID Type ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.idType,onChange:e=>r("idType",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select ID Type"}),ZO.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ID Number ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:"input",value:t.idNumber,onChange:e=>r("idNumber",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.issueDate,onChange:e=>r("issueDate",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.expiryDate,onChange:e=>r("expiryDate",e.target.value)})]}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"checkbox",id:"dual",checked:t.isDualNationality,onChange:e=>r("isDualNationality",e.target.checked)}),(0,Zt.jsx)("label",{htmlFor:"dual",children:"Is Dual Nationality?"})]}),t.isDualNationality&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dual Nationality"}),(0,Zt.jsxs)("select",{className:"input",value:t.dualNationality,onChange:e=>r("dualNationality",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Dual Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Number"}),(0,Zt.jsx)("input",{className:"input",value:t.dualPassportNumber,onChange:e=>r("dualPassportNumber",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Issue Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.dualPassportIssueDate,onChange:e=>r("dualPassportIssueDate",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Expiry Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.dualPassportExpiryDate,onChange:e=>r("dualPassportExpiryDate",e.target.value)})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:"input",value:t.address,onChange:e=>r("address",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Occupation ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.occupation,onChange:e=>r("occupation",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Occupation"}),wT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Source of Wealth ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.sourceOfWealth,onChange:e=>r("sourceOfWealth",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Wealth"}),aT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["PEP ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.pep,onChange:e=>r("pep",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select PEP Status"}),eT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Country of Birth ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.countryOfBirth,onChange:e=>r("countryOfBirth",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Country of Birth"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Source of Funds ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.sourceOfFunds,onChange:e=>r("sourceOfFunds",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Funds"}),iT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PO Box"}),(0,Zt.jsx)("input",{className:"input",value:t.poBox,onChange:e=>r("poBox",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.gender,onChange:e=>r("gender",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Gender"}),nT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employer"}),(0,Zt.jsx)("input",{className:"input",value:t.employer,onChange:e=>r("employer",e.target.value)})]})]})},ST=e=>{let{formData:t,onInputChange:r}=e;const n=(e,n,a,i)=>{const s=t[e]||[];return(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i," ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:s.map((n,a)=>(0,Zt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[n,(0,Zt.jsx)("button",{type:"button",onClick:()=>((e,n)=>{const a=t[e]||[];r(e,a.filter(e=>e!==n))})(e,n),className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:text-blue-600 hover:bg-blue-200",children:"\xd7"})]},a))}),(0,Zt.jsxs)("select",{className:"input",value:"",onChange:n=>{n.target.value&&(((e,n)=>{const a=t[e]||[];a.includes(n)||r(e,[...a,n])})(e,n.target.value),n.target.value="")},children:[(0,Zt.jsx)("option",{value:"",children:a}),n.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]})};return(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,Zt.jsx)("div",{children:n("businessActivity",oT,"Select Business Activity","Business Activity")}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Legal Name ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:"input",value:t.legalName,onChange:e=>r("legalName",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input",value:t.alias,onChange:e=>r("alias",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date of Incorporation ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.dateOfIncorporation,onChange:e=>r("dateOfIncorporation",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Country of Incorporation ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.countryOfIncorporation,onChange:e=>r("countryOfIncorporation",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Country of Incorporation"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["License Type ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.licenseType,onChange:e=>r("licenseType",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select License Type"}),lT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["License Number ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:"input",value:t.licenseNumber,onChange:e=>r("licenseNumber",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.licenseIssueDate,onChange:e=>r("licenseIssueDate",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.licenseExpiryDate,onChange:e=>r("licenseExpiryDate",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registered Office Address"}),(0,Zt.jsx)("input",{className:"input",value:t.registeredOfficeAddress,onChange:e=>r("registeredOfficeAddress",e.target.value)})]}),(0,Zt.jsx)("div",{children:n("countriesSourceOfFunds",oO.map(e=>e.name),"Select Countries Source of Funds","Countries Source of Funds")}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Management Company"}),(0,Zt.jsx)("input",{className:"input",value:t.managementCompany,onChange:e=>r("managementCompany",e.target.value)})]}),(0,Zt.jsx)("div",{children:n("countriesOfOperation",oO.map(e=>e.name),"Select Countries of Operation","Countries of Operation")}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Jurisdiction ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.jurisdiction,onChange:e=>r("jurisdiction",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Jurisdiction"}),uT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Source of Funds ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.sourceOfFunds,onChange:e=>r("sourceOfFunds",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Funds"}),iT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Residency Status ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.residencyStatus,onChange:e=>r("residencyStatus",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Residency Status"}),tT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Licensing Authority / Other Details"}),(0,Zt.jsx)("input",{className:"input",value:t.licensingAuthority,onChange:e=>r("licensingAuthority",e.target.value),placeholder:"Enter licensing authority or other details"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TRN"}),(0,Zt.jsx)("input",{className:"input",value:t.trn,onChange:e=>r("trn",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["License Category ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input",value:t.licenseCategory,onChange:e=>r("licenseCategory",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select License Category"}),cT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Expiry Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:t.addressExpiryDate,onChange:e=>r("addressExpiryDate",e.target.value)})]})]})},_T=e=>{if(!e)return{countryCode:"+971",phone:""};const t=oO.map(e=>e.phone);let r="+971",n=e;for(const a of t)if(e.startsWith(a)){r=a,n=e.substring(a.length);break}return{countryCode:r,phone:n}},jT=e=>{var r,n,a;let{shareholders:i=[],onShareholdersChange:s,isEdit:o=!1,onDirectorCreate:l=null,onUboCreate:c=null}=e;const[u,d]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),[g,y]=(0,t.useState)("Natural Person"),[v,b]=(0,t.useState)({}),[x,w]=(0,t.useState)({}),[N,S]=(0,t.useState)({type:"Natural Person",fullName:"",alias:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",idType:"",idNumber:"",idIssueDate:"",idExpiryDate:"",isDualNationality:!1,dualNationalityCountry:"",dualPassportNumber:"",dualPassportIssueDate:"",dualPassportExpiryDate:"",countryCode:"+971",phone:"",email:"",address:"",sourceOfFunds:"",sourceOfWealth:"",occupation:"",expectedIncome:"",pep:"",shareholding:"",dualNationality:"",isDirector:!1,isUbo:!1}),_=e=>{w(t=>({...t,[e]:!0}));const t=((e,t)=>{let r="";switch(e){case"fullName":t&&t.length<2&&(r="Name must be at least 2 characters long");break;case"legalName":t&&t.length<2&&(r="Legal name must be at least 2 characters long");break;case"alias":t&&t.length<2&&(r="Alias must be at least 2 characters long");break;case"email":t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&(r="Please enter a valid email address");break;case"phone":t&&t.length<7&&(r="Phone number must be at least 7 digits");break;case"dateOfBirth":if(t){const e=new Date(t),n=new Date;e>n&&(r="Date of birth cannot be in the future"),n.getFullYear()-e.getFullYear()>120&&(r="Date of birth seems invalid")}break;case"dateOfIncorporation":t&&new Date(t)>new Date&&(r="Date of incorporation cannot be in the future");break;case"licenseIssueDate":t&&new Date(t)>new Date&&(r="Issue date cannot be in the future");break;case"shareholding":if(t){const e=parseFloat(t);(isNaN(e)||e<0||e>100)&&(r="Shareholding must be between 0 and 100")}break;case"expectedIncome":t&&parseFloat(t)<0&&(r="Expected income cannot be negative");break;case"trustName":t&&t.length<2&&(r="Trust name must be at least 2 characters long");break;case"dualNationalityCountry":case"dualPassportNumber":case"dualPassportIssueDate":case"dualPassportExpiryDate":if(N.isDualNationality)if(t){if(("dualPassportIssueDate"===e||"dualPassportExpiryDate"===e)&&t){const n=new Date(t),a=new Date;a.setHours(0,0,0,0),n.setHours(0,0,0,0),"dualPassportIssueDate"===e&&n>a&&(r="Issue date cannot be in the future"),"dualPassportExpiryDate"===e&&n<a&&(r="Expiry date cannot be in the past")}}else r="This field is required"}return r})(e,N[e]);b(r=>({...r,[e]:t}))},j=(e,t)=>{S(r=>({...r,[e]:t})),v[e]&&b(t=>({...t,[e]:""}))};return(0,Zt.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,Zt.jsxs)("button",{type:"button",onClick:()=>d(!u),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-t-lg flex justify-between items-center",children:[(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:"Shareholder Details"}),(0,Zt.jsx)("svg",{className:"w-5 h-5 text-gray-500 transform transition-transform "+(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&(0,Zt.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[i.length>0&&(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h4",{className:"font-medium mb-4 text-gray-900",children:"Shareholders"}),(0,Zt.jsx)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:(0,Zt.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Zt.jsx)("span",{className:"font-medium",children:"Total Shareholding:"})," ",i.reduce((e,t)=>e+(parseFloat(t.shareholding)||0),0).toFixed(2),"%"]})}),(0,Zt.jsx)("div",{className:"space-y-3",children:i.map((e,t)=>(0,Zt.jsxs)("div",{className:"p-3 bg-gray-50 rounded border",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Zt.jsx)("span",{className:"font-medium",children:e.fullName||e.legalName||e.trustName}),(0,Zt.jsxs)("div",{className:"flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>(async e=>{const t=i[e];if(console.log("\ud83d\udd0d Editing shareholder:",t),t.id)try{const{success:r,data:n,error:a}=await jO.getShareholderById(t.id);if(r&&n){console.log("\ud83d\udd0d Fresh shareholder data from database:",n);const{countryCode:r,phone:a}=_T(n.phone||"");let i={...n};if("Legal Entities"===n.type||"Legal Entities"===n.entity_type){if("string"===typeof i.businessActivity&&i.businessActivity)try{i.businessActivity=JSON.parse(i.businessActivity)}catch(EM){i.businessActivity=i.businessActivity?[i.businessActivity]:[]}else Array.isArray(i.businessActivity)||(i.businessActivity=[]);if("string"===typeof i.countriesOfOperation&&i.countriesOfOperation)try{i.countriesOfOperation=JSON.parse(i.countriesOfOperation)}catch(EM){i.countriesOfOperation=i.countriesOfOperation?[i.countriesOfOperation]:[]}else Array.isArray(i.countriesOfOperation)||(i.countriesOfOperation=[]);if("string"===typeof i.countriesSourceOfFunds&&i.countriesSourceOfFunds)try{i.countriesSourceOfFunds=JSON.parse(i.countriesSourceOfFunds)}catch(EM){i.countriesSourceOfFunds=i.countriesSourceOfFunds?[i.countriesSourceOfFunds]:[]}else Array.isArray(i.countriesSourceOfFunds)||(i.countriesSourceOfFunds=[])}const s={...i,countryCode:r||"+971",phone:a||"",type:n.type||t.type||"Natural Person"};console.log("\ud83d\udd0d Processed shareholder data:",s),y(n.type||t.type||"Natural Person"),S(s),p(e),console.log("\ud83d\udd0d Set shareholderType:",n.type||t.type||"Natural Person"),console.log("\ud83d\udd0d Set currentShareholder:",s)}else{console.error("\ud83d\udd0d Failed to fetch fresh shareholder data:",a);const{countryCode:r,phone:n}=_T(t.phone||"");let i={...t};if("Legal Entities"===t.type||"Legal Entities"===t.entity_type){if("string"===typeof i.businessActivity&&i.businessActivity)try{i.businessActivity=JSON.parse(i.businessActivity)}catch(EM){i.businessActivity=i.businessActivity?[i.businessActivity]:[]}else Array.isArray(i.businessActivity)||(i.businessActivity=[]);if("string"===typeof i.countriesOfOperation&&i.countriesOfOperation)try{i.countriesOfOperation=JSON.parse(i.countriesOfOperation)}catch(EM){i.countriesOfOperation=i.countriesOfOperation?[i.countriesOfOperation]:[]}else Array.isArray(i.countriesOfOperation)||(i.countriesOfOperation=[]);if("string"===typeof i.countriesSourceOfFunds&&i.countriesSourceOfFunds)try{i.countriesSourceOfFunds=JSON.parse(i.countriesSourceOfFunds)}catch(EM){i.countriesSourceOfFunds=i.countriesSourceOfFunds?[i.countriesSourceOfFunds]:[]}else Array.isArray(i.countriesSourceOfFunds)||(i.countriesSourceOfFunds=[])}const s={...i,countryCode:r||"+971",phone:n||"",type:t.type||"Natural Person"};y(t.type||"Natural Person"),S(s),p(e)}}catch(r){console.error("\ud83d\udd0d Error fetching shareholder data:",r);const{countryCode:n,phone:a}=_T(t.phone||"");let i={...t};if("Legal Entities"===t.type||"Legal Entities"===t.entity_type){if("string"===typeof i.businessActivity&&i.businessActivity)try{i.businessActivity=JSON.parse(i.businessActivity)}catch(EM){i.businessActivity=i.businessActivity?[i.businessActivity]:[]}else Array.isArray(i.businessActivity)||(i.businessActivity=[]);if("string"===typeof i.countriesOfOperation&&i.countriesOfOperation)try{i.countriesOfOperation=JSON.parse(i.countriesOfOperation)}catch(EM){i.countriesOfOperation=i.countriesOfOperation?[i.countriesOfOperation]:[]}else Array.isArray(i.countriesOfOperation)||(i.countriesOfOperation=[]);if("string"===typeof i.countriesSourceOfFunds&&i.countriesSourceOfFunds)try{i.countriesSourceOfFunds=JSON.parse(i.countriesSourceOfFunds)}catch(EM){i.countriesSourceOfFunds=i.countriesSourceOfFunds?[i.countriesSourceOfFunds]:[]}else Array.isArray(i.countriesSourceOfFunds)||(i.countriesSourceOfFunds=[])}const s={...i,countryCode:n||"+971",phone:a||"",type:t.type||"Natural Person"};y(t.type||"Natural Person"),S(s),p(e)}else{console.log("\ud83d\udd0d Editing new shareholder (no ID yet):",t);const{countryCode:r,phone:n}=_T(t.phone||"");let a={...t};if("Legal Entities"===t.type||"Legal Entities"===t.entity_type){if("string"===typeof a.businessActivity&&a.businessActivity)try{a.businessActivity=JSON.parse(a.businessActivity)}catch(EM){a.businessActivity=a.businessActivity?[a.businessActivity]:[]}else Array.isArray(a.businessActivity)||(a.businessActivity=[]);if("string"===typeof a.countriesOfOperation&&a.countriesOfOperation)try{a.countriesOfOperation=JSON.parse(a.countriesOfOperation)}catch(EM){a.countriesOfOperation=a.countriesOfOperation?[a.countriesOfOperation]:[]}else Array.isArray(a.countriesOfOperation)||(a.countriesOfOperation=[]);if("string"===typeof a.countriesSourceOfFunds&&a.countriesSourceOfFunds)try{a.countriesSourceOfFunds=JSON.parse(a.countriesSourceOfFunds)}catch(EM){a.countriesSourceOfFunds=a.countriesSourceOfFunds?[a.countriesSourceOfFunds]:[]}else Array.isArray(a.countriesSourceOfFunds)||(a.countriesSourceOfFunds=[])}const i={...a,countryCode:r||"+971",phone:n||"",type:t.type||"Natural Person"};console.log("\ud83d\udd0d Processed new shareholder data:",i),y(t.type||"Natural Person"),S(i),p(e),console.log("\ud83d\udd0d Set shareholderType for new shareholder:",t.type||"Natural Person"),console.log("\ud83d\udd0d Set currentShareholder for new shareholder:",i)}})(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>(async e=>{const t=i[e];if(console.log("\ud83d\uddd1\ufe0f Removing shareholder:",t),t.id)try{const{success:r,error:n}=await jO.deleteShareholderById(t.id);if(r){const t=i.filter((t,r)=>r!==e);s(t),console.log("\u2705 Shareholder removed from database and UI")}else console.error("\u274c Failed to delete shareholder from database:",n),alert(`Failed to remove shareholder: ${n||"Unknown error"}`)}catch(r){console.error("\u274c Error during shareholder removal:",r),alert(`Error removing shareholder: ${r.message||"Unknown error"}`)}else{console.log("\ud83d\uddd1\ufe0f Removing new shareholder (no ID yet):",t);const r=i.filter((t,r)=>r!==e);s(r),console.log("\u2705 New shareholder removed from UI")}})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Type: ",e.type]}),e.shareholding&&(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Shareholding: ",e.shareholding,"%"]})]},t))})]}),o&&(0,Zt.jsxs)("div",{className:"mb-6",children:[0===i.length&&(0,Zt.jsx)("p",{className:"text-gray-700 text-md font-medium mb-3 italic",children:"No Shareholders have been added yet"}),(0,Zt.jsx)("div",{className:"flex space-x-2",children:(0,Zt.jsx)("button",{type:"button",onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add New Shareholder"})})]}),(!o||h||null!==m)&&(0,Zt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg "+(null!==m?"border-blue-300 bg-blue-50":"border-gray-200"),children:[(0,Zt.jsx)("h4",{className:"font-medium mb-4 "+(null!==m?"text-blue-700":"text-gray-900"),children:null!==m?`Edit Shareholder: ${(null===(r=i[m])||void 0===r?void 0:r.fullName)||(null===(n=i[m])||void 0===n?void 0:n.legalName)||(null===(a=i[m])||void 0===a?void 0:a.trustName)}`:"Add New Shareholder"}),(0,Zt.jsx)("div",{className:"w-full mb-4",children:(0,Zt.jsx)("select",{className:"input w-full",value:g,onChange:e=>y(e.target.value),children:dT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))})}),"Natural Person"===g&&(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,Zt.jsx)("input",{className:"input "+(v.fullName&&x.fullName?"border-red-500":""),value:N.fullName,onChange:e=>j("fullName",e.target.value),onBlur:()=>_("fullName")}),v.fullName&&x.fullName&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.fullName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input "+(v.alias&&x.alias?"border-red-500":""),value:N.alias,onChange:e=>j("alias",e.target.value),onBlur:()=>_("alias")}),v.alias&&x.alias&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.alias})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country of Residence"}),(0,Zt.jsxs)("select",{className:"input",value:N.countryOfResidence,onChange:e=>S(t=>({...t,countryOfResidence:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Country of Residence"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),(0,Zt.jsxs)("select",{className:"input",value:N.nationality,onChange:e=>S(t=>({...t,nationality:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,Zt.jsx)("input",{type:"date",className:"input "+(v.dateOfBirth&&x.dateOfBirth?"border-red-500":""),value:N.dateOfBirth,onChange:e=>j("dateOfBirth",e.target.value),onBlur:()=>_("dateOfBirth")}),v.dateOfBirth&&x.dateOfBirth&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.dateOfBirth})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place of Birth"}),(0,Zt.jsxs)("select",{className:"input",value:N.placeOfBirth,onChange:e=>S(t=>({...t,placeOfBirth:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Place of Birth"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Type"}),(0,Zt.jsxs)("select",{className:"input",value:N.idType,onChange:e=>S(t=>({...t,idType:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select ID Type"}),ZO.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Number"}),(0,Zt.jsx)("input",{className:"input",value:N.idNumber,onChange:e=>S(t=>({...t,idNumber:e.target.value}))})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Issue Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:N.idIssueDate,onChange:e=>S(t=>({...t,idIssueDate:e.target.value}))})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Expiry Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:N.idExpiryDate,onChange:e=>S(t=>({...t,idExpiryDate:e.target.value}))})]}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,Zt.jsx)("input",{type:"checkbox",id:"sh-is-dual-nationality",checked:N.isDualNationality,onChange:e=>S(t=>({...t,isDualNationality:e.target.checked}))}),(0,Zt.jsx)("label",{htmlFor:"sh-is-dual-nationality",className:"text-sm font-medium text-gray-700",children:"Is Dual Nationality?"})]}),N.isDualNationality&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dual Nationality"}),(0,Zt.jsxs)("select",{className:"input "+(v.dualNationalityCountry&&x.dualNationalityCountry?"border-red-500":""),value:N.dualNationalityCountry,onChange:e=>j("dualNationalityCountry",e.target.value),onBlur:()=>_("dualNationalityCountry"),children:[(0,Zt.jsx)("option",{value:"",children:"Select Dual Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]}),v.dualNationalityCountry&&x.dualNationalityCountry&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.dualNationalityCountry})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Number"}),(0,Zt.jsx)("input",{className:"input "+(v.dualPassportNumber&&x.dualPassportNumber?"border-red-500":""),value:N.dualPassportNumber,onChange:e=>j("dualPassportNumber",e.target.value),onBlur:()=>_("dualPassportNumber")}),v.dualPassportNumber&&x.dualPassportNumber&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.dualPassportNumber})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Issue Date"}),(0,Zt.jsx)("input",{type:"date",className:"input "+(v.dualPassportIssueDate&&x.dualPassportIssueDate?"border-red-500":""),value:N.dualPassportIssueDate,onChange:e=>j("dualPassportIssueDate",e.target.value),onBlur:()=>_("dualPassportIssueDate")}),v.dualPassportIssueDate&&x.dualPassportIssueDate&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.dualPassportIssueDate})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Expiry Date"}),(0,Zt.jsx)("input",{type:"date",className:"input "+(v.dualPassportExpiryDate&&x.dualPassportExpiryDate?"border-red-500":""),value:N.dualPassportExpiryDate,onChange:e=>j("dualPassportExpiryDate",e.target.value),onBlur:()=>_("dualPassportExpiryDate")}),v.dualPassportExpiryDate&&x.dualPassportExpiryDate&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.dualPassportExpiryDate})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm w-32",value:N.countryCode||"+971",onChange:e=>{S(t=>({...t,countryCode:e.target.value}))},children:oO.filter(e=>e.phone&&e.phone.length<=6).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,Zt.jsxs)("option",{value:e.phone,children:[e.phone," (",e.code,")"]},e.code))}),(0,Zt.jsx)("input",{type:"tel",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm",value:N.phone||"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");S(e=>({...e,phone:t}))},onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},placeholder:"Enter phone number",maxLength:15})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Zt.jsx)("input",{type:"email",className:"input "+(v.email&&x.email?"border-red-500":""),value:N.email,onChange:e=>j("email",e.target.value),onBlur:()=>_("email")}),v.email&&x.email&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.email})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Zt.jsx)("input",{className:"input",value:N.address,onChange:e=>S(t=>({...t,address:e.target.value}))})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source of Funds"}),(0,Zt.jsxs)("select",{className:"input",value:N.sourceOfFunds,onChange:e=>S(t=>({...t,sourceOfFunds:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Funds"}),iT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source of Wealth"}),(0,Zt.jsxs)("select",{className:"input",value:N.sourceOfWealth,onChange:e=>S(t=>({...t,sourceOfWealth:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Wealth"}),aT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),(0,Zt.jsxs)("select",{className:"input",value:N.occupation,onChange:e=>S(t=>({...t,occupation:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Occupation"}),wT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Income Range Annually"}),(0,Zt.jsx)("input",{className:"input "+(v.expectedIncome&&x.expectedIncome?"border-red-500":""),value:N.expectedIncome,onChange:e=>j("expectedIncome",e.target.value),onBlur:()=>_("expectedIncome")}),v.expectedIncome&&x.expectedIncome&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.expectedIncome})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PEP"}),(0,Zt.jsxs)("select",{className:"input",value:N.pep,onChange:e=>S(t=>({...t,pep:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select PEP Status"}),pT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Shareholding"}),(0,Zt.jsx)("input",{className:"input "+(v.shareholding&&x.shareholding?"border-red-500":""),value:N.shareholding,onChange:e=>j("shareholding",e.target.value),onBlur:()=>_("shareholding")}),v.shareholding&&x.shareholding&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.shareholding})]}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"checkbox",id:"isDirector",checked:N.isDirector,onChange:e=>S(t=>({...t,isDirector:e.target.checked}))}),(0,Zt.jsx)("label",{htmlFor:"isDirector",children:"Is Director?"})]}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"checkbox",id:"isUbo",checked:N.isUbo,onChange:e=>S(t=>({...t,isUbo:e.target.checked}))}),(0,Zt.jsx)("label",{htmlFor:"isUbo",children:"Is UBO?"})]})]}),"Legal Entities"===g&&(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,Zt.jsx)("input",{className:"input "+(v.legalName&&x.legalName?"border-red-500":""),value:N.legalName||N.fullName||"",onChange:e=>j("legalName",e.target.value),onBlur:()=>_("legalName")}),v.legalName&&x.legalName&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.legalName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input",value:N.alias||"",onChange:e=>S(t=>({...t,alias:e.target.value}))})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Incorporation"}),(0,Zt.jsx)("input",{type:"date",className:"input "+(v.dateOfIncorporation&&x.dateOfIncorporation?"border-red-500":""),value:N.dateOfIncorporation||"",onChange:e=>j("dateOfIncorporation",e.target.value),onBlur:()=>_("dateOfIncorporation")}),v.dateOfIncorporation&&x.dateOfIncorporation&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.dateOfIncorporation})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country of Incorporation"}),(0,Zt.jsxs)("select",{className:"input",value:N.countryOfIncorporation||"",onChange:e=>S(t=>({...t,countryOfIncorporation:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Country of Incorporation"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Zt.jsxs)("select",{className:"input",value:N.entityClass||"",onChange:e=>S(t=>({...t,entityClass:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Type"}),hT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Type"}),(0,Zt.jsxs)("select",{className:"input",value:N.licenseType||"",onChange:e=>S(t=>({...t,licenseType:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select License Type"}),lT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Number"}),(0,Zt.jsx)("input",{className:"input",value:N.licenseNumber||"",onChange:e=>S(t=>({...t,licenseNumber:e.target.value}))})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date"}),(0,Zt.jsx)("input",{type:"date",className:"input "+(v.licenseIssueDate&&x.licenseIssueDate?"border-red-500":""),value:N.licenseIssueDate||"",onChange:e=>j("licenseIssueDate",e.target.value),onBlur:()=>_("licenseIssueDate")}),v.licenseIssueDate&&x.licenseIssueDate&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.licenseIssueDate})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),(0,Zt.jsx)("input",{type:"date",className:"input",value:N.licenseExpiryDate||"",onChange:e=>S(t=>({...t,licenseExpiryDate:e.target.value}))})]}),(0,Zt.jsx)("div",{children:(()=>{const e=N.businessActivity||[];return(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Activity ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((e,t)=>(0,Zt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e,(0,Zt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Array.isArray(N.businessActivity)?N.businessActivity:[];S(r=>({...r,businessActivity:t.filter(t=>t!==e)}))})(e),className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:text-blue-600 hover:bg-blue-200",children:"\xd7"})]},t))}),(0,Zt.jsxs)("select",{className:"input",value:"",onChange:e=>{e.target.value&&((e=>{const t=Array.isArray(N.businessActivity)?N.businessActivity:[];t.includes(e)||S(r=>({...r,businessActivity:[...t,e]}))})(e.target.value),e.target.value="")},children:[(0,Zt.jsx)("option",{value:"",children:"Select Business Activity"}),oT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]})})()}),(0,Zt.jsx)("div",{children:(()=>{const e=N.countriesOfOperation||[];return(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Countries of Operation ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((e,t)=>(0,Zt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e,(0,Zt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Array.isArray(N.countriesOfOperation)?N.countriesOfOperation:[];S(r=>({...r,countriesOfOperation:t.filter(t=>t!==e)}))})(e),className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:text-blue-600 hover:bg-blue-200",children:"\xd7"})]},t))}),(0,Zt.jsxs)("select",{className:"input",value:"",onChange:e=>{e.target.value&&((e=>{const t=Array.isArray(N.countriesOfOperation)?N.countriesOfOperation:[];t.includes(e)||S(r=>({...r,countriesOfOperation:[...t,e]}))})(e.target.value),e.target.value="")},children:[(0,Zt.jsx)("option",{value:"",children:"Select Countries of Operation"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.name,children:e.name},e.code))]})]})})()}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source of Funds"}),(0,Zt.jsxs)("select",{className:"input",value:N.sourceOfFunds||"",onChange:e=>S(t=>({...t,sourceOfFunds:e.target.value})),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Funds"}),iT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registered Office Address"}),(0,Zt.jsx)("input",{className:"input",value:N.registeredOfficeAddress||"",onChange:e=>S(t=>({...t,registeredOfficeAddress:e.target.value}))})]}),(0,Zt.jsx)("div",{children:(()=>{const e=N.countriesSourceOfFunds||[];return(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Countries Source of Funds ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map((e,t)=>(0,Zt.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e,(0,Zt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=Array.isArray(N.countriesSourceOfFunds)?N.countriesSourceOfFunds:[];S(r=>({...r,countriesSourceOfFunds:t.filter(t=>t!==e)}))})(e),className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:text-blue-600 hover:bg-blue-200",children:"\xd7"})]},t))}),(0,Zt.jsxs)("select",{className:"input",value:"",onChange:e=>{e.target.value&&((e=>{const t=Array.isArray(N.countriesSourceOfFunds)?N.countriesSourceOfFunds:[];t.includes(e)||S(r=>({...r,countriesSourceOfFunds:[...t,e]}))})(e.target.value),e.target.value="")},children:[(0,Zt.jsx)("option",{value:"",children:"Select Countries Source of Funds"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.name,children:e.name},e.code))]})]})})()}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Zt.jsx)("input",{type:"email",className:"input "+(v.email&&x.email?"border-red-500":""),value:N.email||"",onChange:e=>j("email",e.target.value),onBlur:()=>_("email")}),v.email&&x.email&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.email})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm w-32",value:N.countryCode||"+971",onChange:e=>{S(t=>({...t,countryCode:e.target.value}))},children:oO.filter(e=>e.phone&&e.phone.length<=6).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,Zt.jsxs)("option",{value:e.phone,children:[e.phone," (",e.code,")"]},e.code))}),(0,Zt.jsx)("input",{type:"tel",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm "+(v.phone&&x.phone?"border-red-500":""),value:N.phone||"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");j("phone",t)},onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},onBlur:()=>_("phone"),placeholder:"Enter phone number",maxLength:15})]}),v.phone&&x.phone&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.phone})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Details"}),(0,Zt.jsx)("input",{className:"input",rows:"3",value:N.otherDetails||"",onChange:e=>S(t=>({...t,otherDetails:e.target.value}))})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Shareholding"}),(0,Zt.jsx)("input",{className:"input "+(v.shareholding&&x.shareholding?"border-red-500":""),value:N.shareholding,onChange:e=>j("shareholding",e.target.value),onBlur:()=>_("shareholding")}),v.shareholding&&x.shareholding&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.shareholding})]})]}),"Trust"===g&&(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trust Name"}),(0,Zt.jsx)("input",{className:"input "+(v.trustName&&x.trustName?"border-red-500":""),value:N.trustName||"",onChange:e=>j("trustName",e.target.value),onBlur:()=>_("trustName")}),v.trustName&&x.trustName&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.trustName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input",value:N.alias||"",onChange:e=>j("alias",e.target.value),onBlur:()=>_("alias")}),v.alias&&x.alias&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.alias})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trust Registered"}),(0,Zt.jsxs)("select",{className:"input",value:!0===N.trustRegistered?"Yes":!1===N.trustRegistered?"No":"",onChange:e=>j("trustRegistered","Yes"===e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Trust Registered Status"}),pT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type of Trust"}),(0,Zt.jsxs)("select",{className:"input",value:N.trustType||"",onChange:e=>j("trustType",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Type of Trust"}),fT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jurisdiction of Law"}),(0,Zt.jsxs)("select",{className:"input",value:N.jurisdictionOfLaw||"",onChange:e=>j("jurisdictionOfLaw",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Jurisdiction of Law"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registered Address"}),(0,Zt.jsx)("input",{className:"input",value:N.registeredAddress||"",onChange:e=>j("registeredAddress",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Shareholding"}),(0,Zt.jsx)("input",{className:"input "+(v.shareholding&&x.shareholding?"border-red-500":""),value:N.shareholding||"",onChange:e=>j("shareholding",e.target.value),onBlur:()=>_("shareholding")}),v.shareholding&&x.shareholding&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.shareholding})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name of Trustee"}),(0,Zt.jsx)("input",{className:"input",value:N.trusteeName||"",onChange:e=>j("trusteeName",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trustee Type"}),(0,Zt.jsxs)("select",{className:"input",value:N.trusteeType||"",onChange:e=>j("trusteeType",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Trustee Type"}),mT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Zt.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>{if(console.log("\ud83d\udd0d Adding shareholder with type:",g),console.log("\ud83d\udd0d Current shareholder data:",N),N.shareholding){const e=i.reduce((e,t)=>null!==m&&i.indexOf(t)===m?e:e+(parseFloat(t.shareholding)||0),0),t=parseFloat(N.shareholding)||0,r=e+t;if(r>100)return void b(n=>({...n,shareholding:`Total shareholding cannot exceed 100%. Current total: ${e.toFixed(2)}%, adding ${t.toFixed(2)}% would make it ${r.toFixed(2)}%`}))}let e=!1;if("Natural Person"===g?(e=N.fullName&&N.fullName.trim(),console.log("\ud83d\udd0d Natural Person validation:",{fullName:N.fullName,hasRequiredFields:e})):"Legal Entities"===g?(e=N.legalName&&N.legalName.trim(),console.log("\ud83d\udd0d Legal Entities validation:",{legalName:N.legalName,hasRequiredFields:e})):"Trust"===g&&(e=N.trustName&&N.trustName.trim(),console.log("\ud83d\udd0d Trust validation:",{trustName:N.trustName,hasRequiredFields:e})),console.log("\ud83d\udd0d Final validation result:",e),e){const e=N.countryCode+N.phone,t={...N};"Legal Entities"===g&&(Array.isArray(t.businessActivity)&&(t.businessActivity=t.businessActivity.length>0?JSON.stringify(t.businessActivity):""),Array.isArray(t.countriesOfOperation)&&(t.countriesOfOperation=t.countriesOfOperation.length>0?JSON.stringify(t.countriesOfOperation):""),Array.isArray(t.countriesSourceOfFunds)&&(t.countriesSourceOfFunds=t.countriesSourceOfFunds.length>0?JSON.stringify(t.countriesSourceOfFunds):""));const r={...t,type:g,phone:e};if(null!==m){const e=[...i];e[m]=r,s(e),p(null),y("Natural Person")}else s([...i,r]);if(r.isDirector&&l&&"Natural Person"===g){const e={firstName:r.fullName?r.fullName.split(" ")[0]:"",lastName:r.fullName?r.fullName.split(" ").slice(1).join(" "):"",alias:r.alias||"",countryOfResidence:r.countryOfResidence||"",nationality:r.nationality||"",dateOfBirth:r.dateOfBirth||"",placeOfBirth:r.placeOfBirth||"",phone:r.phone||"",email:r.email||"",address:r.address||"",city:"",occupation:r.occupation||"",pepStatus:r.pep||"",dualNationality:r.dualNationality||"",isCeo:!1,isRepresentative:!1};console.log("\ud83d\udc54 Filling director form with shareholder data:",e),l(e)}if(r.isUbo&&c&&"Natural Person"===g){const e={fullName:r.fullName||"",alias:r.alias||"",countryOfResidence:r.countryOfResidence||"",nationality:r.nationality||"",dateOfBirth:r.dateOfBirth||"",placeOfBirth:r.placeOfBirth||"",phone:r.phone||"",email:r.email||"",address:r.address||"",sourceOfFunds:r.sourceOfFunds||"",sourceOfWealth:r.sourceOfWealth||"",occupation:r.occupation||"",expectedIncome:r.expectedIncome||"",pep:r.pep||"",shareholding:r.shareholding||"",dualNationality:r.dualNationality||""};console.log("\ud83d\udc64 Filling UBO form with shareholder data:",e),c(e)}"Natural Person"===g?S({type:"Natural Person",fullName:"",alias:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",countryCode:"+971",phone:"",email:"",address:"",sourceOfFunds:"",sourceOfWealth:"",occupation:"",expectedIncome:"",pep:"",shareholding:"",dualNationality:"",isDirector:!1,isUbo:!1}):"Legal Entities"===g?S({type:"Legal Entities",legalName:"",alias:"",dateOfIncorporation:"",countryOfIncorporation:"",entityClass:"",licenseType:"",licenseNumber:"",licenseIssueDate:"",licenseExpiryDate:"",businessActivity:[],countriesOfOperation:[],registeredOfficeAddress:"",countriesSourceOfFunds:[],otherDetails:"",email:"",countryCode:"+971",phone:"",shareholding:""}):"Trust"===g&&S({type:"Trust",trustName:"",alias:"",trustRegistered:!1,trustType:"",jurisdictionOfLaw:"",registeredAddress:"",trusteeName:"",trusteeType:"",shareholding:""}),b({}),w({}),f(!1)}},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:null!==m?"Update Shareholder":"Add Shareholder"}),null!==m?(0,Zt.jsx)("button",{type:"button",onClick:()=>{p(null),y("Natural Person"),S({type:"Natural Person",fullName:"",alias:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",idType:"",idNumber:"",idIssueDate:"",idExpiryDate:"",countryCode:"+971",phone:"",email:"",address:"",sourceOfFunds:"",sourceOfWealth:"",occupation:"",expectedIncome:"",pep:"",shareholding:"",dualNationality:"",isDirector:!1,isUbo:!1,isDualNationality:!1,dualNationalityCountry:"",dualPassportNumber:"",dualPassportIssueDate:"",dualPassportExpiryDate:""}),b({}),w({}),f(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Cancel Edit"}):o?(0,Zt.jsx)("button",{type:"button",onClick:()=>f(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"}):null]})]})]})]})},ET=e=>{if(!e)return{countryCode:"+971",phone:""};const t=oO.map(e=>e.phone);let r="+971",n=e;for(const a of t)if(e.startsWith(a)){r=a,n=e.substring(a.length);break}return{countryCode:r,phone:n}},AT=(0,t.forwardRef)((e,r)=>{var n,a;let{directors:i=[],onDirectorsChange:s,isEdit:o=!1,onDirectorFormFill:l=null}=e;const[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),[p,g]=(0,t.useState)({}),[y,v]=(0,t.useState)({}),[b,x]=(0,t.useState)({firstName:"",alias:"",lastName:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",countryCode:"+971",phone:"",email:"",address:"",city:"",occupation:"",pepStatus:"",dualNationality:"",isCeo:!1,isRepresentative:!1}),w=e=>{v(t=>({...t,[e]:!0}));const t=((e,t)=>{let r="";switch(e){case"firstName":t&&t.length<2&&(r="First name must be at least 2 characters long");break;case"lastName":t&&t.length<2&&(r="Last name must be at least 2 characters long");break;case"alias":t&&t.length<2&&(r="Alias must be at least 2 characters long");break;case"email":t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&(r="Please enter a valid email address");break;case"phone":t&&t.length<7&&(r="Phone number must be at least 7 digits");break;case"dateOfBirth":if(t){const e=new Date(t),n=new Date;e>n&&(r="Date of birth cannot be in the future"),n.getFullYear()-e.getFullYear()>120&&(r="Date of birth seems invalid")}}return r})(e,b[e]);g(r=>({...r,[e]:t}))},N=(e,t)=>{x(r=>({...r,[e]:t})),p[e]&&g(t=>({...t,[e]:""}))},S=e=>{const{countryCode:t,phone:r}=ET(e.phone||"");x({firstName:e.firstName||"",alias:e.alias||"",lastName:e.lastName||"",countryOfResidence:e.countryOfResidence||"",nationality:e.nationality||"",dateOfBirth:e.dateOfBirth||"",placeOfBirth:e.placeOfBirth||"",countryCode:t||"+971",phone:r||"",email:e.email||"",address:e.address||"",city:e.city||"",occupation:e.occupation||"",pepStatus:e.pepStatus||"",dualNationality:e.dualNationality||"",isCeo:e.isCeo||!1,isRepresentative:e.isRepresentative||!1}),h(!0),m(null),console.log("\ud83d\udc54 Director form filled with data:",e)};return(0,t.useImperativeHandle)(r,()=>({fillForm:S}),[]),(0,Zt.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,Zt.jsxs)("button",{type:"button",onClick:()=>u(!c),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-t-lg flex justify-between items-center",children:[(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:"Director / Representative Details"}),(0,Zt.jsx)("svg",{className:"w-5 h-5 text-gray-500 transform transition-transform "+(c?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&(0,Zt.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[i.length>0&&(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h4",{className:"font-medium mb-4 text-gray-900",children:"Directors / Representatives"}),(0,Zt.jsx)("div",{className:"space-y-3",children:i.map((e,t)=>(0,Zt.jsxs)("div",{className:"p-3 bg-gray-50 rounded border",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Zt.jsxs)("span",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,Zt.jsxs)("div",{className:"flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>(async e=>{const t=i[e];if(console.log("\ud83d\udd0d Editing director:",t),t.id)try{const{success:r,data:n,error:a}=await jO.getDirectorById(t.id);if(r&&n){console.log("\ud83d\udd0d Fresh director data from database:",n);const{countryCode:t,phone:r}=ET(n.phone||""),a={...n,countryCode:t||"+971",phone:r||""};console.log("\ud83d\udd0d Processed director data:",a);const o=[...i];o[e]=a,s(o),x(a),m(e),console.log("\ud83d\udd0d Set currentDirector:",a)}else{console.error("\ud83d\udd0d Failed to fetch fresh director data:",a);const{countryCode:r,phone:n}=ET(t.phone||""),i={...t,countryCode:r||"+971",phone:n||""};x(i),m(e)}}catch(r){console.error("\ud83d\udd0d Error fetching director data:",r);const{countryCode:n,phone:a}=ET(t.phone||""),i={...t,countryCode:n||"+971",phone:a||""};x(i),m(e)}else{console.log("\ud83d\udd0d Editing new director (no ID yet):",t);const{countryCode:r,phone:n}=ET(t.phone||""),a={...t,countryCode:r||"+971",phone:n||""};console.log("\ud83d\udd0d Processed new director data:",a),x(a),m(e),console.log("\ud83d\udd0d Set currentDirector for new director:",a)}})(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>(async e=>{const t=i[e];if(console.log("\ud83d\uddd1\ufe0f Removing director:",t),t.id)try{const{success:r,error:n}=await jO.deleteDirectorById(t.id);if(r){const t=i.filter((t,r)=>r!==e);s(t),console.log("\u2705 Director removed from database and UI")}else console.error("\u274c Failed to delete director from database:",n),alert(`Failed to remove director: ${n||"Unknown error"}`)}catch(r){console.error("\u274c Error during director removal:",r),alert(`Error removing director: ${r.message||"Unknown error"}`)}else{console.log("\ud83d\uddd1\ufe0f Removing new director (no ID yet):",t);const r=i.filter((t,r)=>r!==e);s(r),console.log("\u2705 New director removed from UI")}})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Nationality: ",e.nationality]}),e.isCeo&&(0,Zt.jsx)("p",{className:"text-sm text-blue-600",children:"CEO/Managing Director"}),e.isRepresentative&&(0,Zt.jsx)("p",{className:"text-sm text-green-600",children:"Representative"})]},t))})]}),o&&(0,Zt.jsxs)("div",{className:"mb-6",children:[0===i.length&&(0,Zt.jsx)("p",{className:"text-gray-700 text-md font-medium mb-3 italic",children:"No Directors Or Representatives have been added yet"}),(0,Zt.jsx)("div",{className:"flex space-x-2",children:(0,Zt.jsx)("button",{type:"button",onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add New Director / Representative"})})]}),(!o||d||null!==f)&&(0,Zt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg "+(null!==f?"border-blue-300 bg-blue-50":"border-gray-200"),children:[(0,Zt.jsx)("h4",{className:"font-medium mb-4 "+(null!==f?"text-blue-700":"text-gray-900"),children:null!==f?`Edit Director: ${null===(n=i[f])||void 0===n?void 0:n.firstName} ${null===(a=i[f])||void 0===a?void 0:a.lastName}`:"Add New Director/Representative"}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Zt.jsx)("input",{className:"input "+(p.firstName&&y.firstName?"border-red-500":""),value:b.firstName,onChange:e=>N("firstName",e.target.value),onBlur:()=>w("firstName")}),p.firstName&&y.firstName&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.firstName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input "+(p.alias&&y.alias?"border-red-500":""),value:b.alias,onChange:e=>N("alias",e.target.value),onBlur:()=>w("alias")}),p.alias&&y.alias&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.alias})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Zt.jsx)("input",{className:"input "+(p.lastName&&y.lastName?"border-red-500":""),value:b.lastName,onChange:e=>N("lastName",e.target.value),onBlur:()=>w("lastName")}),p.lastName&&y.lastName&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.lastName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country of Residence"}),(0,Zt.jsxs)("select",{className:"input",value:b.countryOfResidence,onChange:e=>N("countryOfResidence",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Country of Residence"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),(0,Zt.jsxs)("select",{className:"input",value:b.nationality,onChange:e=>N("nationality",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,Zt.jsx)("input",{type:"date",className:"input "+(p.dateOfBirth&&y.dateOfBirth?"border-red-500":""),value:b.dateOfBirth,onChange:e=>N("dateOfBirth",e.target.value),onBlur:()=>w("dateOfBirth")}),p.dateOfBirth&&y.dateOfBirth&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.dateOfBirth})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm w-32",value:b.countryCode||"+971",onChange:e=>{x(t=>({...t,countryCode:e.target.value}))},children:oO.filter(e=>e.phone&&e.phone.length<=6).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,Zt.jsxs)("option",{value:e.phone,children:[e.phone," (",e.code,")"]},e.code))}),(0,Zt.jsx)("input",{type:"tel",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm "+(p.phone&&y.phone?"border-red-500":""),value:b.phone||"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");N("phone",t)},onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},onBlur:()=>w("phone"),placeholder:"Enter phone number",maxLength:15})]}),p.phone&&y.phone&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.phone})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place of Birth"}),(0,Zt.jsxs)("select",{className:"input",value:b.placeOfBirth,onChange:e=>N("placeOfBirth",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Place of Birth"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Zt.jsx)("input",{type:"email",className:"input "+(p.email&&y.email?"border-red-500":""),value:b.email,onChange:e=>N("email",e.target.value),onBlur:()=>w("email")}),p.email&&y.email&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p.email})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Zt.jsx)("input",{className:"input",value:b.address,onChange:e=>N("address",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,Zt.jsx)("input",{className:"input",value:b.city,onChange:e=>N("city",e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),(0,Zt.jsxs)("select",{className:"input",value:b.occupation,onChange:e=>N("occupation",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Occupation"}),wT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PEP"}),(0,Zt.jsxs)("select",{className:"input",value:b.pepStatus,onChange:e=>N("pepStatus",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select PEP Status"}),eT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dual Nationality"}),(0,Zt.jsxs)("select",{className:"input",value:b.dualNationality,onChange:e=>N("dualNationality",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Dual Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"checkbox",id:"isCeo",checked:b.isCeo,onChange:e=>N("isCeo",e.target.checked)}),(0,Zt.jsx)("label",{htmlFor:"isCeo",children:"Is CEO/Managing Director?"})]}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"checkbox",id:"isRepresentative",checked:b.isRepresentative,onChange:e=>N("isRepresentative",e.target.checked)}),(0,Zt.jsx)("label",{htmlFor:"isRepresentative",children:"Is Representative?"})]})]}),(0,Zt.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>{console.log("\ud83d\udc54 Adding director:",b);if(b.firstName&&b.firstName.trim()&&b.lastName&&b.lastName.trim()){const e=b.countryCode+b.phone,t={...b,phone:e};if(null!==f){const e=[...i];e[f]=t,s(e),m(null)}else s([...i,t]);x({firstName:"",alias:"",lastName:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",countryCode:"+971",phone:"",email:"",address:"",city:"",occupation:"",pepStatus:"",dualNationality:"",isCeo:!1,isRepresentative:!1}),g({}),v({}),h(!1)}},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:null!==f?"Update Director":"Add Director"}),null!==f?(0,Zt.jsx)("button",{type:"button",onClick:()=>{m(null),x({firstName:"",alias:"",lastName:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",countryCode:"+971",phone:"",email:"",address:"",city:"",occupation:"",pepStatus:"",dualNationality:"",isCeo:!1,isRepresentative:!1}),g({}),v({}),h(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Cancel Edit"}):o?(0,Zt.jsx)("button",{type:"button",onClick:()=>h(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"}):null]})]})]})]})}),kT=AT,CT=[{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"\u20ac"},{code:"GBP",name:"British Pound",symbol:"\xa3"},{code:"JPY",name:"Japanese Yen",symbol:"\xa5"},{code:"CAD",name:"Canadian Dollar",symbol:"C$"},{code:"AUD",name:"Australian Dollar",symbol:"A$"},{code:"CHF",name:"Swiss Franc",symbol:"CHF"},{code:"CNY",name:"Chinese Yuan",symbol:"\xa5"},{code:"INR",name:"Indian Rupee",symbol:"\u20b9"},{code:"AED",name:"UAE Dirham",symbol:"\u062f.\u0625"},{code:"SAR",name:"Saudi Riyal",symbol:"\u0631.\u0633"},{code:"QAR",name:"Qatari Riyal",symbol:"\u0631.\u0642"},{code:"KWD",name:"Kuwaiti Dinar",symbol:"\u062f.\u0643"},{code:"BHD",name:"Bahraini Dinar",symbol:".\u062f.\u0628"},{code:"OMR",name:"Omani Rial",symbol:"\u0631.\u0639."},{code:"JOD",name:"Jordanian Dinar",symbol:"\u062f.\u0627"},{code:"EGP",name:"Egyptian Pound",symbol:"\u062c.\u0645"},{code:"TRY",name:"Turkish Lira",symbol:"\u20ba"},{code:"ILS",name:"Israeli Shekel",symbol:"\u20aa"},{code:"LBP",name:"Lebanese Pound",symbol:"\u0644.\u0644"},{code:"IQD",name:"Iraqi Dinar",symbol:"\u062f.\u0639"},{code:"IRR",name:"Iranian Rial",symbol:"\ufdfc"},{code:"AFN",name:"Afghan Afghani",symbol:"\u060b"},{code:"PKR",name:"Pakistani Rupee",symbol:"\u20a8"},{code:"BDT",name:"Bangladeshi Taka",symbol:"\u09f3"},{code:"LKR",name:"Sri Lankan Rupee",symbol:"\u20a8"},{code:"NPR",name:"Nepalese Rupee",symbol:"\u20a8"},{code:"MMK",name:"Myanmar Kyat",symbol:"K"},{code:"KHR",name:"Cambodian Riel",symbol:"\u17db"},{code:"LAK",name:"Lao Kip",symbol:"\u20ad"},{code:"MNT",name:"Mongolian Tugrik",symbol:"\u20ae"},{code:"SGD",name:"Singapore Dollar",symbol:"S$"},{code:"HKD",name:"Hong Kong Dollar",symbol:"HK$"},{code:"KRW",name:"South Korean Won",symbol:"\u20a9"},{code:"TWD",name:"Taiwan Dollar",symbol:"NT$"},{code:"THB",name:"Thai Baht",symbol:"\u0e3f"},{code:"MYR",name:"Malaysian Ringgit",symbol:"RM"},{code:"IDR",name:"Indonesian Rupiah",symbol:"Rp"},{code:"PHP",name:"Philippine Peso",symbol:"\u20b1"},{code:"VND",name:"Vietnamese Dong",symbol:"\u20ab"},{code:"BND",name:"Brunei Dollar",symbol:"B$"},{code:"KZT",name:"Kazakhstani Tenge",symbol:"\u20b8"},{code:"UZS",name:"Uzbekistani Som",symbol:"so'm"},{code:"TJS",name:"Tajikistani Somoni",symbol:"\u0405M"},{code:"TMT",name:"Turkmenistan Manat",symbol:"T"},{code:"KGS",name:"Kyrgyzstani Som",symbol:"\u0441"},{code:"GEL",name:"Georgian Lari",symbol:"\u20be"},{code:"AMD",name:"Armenian Dram",symbol:"\u058f"},{code:"AZN",name:"Azerbaijani Manat",symbol:"\u20bc"},{code:"RUB",name:"Russian Ruble",symbol:"\u20bd"},{code:"PLN",name:"Polish Z\u0142oty",symbol:"z\u0142"},{code:"CZK",name:"Czech Koruna",symbol:"K\u010d"},{code:"HUF",name:"Hungarian Forint",symbol:"Ft"},{code:"RON",name:"Romanian Leu",symbol:"lei"},{code:"BGN",name:"Bulgarian Lev",symbol:"\u043b\u0432"},{code:"HRK",name:"Croatian Kuna",symbol:"kn"},{code:"RSD",name:"Serbian Dinar",symbol:"\u0434\u0438\u043d."},{code:"BAM",name:"Bosnia-Herzegovina Convertible Mark",symbol:"KM"},{code:"MKD",name:"Macedonian Denar",symbol:"\u0434\u0435\u043d"},{code:"ALL",name:"Albanian Lek",symbol:"L"},{code:"MDL",name:"Moldovan Leu",symbol:"L"},{code:"UAH",name:"Ukrainian Hryvnia",symbol:"\u20b4"},{code:"BYN",name:"Belarusian Ruble",symbol:"Br"},{code:"DKK",name:"Danish Krone",symbol:"kr"},{code:"NOK",name:"Norwegian Krone",symbol:"kr"},{code:"SEK",name:"Swedish Krona",symbol:"kr"},{code:"ISK",name:"Icelandic Kr\xf3na",symbol:"kr"},{code:"FIM",name:"Finnish Markka",symbol:"mk"},{code:"LVL",name:"Latvian Lats",symbol:"Ls"},{code:"LTL",name:"Lithuanian Litas",symbol:"Lt"},{code:"EEK",name:"Estonian Kroon",symbol:"kr"},{code:"SKK",name:"Slovak Koruna",symbol:"Sk"},{code:"SIT",name:"Slovenian Tolar",symbol:"SIT"},{code:"MTL",name:"Maltese Lira",symbol:"\u20a4"},{code:"CYP",name:"Cypriot Pound",symbol:"\xa3"},{code:"ZAR",name:"South African Rand",symbol:"R"},{code:"NGN",name:"Nigerian Naira",symbol:"\u20a6"},{code:"KES",name:"Kenyan Shilling",symbol:"KSh"},{code:"GHS",name:"Ghanaian Cedi",symbol:"\u20b5"},{code:"UGX",name:"Ugandan Shilling",symbol:"USh"},{code:"TZS",name:"Tanzanian Shilling",symbol:"TSh"},{code:"ETB",name:"Ethiopian Birr",symbol:"Br"},{code:"MAD",name:"Moroccan Dirham",symbol:"\u062f.\u0645."},{code:"TND",name:"Tunisian Dinar",symbol:"\u062f.\u062a"},{code:"DZD",name:"Algerian Dinar",symbol:"\u062f.\u062c"},{code:"LYD",name:"Libyan Dinar",symbol:"\u0644.\u062f"},{code:"SDG",name:"Sudanese Pound",symbol:"\u062c.\u0633."},{code:"SOS",name:"Somali Shilling",symbol:"Sh"},{code:"DJF",name:"Djiboutian Franc",symbol:"Fdj"},{code:"KMF",name:"Comorian Franc",symbol:"CF"},{code:"MUR",name:"Mauritian Rupee",symbol:"\u20a8"},{code:"SCR",name:"Seychellois Rupee",symbol:"\u20a8"},{code:"CDF",name:"Congolese Franc",symbol:"FC"},{code:"XAF",name:"Central African CFA Franc",symbol:"FCFA"},{code:"XOF",name:"West African CFA Franc",symbol:"CFA"},{code:"XPF",name:"CFP Franc",symbol:"\u20a3"},{code:"BWP",name:"Botswana Pula",symbol:"P"},{code:"NAD",name:"Namibian Dollar",symbol:"N$"},{code:"SZL",name:"Swazi Lilangeni",symbol:"L"},{code:"LSL",name:"Lesotho Loti",symbol:"L"},{code:"MZN",name:"Mozambican Metical",symbol:"MT"},{code:"ZMW",name:"Zambian Kwacha",symbol:"ZK"},{code:"MWK",name:"Malawian Kwacha",symbol:"MK"},{code:"ZWL",name:"Zimbabwean Dollar",symbol:"$"},{code:"BIF",name:"Burundian Franc",symbol:"FBu"},{code:"RWF",name:"Rwandan Franc",symbol:"FRw"},{code:"SSP",name:"South Sudanese Pound",symbol:"SSP"},{code:"ERN",name:"Eritrean Nakfa",symbol:"Nfk"},{code:"STD",name:"S\xe3o Tom\xe9 and Pr\xedncipe Dobra",symbol:"Db"},{code:"CVE",name:"Cape Verdean Escudo",symbol:"$"},{code:"GMD",name:"Gambian Dalasi",symbol:"D"},{code:"GNF",name:"Guinean Franc",symbol:"FG"},{code:"SLL",name:"Sierra Leonean Leone",symbol:"Le"},{code:"LRD",name:"Liberian Dollar",symbol:"$"},{code:"GIP",name:"Gibraltar Pound",symbol:"\xa3"},{code:"BRL",name:"Brazilian Real",symbol:"R$"},{code:"MXN",name:"Mexican Peso",symbol:"$"},{code:"CLP",name:"Chilean Peso",symbol:"$"},{code:"COP",name:"Colombian Peso",symbol:"$"},{code:"PEN",name:"Peruvian Sol",symbol:"S/"},{code:"ARS",name:"Argentine Peso",symbol:"$"},{code:"UYU",name:"Uruguayan Peso",symbol:"$"},{code:"PYG",name:"Paraguayan Guarani",symbol:"\u20b2"},{code:"BOB",name:"Bolivian Boliviano",symbol:"Bs"},{code:"GTQ",name:"Guatemalan Quetzal",symbol:"Q"},{code:"HNL",name:"Honduran Lempira",symbol:"L"},{code:"NIO",name:"Nicaraguan Cordoba",symbol:"C$"},{code:"CRC",name:"Costa Rican Colon",symbol:"\u20a1"},{code:"PAB",name:"Panamanian Balboa",symbol:"B/."},{code:"DOP",name:"Dominican Peso",symbol:"$"},{code:"JMD",name:"Jamaican Dollar",symbol:"$"},{code:"TTD",name:"Trinidad and Tobago Dollar",symbol:"$"},{code:"BBD",name:"Barbadian Dollar",symbol:"$"},{code:"XCD",name:"East Caribbean Dollar",symbol:"$"},{code:"AWG",name:"Aruban Florin",symbol:"\u0192"},{code:"ANG",name:"Netherlands Antillean Guilder",symbol:"\u0192"},{code:"GYD",name:"Guyanese Dollar",symbol:"$"},{code:"SRD",name:"Surinamese Dollar",symbol:"$"},{code:"BZD",name:"Belize Dollar",symbol:"$"},{code:"BMD",name:"Bermudian Dollar",symbol:"$"},{code:"KYD",name:"Cayman Islands Dollar",symbol:"$"},{code:"HTG",name:"Haitian Gourde",symbol:"G"},{code:"CUC",name:"Cuban Convertible Peso",symbol:"$"},{code:"CUP",name:"Cuban Peso",symbol:"$"},{code:"NZD",name:"New Zealand Dollar",symbol:"$"},{code:"FJD",name:"Fijian Dollar",symbol:"$"},{code:"PGK",name:"Papua New Guinean Kina",symbol:"K"},{code:"SBD",name:"Solomon Islands Dollar",symbol:"$"},{code:"VUV",name:"Vanuatu Vatu",symbol:"Vt"},{code:"WST",name:"Samoan Tala",symbol:"T"},{code:"TOP",name:"Tongan Pa'anga",symbol:"T$"},{code:"KID",name:"Kiribati Dollar",symbol:"$"},{code:"TVD",name:"Tuvaluan Dollar",symbol:"$"},{code:"XAU",name:"Gold Ounce",symbol:"XAU"},{code:"XAG",name:"Silver Ounce",symbol:"XAG"},{code:"XPT",name:"Platinum Ounce",symbol:"XPT"},{code:"XPD",name:"Palladium Ounce",symbol:"XPD"},{code:"BTC",name:"Bitcoin",symbol:"\u20bf"},{code:"ETH",name:"Ethereum",symbol:"\u039e"},{code:"USDT",name:"Tether",symbol:"\u20ae"},{code:"BNB",name:"Binance Coin",symbol:"BNB"},{code:"ADA",name:"Cardano",symbol:"\u20b3"},{code:"SOL",name:"Solana",symbol:"\u25ce"},{code:"DOT",name:"Polkadot",symbol:"DOT"},{code:"DOGE",name:"Dogecoin",symbol:"\xd0"},{code:"AVAX",name:"Avalanche",symbol:"AVAX"},{code:"MATIC",name:"Polygon",symbol:"MATIC"}],OT=e=>{var r;let{bankDetails:n=[],onBankDetailsChange:a,isEdit:i=!1}=e;const[s,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(null),[h,f]=(0,t.useState)({bankName:"",alias:"",accountType:"",currency:"",bankAccountDetails:"",accountNumber:"",iban:"",swift:"",modeOfSignatory:"",internetBanking:"",bankSignatories:""}),m=(e,t)=>{f(r=>({...r,[e]:t}))};return(0,Zt.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,Zt.jsxs)("button",{type:"button",onClick:()=>o(!s),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-t-lg flex justify-between items-center",children:[(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:"Bank Details"}),(0,Zt.jsx)("svg",{className:"w-5 h-5 text-gray-500 transform transition-transform "+(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&(0,Zt.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[n.length>0&&(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h4",{className:"font-medium mb-3",children:"Added Bank Details:"}),(0,Zt.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>(0,Zt.jsxs)("div",{className:"p-3 bg-gray-50 rounded border",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Zt.jsx)("span",{className:"font-medium",children:e.bankName}),(0,Zt.jsxs)("div",{className:"flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=n[e];f({...t}),d(e)})(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=n.filter((t,r)=>r!==e);a(t)})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Account: ",e.accountNumber]}),(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Type: ",e.accountType]}),(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Currency: ",e.currency]})]},t))})]}),i&&(0,Zt.jsxs)("div",{className:"mb-6",children:[0===n.length&&(0,Zt.jsx)("p",{className:"text-gray-700 text-md font-medium mb-3 italic",children:"No bank details have been added yet"}),(0,Zt.jsx)("div",{className:"flex space-x-2",children:(0,Zt.jsx)("button",{type:"button",onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add New Bank Detail"})})]}),(!i||l||null!==u)&&(0,Zt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg "+(null!==u?"border-blue-300 bg-blue-50":"border-gray-200"),children:[(0,Zt.jsx)("h4",{className:"font-medium mb-4 "+(null!==u?"text-blue-700":"text-gray-900"),children:null!==u?`Edit Bank Detail: ${null===(r=n[u])||void 0===r?void 0:r.bankName}`:"Add New Bank Detail"}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),(0,Zt.jsx)("input",{className:"input",value:h.bankName,onChange:e=>m("bankName",e.target.value),placeholder:"Enter bank name"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input",value:h.alias,onChange:e=>m("alias",e.target.value),placeholder:"Enter alias (optional)"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Type"}),(0,Zt.jsxs)("select",{className:"input",value:h.accountType,onChange:e=>m("accountType",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Account Type"}),(0,Zt.jsx)("option",{value:"call",children:"Call"}),(0,Zt.jsx)("option",{value:"fixed",children:"Fixed"}),(0,Zt.jsx)("option",{value:"current",children:"Current"}),(0,Zt.jsx)("option",{value:"savings",children:"Savings"}),(0,Zt.jsx)("option",{value:"checking",children:"Checking"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,Zt.jsxs)("select",{className:"input",value:h.currency,onChange:e=>m("currency",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Currency"}),CT.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account Details"}),(0,Zt.jsx)("input",{className:"input",value:h.bankAccountDetails,onChange:e=>m("bankAccountDetails",e.target.value),placeholder:"Enter additional account details (optional)"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),(0,Zt.jsx)("input",{className:"input",value:h.accountNumber,onChange:e=>m("accountNumber",e.target.value),placeholder:"Enter account number"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IBAN"}),(0,Zt.jsx)("input",{className:"input",value:h.iban,onChange:e=>m("iban",e.target.value),placeholder:"Enter IBAN (optional)"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SWIFT"}),(0,Zt.jsx)("input",{className:"input",value:h.swift,onChange:e=>m("swift",e.target.value),placeholder:"Enter SWIFT code (optional)"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode of Signatory"}),(0,Zt.jsxs)("select",{className:"input",value:h.modeOfSignatory,onChange:e=>m("modeOfSignatory",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Mode of Signatory"}),(0,Zt.jsx)("option",{value:"single",children:"Single"}),(0,Zt.jsx)("option",{value:"dual",children:"Dual"}),(0,Zt.jsx)("option",{value:"multiple",children:"Multiple"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Internet Banking"}),(0,Zt.jsxs)("select",{className:"input",value:h.internetBanking,onChange:e=>m("internetBanking",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Internet Banking Status"}),pT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Signatories"}),(0,Zt.jsxs)("select",{className:"input",value:h.bankSignatories,onChange:e=>m("bankSignatories",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Bank Signatory"}),(0,Zt.jsx)("option",{value:"signatory1",children:"Signatory 1"}),(0,Zt.jsx)("option",{value:"signatory2",children:"Signatory 2"}),(0,Zt.jsx)("option",{value:"signatory3",children:"Signatory 3"})]})]})]}),(0,Zt.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>{if(null!==u){const e=[...n];e[u]={...h},a(e),d(null)}else a([...n,{...h}]);f({bankName:"",alias:"",accountType:"",currency:"",bankAccountDetails:"",accountNumber:"",iban:"",swift:"",modeOfSignatory:"",internetBanking:"",bankSignatories:""}),c(!1)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:null!==u?"Update Bank Detail":"Add Bank Detail"}),(null!==u||l)&&(0,Zt.jsx)("button",{type:"button",onClick:()=>{d(null),f({bankName:"",alias:"",accountType:"",currency:"",bankAccountDetails:"",accountNumber:"",iban:"",swift:"",modeOfSignatory:"",internetBanking:"",bankSignatories:""}),c(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Cancel"})]})]})]})]})},TT=e=>{if(!e)return{countryCode:"+971",phone:""};const t=oO.map(e=>e.phone);let r="+971",n=e;for(const a of t)if(e.startsWith(a)){r=a,n=e.substring(a.length);break}return{countryCode:r,phone:n}},RT=(0,t.forwardRef)((e,r)=>{var n;let{ubos:a=[],onUbosChange:i,isEdit:s=!1}=e;const[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[f,m]=(0,t.useState)({}),[p,g]=(0,t.useState)({}),[y,v]=(0,t.useState)({fullName:"",alias:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",countryCode:"+971",phone:"",email:"",address:"",sourceOfFunds:"",sourceOfWealth:"",occupation:"",expectedIncome:"",pep:"",shareholding:"",dualNationality:""}),b=e=>{const t=y[e],r=((e,t)=>{let r="";switch(e){case"fullName":t&&t.length<2&&(r="Full name must be at least 2 characters long");break;case"alias":t&&t.length<2&&(r="Alias must be at least 2 characters long");break;case"email":t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&(r="Please enter a valid email address");break;case"phone":t&&t.length<7&&(r="Phone number must be at least 7 digits");break;case"dateOfBirth":if(t){const e=new Date(t),n=new Date;if(e>n)r="Date of birth cannot be in the future";else if(n.getFullYear()-e.getFullYear()>120)r="Date of birth seems invalid";else{let t=n.getFullYear()-e.getFullYear();const a=n.getMonth()-e.getMonth(),i=n.getDate()-e.getDate();(a<0||0===a&&i<0)&&t--,t<18&&(r="UBO must be at least 18 years old")}}break;case"shareholding":if(t){const e=parseFloat(t);(isNaN(e)||e<0||e>100)&&(r="Shareholding percentage must be between 0 and 100")}break;case"expectedIncome":t&&t.length<3&&(r="Expected income description must be at least 3 characters")}return r})(e,t);m(t=>({...t,[e]:r})),g(t=>({...t,[e]:!0}))},x=(e,t)=>{v(r=>({...r,[e]:t})),f[e]&&m(t=>({...t,[e]:""}))},w=e=>{const{countryCode:t,phone:r}=TT(e.phone||"");v({fullName:e.fullName||"",alias:e.alias||"",countryOfResidence:e.countryOfResidence||"",nationality:e.nationality||"",dateOfBirth:e.dateOfBirth||"",placeOfBirth:e.placeOfBirth||"",countryCode:t||"+971",phone:r||"",email:e.email||"",address:e.address||"",sourceOfFunds:e.sourceOfFunds||"",sourceOfWealth:e.sourceOfWealth||"",occupation:e.occupation||"",expectedIncome:e.expectedIncome||"",pep:e.pep||"",shareholding:e.shareholding||"",dualNationality:e.dualNationality||""}),u(!0),h(null),console.log("\ud83d\udc64 UBO form filled with data:",e)};return(0,t.useImperativeHandle)(r,()=>({fillForm:w}),[]),(0,Zt.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,Zt.jsxs)("button",{type:"button",onClick:()=>l(!o),className:"w-full px-4 py-3 text-left bg-gray-50 hover:bg-gray-100 rounded-t-lg flex justify-between items-center",children:[(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:"Ultimate Beneficial Owner (UBO) Details"}),(0,Zt.jsx)("svg",{className:"w-5 h-5 text-gray-500 transform transition-transform "+(o?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&(0,Zt.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[a.length>0&&(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h4",{className:"font-medium mb-3",children:"Added UBOs:"}),(0,Zt.jsx)("div",{className:"space-y-3",children:a.map((e,t)=>(0,Zt.jsxs)("div",{className:"p-3 bg-gray-50 rounded border",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Zt.jsx)("span",{className:"font-medium",children:e.fullName}),(0,Zt.jsxs)("div",{className:"flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=a[e];if(t.phone){const{countryCode:e,phone:r}=TT(t.phone);v({...t,countryCode:e,phone:r})}else v({...t});h(e),m({}),g({})})(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=a.filter((t,r)=>r!==e);i(t)})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Nationality: ",e.nationality]}),e.shareholding&&(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Shareholding: ",e.shareholding,"%"]})]},t))})]}),s&&(0,Zt.jsxs)("div",{className:"mb-6",children:[0===a.length&&(0,Zt.jsx)("p",{className:"text-gray-700 text-md font-medium mb-3 italic",children:"No UBOs have been added yet"}),(0,Zt.jsx)("div",{className:"flex space-x-2",children:(0,Zt.jsx)("button",{type:"button",onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add New UBO"})})]}),(!s||c||null!==d)&&(0,Zt.jsxs)("div",{className:"mb-6 p-4 border rounded-lg "+(null!==d?"border-blue-300 bg-blue-50":"border-gray-200"),children:[(0,Zt.jsx)("h4",{className:"font-medium mb-4 "+(null!==d?"text-blue-700":"text-gray-900"),children:null!==d?`Edit UBO: ${null===(n=a[d])||void 0===n?void 0:n.fullName}`:"Add New UBO"}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,Zt.jsx)("input",{className:"input "+(f.fullName&&p.fullName?"border-red-500":""),value:y.fullName,onChange:e=>x("fullName",e.target.value),onBlur:()=>b("fullName"),placeholder:"Enter full name"}),f.fullName&&p.fullName&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.fullName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alias"}),(0,Zt.jsx)("input",{className:"input "+(f.alias&&p.alias?"border-red-500":""),value:y.alias,onChange:e=>x("alias",e.target.value),onBlur:()=>b("alias"),placeholder:"Enter alias (optional)"}),f.alias&&p.alias&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.alias})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country of Residence"}),(0,Zt.jsxs)("select",{className:"input",value:y.countryOfResidence,onChange:e=>x("countryOfResidence",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Country of Residence"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),(0,Zt.jsxs)("select",{className:"input",value:y.nationality,onChange:e=>x("nationality",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,Zt.jsx)("input",{type:"date",className:"input "+(f.dateOfBirth&&p.dateOfBirth?"border-red-500":""),value:y.dateOfBirth,onChange:e=>x("dateOfBirth",e.target.value),onBlur:()=>b("dateOfBirth")}),f.dateOfBirth&&p.dateOfBirth&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.dateOfBirth})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place of Birth"}),(0,Zt.jsxs)("select",{className:"input",value:y.placeOfBirth,onChange:e=>x("placeOfBirth",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Place of Birth"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm w-32",value:y.countryCode||"+971",onChange:e=>{v(t=>({...t,countryCode:e.target.value}))},children:oO.filter(e=>e.phone&&e.phone.length<=6).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,Zt.jsxs)("option",{value:e.phone,children:[e.phone," (",e.code,")"]},e.code))}),(0,Zt.jsx)("input",{type:"tel",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm "+(f.phone&&p.phone?"border-red-500":""),value:y.phone||"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");x("phone",t)},onBlur:()=>b("phone"),onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},placeholder:"Enter phone number",maxLength:15})]}),f.phone&&p.phone&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.phone})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Zt.jsx)("input",{type:"email",className:"input "+(f.email&&p.email?"border-red-500":""),value:y.email,onChange:e=>x("email",e.target.value),onBlur:()=>b("email"),placeholder:"Enter email address"}),f.email&&p.email&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.email})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Zt.jsx)("input",{className:"input",value:y.address,onChange:e=>x("address",e.target.value),placeholder:"Enter address"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source of Funds"}),(0,Zt.jsxs)("select",{className:"input",value:y.sourceOfFunds,onChange:e=>x("sourceOfFunds",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Funds"}),iT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source of Wealth"}),(0,Zt.jsxs)("select",{className:"input",value:y.sourceOfWealth,onChange:e=>x("sourceOfWealth",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Source of Wealth"}),aT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),(0,Zt.jsxs)("select",{className:"input",value:y.occupation,onChange:e=>x("occupation",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Occupation"}),wT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Income Range Annually"}),(0,Zt.jsx)("input",{className:"input "+(f.expectedIncome&&p.expectedIncome?"border-red-500":""),value:y.expectedIncome,onChange:e=>x("expectedIncome",e.target.value),onBlur:()=>b("expectedIncome"),placeholder:"Enter expected income range"}),f.expectedIncome&&p.expectedIncome&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.expectedIncome})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PEP"}),(0,Zt.jsxs)("select",{className:"input",value:y.pep,onChange:e=>x("pep",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select PEP Status"}),eT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Shareholding"}),(0,Zt.jsx)("input",{className:"input "+(f.shareholding&&p.shareholding?"border-red-500":""),value:y.shareholding,onChange:e=>x("shareholding",e.target.value),onBlur:()=>b("shareholding"),placeholder:"Enter shareholding percentage"}),f.shareholding&&p.shareholding&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.shareholding})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dual Nationality"}),(0,Zt.jsxs)("select",{className:"input",value:y.dualNationality,onChange:e=>x("dualNationality",e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Dual Nationality"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]})]})]}),(0,Zt.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>{const e=y.countryCode+y.phone,t={...y,phone:e};if(null!==d){const e=[...a];e[d]=t,i(e),h(null)}else i([...a,t]);v({fullName:"",alias:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",countryCode:"+971",phone:"",email:"",address:"",sourceOfFunds:"",sourceOfWealth:"",occupation:"",expectedIncome:"",pep:"",shareholding:"",dualNationality:""}),m({}),g({}),u(!1)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:null!==d?"Update UBO":"Add UBO"}),(null!==d||c)&&(0,Zt.jsx)("button",{type:"button",onClick:()=>{h(null),v({fullName:"",alias:"",countryOfResidence:"",nationality:"",dateOfBirth:"",placeOfBirth:"",countryCode:"+971",phone:"",email:"",address:"",sourceOfFunds:"",sourceOfWealth:"",occupation:"",expectedIncome:"",pep:"",shareholding:"",dualNationality:""}),m({}),g({}),u(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Cancel"})]})]})]})]})}),IT=RT,LT=e=>{let{isEdit:r=!1,initialData:n=null,onSubmit:a=null,onCancel:i=null}=e;const s=re(),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(()=>{if(r&&n){const{countryCode:e,phone:t}=(e=>{if(!e)return{countryCode:"+971",phone:""};const t=oO.map(e=>e.phone);let r="+971",n=e;for(const a of t)if(e.startsWith(a)){r=a,n=e.substring(a.length);break}return console.log("\ud83d\udcde Parsed phone:",{fullPhone:e,countryCode:r,number:n}),{countryCode:r,phone:n}})(n.phone);return{coreSystemId:n.core_system_id||"",customerType:n.customer_type||"Natural Person",email:n.email||"",countryCode:e,phone:t,city:n.city||"",channel:n.channel||"",transactionProduct:n.transaction_product||"",sourceOfFunds:n.sourceoffunds||"",residencyStatus:n.residencystatus||"",transactionAmountLimit:n.transaction_amount_limit||"",transactionLimit:n.transaction_limit||"",profession:n.profession||"",firstName:n.firstname||"",lastName:n.lastname||"",alias:n.alias||"",dateOfBirth:n.dateofbirth||"",nationality:n.nationality||"",idType:n.idtype||"",idNumber:n.idnumber||"",issueDate:n.issuedate||"",expiryDate:n.expirydate||"",address:n.address||"",occupation:n.occupation||"",sourceOfWealth:n.sourceofwealth||"",pep:n.pep||"",countryOfBirth:n.countryofbirth||"",isDualNationality:n.isdualnationality||!1,poBox:n.pobox||"",gender:n.gender||"",employer:n.employer||"",dualNationality:n.dualnationality||"",dualPassportNumber:n.dualpassportnumber||"",dualPassportIssueDate:n.dualpassportissuedate||"",dualPassportExpiryDate:n.dualpassportexpirydate||"",sourceOfFunds:n.sourceoffunds||"",residencyStatus:n.residencystatus||"",businessActivity:n.businessactivity||"",legalName:n.legalname||"",dateOfIncorporation:n.dateofincorporation||"",countryOfIncorporation:n.countryofincorporation||"",licenseType:n.licensetype||"",licenseNumber:n.licensenumber||"",licenseIssueDate:n.licenseissuedate||"",licenseExpiryDate:n.licenseexpirydate||"",registeredOfficeAddress:n.registeredofficeaddress||"",countriesSourceOfFunds:n.countriessourceoffunds||"",managementCompany:n.managementcompany||"",countriesOfOperation:n.countriesofoperation||"",jurisdiction:n.jurisdiction||"",trn:n.trn||"",licensingAuthority:n.licensingauthority||"",licenseCategory:n.licensecategory||"",addressExpiryDate:n.addressexpirydate||"",sourceOfFunds:n.sourceoffunds||"",residencyStatus:n.residencystatus||""}}return{coreSystemId:"",customerType:"Natural Person",email:"",countryCode:"+971",phone:"",city:"",channel:"",transactionProduct:"",sourceOfFunds:"",residencyStatus:"",transactionAmountLimit:"",transactionLimit:"",profession:"",firstName:"",lastName:"",alias:"",dateOfBirth:"",nationality:"",idType:"",idNumber:"",issueDate:"",expiryDate:"",address:"",occupation:"",sourceOfWealth:"",pep:"",countryOfBirth:"",isDualNationality:!1,poBox:"",gender:"",employer:"",dualNationality:"",dualPassportNumber:"",dualPassportIssueDate:"",dualPassportExpiryDate:"",sourceOfFunds:"",residencyStatus:"",businessActivity:"",legalName:"",dateOfIncorporation:"",countryOfIncorporation:"",licenseType:"",licenseNumber:"",licenseIssueDate:"",licenseExpiryDate:"",registeredOfficeAddress:"",countriesSourceOfFunds:"",managementCompany:"",countriesOfOperation:"",jurisdiction:"",trn:"",licensingAuthority:"",licenseCategory:"",addressExpiryDate:"",sourceOfFunds:"",residencyStatus:""}}),[d,h]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[p,g]=(0,t.useState)([]),[y,v]=(0,t.useState)([]),b=(0,t.useRef)(),x=(0,t.useRef)();(0,t.useEffect)(()=>{r&&n&&(n.shareholders&&(console.log("\ud83d\udc65 Initializing shareholders:",n.shareholders),h(n.shareholders)),n.directors&&(console.log("\ud83d\udc54 Initializing directors:",n.directors),m(n.directors)),n.bankDetails&&(console.log("\ud83c\udfe6 Initializing bank details:",n.bankDetails),g(n.bankDetails)),n.ubos&&(console.log("\ud83d\udc64 Initializing UBOs:",n.ubos),v(n.ubos)))},[r,n]);const[w,N]=(0,t.useState)({}),[S,_]=(0,t.useState)({}),j=e=>{if(!e)return!0;return new Date(e)>new Date},E=(e,t)=>{let r=null;switch(e){case"dateOfBirth":r=(e=>{if(!e)return null;const t=new Date,r=new Date(e);let n=t.getFullYear()-r.getFullYear();const a=t.getMonth()-r.getMonth();return(a<0||0===a&&t.getDate()<r.getDate())&&n--,n>=18?null:"Person must be at least 18 years old"})(t);break;case"issueDate":case"licenseIssueDate":t&&j(t)&&(r="Issue date cannot be in the future");break;case"expiryDate":case"licenseExpiryDate":case"addressExpiryDate":t&&!j(t)&&(r="Expiry date must be in the future");break;case"dualPassportIssueDate":case"dualPassportExpiryDate":t&&!j(t)&&(r="Passport date must be in the future");break;case"transactionAmountLimit":case"transactionLimit":t&&(isNaN(t)||parseFloat(t)<=0)&&(r="Must be a positive number");break;case"email":t?/\S+@\S+\.\S+/.test(t)||(r="Email is invalid"):r="Email is required";break;case"phone":t?t.replace(/[^0-9]/g,"").length<7?r="Phone number must be at least 7 digits":t.replace(/[^0-9]/g,"").length>15&&(r="Phone number cannot exceed 15 digits"):r="Phone number is required";break;case"city":t||(r="City is required");break;case"channel":t||(r="Channel is required");break;case"transactionProduct":t||(r="Transaction product is required");break;case"coreSystemId":t||(r="Core System ID is required");break;case"firstName":t||(r="First name is required");break;case"lastName":t||(r="Last name is required");break;case"nationality":t||(r="Nationality is required");break;case"idType":t||(r="ID type is required");break;case"idNumber":t||(r="ID number is required");break;case"address":t||(r="Address is required");break;case"occupation":t||(r="Occupation is required");break;case"sourceOfWealth":t||(r="Source of wealth is required");break;case"pep":t||(r="PEP status is required");break;case"countryOfBirth":t||(r="Country of birth is required");break;case"sourceOfFunds":t||(r="Source of funds is required");break;case"gender":t||(r="Gender is required");break;case"residencyStatus":t||(r="Residency status is required");break;case"businessActivity":(!t||Array.isArray(t)&&0===t.length)&&(r="Business activity is required");break;case"legalName":t||(r="Legal name is required");break;case"dateOfIncorporation":t||(r="Date of incorporation is required");break;case"countryOfIncorporation":t||(r="Country of incorporation is required");break;case"licenseType":t||(r="License type is required");break;case"licenseNumber":t||(r="License number is required");break;case"countriesSourceOfFunds":(!t||Array.isArray(t)&&0===t.length)&&(r="Countries source of funds is required");break;case"countriesOfOperation":(!t||Array.isArray(t)&&0===t.length)&&(r="Countries of operation is required");break;case"jurisdiction":(!t||Array.isArray(t)&&0===t.length)&&(r="Jurisdiction is required");break;case"licenseCategory":(!t||Array.isArray(t)&&0===t.length)&&(r="License category is required")}return r},A=e=>{const t=E(e,c[e]);N(r=>({...r,[e]:t})),_(t=>({...t,[e]:!0}))},k=(e,t)=>{u(r=>({...r,[e]:t})),w[e]&&N(t=>({...t,[e]:null}))};return(0,Zt.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow",children:[!r&&(0,Zt.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Customer Onboarding Form"}),(0,Zt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={},t=["email","phone","city","channel","transactionProduct","transactionAmountLimit","transactionLimit"];if("Natural Person"===c.customerType){const r=["firstName","lastName","dateOfBirth","nationality","idType","idNumber","address","occupation","sourceOfWealth","pep","countryOfBirth","sourceOfFunds","gender","residencyStatus"];[...t,...r].forEach(t=>{const r=E(t,c[t]);r&&(e[t]=r)})}else if("Legal Entities"===c.customerType){const r=["businessActivity","legalName","dateOfIncorporation","countryOfIncorporation","licenseType","licenseNumber","countriesSourceOfFunds","countriesOfOperation","jurisdiction","sourceOfFunds","residencyStatus","licenseCategory"];[...t,...r].forEach(t=>{const r=E(t,c[t]);r&&(e[t]=r)})}return Object.keys(e).length>0&&(console.log("Validation errors found:",e),console.log("Total validation errors:",Object.keys(e).length),console.log("Failed fields:",Object.keys(e)),console.log("Form data:",c)),N(e),0===Object.keys(e).length})())return console.log("Form validation failed. Current errors:",w),void Ht.error("Please fix the validation errors before submitting");if(!r&&c.coreSystemId){if(await(async e=>{try{return(await jO.checkCoreSystemIdExists(e)).exists}catch(t){return console.error("Error checking core system ID:",t),!1}})(c.coreSystemId))return void Ht.error("Core System ID already exists. Please use a unique ID.")}l(!0);try{const e={core_system_id:c.coreSystemId,customer_type:c.customerType,email:c.email,phone:c.countryCode+c.phone,channel:c.channel,transaction_product:c.transactionProduct,transaction_amount_limit:c.transactionAmountLimit,transaction_limit:c.transactionLimit,risk_score:0,risk_level:"Low",kyc_status:"Pending",due_diligence_level:"Simplified Customer Due Diligence",status:"Active"};let n=null;if(console.log("\ud83d\udd0d Form data for detail preparation:",c),"Natural Person"===c.customerType?(n={profession:c.profession,firstname:c.firstName,lastname:c.lastName,alias:c.alias,dateofbirth:c.dateOfBirth||null,nationality:c.nationality,residencystatus:c.residencyStatus,idtype:c.idType,idnumber:c.idNumber,issuedate:c.issueDate||null,expirydate:c.expiryDate||null,isdualnationality:c.isDualNationality,dualnationality:c.isDualNationality?c.dualNationality:null,dualpassportnumber:c.isDualNationality?c.dualPassportNumber:null,dualpassportissuedate:c.isDualNationality?c.dualPassportIssueDate:null,dualpassportexpirydate:c.isDualNationality?c.dualPassportExpiryDate:null,countryofbirth:c.countryOfBirth,address:c.address,city:c.city,occupation:c.occupation,sourceofwealth:c.sourceOfWealth,pep:c.pep,sourceoffunds:c.sourceOfFunds,pobox:c.poBox,gender:c.gender,employer:c.employer},console.log("\ud83d\udc64 Natural Person detail data prepared:",n)):"Legal Entities"===c.customerType&&(console.log("\ud83d\udd0d Legal Entity form data:",{businessActivity:c.businessActivity,legalName:c.legalName,alias:c.alias,dateOfIncorporation:c.dateOfIncorporation,countryOfIncorporation:c.countryOfIncorporation,licenseType:c.licenseType,licenseNumber:c.licenseNumber,licenseIssueDate:c.licenseIssueDate,licenseExpiryDate:c.licenseExpiryDate,registeredOfficeAddress:c.registeredOfficeAddress,city:c.city,countriesSourceOfFunds:c.countriesSourceOfFunds,managementCompany:c.managementCompany,countriesOfOperation:c.countriesOfOperation,jurisdiction:c.jurisdiction,sourceOfFunds:c.sourceOfFunds,residencyStatus:c.residencyStatus,licensingAuthority:c.licensingAuthority,trn:c.trn,licenseCategory:c.licenseCategory,addressExpiryDate:c.addressExpiryDate}),n={businessactivity:Array.isArray(c.businessActivity)?JSON.stringify(c.businessActivity):c.businessActivity,legalname:c.legalName,alias:c.alias,dateofincorporation:c.dateOfIncorporation||null,countryofincorporation:c.countryOfIncorporation,licensetype:c.licenseType,licensenumber:c.licenseNumber,licenseissuedate:c.licenseIssueDate||null,licenseexpirydate:c.licenseExpiryDate||null,registeredofficeaddress:c.registeredOfficeAddress,city:c.city,countriessourceoffunds:Array.isArray(c.countriesSourceOfFunds)?JSON.stringify(c.countriesSourceOfFunds):c.countriesSourceOfFunds,managementcompany:c.managementCompany,countriesofoperation:Array.isArray(c.countriesOfOperation)?JSON.stringify(c.countriesOfOperation):c.countriesOfOperation,jurisdiction:c.jurisdiction,sourceoffunds:c.sourceOfFunds,residencystatus:c.residencyStatus,licensingauthority:c.licensingAuthority,trn:c.trn,licensecategory:c.licenseCategory,addressexpirydate:c.addressExpiryDate||null},console.log("\ud83c\udfe2 Legal Entity detail data prepared:",n),console.log("\ud83c\udfe2 Detail data keys:",Object.keys(n)),console.log("\ud83c\udfe2 Detail data values:",Object.values(n))),r&&a){const t={...e,...n,shareholders:d,directors:f,bankDetails:p,ubos:y};console.log("\ud83d\udd04 Edit mode - sending update data:",t);const r=await a(t);r&&r.success?(Ht.success("Customer updated successfully!"),s("/customer/list")):Ht.error((null===r||void 0===r?void 0:r.error)||"Failed to update customer")}else{const r=await jO.createCustomer(e);if(r.success){const a=r.data.id;try{const t=[];n&&("Natural Person"===c.customerType?t.push(jO.saveNaturalPersonDetails(a,n).then(e=>{if(!e.success)throw new Error(`Failed to save Natural Person details: ${e.error}`);return e})):"Legal Entities"===c.customerType&&t.push(jO.saveLegalEntityDetails(a,n).then(e=>{if(!e.success)throw new Error(`Failed to save Legal Entity details: ${e.error}`);return e}))),d.length>0&&t.push(jO.saveShareholders(a,d)),f.length>0&&t.push(jO.saveDirectors(a,f)),p.length>0&&t.push(jO.saveBankDetails(a,p)),y.length>0&&t.push(jO.saveUbos(a,y)),t.length>0&&await Promise.all(t);const r={...e,...n,shareholders:d,directors:f,bankDetails:p,ubos:y},i=await jO.calculateAndUpdateRiskScore(a,r);i.success&&console.log("Risk score calculated and updated:",i.data),Ht.success("Customer onboarded successfully!"),s("/customer/list")}catch(t){console.error("Error saving detail or section data:",t),Ht.error("Customer created but failed to save some details"),s("/customer/list")}}else Ht.error(r.error||"Failed to onboard customer")}}catch(t){console.error("Error creating customer:",t),Ht.error("An error occurred while creating the customer")}finally{l(!1)}},children:[(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Core System ID ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:`input ${w.coreSystemId&&S.coreSystemId?"border-red-500":""} ${r?"bg-gray-100 cursor-not-allowed":""}`,value:c.coreSystemId,onChange:e=>!r&&k("coreSystemId",e.target.value),onBlur:()=>!r&&A("coreSystemId"),disabled:r}),w.coreSystemId&&S.coreSystemId&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.coreSystemId})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Customer Type ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input "+(r?"bg-gray-100 cursor-not-allowed":""),value:c.customerType,onChange:e=>!r&&k("customerType",e.target.value),disabled:r,children:[(0,Zt.jsx)("option",{value:"Natural Person",children:"Natural Person"}),(0,Zt.jsx)("option",{value:"Legal Entities",children:"Legal Entities"})]})]})]}),"Natural Person"===c.customerType?(0,Zt.jsx)(NT,{formData:c,onInputChange:k,onFieldBlur:A,errors:w,touched:S}):(0,Zt.jsx)(ST,{formData:c,onInputChange:k,onFieldBlur:A,errors:w,touched:S}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"email",className:"input "+(w.email&&S.email?"border-red-500":""),value:c.email,onChange:e=>k("email",e.target.value),onBlur:()=>A("email")}),w.email&&S.email&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.email})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm w-32",value:c.countryCode||"+971",onChange:e=>{u(t=>({...t,countryCode:e.target.value}))},children:oO.filter(e=>e.phone&&e.phone.length<=6).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,Zt.jsxs)("option",{value:e.phone,children:[e.phone," (",e.code,")"]},e.code))}),(0,Zt.jsx)("input",{type:"tel",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm "+(w.phone&&S.phone?"border-red-500":""),value:c.phone||"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");k("phone",t)},onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault()},placeholder:"Enter phone number",maxLength:15})]}),w.phone&&S.phone&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.phone})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["City ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{className:"input "+(w.city&&S.city?"border-red-500":""),value:c.city,onChange:e=>k("city",e.target.value),onBlur:()=>A("city")}),w.city&&S.city&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.city})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Channel ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input "+(w.channel&&S.channel?"border-red-500":""),value:c.channel,onChange:e=>k("channel",e.target.value),onBlur:()=>A("channel"),children:[(0,Zt.jsx)("option",{value:"",children:"Select Channel"}),(0,Zt.jsx)("option",{value:"Face to Face",children:"Face to Face"}),(0,Zt.jsx)("option",{value:"Non Face to Face",children:"Non Face to Face"})]}),w.channel&&S.channel&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.channel})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Transaction Product ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{className:"input "+(w.transactionProduct&&S.transactionProduct?"border-red-500":""),value:c.transactionProduct,onChange:e=>k("transactionProduct",e.target.value),onBlur:()=>A("transactionProduct"),children:[(0,Zt.jsx)("option",{value:"",children:"Select Transaction Product"}),sT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]}),w.transactionProduct&&S.transactionProduct&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.transactionProduct})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Amount Limit"}),(0,Zt.jsx)("input",{type:"number",step:"0.01",min:"0",className:"input "+(w.transactionAmountLimit&&S.transactionAmountLimit?"border-red-500":""),value:c.transactionAmountLimit,onChange:e=>k("transactionAmountLimit",e.target.value),onBlur:()=>A("transactionAmountLimit"),placeholder:"Enter amount limit per transaction"}),w.transactionAmountLimit&&S.transactionAmountLimit&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.transactionAmountLimit})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Limit"}),(0,Zt.jsx)("input",{type:"number",step:"0.01",min:"0",className:"input "+(w.transactionLimit&&S.transactionLimit?"border-red-500":""),value:c.transactionLimit,onChange:e=>k("transactionLimit",e.target.value),onBlur:()=>A("transactionLimit"),placeholder:"Enter total amount limit per year"}),w.transactionLimit&&S.transactionLimit&&(0,Zt.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.transactionLimit})]})]}),(0,Zt.jsxs)("div",{className:"mt-6 space-y-4",children:["Legal Entities"===c.customerType&&(0,Zt.jsx)(jT,{shareholders:d,onShareholdersChange:e=>{h(e)},isEdit:r,onDirectorCreate:e=>{if(console.log("\ud83d\udc54 Filling director form with shareholder data:",e),b.current&&b.current.fillForm(e),e.firstName&&e.lastName){const t=`${e.firstName} ${e.lastName}`.trim();t&&Ht.success(`Director form filled with data from "${t}"! Complete remaining fields and click "Add Director".`)}},onUboCreate:e=>{console.log("\ud83d\udc64 Filling UBO form with shareholder data:",e),x.current&&x.current.fillForm(e),e.fullName&&Ht.success(`UBO form filled with data from "${e.fullName}"! Complete remaining fields and click "Add UBO".`)}}),"Legal Entities"===c.customerType&&(0,Zt.jsx)(kT,{ref:b,directors:f,onDirectorsChange:e=>{m(e)},isEdit:r}),(0,Zt.jsx)(OT,{bankDetails:p,onBankDetailsChange:e=>{g(e)},isEdit:r}),"Legal Entities"===c.customerType&&(0,Zt.jsx)(IT,{ref:x,ubos:y,onUbosChange:e=>{v(e)},isEdit:r})]}),(0,Zt.jsx)("div",{className:"mt-6",children:(0,Zt.jsxs)("div",{className:"flex gap-4",children:[r&&i&&(0,Zt.jsx)("button",{type:"button",onClick:i,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg transition duration-200",children:"Cancel"}),(0,Zt.jsx)("button",{type:"submit",disabled:o,className:(r?"flex-1":"w-full")+" bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:o?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Zt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Zt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):r?"Update Customer":"Create Customer"})]})})]})]})},PT=()=>{const e=re(),[r,n]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[s,o]=(0,t.useState)({risk:"",kyc:""}),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(!0),[h,f]=(0,t.useState)(null),[m,p]=(0,t.useState)(!1),[g,y]=(0,t.useState)(new Set),[v,b]=(0,t.useState)(null),[x,w]=(0,t.useState)(!1),[N,S]=(0,t.useState)(!1),[_,j]=(0,t.useState)(null),[E,A]=(0,t.useState)(!1),k=(0,t.useCallback)(e=>{i(t=>t===e?"":e)},[]);(0,t.useEffect)(()=>{(async()=>{try{d(!0);const e=await jO.getCustomers();e.success?c(e.data):f(e.error||"Failed to fetch customers")}catch(h){console.error("Error fetching customers:",h),f("Failed to fetch customers")}finally{d(!1)}})()},[]);const C=(0,t.useCallback)((e,t)=>{o(r=>({...r,[e]:t}))},[]),O=(0,t.useCallback)(async()=>{try{p(!0),Ht.info("\ud83d\udd04 Starting risk re-evaluation for all customers...",{autoClose:2e3});const e=await jO.reEvaluateAllRiskScores();if(e.success){const t=await jO.getCustomers();t.success&&c(t.data);const r=e.errorCount>0?`\u2705 Re-evaluation completed!\n\u2705 Updated: ${e.updatedCount} customers\n\u26a0\ufe0f Errors: ${e.errorCount} customers\n\ud83d\udcca Total: ${e.totalCustomers||e.updatedCount+e.errorCount} customers`:`\u2705 Re-evaluation completed successfully!\n\u2705 Updated: ${e.updatedCount} customers\n\ud83d\udcca Total: ${e.totalCustomers||e.updatedCount} customers`;Ht.success(r,{autoClose:5e3})}else Ht.error(`\u274c Error: ${e.error||"Failed to re-evaluate risk scores"}`)}catch(h){console.error("Error re-evaluating risk scores:",h),Ht.error(`\u274c Failed to re-evaluate risk scores: ${h.message||"Unknown error"}`)}finally{p(!1)}},[]),T=(0,t.useCallback)(e=>{y(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),R=(0,t.useCallback)(async e=>{try{const t=await jO.getCustomerById(e.id);if(!t)return void console.error("Failed to fetch customer data for editing");const r={id:t.id,core_system_id:t.core_system_id,customer_type:t.customer_type,email:t.email,phone:t.phone,channel:t.channel,transaction_product:t.transaction_product,transaction_amount_limit:t.transaction_amount_limit,transaction_limit:t.transaction_limit,risk_score:t.risk_score,risk_level:t.risk_level,kyc_status:t.kyc_status,kyc_remarks:t.kyc_remarks,due_diligence_level:t.due_diligence_level,status:t.status,created_at:t.created_at,updated_at:t.updated_at,...t.natural_person_details&&{profession:t.natural_person_details.profession,firstname:t.natural_person_details.firstname,lastname:t.natural_person_details.lastname,alias:t.natural_person_details.alias,dateofbirth:t.natural_person_details.dateofbirth,nationality:t.natural_person_details.nationality,residencystatus:t.natural_person_details.residencystatus,idtype:t.natural_person_details.idtype,idnumber:t.natural_person_details.idnumber,issuedate:t.natural_person_details.issuedate,expirydate:t.natural_person_details.expirydate,isdualnationality:t.natural_person_details.isdualnationality,dualnationality:t.natural_person_details.dualinationality,dualpassportnumber:t.natural_person_details.dualpassportnumber,dualpassportissuedate:t.natural_person_details.dualpassportissuedate,dualpassportexpirydate:t.natural_person_details.dualpassportexpirydate,countryofbirth:t.natural_person_details.countryofbirth,address:t.natural_person_details.address,city:t.natural_person_details.city,occupation:t.natural_person_details.occupation,sourceofwealth:t.natural_person_details.sourceofwealth,pep:t.natural_person_details.pep,sourceoffunds:t.natural_person_details.sourceoffunds,pobox:t.natural_person_details.pobox,gender:t.natural_person_details.gender,employer:t.natural_person_details.employer},...t.legal_entity_details&&{businessactivity:t.legal_entity_details.businessactivity?"string"===typeof t.legal_entity_details.businessactivity?JSON.parse(t.legal_entity_details.businessactivity):t.legal_entity_details.businessactivity:[],legalname:t.legal_entity_details.legalname,alias:t.legal_entity_details.alias,dateofincorporation:t.legal_entity_details.dateofincorporation,countryofincorporation:t.legal_entity_details.countryofincorporation,licensetype:t.legal_entity_details.licensetype,licensenumber:t.legal_entity_details.licensenumber,licenseissuedate:t.legal_entity_details.licenseissuedate,licenseexpirydate:t.legal_entity_details.licenseexpirydate,registeredofficeaddress:t.legal_entity_details.registeredofficeaddress,city:t.legal_entity_details.city,countriessourceoffunds:t.legal_entity_details.countriessourceoffunds?"string"===typeof t.legal_entity_details.countriessourceoffunds?JSON.parse(t.legal_entity_details.countriessourceoffunds):t.legal_entity_details.countriessourceoffunds:[],managementcompany:t.legal_entity_details.managementcompany,countriesofoperation:t.legal_entity_details.countriesofoperation?"string"===typeof t.legal_entity_details.countriesofoperation?JSON.parse(t.legal_entity_details.countriesofoperation):t.legal_entity_details.countriesofoperation:[],jurisdiction:t.legal_entity_details.jurisdiction,sourceoffunds:t.legal_entity_details.sourceoffunds,residencystatus:t.legal_entity_details.residencystatus,licensingauthority:t.legal_entity_details.licensingauthority,trn:t.legal_entity_details.trn,licensecategory:t.legal_entity_details.licensecategory,addressexpirydate:t.legal_entity_details.addressexpirydate},shareholders:(t.shareholders||[]).map(e=>({id:e.id,type:e.type,fullName:e.fullName,alias:e.alias,nationality:e.nationality,countryOfResidence:e.countryOfResidence,dateOfBirth:e.dateOfBirth,placeOfBirth:e.placeOfBirth,phone:e.phone,email:e.email,address:e.address,sourceOfFunds:e.sourceOfFunds,sourceOfWealth:e.sourceOfWealth,occupation:e.occupation,expectedIncome:e.expectedIncome,pep:e.pep,shareholding:e.shareholding,dualNationality:e.dualNationality,isDirector:e.isDirector,isUbo:e.isUbo,legalName:e.legalName,dateOfIncorporation:e.dateOfIncorporation,countryOfIncorporation:e.countryOfIncorporation,entityClass:e.entityClass,licenseType:e.licenseType,licenseNumber:e.licenseNumber,licenseIssueDate:e.licenseIssueDate,licenseExpiryDate:e.licenseExpiryDate,businessActivity:e.businessActivity,countriesOfOperation:e.countriesOfOperation,registeredOfficeAddress:e.registeredOfficeAddress,countriesSourceOfFunds:e.countriesSourceOfFunds,otherDetails:e.otherDetails,trustName:e.trustName,trustRegistered:e.trustRegistered,trustType:e.trustType,jurisdictionOfLaw:e.jurisdictionOfLaw,registeredAddress:e.registeredAddress,trusteeName:e.trusteeName,trusteeType:e.trusteeType})),directors:(t.customer_directors||[]).map(e=>({firstName:e.first_name,alias:e.alias,lastName:e.last_name,countryOfResidence:e.country_of_residence,nationality:e.nationality,dateOfBirth:e.date_of_birth,phone:e.phone,placeOfBirth:e.place_of_birth,email:e.email,address:e.address,city:e.city,occupation:e.occupation,pepStatus:e.pep_status,isCeo:e.is_ceo,isRepresentative:e.is_representative,dualNationality:e.dual_nationality})),bankDetails:(t.customer_bank_details||[]).map(e=>({bankName:e.bank_name,alias:e.alias,accountType:e.account_type,currency:e.currency,bankAccountDetails:e.bank_account_details,accountNumber:e.account_number,iban:e.iban,swift:e.swift,modeOfSignatory:e.mode_of_signatory,internetBanking:e.internet_banking,bankSignatories:e.bank_signatories})),ubos:(t.ubos||[]).map(e=>({id:e.id,fullName:e.fullName,alias:e.alias,nationality:e.nationality,countryOfResidence:e.countryOfResidence,dateOfBirth:e.dateOfBirth,placeOfBirth:e.placeOfBirth,phone:e.phone,email:e.email,address:e.address,sourceOfFunds:e.sourceOfFunds,sourceOfWealth:e.sourceOfWealth,occupation:e.occupation,expectedIncome:e.expectedIncome,pep:e.pep,shareholding:e.shareholding,dualNationality:e.dualNationality}))};b(r),w(!0),y(new Set)}catch(h){console.error("Error preparing customer data for editing:",h),Ht.error("Failed to load customer data for editing. Please try again.")}},[]),I=(0,t.useCallback)(t=>{e(`/customer/kyc/${t}`),y(new Set)},[e]),L=(0,t.useCallback)(t=>{e(`/customer/risk-profile/${t}`),y(new Set)},[e]),P=(0,t.useCallback)(t=>{e(`/customer/risk-mitigation/${t}`),y(new Set)},[e]),D=(0,t.useCallback)(t=>{e(`/customer/documents/${t}`),y(new Set)},[e]),M=(0,t.useCallback)(t=>{e(`/customer/sanction-details/${t}`),y(new Set)},[e]),F=(0,t.useCallback)(async e=>{try{if(!v)return{success:!1,error:"No customer selected"};const t=await jO.updateCustomer(v.id,e);if(t.success){const e=await jO.getCustomers();return e.success&&c(e.data),w(!1),b(null),{success:!0,message:"Customer updated successfully!"}}return{success:!1,error:t.error||"Failed to update customer"}}catch(h){return console.error("Error updating customer:",h),{success:!1,error:h.message||"Failed to update customer"}}},[v]),B=(0,t.useCallback)(async()=>{if(_)try{A(!0);const e=await jO.deleteCustomer(_.id);e.success?(c(e=>e.filter(e=>e.id!==_.id)),S(!1),j(null),Ht.success("Customer deleted successfully!")):Ht.error(`\u274c Error: ${e.error||"Failed to delete customer"}`)}catch(h){console.error("Error deleting customer:",h),Ht.error(`\u274c Error: ${h.message||"Failed to delete customer"}`)}finally{A(!1)}},[_]),U=(0,t.useCallback)(e=>{j(e),S(!0)},[]),z=(0,t.useMemo)(()=>l.map(e=>{let t="Unnamed Customer";if("Natural Person"===e.customer_type&&e.natural_person_details){t=`${e.natural_person_details.firstname||""} ${e.natural_person_details.lastname||""}`.trim()}else"Legal Entities"===e.customer_type&&e.legal_entity_details&&(t=e.legal_entity_details.legalname||"Legal Entity");return"Unnamed Customer"!==t&&""!==t.trim()||(e.first_name&&e.last_name?t=`${e.first_name} ${e.last_name}`.trim():e.first_name?t=e.first_name:e.alias&&(t=e.alias)),{id:e.id,name:t||"Unnamed Customer",customer_type:e.customer_type,risk:e.risk_level||"Low",kyc:e.kyc_status||"Pending",date:e.created_at?new Date(e.created_at).toISOString().split("T")[0]:"N/A",email:e.email,phone:e.phone}}),[l]),H=(0,t.useMemo)(()=>{const e=r.toLowerCase();return z.filter(t=>t.name.toLowerCase().includes(e)).filter(e=>!s.risk||e.risk===s.risk).filter(e=>!s.kyc||e.kyc===s.kyc).sort((e,t)=>a?"date"===a?new Date(t.date)-new Date(e.date):e[a].localeCompare(t[a]):0)},[z,r,s,a]);return(0,Zt.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Zt.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Customer List"}),u&&(0,Zt.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading customers..."})]}),h&&(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Zt.jsxs)("div",{className:"flex",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Zt.jsxs)("div",{className:"ml-3",children:[(0,Zt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading customers"}),(0,Zt.jsx)("div",{className:"mt-2 text-sm text-red-700",children:h})]})]})}),(0,Zt.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,Zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search customer...",value:r,onChange:e=>n(e.target.value),className:"w-full sm:w-64 border border-gray-300 rounded-lg px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,Zt.jsxs)("button",{onClick:()=>e("/customer/onboarding"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition duration-200 flex items-center gap-2 shadow-sm",children:[(0,Zt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Customer"]}),(0,Zt.jsx)("button",{onClick:O,disabled:u||m,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition duration-200 flex items-center gap-2 shadow-sm",children:m?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Re-evaluating..."]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Re-evaluate Risk"]})})]}),(0,Zt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Zt.jsxs)("select",{value:s.risk,onChange:e=>C("risk",e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-400",children:[(0,Zt.jsx)("option",{value:"",children:"All Risks"}),(0,Zt.jsx)("option",{value:"High",children:"High"}),(0,Zt.jsx)("option",{value:"Medium High",children:"Medium High"}),(0,Zt.jsx)("option",{value:"Medium",children:"Medium"}),(0,Zt.jsx)("option",{value:"Medium Low",children:"Medium Low"}),(0,Zt.jsx)("option",{value:"Low",children:"Low"})]}),(0,Zt.jsxs)("select",{value:s.kyc,onChange:e=>C("kyc",e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-400",children:[(0,Zt.jsx)("option",{value:"",children:"All KYC"}),(0,Zt.jsx)("option",{value:"Approved",children:"Approved"}),(0,Zt.jsx)("option",{value:"Pending",children:"Pending"}),(0,Zt.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,Zt.jsx)("option",{value:"Under Review",children:"Under Review"})]})]})]}),!u&&!h&&(0,Zt.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",H.length," of ",l.length," customers"]}),!u&&!h&&(0,Zt.jsxs)("div",{className:"overflow-auto bg-white rounded-xl shadow border",children:[(0,Zt.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,Zt.jsx)("thead",{children:(0,Zt.jsxs)("tr",{className:"bg-gray-100 text-gray-700 border-b",children:[(0,Zt.jsx)("th",{className:"p-4 font-medium cursor-pointer hover:text-blue-600",onClick:()=>k("name"),children:"Name"}),(0,Zt.jsx)("th",{className:"p-4 font-medium cursor-pointer hover:text-blue-600",onClick:()=>k("customer_type"),children:"Type"}),(0,Zt.jsx)("th",{className:"p-4 font-medium cursor-pointer hover:text-blue-600",onClick:()=>k("risk"),children:"Risk Level"}),(0,Zt.jsx)("th",{className:"p-4 font-medium cursor-pointer hover:text-blue-600",onClick:()=>k("kyc"),children:"KYC Status"}),(0,Zt.jsx)("th",{className:"p-4 font-medium cursor-pointer hover:text-blue-600",onClick:()=>k("date"),children:"Date Added"})]})}),(0,Zt.jsx)("tbody",{children:H.map((e,r)=>(0,Zt.jsxs)(t.Fragment,{children:[(0,Zt.jsxs)("tr",{onClick:()=>T(e.id),className:"border-b hover:bg-gray-50 transition duration-200 cursor-pointer "+(g.has(e.id)?"bg-blue-50":""),children:[(0,Zt.jsx)("td",{className:"p-4 font-semibold text-gray-800",children:e.name}),(0,Zt.jsx)("td",{className:"p-4",children:(0,Zt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:e.customer_type})}),(0,Zt.jsx)("td",{className:"p-4",children:(0,Zt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("High"===e.risk||"Medium High"===e.risk?"bg-red-100 text-red-700":"Medium"===e.risk?"bg-yellow-100 text-yellow-700":"Medium Low"===e.risk?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:e.risk})}),(0,Zt.jsx)("td",{className:"p-4 text-gray-700",children:e.kyc}),(0,Zt.jsx)("td",{className:"p-4 text-gray-600",children:e.date})]}),g.has(e.id)&&(0,Zt.jsx)("tr",{className:"bg-gray-50 border-b",children:(0,Zt.jsx)("td",{colSpan:"5",className:"p-4",children:(0,Zt.jsxs)("div",{className:"flex gap-3",children:[(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),R(e)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"Edit Customer"}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),I(e.id)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"KYC Review"}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),L(e.id)},className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"Risk Profile"}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),P(e.id)},className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"Risk Mitigation"}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),D(e.id)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"Document Upload"}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),M(e.id)},className:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"Sanction Details"}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),U(e)},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"Delete Customer"}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),y(t=>{const r=new Set(t);return r.delete(e.id),r})},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition duration-200",children:"Close"})]})})})]},e.id))})]}),0===H.length&&(0,Zt.jsx)("div",{className:"p-6 text-gray-500 text-center",children:"No customers found."})]}),x&&v&&(0,Zt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Zt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Customer"}),(0,Zt.jsx)("button",{onClick:()=>{w(!1),b(null)},className:"text-gray-500 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100 transition duration-200",children:(0,Zt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Zt.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,Zt.jsx)(LT,{isEdit:!0,initialData:v,onSubmit:F,onCancel:()=>{w(!1),b(null)}})})]})}),N&&_&&(0,Zt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Zt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Zt.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Zt.jsx)("div",{className:"ml-3",children:(0,Zt.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Customer"})})]}),(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete ",(0,Zt.jsx)("span",{className:"font-semibold text-gray-900",children:_.name}),"?"]}),(0,Zt.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"\u26a0\ufe0f This action cannot be undone."})]}),(0,Zt.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,Zt.jsx)("button",{onClick:()=>{S(!1),j(null)},disabled:E,className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-lg font-medium transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,Zt.jsx)("button",{onClick:B,disabled:E,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:E?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Deleting..."]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})})]})]})})]})},DT=e=>{let{label:t,value:r}=e;return(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-600",children:t}),(0,Zt.jsx)("div",{className:"mt-1 text-gray-900",children:null!==r&&void 0!==r&&""!==r?String(r):"\u2014"})]})},MT=e=>{let{label:t,value:r,onChange:n,options:a}=e;return(0,Zt.jsxs)("div",{className:"mb-4 col-span-2",children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,Zt.jsx)("select",{className:"w-full border border-gray-300 rounded-md p-2",value:r,onChange:n,children:a.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))})]})},FT=e=>{let{title:t,children:r}=e;return(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[(0,Zt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t}),(0,Zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r})]})},BT=e=>{let{title:t,children:r}=e;return(0,Zt.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 via-gray-100 border border-gray-200 rounded-lg p-5 mb-4 shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,Zt.jsx)("div",{className:"mb-4",children:"string"===typeof t?(0,Zt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:t}):t}),(0,Zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r})]})},UT=e=>{let{title:t,children:r}=e;return(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-3 overflow-hidden border border-gray-100",children:[(0,Zt.jsx)("div",{className:"px-4 py-3",children:"string"===typeof t?(0,Zt.jsx)("h3",{className:"text-lg font-semibold",children:t}):t}),(0,Zt.jsx)("div",{className:"border-t border-gray-100",children:r})]})},zT=e=>{let{entityId:t,entityName:r,dueDiligenceLevel:n,verificationChecks:a,onVerificationCheckChange:i,isExpanded:s,onToggle:o}=e;const l=YO.getDefaultQuestions(n);return(0,Zt.jsx)("div",{className:"mt-6 col-span-2",children:(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow-sm mb-3 overflow-hidden border border-gray-100",children:[(0,Zt.jsx)("div",{className:"px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:o,children:(0,Zt.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Zt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Zt.jsx)("div",{className:"w-2 h-2 bg-teal-500 rounded-full"}),(0,Zt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Due Diligence & Verification Checks"})]}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 text-teal-600 hover:text-teal-700 rounded-lg transition-all duration-200",children:[(0,Zt.jsx)("span",{className:"text-sm font-medium",children:s?"Collapse":"Expand"}),(0,Zt.jsx)("svg",{className:"w-4 h-4 transition-transform duration-300 "+(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),s&&(0,Zt.jsx)("div",{className:"border-t border-gray-100 px-4 pb-4 pt-4",children:(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Diligence Level"}),(0,Zt.jsx)("div",{className:"w-full border border-gray-300 rounded-md p-2 bg-gray-50 text-gray-700",children:n})]}),(0,Zt.jsx)("div",{className:"space-y-4",children:l.map((e,r)=>{var n,s,o,l,c;if("heading"===e.type)return(0,Zt.jsx)("div",{className:"mt-4 mb-3 first:mt-0",children:(0,Zt.jsx)("h5",{className:"text-base font-bold text-gray-800",children:e.label})},`heading-${t}-${r}`);const{label:u,key:d}=e,h=`${t}_${d}`;return(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:u}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-6 mb-2",children:[(0,Zt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"radio",name:h,value:"yes",checked:"yes"===(null===(n=a[h])||void 0===n?void 0:n.answer),onChange:()=>{var e;return i(h,{answer:"yes",notes:(null===(e=a[h])||void 0===e?void 0:e.notes)||""})}}),(0,Zt.jsx)("span",{children:"Yes"})]}),(0,Zt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"radio",name:h,value:"no",checked:"no"===(null===(s=a[h])||void 0===s?void 0:s.answer),onChange:()=>i(h,{answer:"no",notes:""})}),(0,Zt.jsx)("span",{children:"No"})]}),(0,Zt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"radio",name:h,value:"n/a",checked:"n/a"===(null===(o=a[h])||void 0===o?void 0:o.answer),onChange:()=>i(h,{answer:"n/a",notes:""})}),(0,Zt.jsx)("span",{children:"N/A"})]})]}),"yes"===(null===(l=a[h])||void 0===l?void 0:l.answer)&&(0,Zt.jsx)("textarea",{className:"w-full border border-gray-300 rounded-md p-2",rows:3,placeholder:"Add justification or notes...",value:(null===(c=a[h])||void 0===c?void 0:c.notes)||"",onChange:e=>i(h,{...a[h],notes:e.target.value})})]},h)})})]})})]})})},HT=()=>{const{customerId:e}=ne(),r=re(),[n,a]=(0,t.useState)(null),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[p,g]=(0,t.useState)(!0),[y,v]=(0,t.useState)(null),b=e=>{U(t=>({...t,[e]:!t[e]}))},x=e=>{if(!e)return"\u2014";if("string"===typeof e)try{const t=JSON.parse(e);return Array.isArray(t)?t.filter(e=>e&&""!==e.trim()).join(", ")||"\u2014":t}catch(EM){return e}return Array.isArray(e)?e.filter(e=>e&&""!==e.trim()).join(", ")||"\u2014":e},w=(0,t.useCallback)(async()=>{if(null!==n&&void 0!==n&&n.id)try{const e=await YO.loadVerificationChecks(n.id);e.success?R(e.data):console.error("Error loading verification checks:",e.error)}catch(y){console.error("Error loading verification checks:",y)}},[null===n||void 0===n?void 0:n.id]);(0,t.useEffect)(()=>{e&&(async()=>{try{g(!0);const t=await jO.getCustomerById(e);if(!t)return void v("Customer not found");if(a(t),console.log("\ud83d\udd0d Main customer data from customers table:",t),"Natural Person"===t.customer_type){const t=await jO.getNaturalPersonDetails(e);console.log("\ud83d\udc64 Natural person details from natural_person_details table:",t),s(t)}else if("Legal Entities"===t.customer_type){const t=await jO.getLegalEntityDetails(e);s(t),console.log("\ud83c\udfe2 Legal entity details from legal_entity_details table:",t)}if("Legal Entities"===t.customer_type){const t=await jO.getShareholders(e);t.success&&(l(t.data||[]),console.log("\ud83d\udcca Shareholders data from customer_shareholders + detail tables:",t.data))}if("Legal Entities"===t.customer_type){const t=await jO.getDirectors(e);t.success&&(u(t.data||[]),console.log("\ud83d\udc54 Directors data from customer_directors table:",t.data))}const r=await jO.getBankDetails(e);if(r.success&&(h(r.data||[]),console.log("\ud83c\udfe6 Bank details from customer_bank_details table:",r.data)),"Legal Entities"===t.customer_type){const t=await jO.getUbos(e);t.success&&(m(t.data||[]),console.log("\ud83d\udd0d UBOs data from customer_ubos table:",t.data))}}catch(y){console.error("Error fetching customer data:",y),v("Failed to fetch customer data")}finally{g(!1)}})()},[e]),(0,t.useEffect)(()=>{n&&(_(n.kyc_status||"Pending"),E(n.kyc_remarks||""),k(n.due_diligence_level||"Simplified Customer Due Diligence"),w(),N())},[n,w]);const N=(0,t.useCallback)(async()=>{if(null!==n&&void 0!==n&&n.id)try{const e=await YO.loadAllEntityVerificationChecks(n.id);if(e.success&&e.data){if(e.data.shareholders){const t={};o.forEach((r,n)=>{const a=r.id||n;e.data.shareholders[a]&&Object.entries(e.data.shareholders[a]).forEach(e=>{let[r,n]=e;t[`shareholder_${a}_${r}`]=n})}),L(t)}if(e.data.ubos){const t={};f.forEach((r,n)=>{const a=r.id||n;e.data.ubos[a]&&Object.entries(e.data.ubos[a]).forEach(e=>{let[r,n]=e;t[`ubo_${a}_${r}`]=n})}),D(t)}if(e.data.directors){const t={};c.forEach((r,n)=>{const a=r.id||n;e.data.directors[a]&&Object.entries(e.data.directors[a]).forEach(e=>{let[r,n]=e;t[`director_${a}_${r}`]=n})}),F(t)}}}catch(y){console.error("Error loading entity verification checks:",y)}},[null===n||void 0===n?void 0:n.id,o,f,c]),[S,_]=(0,t.useState)("Pending"),[j,E]=(0,t.useState)(""),[A,k]=(0,t.useState)("Standard"),[C,O]=(0,t.useState)(""),[T,R]=(0,t.useState)({}),[I,L]=(0,t.useState)({}),[P,D]=(0,t.useState)({}),[M,F]=(0,t.useState)({}),[B,U]=(0,t.useState)({shareholders:!1,directors:!1,bankDetails:!1,ubos:!1}),[z,H]=(0,t.useState)({});return p?(0,Zt.jsx)("div",{className:"p-6 max-w-6xl mx-auto",children:(0,Zt.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading customer data..."})]})}):y||!n?(0,Zt.jsx)("div",{className:"p-6 max-w-6xl mx-auto",children:(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Zt.jsxs)("div",{className:"flex",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Zt.jsxs)("div",{className:"ml-3",children:[(0,Zt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading customer"}),(0,Zt.jsx)("div",{className:"mt-2 text-sm text-red-700",children:y||"Customer not found"}),(0,Zt.jsx)("button",{onClick:()=>r("/customer/list"),className:"mt-3 bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700",children:"Back to Customer List"})]})]})})}):(0,Zt.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,Zt.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Zt.jsxs)("button",{onClick:()=>r("/customer/list"),className:"flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 hover:text-gray-900 rounded-lg transition-all duration-200 border border-gray-300 hover:border-gray-400 shadow-sm hover:shadow-md",children:[(0,Zt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Customer List"]})}),(0,Zt.jsxs)("div",{className:"bg-blue-50 rounded-xl p-6 mb-6 flex justify-between items-center",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h2",{className:"text-2xl font-bold",children:"Natural Person"===n.customer_type?`${(null===i||void 0===i?void 0:i.firstname)||""} ${(null===i||void 0===i?void 0:i.lastname)||""}`.trim():(null===i||void 0===i?void 0:i.legalname)||(null===i||void 0===i?void 0:i.alias)||"Legal Entity"}),(0,Zt.jsx)("p",{className:"text-gray-600",children:n.customer_type})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("Approved"===S?"bg-green-100 text-green-800":"Rejected"===S?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:S}),(0,Zt.jsxs)("span",{className:"ml-4 px-3 py-1 rounded-full text-sm font-medium "+("High"===n.risk_level?"bg-red-100 text-red-800 border border-red-200":"Medium"===n.risk_level?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-green-100 text-green-800 border border-green-200"),children:["Risk: ",n.risk_level||"Low"]})]})]}),"Natural Person"===n.customer_type?(0,Zt.jsxs)(FT,{title:"Personal Information",children:[(0,Zt.jsx)(DT,{label:"First Name",value:(null===i||void 0===i?void 0:i.firstname)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Last Name",value:(null===i||void 0===i?void 0:i.lastname)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Alias",value:(null===i||void 0===i?void 0:i.alias)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Profession",value:(null===i||void 0===i?void 0:i.profession)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Nationality",value:(null===i||void 0===i?void 0:i.nationality)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Date of Birth",value:(null===i||void 0===i?void 0:i.dateofbirth)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Country of Birth",value:(null===i||void 0===i?void 0:i.countryofbirth)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Gender",value:(null===i||void 0===i?void 0:i.gender)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Occupation",value:(null===i||void 0===i?void 0:i.occupation)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Employer",value:(null===i||void 0===i?void 0:i.employer)||"\u2014"}),(0,Zt.jsx)(DT,{label:"PEP Status",value:(null===i||void 0===i?void 0:i.pep)||"\u2014"})]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)(FT,{title:"Company Profile",children:[(0,Zt.jsx)(DT,{label:"Legal Name",value:(null===i||void 0===i?void 0:i.legalname)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Business Activity",value:x(null===i||void 0===i?void 0:i.businessactivity)}),(0,Zt.jsx)(DT,{label:"Alias",value:(null===i||void 0===i?void 0:i.alias)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Date of Incorporation",value:(null===i||void 0===i?void 0:i.dateofincorporation)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Country of Incorporation",value:(null===i||void 0===i?void 0:i.countryofincorporation)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Jurisdiction",value:x(null===i||void 0===i?void 0:i.jurisdiction)}),(0,Zt.jsx)(DT,{label:"Management Company",value:(null===i||void 0===i?void 0:i.managementcompany)||"\u2014"})]}),(0,Zt.jsxs)(FT,{title:"Regulatory Compliance",children:[(0,Zt.jsx)(DT,{label:"License Type",value:(null===i||void 0===i?void 0:i.licensetype)||"\u2014"}),(0,Zt.jsx)(DT,{label:"License Number",value:(null===i||void 0===i?void 0:i.licensenumber)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Issue Date",value:(null===i||void 0===i?void 0:i.licenseissuedate)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Expiry Date",value:(null===i||void 0===i?void 0:i.licenseexpirydate)||"\u2014"}),(0,Zt.jsx)(DT,{label:"License Category",value:(null===i||void 0===i?void 0:i.licensecategory)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Licensing Auth",value:(null===i||void 0===i?void 0:i.licensingauthority)||"\u2014"}),(0,Zt.jsx)(DT,{label:"TRN",value:(null===i||void 0===i?void 0:i.trn)||"\u2014"})]}),(0,Zt.jsxs)(FT,{title:"Geographic Operations",children:[(0,Zt.jsx)(DT,{label:"Countries of Operation",value:x(null===i||void 0===i?void 0:i.countriesofoperation)}),(0,Zt.jsx)(DT,{label:"Countries Source of Funds",value:x(null===i||void 0===i?void 0:i.countriessourceoffunds)}),(0,Zt.jsx)(DT,{label:"Registered Office Address",value:(null===i||void 0===i?void 0:i.registeredofficeaddress)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Address Expiry Date",value:(null===i||void 0===i?void 0:i.addressexpirydate)||"\u2014"})]}),(0,Zt.jsxs)(FT,{title:"Financial Profile",children:[(0,Zt.jsx)(DT,{label:"Source of Funds",value:(null===i||void 0===i?void 0:i.sourceoffunds)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Residency Status",value:(null===i||void 0===i?void 0:i.residencystatus)||"\u2014"})]})]}),(0,Zt.jsxs)(FT,{title:"Contact Information",children:[(0,Zt.jsx)(DT,{label:"Email",value:n.email||"\u2014"}),(0,Zt.jsx)(DT,{label:"Phone Number",value:n.phone||"\u2014"}),(0,Zt.jsx)(DT,{label:"Channel",value:n.channel||"\u2014"}),"Natural Person"===n.customer_type&&i&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(DT,{label:"City",value:i.city||"\u2014"}),(0,Zt.jsx)(DT,{label:"Address",value:i.address||"\u2014"}),(0,Zt.jsx)(DT,{label:"P.O. Box",value:i.pobox||"\u2014"})]}),"Legal Entities"===n.customer_type&&i&&(0,Zt.jsx)(Zt.Fragment,{children:(0,Zt.jsx)(DT,{label:"City",value:i.city||"\u2014"})})]}),"Natural Person"===n.customer_type&&i&&(0,Zt.jsxs)(FT,{title:"ID Information",children:[(0,Zt.jsx)(DT,{label:"Residency Status",value:(null===i||void 0===i?void 0:i.residencystatus)||"\u2014"}),(0,Zt.jsx)(DT,{label:"ID Type",value:(null===i||void 0===i?void 0:i.idtype)||"\u2014"}),(0,Zt.jsx)(DT,{label:"ID Number",value:(null===i||void 0===i?void 0:i.idnumber)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Issue Date",value:(null===i||void 0===i?void 0:i.issuedate)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Expiry Date",value:(null===i||void 0===i?void 0:i.expirydate)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Is Dual Nationality",value:null!==i&&void 0!==i&&i.isdualnationality?"Yes":"No"}),(null===i||void 0===i?void 0:i.isdualnationality)&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(DT,{label:"Dual Nationality",value:(null===i||void 0===i?void 0:i.dualnationality)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Dual Passport Number",value:(null===i||void 0===i?void 0:i.dualpassportnumber)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Dual Passport Issue Date",value:(null===i||void 0===i?void 0:i.dualpassportissuedate)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Dual Passport Expiry Date",value:(null===i||void 0===i?void 0:i.dualpassportexpirydate)||"\u2014"})]})]}),"Natural Person"===n.customer_type&&i&&(0,Zt.jsxs)(FT,{title:"Funds & Wealth",children:[(0,Zt.jsx)(DT,{label:"Source of Wealth",value:(null===i||void 0===i?void 0:i.sourceofwealth)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Source of Funds",value:(null===i||void 0===i?void 0:i.sourceoffunds)||"\u2014"}),(0,Zt.jsx)(DT,{label:"Transaction Product",value:n.transaction_product||"\u2014"}),(0,Zt.jsx)(DT,{label:"Transaction Amount Limit",value:n.transaction_amount_limit||"\u2014"}),(0,Zt.jsx)(DT,{label:"Transaction Limit",value:n.transaction_limit||"\u2014"})]}),"Legal Entities"===n.customer_type&&(0,Zt.jsx)(UT,{title:(0,Zt.jsxs)("div",{className:"flex items-center justify-between w-full py-1",children:[(0,Zt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Zt.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,Zt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Shareholder Details"}),(0,Zt.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[o.length," ",1===o.length?"Shareholder":"Shareholders"]})]}),(0,Zt.jsxs)("button",{onClick:()=>b("shareholders"),className:"flex items-center space-x-2 px-4 py-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all duration-200 border border-blue-200 hover:border-blue-300",children:[(0,Zt.jsx)("span",{className:"text-sm font-medium",children:B.shareholders?"Collapse":"Expand"}),(0,Zt.jsx)("svg",{className:"w-4 h-4 transition-transform duration-300 "+(B.shareholders?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7"})})]})]}),children:B.shareholders&&(0,Zt.jsx)("div",{className:"px-4 pb-4",children:o.length>0?(0,Zt.jsx)("div",{className:"space-y-6 pt-4",children:o.map((e,t)=>(0,Zt.jsxs)(BT,{title:(0,Zt.jsxs)("div",{className:"space-y-1",children:[(0,Zt.jsx)("div",{className:"text-xl font-semibold text-gray-900",children:"Natural Person"===e.type?e.fullName:"Legal Entities"===e.type?e.legalName:e.trustName||"Shareholder"}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.type}),(0,Zt.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.shareholding?`${e.shareholding}%`:"0%"," shareholding"]})]})]}),children:["Natural Person"===e.type&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(DT,{label:"Full Name",value:e.fullName||"\u2014"}),(0,Zt.jsx)(DT,{label:"Alias",value:e.alias||"\u2014"}),(0,Zt.jsx)(DT,{label:"Country of Residence",value:e.countryOfResidence||"\u2014"}),(0,Zt.jsx)(DT,{label:"Nationality",value:e.nationality||"\u2014"}),(0,Zt.jsx)(DT,{label:"Date of Birth",value:e.dateOfBirth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Place of Birth",value:e.placeOfBirth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Phone",value:e.phone||"\u2014"}),(0,Zt.jsx)(DT,{label:"Email",value:e.email||"\u2014"}),(0,Zt.jsx)(DT,{label:"Address",value:e.address||"\u2014"}),(0,Zt.jsx)(DT,{label:"Source of Funds",value:e.sourceOfFunds||"\u2014"}),(0,Zt.jsx)(DT,{label:"Source of Wealth",value:e.sourceOfWealth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Occupation",value:e.occupation||"\u2014"}),(0,Zt.jsx)(DT,{label:"Expected Income Range Annually",value:e.expectedIncome||"\u2014"}),(0,Zt.jsx)(DT,{label:"PEP Status",value:e.pep||"\u2014"}),(0,Zt.jsx)(DT,{label:"Dual Nationality",value:e.dualNationality||"\u2014"}),(0,Zt.jsx)(DT,{label:"Is Director",value:e.isDirector?"Yes":"No"}),(0,Zt.jsx)(DT,{label:"Is UBO",value:e.isUbo?"Yes":"No"})]}),"Legal Entities"===e.type&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(DT,{label:"Legal Name",value:e.legalName||"\u2014"}),(0,Zt.jsx)(DT,{label:"Alias",value:e.alias||"\u2014"}),(0,Zt.jsx)(DT,{label:"Date of Incorporation",value:e.dateOfIncorporation||"\u2014"}),(0,Zt.jsx)(DT,{label:"Country of Incorporation",value:e.countryOfIncorporation||"\u2014"}),(0,Zt.jsx)(DT,{label:"Type",value:e.entityClass||"\u2014"}),(0,Zt.jsx)(DT,{label:"License Type",value:e.licenseType||"\u2014"}),(0,Zt.jsx)(DT,{label:"License Number",value:e.licenseNumber||"\u2014"}),(0,Zt.jsx)(DT,{label:"Issue Date",value:e.licenseIssueDate||"\u2014"}),(0,Zt.jsx)(DT,{label:"Expiry Date",value:e.licenseExpiryDate||"\u2014"}),(0,Zt.jsx)(DT,{label:"Business Activity",value:x(e.businessActivity)}),(0,Zt.jsx)(DT,{label:"Countries of Operation",value:x(e.countriesOfOperation)}),(0,Zt.jsx)(DT,{label:"Source of Funds",value:e.sourceOfFunds||"\u2014"}),(0,Zt.jsx)(DT,{label:"Registered Office Address",value:e.registeredOfficeAddress||"\u2014"}),(0,Zt.jsx)(DT,{label:"Countries Source of Funds",value:x(e.countriesSourceOfFunds)}),(0,Zt.jsx)(DT,{label:"Email",value:e.email||"\u2014"}),(0,Zt.jsx)(DT,{label:"Phone",value:e.phone||"\u2014"}),(0,Zt.jsx)(DT,{label:"Other Details",value:e.otherDetails||"\u2014"}),(0,Zt.jsx)(DT,{label:"% Shareholding",value:e.shareholding?`${e.shareholding}%`:"\u2014"})]}),"Trust"===e.type&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(DT,{label:"Trust Name",value:e.trustName||"\u2014"}),(0,Zt.jsx)(DT,{label:"Alias",value:e.alias||"\u2014"}),(0,Zt.jsx)(DT,{label:"Trust Registered",value:e.trustRegistered?"Yes":"No"}),(0,Zt.jsx)(DT,{label:"Type of Trust",value:e.trustType||"\u2014"}),(0,Zt.jsx)(DT,{label:"Jurisdiction of Law",value:e.jurisdictionOfLaw||"\u2014"}),(0,Zt.jsx)(DT,{label:"Registered Address",value:e.registeredAddress||"\u2014"}),(0,Zt.jsx)(DT,{label:"% Shareholding",value:e.shareholding?`${e.shareholding}%`:"0%"}),(0,Zt.jsx)(DT,{label:"Name of Trustee",value:e.trusteeName||"\u2014"}),(0,Zt.jsx)(DT,{label:"Trustee Type",value:e.trusteeType||"\u2014"})]}),(0,Zt.jsx)(zT,{entityId:`shareholder_${e.id||t}`,entityName:"Natural Person"===e.type?e.fullName:"Legal Entities"===e.type?e.legalName:e.trustName||`Shareholder ${t+1}`,dueDiligenceLevel:A,verificationChecks:I,onVerificationCheckChange:(e,t)=>L(r=>({...r,[e]:t})),isExpanded:z[`shareholder_${e.id||t}`]||!1,onToggle:()=>H(r=>({...r,[`shareholder_${e.id||t}`]:!r[`shareholder_${e.id||t}`]}))})]},t))}):(0,Zt.jsxs)("div",{className:"text-center py-8",children:[(0,Zt.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-50 rounded-full flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Zt.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"No Shareholders Added"}),(0,Zt.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"This customer doesn't have any shareholders yet"})]})})}),"Legal Entities"===n.customer_type&&(0,Zt.jsx)(UT,{title:(0,Zt.jsxs)("div",{className:"flex items-center justify-between w-full py-1",children:[(0,Zt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Zt.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,Zt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Directors / Representative Details"}),(0,Zt.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[c.length," ",1===c.length?"Director":"Directors"]})]}),(0,Zt.jsxs)("button",{onClick:()=>b("directors"),className:"flex items-center space-x-2 px-4 py-2 text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-all duration-200 border border-purple-200 hover:border-purple-300",children:[(0,Zt.jsx)("span",{className:"text-sm font-medium",children:B.directors?"Collapse":"Expand"}),(0,Zt.jsx)("svg",{className:"w-4 h-4 transition-transform duration-300 "+(B.directors?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7"})})]})]}),children:B.directors&&(0,Zt.jsx)("div",{className:"px-4 pb-4",children:c.length>0?(0,Zt.jsx)("div",{className:"space-y-6 pt-4",children:c.map((e,t)=>(0,Zt.jsxs)(BT,{title:(0,Zt.jsxs)("div",{className:"space-y-1",children:[(0,Zt.jsx)("div",{className:"text-xl font-semibold text-gray-900",children:`${e.firstName||""} ${e.lastName||""}`.trim()||"Director"}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Director"}),e.isRepresentative&&(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Representative"}),e.isCeo&&(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"CEO"})]})]}),children:[(0,Zt.jsx)(DT,{label:"First Name",value:e.firstName||"\u2014"}),(0,Zt.jsx)(DT,{label:"Last Name",value:e.lastName||"\u2014"}),(0,Zt.jsx)(DT,{label:"Alias",value:e.alias||"\u2014"}),(0,Zt.jsx)(DT,{label:"Country of Residence",value:e.countryOfResidence||"\u2014"}),(0,Zt.jsx)(DT,{label:"Nationality",value:e.nationality||"\u2014"}),(0,Zt.jsx)(DT,{label:"Date of Birth",value:e.dateOfBirth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Phone",value:e.phone||"\u2014"}),(0,Zt.jsx)(DT,{label:"Place of Birth",value:e.placeOfBirth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Email",value:e.email||"\u2014"}),(0,Zt.jsx)(DT,{label:"Address",value:e.address||"\u2014"}),(0,Zt.jsx)(DT,{label:"City",value:e.city||"\u2014"}),(0,Zt.jsx)(DT,{label:"Occupation",value:e.occupation||"\u2014"}),(0,Zt.jsx)(DT,{label:"PEP Status",value:e.pepStatus||"\u2014"}),(0,Zt.jsx)(DT,{label:"Is CEO",value:e.isCeo?"Yes":"No"}),(0,Zt.jsx)(DT,{label:"Is Representative",value:e.isRepresentative?"Yes":"No"}),(0,Zt.jsx)(DT,{label:"Dual Nationality",value:e.dualNationality||"\u2014"}),(0,Zt.jsx)(zT,{entityId:`director_${e.id||t}`,entityName:`${e.firstName||""} ${e.lastName||""}`.trim()||`Director ${t+1}`,dueDiligenceLevel:A,verificationChecks:M,onVerificationCheckChange:(e,t)=>F(r=>({...r,[e]:t})),isExpanded:z[`director_${e.id||t}`]||!1,onToggle:()=>H(r=>({...r,[`director_${e.id||t}`]:!r[`director_${e.id||t}`]}))})]},t))}):(0,Zt.jsxs)("div",{className:"text-center py-8",children:[(0,Zt.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-purple-50 rounded-full flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,Zt.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"No Directors Added"}),(0,Zt.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"This customer doesn't have any directors yet"})]})})}),(0,Zt.jsx)(UT,{title:(0,Zt.jsxs)("div",{className:"flex items-center justify-between w-full py-1",children:[(0,Zt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Zt.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,Zt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Bank Details"}),(0,Zt.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[d.length," ",1===d.length?"Account":"Accounts"]})]}),(0,Zt.jsxs)("button",{onClick:()=>b("bankDetails"),className:"flex items-center space-x-2 px-4 py-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-all duration-200 border border-green-200 hover:border-green-300",children:[(0,Zt.jsx)("span",{className:"text-sm font-medium",children:B.bankDetails?"Collapse":"Expand"}),(0,Zt.jsx)("svg",{className:"w-4 h-4 transition-transform duration-300 "+(B.bankDetails?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7"})})]})]}),children:B.bankDetails&&(0,Zt.jsx)("div",{className:"px-4 pb-4",children:d.length>0?(0,Zt.jsx)("div",{className:"space-y-6 pt-4",children:d.map((e,t)=>(0,Zt.jsxs)(BT,{title:(0,Zt.jsxs)("div",{className:"space-y-1",children:[(0,Zt.jsx)("div",{className:"text-xl font-semibold text-gray-900",children:e.bank_name||`Bank Account ${t+1}`}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.account_type||"Account"}),e.currency&&(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.currency})]})]}),children:[(0,Zt.jsx)(DT,{label:"Bank Name",value:e.bank_name||"\u2014"}),(0,Zt.jsx)(DT,{label:"Alias",value:e.alias||"\u2014"}),(0,Zt.jsx)(DT,{label:"Account Type",value:e.account_type||"\u2014"}),(0,Zt.jsx)(DT,{label:"Currency",value:e.currency||"\u2014"}),(0,Zt.jsx)(DT,{label:"Bank Account Details",value:e.bank_account_details||"\u2014"}),(0,Zt.jsx)(DT,{label:"Account Number",value:e.account_number||"\u2014"}),(0,Zt.jsx)(DT,{label:"IBAN",value:e.iban||"\u2014"}),(0,Zt.jsx)(DT,{label:"SWIFT",value:e.swift||"\u2014"}),(0,Zt.jsx)(DT,{label:"Mode of Signatory",value:e.mode_of_signatory||"\u2014"}),(0,Zt.jsx)(DT,{label:"Internet Banking",value:e.internet_banking||"\u2014"}),(0,Zt.jsx)(DT,{label:"Bank Signatories",value:e.bank_signatories||"\u2014"})]},t))}):(0,Zt.jsxs)("div",{className:"text-center py-8",children:[(0,Zt.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-50 rounded-full flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,Zt.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"No Bank Details"}),(0,Zt.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"This customer doesn't have any bank accounts yet"})]})})}),"Legal Entities"===n.customer_type&&(0,Zt.jsx)(UT,{title:(0,Zt.jsxs)("div",{className:"flex items-center justify-between w-full py-1",children:[(0,Zt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Zt.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,Zt.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"UBO Details"}),(0,Zt.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[f.length," ",1===f.length?"UBO":"UBOs"]})]}),(0,Zt.jsxs)("button",{onClick:()=>b("ubos"),className:"flex items-center space-x-2 px-4 py-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-all duration-200 border border-orange-200 hover:border-orange-300",children:[(0,Zt.jsx)("span",{className:"text-sm font-medium",children:B.ubos?"Collapse":"Expand"}),(0,Zt.jsx)("svg",{className:"w-4 h-4 transition-transform duration-300 "+(B.ubos?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7"})})]})]}),children:B.ubos&&(0,Zt.jsx)("div",{className:"px-4 pb-4",children:f.length>0?(0,Zt.jsx)("div",{className:"space-y-6 pt-4",children:f.map((e,t)=>(0,Zt.jsxs)(BT,{title:(0,Zt.jsxs)("div",{className:"space-y-1",children:[(0,Zt.jsx)("div",{className:"text-xl font-semibold text-gray-900",children:e.fullName||`UBO ${t+1}`}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"UBO"}),e.shareholding&&(0,Zt.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.shareholding,"% shareholding"]}),e.pep&&(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:e.pep})]})]}),children:[(0,Zt.jsx)(DT,{label:"Full Name",value:e.fullName||"\u2014"}),(0,Zt.jsx)(DT,{label:"Alias",value:e.alias||"\u2014"}),(0,Zt.jsx)(DT,{label:"Country of Residence",value:e.countryOfResidence||"\u2014"}),(0,Zt.jsx)(DT,{label:"Nationality",value:e.nationality||"\u2014"}),(0,Zt.jsx)(DT,{label:"Date of Birth",value:e.dateOfBirth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Place of Birth",value:e.placeOfBirth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Phone",value:e.phone||"\u2014"}),(0,Zt.jsx)(DT,{label:"Email",value:e.email||"\u2014"}),(0,Zt.jsx)(DT,{label:"Address",value:e.address||"\u2014"}),(0,Zt.jsx)(DT,{label:"Source of Funds",value:e.sourceOfFunds||"\u2014"}),(0,Zt.jsx)(DT,{label:"Source of Wealth",value:e.sourceOfWealth||"\u2014"}),(0,Zt.jsx)(DT,{label:"Occupation",value:e.occupation||"\u2014"}),(0,Zt.jsx)(DT,{label:"Expected Income",value:e.expectedIncome||"\u2014"}),(0,Zt.jsx)(DT,{label:"PEP Status",value:e.pep||"\u2014"}),(0,Zt.jsx)(DT,{label:"Dual Nationality",value:e.dualNationality||"\u2014"}),(0,Zt.jsx)(zT,{entityId:`ubo_${e.id||t}`,entityName:e.fullName||`UBO ${t+1}`,dueDiligenceLevel:A,verificationChecks:P,onVerificationCheckChange:(e,t)=>D(r=>({...r,[e]:t})),isExpanded:z[`ubo_${e.id||t}`]||!1,onToggle:()=>H(r=>({...r,[`ubo_${e.id||t}`]:!r[`ubo_${e.id||t}`]}))})]},t))}):(0,Zt.jsxs)("div",{className:"text-center py-8",children:[(0,Zt.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-50 rounded-full flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-8 h-8 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Zt.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"No UBOs Added"}),(0,Zt.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"This customer doesn't have any UBOs yet"})]})})}),(0,Zt.jsx)(FT,{title:"Due Diligence",children:(0,Zt.jsxs)("div",{className:"mb-4 col-span-2",children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Diligence Level"}),(0,Zt.jsxs)("select",{className:"w-full border border-gray-300 rounded-md p-2",value:A,onChange:e=>k(e.target.value),children:[(0,Zt.jsx)("option",{value:"Simplified Customer Due Diligence",children:"Simplified Customer Due Diligence"}),(0,Zt.jsx)("option",{value:"Customer Due Diligence",children:"Customer Due Diligence"}),(0,Zt.jsx)("option",{value:"Enhanced Customer Due Diligence",children:"Enhanced Customer Due Diligence"})]}),(0,Zt.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Calculated from risk level: ",(null===n||void 0===n?void 0:n.risk_level)||"Low"]})]})}),(0,Zt.jsx)(FT,{title:"Background & Verification Checks",children:YO.getDefaultQuestions(A).map((e,t)=>{var r,n,a,i,s;if("heading"===e.type)return(0,Zt.jsx)("div",{className:"col-span-2 mb-3 mt-4 first:mt-0",children:(0,Zt.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:e.label})},`heading-${t}`);const{label:o,key:l}=e;return(0,Zt.jsxs)("div",{className:"col-span-2 mb-4",children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o}),(0,Zt.jsxs)("div",{className:"flex items-center space-x-6 mb-2",children:[(0,Zt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"radio",name:l,value:"yes",checked:"yes"===(null===(r=T[l])||void 0===r?void 0:r.answer),onChange:()=>R(e=>{var t;return{...e,[l]:{answer:"yes",notes:(null===(t=e[l])||void 0===t?void 0:t.notes)||""}}})}),(0,Zt.jsx)("span",{children:"Yes"})]}),(0,Zt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"radio",name:l,value:"no",checked:"no"===(null===(n=T[l])||void 0===n?void 0:n.answer),onChange:()=>R(e=>({...e,[l]:{answer:"no",notes:""}}))}),(0,Zt.jsx)("span",{children:"No"})]}),(0,Zt.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("input",{type:"radio",name:l,value:"n/a",checked:"n/a"===(null===(a=T[l])||void 0===a?void 0:a.answer),onChange:()=>R(e=>({...e,[l]:{answer:"n/a",notes:""}}))}),(0,Zt.jsx)("span",{children:"N/A"})]})]}),"yes"===(null===(i=T[l])||void 0===i?void 0:i.answer)&&(0,Zt.jsx)("textarea",{className:"w-full border border-gray-300 rounded-md p-2",rows:3,placeholder:"Add justification or notes...",value:(null===(s=T[l])||void 0===s?void 0:s.notes)||"",onChange:e=>R(t=>({...t,[l]:{...t[l],notes:e.target.value}}))})]},l)})}),(0,Zt.jsxs)(FT,{title:"Final KYC Assessment",children:[(0,Zt.jsx)(MT,{label:"KYC Status",value:S,onChange:e=>_(e.target.value),options:["Pending","Approved","Rejected"]}),(0,Zt.jsxs)("div",{className:"mb-4 col-span-2",children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Remarks ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("textarea",{className:"w-full border rounded-md p-2 "+(C?"border-red-500":"border-gray-300"),rows:3,value:j,onChange:e=>{E(e.target.value),C&&e.target.value.trim()&&O("")},required:!0}),C&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:C})]})]}),(0,Zt.jsx)("div",{className:"text-right mt-6",children:(0,Zt.jsx)("button",{className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",onClick:async()=>{try{if(!j||!j.trim())return O("Remarks are required"),void Ht.error("Please provide remarks before saving");const e=await YO.saveVerificationChecks(n.id,T);if(!e.success)return void Ht.error(`Failed to save verification checks: ${e.error}`);if(o&&o.length>0)for(let r=0;r<o.length;r++){const e=o[r],t=`shareholder_${e.id||r}_`,a={};if(Object.entries(I).forEach(e=>{let[r,n]=e;if(r.startsWith(t)){const e=r.replace(t,"");a[e]=n}}),Object.keys(a).length>0&&e.id){const t=await YO.saveEntityVerificationChecks(n.id,"shareholder",e.id,a);t.success||console.error(`Failed to save checks for shareholder ${e.id}:`,t.error)}}if(f&&f.length>0)for(let r=0;r<f.length;r++){const e=f[r],t=`ubo_${e.id||r}_`,a={};if(Object.entries(P).forEach(e=>{let[r,n]=e;if(r.startsWith(t)){const e=r.replace(t,"");a[e]=n}}),Object.keys(a).length>0&&e.id){const t=await YO.saveEntityVerificationChecks(n.id,"ubo",e.id,a);t.success||console.error(`Failed to save checks for UBO ${e.id}:`,t.error)}}if(c&&c.length>0)for(let r=0;r<c.length;r++){const e=c[r],t=`director_${e.id||r}_`,a={};if(Object.entries(M).forEach(e=>{let[r,n]=e;if(r.startsWith(t)){const e=r.replace(t,"");a[e]=n}}),Object.keys(a).length>0&&e.id){const t=await YO.saveEntityVerificationChecks(n.id,"director",e.id,a);t.success||console.error(`Failed to save checks for director ${e.id}:`,t.error)}}const t={kyc_status:S,kyc_remarks:j.trim(),due_diligence_level:A};console.log("Final KYC Decision:",t);const a=await jO.updateCustomer(n.id,t);a.success?(Ht.success("KYC assessment saved successfully!"),r("/customer/list")):Ht.error(a.error||"Failed to save KYC assessment")}catch(y){console.error("Error saving KYC assessment:",y),Ht.error("Failed to save KYC assessment")}},children:"Save KYC Assessment"})})]})},$T=()=>{var e,r,n,a,i,s;const{customerId:o}=ne(),l=re(),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!0),[f,m]=(0,t.useState)(null),[p,g]=(0,t.useState)([]),[y,v]=(0,t.useState)("Low"),[b,x]=(0,t.useState)(0),[w,N]=(0,t.useState)([]),[S,_]=(0,t.useState)(null),[j,E]=(0,t.useState)(null),[A,k]=(0,t.useState)(""),[C,O]=(0,t.useState)(""),[T,R]=(0,t.useState)(null);(0,t.useEffect)(()=>{o&&(async()=>{try{h(!0);const t=await jO.getCustomerById(o);if(t){u(t);let r,n={customerType:t.customer_type||t.customer_type,customer_type:t.customer_type,...t};if(t.natural_person_details){const e=t.natural_person_details;n={...n,profession:e.profession,nationality:e.nationality,residencyStatus:e.residencystatus||e.residency_status,dualNationality:e.dualinationality||e.dual_nationality,isDualNationality:void 0!==e.isdualnationality&&null!==e.isdualnationality?e.isdualnationality:void 0!==e.is_dual_nationality&&null!==e.is_dual_nationality&&e.is_dual_nationality,occupation:e.occupation,pep:e.pep||e.pep_status,countryOfBirth:e.countryofbirth||e.country_of_birth,sourceOfFunds:e.sourceoffunds||e.source_of_funds},console.log("\ud83d\udd0d Natural Person Fields for Risk Calculation:",{profession:n.profession,nationality:n.nationality,residencyStatus:n.residencyStatus,dualNationality:n.dualNationality,isDualNationality:n.isDualNationality,occupation:n.occupation,pep:n.pep,countryOfBirth:n.countryOfBirth,sourceOfFunds:n.sourceOfFunds,rawData:e})}if(t.legal_entity_details){const e=t.legal_entity_details;n={...n,businessActivity:e.businessactivity||e.business_activity,countryOfIncorporation:e.countryofincorporation||e.country_of_incorporation,licenseType:e.licensetype||e.license_type,countriesSourceOfFunds:e.countriessourceoffunds||e.countries_source_of_funds,countriesOfOperation:e.countriesofoperation||e.countries_of_operation,jurisdiction:e.jurisdiction,sourceOfFunds:e.sourceoffunds||e.source_of_funds,residencyStatus:e.residencystatus||e.residency_status,licenseCategory:e.licensecategory||e.license_category}}t.shareholders&&Array.isArray(t.shareholders)&&(n.shareholders=t.shareholders.map(e=>{const t={shareholderType:e.type||e.entity_type,type:e.type||e.entity_type,entity_type:e.entity_type||e.type,...e};return"Natural Person"!==e.type&&"Natural Person"!==e.entity_type||(t.countryOfResidence=e.countryOfResidence||e.country_of_residence,t.nationality=e.nationality,t.placeOfBirth=e.placeOfBirth||e.place_of_birth,t.dualNationality=e.dualNationality||e.dual_nationality,t.isDualNationality=e.isDualNationality||e.is_dual_nationality,t.occupation=e.occupation,t.pep=e.pep||e.pep_status,t.sourceOfFunds=e.sourceOfFunds||e.source_of_funds),"Legal Entities"!==e.type&&"Legal Entities"!==e.entity_type||(t.businessActivity=e.businessActivity||e.business_activity,t.countryOfIncorporation=e.countryOfIncorporation||e.country_of_incorporation,t.licenseType=e.licenseType||e.license_type,t.countriesSourceOfFunds=e.countriesSourceOfFunds||e.countries_source_of_funds,t.countriesOfOperation=e.countriesOfOperation||e.countries_of_operation,t.sourceOfFunds=e.sourceOfFunds||e.source_of_funds),t}));const a=await jO.getLatestRiskAssessment(o);if(a&&a.success&&a.data){var e;const t=a.data,n=(t.triggered_rules||[]).map(e=>({id:e.id,name:e.name,score:e.score,category:e.category,fieldName:e.fieldName||e.field_name||null}));r={score:Number(null!==(e=t.risk_score)&&void 0!==e?e:0),level:t.risk_level||"Low",triggeredRules:n}}else r=await SO(n);const i=r.triggeredRules||[];x(r.score),v(r.level),N(i);const s=i.reduce((e,t)=>e+t.score,0),l=i.length,c=l>0?s/l:0,d={};i.forEach(e=>{d[e.category]||(d[e.category]=[]),d[e.category].push(e)}),_({totalScore:s,ruleCount:l,averageScore:c,rulesByCategory:d});const h=await jO.getLatestRiskMitigation(o);h&&h.success&&h.data?E(h.data):E(null);const f={fullNameSanctionMatch:"Full Name Sanction",customerType:"CUSTOMER TYPE",profession:"BUSINESS ACTIVITY",nationality:"Nationality",residencyStatus:"RESIDENCY STATUS",dualNationality:"Dual Nationality Countries",isDualNationality:"Dual Nationality",occupation:"BUSINESS ACTIVITY",pep:"PEP",countryOfBirth:"Country Of Birth",sourceOfFunds:"SOURCE OF FUND"},m={fullNameSanctionMatch:"Full Name Sanction",customerType:"CUSTOMER TYPE",businessActivity:"BUSINESS ACTIVITY",countryOfIncorporation:"Country Of Incorporation",licenseType:"LICENSE TYPE",countriesSourceOfFunds:"Countries Source Of Funds",countriesOfOperation:"OPERATION COUNTRIES",jurisdiction:"JURISDICTION",sourceOfFunds:"SOURCE OF FUND",residencyStatus:"RESIDENCY STATUS",licenseCategory:"LICENSE CATEGORY"},p={fullNameSanctionMatch:"Full Name Sanction",countryOfResidence:"Country Of Residence",nationality:"Nationality",placeOfBirth:"Country Of Birth",dualNationality:"Dual Nationality Countries",isDualNationality:"Dual Nationality",occupation:"BUSINESS ACTIVITY",pep:"PEP",sourceOfFunds:"SOURCE OF FUND"},y={fullNameSanctionMatch:"Full Name Sanction",businessActivity:"BUSINESS ACTIVITY",countryOfIncorporation:"Country Of Incorporation",licenseType:"LICENSE TYPE",countriesSourceOfFunds:"Countries Source Of Funds",countriesOfOperation:"OPERATION COUNTRIES",sourceOfFunds:"SOURCE OF FUND"},b="Natural Person"===(t.customer_type||t.customerType)?f:m,w=new Map;i.forEach(e=>{e.fieldName&&(w.has(e.fieldName)||w.set(e.fieldName,[]),w.get(e.fieldName).push(e))});const S=[],j=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim();for(const[e,t]of Object.entries(b)){const r=n[e];if(void 0!==r&&null!==r&&""!==r&&(!Array.isArray(r)||0!==r.length)||"isDualNationality"===e||"fullNameSanctionMatch"===e){const r=j(e),n=w.get(e)||[];n.length>0?n.forEach(e=>{S.push({fieldName:r,ruleName:e.name.trim(),riskScore:e.score,riskLevel:_O(e.score),category:e.category})}):S.push({fieldName:r,ruleName:"No match",riskScore:0,riskLevel:"N/A",category:t})}}t.shareholders&&Array.isArray(t.shareholders)&&t.shareholders.forEach((e,t)=>{const r=e.shareholderType||e.type||e.entity_type,n="Natural Person"===r?p:y;S.push({fieldName:`Shareholder ${t+1}`,ruleName:"",riskScore:0,riskLevel:"",category:"",isHeading:!0});const a=`shareholder.type.${r}.${t}`,i=[...w.get(a)||[],...w.get(`shareholder.type.${r}`)||[]];if(r)if(i.length>0){const e=new Map;i.forEach(t=>{e.has(t.name)||e.set(t.name,t)}),e.forEach(e=>{S.push({fieldName:"Shareholder Type",ruleName:e.name.trim(),riskScore:e.score,riskLevel:_O(e.score),category:e.category,isHeading:!1})})}else S.push({fieldName:"Type",ruleName:"No match",riskScore:0,riskLevel:"N/A",category:"CUSTOMER TYPE",isHeading:!1});for(const[s,o]of Object.entries(n)){const r=e[s],n=void 0!==r&&null!==r&&""!==r&&!(Array.isArray(r)&&0===r.length)||"isDualNationality"===s||"fullNameSanctionMatch"===s;if("dualNationality"===s){const t=e.isDualNationality;if(!0!==t&&"Yes"!==t&&"yes"!==t)continue}if(n){const e=`shareholder.${t}.${s}`,r=`shareholder.${s}`,n=[...w.get(e)||[],...w.get(r)||[]],a=j(s);n.length>0?n.forEach(e=>{S.push({fieldName:a,ruleName:e.name.trim(),riskScore:e.score,riskLevel:_O(e.score),category:e.category,isHeading:!1})}):S.push({fieldName:a,ruleName:"No match",riskScore:0,riskLevel:"N/A",category:o,isHeading:!1})}}}),g(S)}else m("Customer not found")}catch(f){console.error("Error fetching customer:",f),m("Failed to fetch customer data")}finally{h(!1)}})()},[o]);return d?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading customer data..."})]})}):f||!c?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Zt.jsxs)("div",{className:"flex",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Zt.jsxs)("div",{className:"ml-3",children:[(0,Zt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading customer"}),(0,Zt.jsx)("div",{className:"mt-2 text-sm text-red-700",children:f||"Customer not found"}),(0,Zt.jsx)("button",{onClick:()=>l("/customer/list"),className:"mt-3 bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700",children:"Back to Customer List"})]})]})})}):(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Zt.jsxs)("button",{onClick:()=>l("/customer/list"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[(0,Zt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Customer List"]})}),(0,Zt.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Risk Profile"}),(0,Zt.jsxs)("p",{className:"text-gray-600 mb-6",children:["Customer: ",(0,Zt.jsx)("span",{className:"font-medium",children:"Natural Person"===c.customer_type?`${(null===(e=c.natural_person_details)||void 0===e?void 0:e.firstname)||""} ${(null===(r=c.natural_person_details)||void 0===r?void 0:r.lastname)||""}`.trim()||"Natural Person":(null===(n=c.legal_entity_details)||void 0===n?void 0:n.legalname)||(null===(a=c.legal_entity_details)||void 0===a?void 0:a.alias)||c.alias||"Legal Entity"})]}),(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Risk Factors Summary"}),(0,Zt.jsxs)("table",{className:"w-full border text-sm",children:[(0,Zt.jsx)("thead",{className:"bg-gray-100 text-left",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"p-2 border w-10 text-center",children:"#"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Field Name"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Rule Name"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Risk Score"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Risk Level"})]})}),(0,Zt.jsx)("tbody",{children:p.map((e,t)=>e.isHeading?(0,Zt.jsxs)("tr",{className:"bg-gray-100",children:[(0,Zt.jsx)("td",{className:"p-3 border text-center font-semibold text-gray-500",children:t+1}),(0,Zt.jsx)("td",{colSpan:"4",className:"p-3 border font-semibold text-gray-800",children:e.fieldName})]},t):(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("td",{className:"p-2 border text-center text-gray-500",children:t+1}),(0,Zt.jsx)("td",{className:"p-2 border pl-4",children:e.fieldName}),(0,Zt.jsx)("td",{className:"p-2 border "+("No match"===e.ruleName?"text-gray-400 italic":""),children:e.ruleName}),(0,Zt.jsx)("td",{className:"p-2 border text-center font-medium",children:e.riskScore>0?e.riskScore:"-"}),(0,Zt.jsx)("td",{className:"p-2 border font-medium "+("N/A"===e.riskLevel?"text-gray-400":"High"===e.riskLevel||"Medium High"===e.riskLevel?"text-red-600":"Medium"===e.riskLevel?"text-yellow-600":"Medium Low"===e.riskLevel?"text-blue-600":"text-green-600"),children:e.riskLevel})]},t))})]})]}),(0,Zt.jsxs)("div",{className:"text-center my-6",children:[(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Calculated Risk Level"}),(0,Zt.jsxs)("div",{className:"text-3xl font-bold "+("High"===y||"Medium High"===y?"text-red-600":"Medium"===y?"text-yellow-500":"Medium Low"===y?"text-blue-600":"text-green-600"),children:[y," Risk"]}),(0,Zt.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:[(0,Zt.jsx)("span",{className:"font-semibold",children:"Risk Score:"})," ",b.toFixed(2)," / 5.00"]}),(0,Zt.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Based on ",(null===S||void 0===S?void 0:S.ruleCount)||0," triggered rule",1!==(null===S||void 0===S?void 0:S.ruleCount)?"s":""]})]}),S&&(0,Zt.jsxs)("div",{className:"mb-6 bg-gray-50 rounded-lg p-6",children:[(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Risk Score Calculation"}),(0,Zt.jsxs)("div",{className:"mb-4 p-4 bg-white rounded-lg border",children:[(0,Zt.jsx)("h3",{className:"font-medium mb-2 text-gray-700",children:"Calculation Formula"}),(0,Zt.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,Zt.jsxs)("p",{children:[(0,Zt.jsx)("strong",{children:"Total Score:"})," Sum of all triggered rule scores = ",S.totalScore.toFixed(2)]}),(0,Zt.jsxs)("p",{children:[(0,Zt.jsx)("strong",{children:"Rule Count:"})," Number of triggered rules = ",S.ruleCount]}),(0,Zt.jsxs)("p",{className:"font-semibold text-gray-800",children:[(0,Zt.jsx)("strong",{children:"Onboarding Risk Score:"})," Total Score \xf7 Rule Count = ",S.averageScore.toFixed(2)]}),(0,Zt.jsxs)("p",{children:[(0,Zt.jsx)("strong",{children:"Mitigation Score:"})," ",j?Number(null!==(i=j.mitigation_score)&&void 0!==i?i:0).toFixed(2):"0.00"," "]}),(0,Zt.jsxs)("p",{className:"font-semibold text-gray-800",children:[(0,Zt.jsx)("strong",{children:"Residual Risk Score:"})," ",j&&"Onboarding Risk * Mitigation Score = ",j?Number(null!==(s=j.residual_risk_score)&&void 0!==s?s:0).toFixed(3):S.averageScore.toFixed(3)," "]}),(0,Zt.jsxs)("p",{children:[(0,Zt.jsx)("strong",{children:"Residual Risk Rating:"})," ",(null===j||void 0===j?void 0:j.residual_risk_level)||y]})]})]}),(0,Zt.jsxs)("div",{className:"mb-4 p-4 bg-white rounded-lg border",children:[(0,Zt.jsx)("h3",{className:"font-medium mb-2 text-gray-700",children:"Risk Level Determination"}),(0,Zt.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Zt.jsxs)("div",{className:"p-2 rounded "+(b>=0&&b<=1?"bg-green-100":"bg-gray-50"),children:[(0,Zt.jsx)("span",{className:"font-medium",children:"0 to 1 (inclusive):"})," Low Risk",b>=0&&b<=1&&(0,Zt.jsx)("span",{className:"ml-2 text-green-700 font-semibold",children:"\u2190 Current"})]}),(0,Zt.jsxs)("div",{className:"p-2 rounded "+(b>1&&b<=2?"bg-blue-100":"bg-gray-50"),children:[(0,Zt.jsx)("span",{className:"font-medium",children:">1 to 2 (inclusive):"})," Medium Low Risk",b>1&&b<=2&&(0,Zt.jsx)("span",{className:"ml-2 text-blue-700 font-semibold",children:"\u2190 Current"})]}),(0,Zt.jsxs)("div",{className:"p-2 rounded "+(b>2&&b<=3?"bg-yellow-100":"bg-gray-50"),children:[(0,Zt.jsx)("span",{className:"font-medium",children:">2 to 3 (inclusive):"})," Medium Risk",b>2&&b<=3&&(0,Zt.jsx)("span",{className:"ml-2 text-yellow-700 font-semibold",children:"\u2190 Current"})]}),(0,Zt.jsxs)("div",{className:"p-2 rounded "+(b>3&&b<=4?"bg-orange-100":"bg-gray-50"),children:[(0,Zt.jsx)("span",{className:"font-medium",children:">3 to 4 (inclusive):"})," Medium High Risk",b>3&&b<=4&&(0,Zt.jsx)("span",{className:"ml-2 text-orange-700 font-semibold",children:"\u2190 Current"})]}),(0,Zt.jsxs)("div",{className:"p-2 rounded "+(b>4&&b<=5?"bg-red-100":"bg-gray-50"),children:[(0,Zt.jsx)("span",{className:"font-medium",children:">4 to 5 (inclusive):"})," High Risk",b>4&&b<=5&&(0,Zt.jsx)("span",{className:"ml-2 text-red-700 font-semibold",children:"\u2190 Current"})]})]})]}),Object.keys(S.rulesByCategory).length>0&&(0,Zt.jsxs)("div",{className:"mt-4",children:[(0,Zt.jsx)("h3",{className:"font-medium mb-3 text-gray-700",children:"Triggered Rules by Category"}),Object.entries(S.rulesByCategory).map(e=>{let[t,r]=e;return(0,Zt.jsxs)("div",{className:"mb-4 p-4 bg-white rounded-lg border",children:[(0,Zt.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:t}),(0,Zt.jsxs)("div",{className:"space-y-2",children:[r.map((e,t)=>(0,Zt.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,Zt.jsx)("div",{className:"flex-1",children:(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.name})}),(0,Zt.jsx)("div",{className:"ml-4 text-right",children:(0,Zt.jsxs)("span",{className:"text-sm font-semibold text-blue-600",children:["Score: ",e.score]})})]},t)),(0,Zt.jsx)("div",{className:"pt-2 border-t border-gray-200 mt-2",children:(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Zt.jsx)("strong",{children:"Category Total:"})," ",r.reduce((e,t)=>e+t.score,0)," points from ",r.length," rule",1!==r.length?"s":""]})})]})]},t)})]})]})]})},qT=[{key:"customer",label:"Customer",measures:[{key:"adverseNewsCheck",label:"Adverse News Check"},{key:"kycCid",label:"KYC - CID"},{key:"kycEdd",label:"KYC - EDD"},{key:"kycCdd",label:"KYC - CDD"},{key:"sanctionsScreeningAllParties",label:"Sanctions Screening of all parties"},{key:"vatCertificate",label:"VAT Certificate"}]},{key:"product",label:"Product",measures:[{key:"billOfLadingAvailable",label:"Bill of Lading Available"},{key:"invoiceAvailableAllShipments",label:"Invoice Available for All Shipments"},{key:"verificationPhysicalProducts",label:"Verification of Physical Products"}]},{key:"channel",label:"Channel and Other Attributes",measures:[{key:"bankTransfer",label:"Bank Transfer"},{key:"committeeApprovalAvailable",label:"Committee Approval Available"},{key:"systemAlertsAvailable",label:"System Alerts Available"}]},{key:"jurisdiction",label:"Jurisdiction",measures:[{key:"eddBeneficiaryAgent",label:"EDD on Benefeciary Agent"},{key:"eddCounterParty",label:"EDD on Counter Party"},{key:"googleCheck",label:"Google Check"},{key:"physicalAddressVerification",label:"Physical Address Verification"},{key:"screeningAllThirdParties",label:"Screening of All Third Party Involved"}]}],GT={fully:1,conditional:2,partial:3,non:4,na:0},WT=[{key:"fully",label:"Fully compliant",score:1},{key:"conditional",label:"Conditional compliant",score:2},{key:"partial",label:"Partially compliant",score:3},{key:"non",label:"Non-compliant",score:4},{key:"na",label:"Not Applicable",score:0}],VT=e=>e>=0&&e<=1?"Low":e>1&&e<=2?"Medium Low":e>2&&e<=3?"Medium":e>3&&e<=4?"Medium High":e>4?"High":"Low",KT=()=>{var e,r;const{customerId:n}=ne(),a=re(),[i,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),[f,m]=(0,t.useState)({}),[p,g]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&(async()=>{try{s(!0),l(null);const t=await jO.getCustomerById(n);if(!t)return void l("Customer not found");u(t);const r=await jO.getLatestRiskAssessment(n);if(r.success&&r.data){var e;const t=r.data;h({score:Number(null!==(e=t.risk_score)&&void 0!==e?e:0),level:t.risk_level||"Low",triggeredRules:t.triggered_rules||[]})}else console.warn("No stored risk assessment found for customer:",n),h(null);const a=await jO.getLatestRiskMitigation(n);if(a&&a.success&&a.data){const e=a.data;e.mitigation_answers&&m(e.mitigation_answers)}}catch(EM){console.error("Error loading risk mitigation data:",EM),l("Failed to load customer risk data")}finally{s(!1)}})()},[n]);const y=(0,t.useMemo)(()=>{const e={},t=[],r=qT.length||1;qT.forEach(n=>{const a=f[n.key]||{};let i=0,s=0;n.measures.forEach(e=>{var t;const r=a[e.key],n=null!==(t=GT[r])&&void 0!==t?t:0;n>0&&(i+=n,s+=1)});const o=s>0?i/s:0,l=o>0?o/r:0;e[n.key]={sum:i,countNonNA:s,rawAvg:o,controlScore:l},l>0&&t.push(l)});const n=t.length>0?t.reduce((e,t)=>e+t,0)/t.length:0,a=VT(n);return{perControl:e,riskMitigationScore:n,riskMitigationLevel:a}},[f]),v=Number(null!==(e=null===d||void 0===d?void 0:d.score)&&void 0!==e?e:0),b=Number(null!==(r=y.riskMitigationScore)&&void 0!==r?r:0),x=v*b,w=VT(x),N="Natural Person"===(null===c||void 0===c?void 0:c.customer_type)&&null!==c&&void 0!==c&&c.natural_person_details?`${c.natural_person_details.firstname||""} ${c.natural_person_details.lastname||""}`.trim()||"Unnamed Customer":"Legal Entities"===(null===c||void 0===c?void 0:c.customer_type)&&null!==c&&void 0!==c&&c.legal_entity_details?c.legal_entity_details.legalname||"Legal Entity":"Customer";return i?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading risk mitigation data..."})]})}):o||!c?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Zt.jsxs)("div",{className:"flex",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Zt.jsxs)("div",{className:"ml-3",children:[(0,Zt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading customer"}),(0,Zt.jsx)("div",{className:"mt-2 text-sm text-red-700",children:o||"Customer not found"}),(0,Zt.jsx)("button",{onClick:()=>a("/customer/list"),className:"mt-3 bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700",children:"Back to Customer List"})]})]})})}):(0,Zt.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,Zt.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsxs)("button",{onClick:()=>a("/customer/list"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[(0,Zt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Customer List"]}),(0,Zt.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Risk Mitigation"})]}),(0,Zt.jsx)("div",{className:"bg-white rounded-xl shadow border p-5 flex items-center justify-between",children:(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Customer"}),(0,Zt.jsx)("p",{className:"text-sm text-gray-800 font-semibold",children:N}),(0,Zt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Type: ",(0,Zt.jsx)("span",{className:"font-medium",children:c.customer_type})]})]})}),(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6 space-y-3",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Residual Risk "}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Inherent Risk Score"}),(0,Zt.jsx)("p",{className:"font-mono text-gray-800",children:v.toFixed(2)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Inherent Risk Level"}),(0,Zt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("High"===(null===d||void 0===d?void 0:d.level)||"Medium High"===(null===d||void 0===d?void 0:d.level)?"bg-red-100 text-red-700":"Medium"===(null===d||void 0===d?void 0:d.level)?"bg-yellow-100 text-yellow-700":"Medium Low"===(null===d||void 0===d?void 0:d.level)?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:(null===d||void 0===d?void 0:d.level)||"Low"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Risk Mitigation Score"}),(0,Zt.jsx)("p",{className:"font-mono text-gray-800",children:b.toFixed(2)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Residual Risk Score"}),(0,Zt.jsx)("p",{className:"font-mono text-gray-800",children:x.toFixed(3)})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Residual Risk Level"}),(0,Zt.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("High"===w||"Medium High"===w?"bg-red-100 text-red-700":"Medium"===w?"bg-yellow-100 text-yellow-700":"Medium Low"===w?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:w})]})]}),d&&(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6 space-y-4",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Risk Profile Summary"}),(0,Zt.jsx)("p",{className:"text-sm text-gray-600",children:"The following rules were triggered during the risk assessment. These inform the current residual risk before mitigation controls are applied."}),(0,Zt.jsx)("div",{className:"max-h-64 overflow-y-auto border rounded-lg",children:(0,Zt.jsxs)("table",{className:"min-w-full text-xs text-left",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50 text-gray-600",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium w-10 text-center",children:"#"}),(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium",children:"Category"}),(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium",children:"Rule"}),(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium text-center",children:"Score"}),(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium text-center",children:"Level"})]})}),(0,Zt.jsxs)("tbody",{children:[d.triggeredRules.map((e,t)=>(0,Zt.jsxs)("tr",{className:"border-t",children:[(0,Zt.jsx)("td",{className:"px-3 py-2 text-center text-gray-500",children:t+1}),(0,Zt.jsx)("td",{className:"px-3 py-2 text-gray-600",children:e.category}),(0,Zt.jsx)("td",{className:"px-3 py-2 text-gray-800",children:e.name}),(0,Zt.jsx)("td",{className:"px-3 py-2 text-center font-medium",children:e.score}),(0,Zt.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Zt.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-medium "+(e.score>=4?"bg-red-100 text-red-700":e.score>=3?"bg-yellow-100 text-yellow-700":e.score>=2?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:VT(e.score)})})]},`${e.id||t}-${e.name}`)),0===d.triggeredRules.length&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:5,className:"px-3 py-3 text-center text-gray-500",children:"No rules were triggered for this customer."})})]})]})}),(0,Zt.jsxs)("div",{className:"mt-3 space-y-1 text-xs text-gray-600",children:[(0,Zt.jsxs)("p",{children:[(0,Zt.jsx)("span",{className:"font-semibold",children:"Triggered rules:"})," ",d.triggeredRules.length]}),(0,Zt.jsxs)("p",{children:[(0,Zt.jsx)("span",{className:"font-semibold",children:"Calculation:"})," ","Inherent risk score = total score \xf7 number of triggered rules."]}),(0,Zt.jsxs)("p",{children:[(0,Zt.jsx)("span",{className:"font-semibold",children:"Inherent risk:"})," ",v.toFixed(2)," (",d.level||"Low",")"]})]})]}),(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6 space-y-3",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Mitigation Controls Summary"}),(0,Zt.jsx)("p",{className:"text-sm text-gray-600",children:"Overview of each mitigation control and its individual score, contributing to the overall Risk Mitigation Score."}),(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full text-xs text-left",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50 text-gray-600",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium",children:"Control"}),(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium text-center",children:"Control Score"}),(0,Zt.jsx)("th",{className:"px-3 py-2 font-medium text-center",children:"# Selected Measures"})]})}),(0,Zt.jsx)("tbody",{children:qT.map(e=>{var t;const r=y.perControl[e.key]||{sum:0,countNonNA:0,rawAvg:0,controlScore:0};return(0,Zt.jsxs)("tr",{className:"border-t",children:[(0,Zt.jsx)("td",{className:"px-3 py-2 text-gray-800",children:e.label}),(0,Zt.jsx)("td",{className:"px-3 py-2 text-center font-mono",children:Number(null!==(t=r.controlScore)&&void 0!==t?t:0).toFixed(2)}),(0,Zt.jsx)("td",{className:"px-3 py-2 text-center font-mono",children:r.countNonNA})]},e.key)})})]})})]}),(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6 space-y-4",children:[(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsx)("div",{children:(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Mitigation Controls"})}),(0,Zt.jsxs)("div",{className:"text-right",children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Risk Mitigation Score"}),(0,Zt.jsx)("div",{className:"text-sm font-semibold",children:(0,Zt.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("High"===y.riskMitigationLevel||"Medium High"===y.riskMitigationLevel?"bg-red-100 text-red-700":"Medium"===y.riskMitigationLevel?"bg-yellow-100 text-yellow-700":"Medium Low"===y.riskMitigationLevel?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:[y.riskMitigationLevel," (",b.toFixed(2),")"]})})]})]}),(0,Zt.jsx)("div",{className:"space-y-4",children:qT.map(e=>{var t;const r=y.perControl[e.key]||{sum:0,countNonNA:0,avg:0},n=f[e.key]||{};return(0,Zt.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-800",children:e.label}),(0,Zt.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[(0,Zt.jsxs)("div",{children:["Control score:"," ",(0,Zt.jsx)("span",{className:"font-mono",children:Number(null!==(t=r.controlScore)&&void 0!==t?t:0).toFixed(2)})]}),(0,Zt.jsxs)("div",{children:["Selected measures:"," ",(0,Zt.jsx)("span",{className:"font-mono",children:r.countNonNA})]})]})]}),(0,Zt.jsx)("div",{className:"space-y-3",children:e.measures.map(t=>{var r;const a=n[t.key],i=null!==(r=GT[a])&&void 0!==r?r:0;return(0,Zt.jsxs)("div",{className:"border rounded-md p-3 space-y-2",children:[(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsx)("p",{className:"text-xs font-medium text-gray-800",children:t.label}),(0,Zt.jsxs)("p",{className:"text-[11px] text-gray-500",children:["Required score: ",(0,Zt.jsx)("span",{className:"font-mono font-semibold",children:"1"})," ","\xb7 Current:"," ",(0,Zt.jsx)("span",{className:"font-mono font-semibold",children:i})]})]}),(0,Zt.jsx)("div",{className:"flex flex-wrap gap-3 text-[11px] text-gray-700",children:WT.map(r=>(0,Zt.jsxs)("label",{className:"inline-flex items-center gap-1 cursor-pointer",children:[(0,Zt.jsx)("input",{type:"radio",name:`${e.key}.${t.key}`,className:"h-3 w-3 text-blue-600 border-gray-300",checked:n[t.key]===r.key,onChange:()=>m(n=>({...n,[e.key]:{...n[e.key]||{},[t.key]:r.key}}))}),(0,Zt.jsx)("span",{children:r.label})]},r.key))})]},t.key)})})]},e.key)})})]}),(0,Zt.jsx)("div",{className:"flex justify-end",children:(0,Zt.jsx)("button",{type:"button",disabled:p||!d,onClick:async()=>{try{g(!0);const e=b>0,t=e?x:v,r=e?w:d.level||VT(v),a={answers:f,perControl:y.perControl,mitigationScore:b,residualRiskScore:t,residualRiskLevel:r},i=await jO.saveRiskMitigation(n,a);if(!i.success)throw new Error(i.error||"Failed to save risk mitigation");Ht.success("Risk mitigation and residual risk saved successfully.")}catch(EM){console.error("Error saving mitigation:",EM),Ht.error(EM.message||"Failed to save risk mitigation")}finally{g(!1)}},className:"mt-4 inline-flex items-center px-5 py-2.5 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":"Save Mitigation & Update Risk"})})]})})},YT=()=>{const{customerId:e}=ne(),r=re(),[n,a]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(""),[f,m]=(0,t.useState)(""),[p,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&(async()=>{try{s(!0);const t=await jO.getCustomerById(e);t.success&&g(t.data);const r=await jO.getCustomerDocuments(e);r.success?a(r.data||[]):Ht.error(r.error||"Failed to load documents")}catch(EM){console.error("Error loading data:",EM),Ht.error("Failed to load data")}finally{s(!1)}})()},[e]);const b=e=>e?e.includes("pdf")?"\ud83d\udcd5":e.includes("image")?"\ud83d\uddbc\ufe0f":e.includes("word")||e.includes("document")?"\ud83d\udcdd":e.includes("excel")||e.includes("spreadsheet")?"\ud83d\udcca":"\ud83d\udcc4":"\ud83d\udcc4",x=e=>e?e<1024?`${e} B`:e<1048576?`${Math.round(e/1024)} KB`:`${(e/1048576).toFixed(2)} MB`:"0 KB",w=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?v(!0):"dragleave"===e.type&&v(!1)};return(0,Zt.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,Zt.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsxs)("button",{onClick:()=>r("/customer/list"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[(0,Zt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Customer List"]}),(0,Zt.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Document Management"})]}),p&&(0,Zt.jsx)("div",{className:"bg-white rounded-xl shadow border p-5",children:(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Customer"}),(0,Zt.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:p.full_name||p.company_name||p.name||"N/A"}),(0,Zt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Type: ",(0,Zt.jsx)("span",{className:"font-medium",children:p.customer_type||"N/A"}),e&&(0,Zt.jsxs)(Zt.Fragment,{children:[" \u2022 ","ID: ",(0,Zt.jsxs)("span",{className:"font-mono",children:[e.slice(0,8),"..."]})]})]})]}),(0,Zt.jsxs)("div",{className:"text-right",children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Documents"}),(0,Zt.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:n.length}),(0,Zt.jsx)("p",{className:"text-xs text-gray-500",children:"Total uploaded"})]})]})}),(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6 space-y-5",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Upload New Document"}),(0,Zt.jsx)("p",{className:"text-sm text-gray-600",children:"Upload and manage KYC / AML supporting documents for this customer."})]}),(0,Zt.jsxs)("div",{onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:e=>{e.preventDefault(),e.stopPropagation(),v(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&u(e.dataTransfer.files[0])},className:"border-2 border-dashed rounded-xl p-8 text-center transition-colors "+(y?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[(0,Zt.jsx)("input",{type:"file",id:"file-upload",onChange:e=>{var t;return u((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"hidden"}),(0,Zt.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,Zt.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Zt.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:c?c.name:"Click to upload or drag and drop"}),(0,Zt.jsx)("p",{className:"text-xs text-gray-500",children:c?`${x(c.size)} \u2022 ${c.type||"Unknown type"}`:"PDF, DOC, DOCX, JPG, PNG (Max 50MB)"})]})})]}),c&&(0,Zt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Zt.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Zt.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Zt.jsx)("span",{className:"text-2xl",children:b(c.type)}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-800",children:c.name}),(0,Zt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[x(c.size)," \u2022 ",c.type||"Unknown type"]})]})]}),(0,Zt.jsx)("button",{type:"button",onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:(0,Zt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,Zt.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select category"}),(0,Zt.jsx)("option",{value:"ID",children:"ID / Passport"}),(0,Zt.jsx)("option",{value:"License",children:"Trade / Business License"}),(0,Zt.jsx)("option",{value:"Proof of Address",children:"Proof of Address"}),(0,Zt.jsx)("option",{value:"Corporate Docs",children:"Corporate Documents"}),(0,Zt.jsx)("option",{value:"Source of Funds",children:"Source of Funds / Wealth"}),(0,Zt.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),(0,Zt.jsx)("input",{type:"text",value:f,onChange:e=>m(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add notes about this document"})]})]}),(0,Zt.jsx)("div",{className:"flex justify-end mt-4",children:(0,Zt.jsx)("button",{type:"button",disabled:o,onClick:async()=>{if(c)try{l(!0);const t=await jO.uploadCustomerDocument(e,c,{category:d,description:f});if(!t.success)throw new Error(t.error||"Failed to upload document");Ht.success("Document uploaded successfully."),u(null),h(""),m("");const r=await jO.getCustomerDocuments(e);r.success&&a(r.data||[])}catch(EM){console.error("Error uploading document:",EM),Ht.error(EM.message||"Failed to upload document")}finally{l(!1)}},className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Zt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Zt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Document"]})})})]})]}),(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6",children:[(0,Zt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Uploaded Documents"}),(0,Zt.jsxs)("span",{className:"text-sm text-gray-500",children:[n.length," document",1!==n.length?"s":""]})]}),i?(0,Zt.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Zt.jsxs)("div",{className:"text-center",children:[(0,Zt.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",children:[(0,Zt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Zt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Zt.jsx)("p",{className:"text-sm text-gray-500",children:"Loading documents..."})]})}):0===n.length?(0,Zt.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-12 text-center",children:[(0,Zt.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Zt.jsx)("p",{className:"text-gray-500 font-medium mb-1",children:"No documents uploaded yet"}),(0,Zt.jsx)("p",{className:"text-sm text-gray-400",children:"Upload your first document using the form above"})]}):(0,Zt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>(0,Zt.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,Zt.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Zt.jsxs)("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[(0,Zt.jsx)("span",{className:"text-3xl flex-shrink-0",children:b(e.file_type)}),(0,Zt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",title:e.file_name,children:e.file_name}),e.category&&(0,Zt.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded",children:e.category})]})]})}),e.description&&(0,Zt.jsx)("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,Zt.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[(0,Zt.jsx)("span",{children:x(e.file_size_bytes)}),(0,Zt.jsx)("span",{children:e.created_at?new Date(e.created_at).toLocaleDateString():"-"})]}),(0,Zt.jsxs)("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-100",children:[e.publicUrl&&(0,Zt.jsxs)("a",{href:e.publicUrl,target:"_blank",rel:"noreferrer",className:"flex-1 inline-flex items-center justify-center px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[(0,Zt.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),(0,Zt.jsxs)("button",{type:"button",className:"flex-1 inline-flex items-center justify-center px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50 rounded hover:bg-red-100 transition-colors",onClick:async()=>{if(window.confirm(`Delete document "${e.file_name}"? This cannot be undone.`))try{const t=await jO.deleteCustomerDocument(e.id);if(!t.success)throw new Error(t.error||"Failed to delete document");Ht.success("Document deleted."),a(t=>t.filter(t=>t.id!==e.id))}catch(EM){console.error("Error deleting document:",EM),Ht.error(EM.message||"Failed to delete document")}},children:[(0,Zt.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},e.id))})]})]})})},JT=()=>{const{customerId:e}=ne(),r=re(),[n,a]=(0,t.useState)(null),[i,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null);(0,t.useEffect)(()=>{e&&(async()=>{try{s(!0);const t=await jO.getCustomerById(e);t.success?(a(t.data),void 0!==t.data.fullNameSanctionMatchCount&&l({matchCount:t.data.fullNameSanctionMatchCount,lastScreened:t.data.last_screened_at||null})):Ht.error(t.error||"Failed to load customer data")}catch(EM){console.error("Error loading data:",EM),Ht.error("Failed to load data")}finally{s(!1)}})()},[e]);if(i)return(0,Zt.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,Zt.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,Zt.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Zt.jsxs)("div",{className:"text-center",children:[(0,Zt.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",children:[(0,Zt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Zt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Zt.jsx)("p",{className:"text-sm text-gray-500",children:"Loading sanction details..."})]})})})});const c=o?(u=o.matchCount)>=5?{label:"Full name match",level:"high",color:"red"}:u>=3?{label:"Partial name match",level:"medium",color:"yellow"}:{label:"No name match",level:"low",color:"green"}:null;var u;return(0,Zt.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,Zt.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,Zt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Zt.jsxs)("button",{onClick:()=>r("/customer/list"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[(0,Zt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Customer List"]}),(0,Zt.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Sanction Details"})]}),n&&(0,Zt.jsx)("div",{className:"bg-white rounded-xl shadow border p-5",children:(0,Zt.jsx)("div",{className:"flex items-center justify-between",children:(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Customer"}),(0,Zt.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:n.full_name||n.company_name||n.name||"N/A"}),(0,Zt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Type: ",(0,Zt.jsx)("span",{className:"font-medium",children:n.customer_type||"N/A"}),e&&(0,Zt.jsxs)(Zt.Fragment,{children:[" \u2022 ","ID: ",(0,Zt.jsxs)("span",{className:"font-mono",children:[e.slice(0,8),"..."]})]})]})]})})}),(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6 space-y-4",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Sanction Screening Summary"}),o?(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Zt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Match Count"}),(0,Zt.jsxs)("p",{className:"text-2xl font-bold text-gray-800",children:[o.matchCount," / 5"]}),(0,Zt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Fields matched"})]}),(0,Zt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Match Level"}),c&&(0,Zt.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium "+("red"===c.color?"bg-red-100 text-red-700":"yellow"===c.color?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:c.label})]}),(0,Zt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Zt.jsx)("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-1",children:"Last Screened"}),(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-800",children:o.lastScreened?new Date(o.lastScreened).toLocaleString():"Not available"})]})]}),(0,Zt.jsxs)("div",{className:"border-t pt-4",children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Screening Criteria (5 Fields)"}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Zt.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Full name"}),(0,Zt.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,Zt.jsx)("span",{className:"text-gray-600",children:"DOB/Date of incorporation"})]}),(0,Zt.jsx)("div",{className:"flex items-center space-x-2 text-sm",children:(0,Zt.jsx)("span",{className:"text-gray-600",children:"Nationality/Country of incorporation"})}),(0,Zt.jsx)("div",{className:"flex items-center space-x-2 text-sm",children:(0,Zt.jsx)("span",{className:"text-gray-600",children:"Country of Birth"})}),(0,Zt.jsx)("div",{className:"flex items-center space-x-2 text-sm",children:(0,Zt.jsx)("span",{className:"text-gray-600",children:"Country of Residence/Countries of operation"})})]})]})]}):(0,Zt.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-12 text-center",children:[(0,Zt.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),(0,Zt.jsx)("p",{className:"text-gray-500 font-medium mb-1",children:"No sanction screening data available"}),(0,Zt.jsx)("p",{className:"text-sm text-gray-400",children:"Screening data will appear here once the customer has been screened"})]})]}),o&&o.matchCount>0&&(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Detailed Match Results"}),(0,Zt.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[(0,Zt.jsx)("p",{className:"text-sm text-gray-500",children:"Detailed match results and screening history will be displayed here."}),(0,Zt.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"This section will show individual matches, sources, and screening timestamps."})]})]})]})})};var XT=r(2284),QT=Uint8Array,ZT=Uint16Array,eR=Int32Array,tR=new QT([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rR=new QT([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nR=new QT([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aR=function(e,t){for(var r=new ZT(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var a=new eR(r[30]);for(n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},iR=aR(tR,2),sR=iR.b,oR=iR.r;sR[28]=258,oR[258]=28;for(var lR=aR(rR,0),cR=lR.b,uR=lR.r,dR=new ZT(32768),hR=0;hR<32768;++hR){var fR=(43690&hR)>>1|(21845&hR)<<1;fR=(61680&(fR=(52428&fR)>>2|(13107&fR)<<2))>>4|(3855&fR)<<4,dR[hR]=((65280&fR)>>8|(255&fR)<<8)>>1}var mR=function(e,t,r){for(var n=e.length,a=0,i=new ZT(t);a<n;++a)e[a]&&++i[e[a]-1];var s,o=new ZT(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;if(r){s=new ZT(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var c=a<<4|e[a],u=t-e[a],d=o[e[a]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)s[dR[d]>>l]=c}else for(s=new ZT(n),a=0;a<n;++a)e[a]&&(s[a]=dR[o[e[a]-1]++]>>15-e[a]);return s},pR=new QT(288);for(hR=0;hR<144;++hR)pR[hR]=8;for(hR=144;hR<256;++hR)pR[hR]=9;for(hR=256;hR<280;++hR)pR[hR]=7;for(hR=280;hR<288;++hR)pR[hR]=8;var gR=new QT(32);for(hR=0;hR<32;++hR)gR[hR]=5;var yR=mR(pR,9,0),vR=mR(pR,9,1),bR=mR(gR,5,0),xR=mR(gR,5,1),wR=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},NR=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},SR=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},_R=function(e){return(e+7)/8|0},jR=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new QT(e.subarray(t,r))},ER=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],AR=function(e,t,r){var n=new Error(t||ER[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,AR),!r)throw n;return n},kR=function(e,t,r,n){var a=e.length,i=n?n.length:0;if(!a||t.f&&!t.l)return r||new QT(0);var s=!r,o=s||2!=t.i,l=t.i;s&&(r=new QT(3*a));var c=function(e){var t=r.length;if(e>t){var n=new QT(Math.max(2*t,e));n.set(r),r=n}},u=t.f||0,d=t.p||0,h=t.b||0,f=t.l,m=t.d,p=t.m,g=t.n,y=8*a;do{if(!f){u=NR(e,d,1);var v=NR(e,d+1,3);if(d+=3,!v){var b=e[(O=_R(d)+4)-4]|e[O-3]<<8,x=O+b;if(x>a){l&&AR(0);break}o&&c(h+b),r.set(e.subarray(O,x),h),t.b=h+=b,t.p=d=8*x,t.f=u;continue}if(1==v)f=vR,m=xR,p=9,g=5;else if(2==v){var w=NR(e,d,31)+257,N=NR(e,d+10,15)+4,S=w+NR(e,d+5,31)+1;d+=14;for(var _=new QT(S),j=new QT(19),E=0;E<N;++E)j[nR[E]]=NR(e,d+3*E,7);d+=3*N;var A=wR(j),k=(1<<A)-1,C=mR(j,A,1);for(E=0;E<S;){var O,T=C[NR(e,d,k)];if(d+=15&T,(O=T>>4)<16)_[E++]=O;else{var R=0,I=0;for(16==O?(I=3+NR(e,d,3),d+=2,R=_[E-1]):17==O?(I=3+NR(e,d,7),d+=3):18==O&&(I=11+NR(e,d,127),d+=7);I--;)_[E++]=R}}var L=_.subarray(0,w),P=_.subarray(w);p=wR(L),g=wR(P),f=mR(L,p,1),m=mR(P,g,1)}else AR(1);if(d>y){l&&AR(0);break}}o&&c(h+131072);for(var D=(1<<p)-1,M=(1<<g)-1,F=d;;F=d){var B=(R=f[SR(e,d)&D])>>4;if((d+=15&R)>y){l&&AR(0);break}if(R||AR(2),B<256)r[h++]=B;else{if(256==B){F=d,f=null;break}var U=B-254;if(B>264){var z=tR[E=B-257];U=NR(e,d,(1<<z)-1)+sR[E],d+=z}var H=m[SR(e,d)&M],$=H>>4;H||AR(3),d+=15&H;P=cR[$];if($>3){z=rR[$];P+=SR(e,d)&(1<<z)-1,d+=z}if(d>y){l&&AR(0);break}o&&c(h+131072);var q=h+U;if(h<P){var G=i-P,W=Math.min(P,q);for(G+h<0&&AR(3);h<W;++h)r[h]=n[G+h]}for(;h<q;++h)r[h]=r[h-P]}}t.l=f,t.p=F,t.b=h,t.f=u,f&&(u=1,t.m=p,t.d=m,t.n=g)}while(!u);return h!=r.length&&s?jR(r,0,h):r.subarray(0,h)},CR=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},OR=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},TR=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:FR,l:0};if(1==a){var s=new QT(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,u=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=r[r[c].f<r[d].f?c++:d++],l=r[c!=u&&r[c].f<r[d].f?c++:d++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};var h=i[0].s;for(n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var f=new ZT(h+1),m=RR(r[u-1],f,0);if(m>t){n=0;var p=0,g=m-t,y=1<<g;for(i.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});n<a;++n){var v=i[n].s;if(!(f[v]>t))break;p+=y-(1<<m-f[v]),f[v]=t}for(p>>=g;p>0;){var b=i[n].s;f[b]<t?p-=1<<t-f[b]++-1:++n}for(;n>=0&&p;--n){var x=i[n].s;f[x]==t&&(--f[x],++p)}m=t}return{t:new QT(f),l:m}},RR=function(e,t,r){return-1==e.s?Math.max(RR(e.l,t,r+1),RR(e.r,t,r+1)):t[e.s]=r},IR=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ZT(++t),n=0,a=e[0],i=1,s=function(e){r[n++]=e},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[o]}return{c:r.subarray(0,n),n:t}},LR=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},PR=function(e,t,r){var n=r.length,a=_R(t+2);e[a]=255&n,e[a+1]=n>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<n;++i)e[a+i+4]=r[i];return 8*(a+4+n)},DR=function(e,t,r,n,a,i,s,o,l,c,u){CR(t,u++,r),++a[256];for(var d=TR(a,15),h=d.t,f=d.l,m=TR(i,15),p=m.t,g=m.l,y=IR(h),v=y.c,b=y.n,x=IR(p),w=x.c,N=x.n,S=new ZT(19),_=0;_<v.length;++_)++S[31&v[_]];for(_=0;_<w.length;++_)++S[31&w[_]];for(var j=TR(S,7),E=j.t,A=j.l,k=19;k>4&&!E[nR[k-1]];--k);var C,O,T,R,I=c+5<<3,L=LR(a,pR)+LR(i,gR)+s,P=LR(a,h)+LR(i,p)+s+14+3*k+LR(S,E)+2*S[16]+3*S[17]+7*S[18];if(l>=0&&I<=L&&I<=P)return PR(t,u,e.subarray(l,l+c));if(CR(t,u,1+(P<L)),u+=2,P<L){C=mR(h,f,0),O=h,T=mR(p,g,0),R=p;var D=mR(E,A,0);CR(t,u,b-257),CR(t,u+5,N-1),CR(t,u+10,k-4),u+=14;for(_=0;_<k;++_)CR(t,u+3*_,E[nR[_]]);u+=3*k;for(var M=[v,w],F=0;F<2;++F){var B=M[F];for(_=0;_<B.length;++_){var U=31&B[_];CR(t,u,D[U]),u+=E[U],U>15&&(CR(t,u,B[_]>>5&127),u+=B[_]>>12)}}}else C=yR,O=pR,T=bR,R=gR;for(_=0;_<o;++_){var z=n[_];if(z>255){OR(t,u,C[(U=z>>18&31)+257]),u+=O[U+257],U>7&&(CR(t,u,z>>23&31),u+=tR[U]);var H=31&z;OR(t,u,T[H]),u+=R[H],H>3&&(OR(t,u,z>>5&8191),u+=rR[H])}else OR(t,u,C[z]),u+=O[z]}return OR(t,u,C[256]),u+O[256]},MR=new eR([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),FR=new QT(0),BR=function(e,t,r,n,a,i){var s=i.z||e.length,o=new QT(n+s+5*(1+Math.ceil(s/7e3))+a),l=o.subarray(n,o.length-a),c=i.l,u=7&(i.r||0);if(t){u&&(l[0]=i.r>>3);for(var d=MR[t-1],h=d>>13,f=8191&d,m=(1<<r)-1,p=i.p||new ZT(32768),g=i.h||new ZT(m+1),y=Math.ceil(r/3),v=2*y,b=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<v)&m},x=new eR(25e3),w=new ZT(288),N=new ZT(32),S=0,_=0,j=i.i||0,E=0,A=i.w||0,k=0;j+2<s;++j){var C=b(j),O=32767&j,T=g[C];if(p[O]=T,g[C]=O,A<=j){var R=s-j;if((S>7e3||E>24576)&&(R>423||!c)){u=DR(e,l,0,x,w,N,_,E,k,j-k,u),E=S=_=0,k=j;for(var I=0;I<286;++I)w[I]=0;for(I=0;I<30;++I)N[I]=0}var L=2,P=0,D=f,M=O-T&32767;if(R>2&&C==b(j-M))for(var F=Math.min(h,R)-1,B=Math.min(32767,j),U=Math.min(258,R);M<=B&&--D&&O!=T;){if(e[j+L]==e[j+L-M]){for(var z=0;z<U&&e[j+z]==e[j+z-M];++z);if(z>L){if(L=z,P=M,z>F)break;var H=Math.min(M,z-2),$=0;for(I=0;I<H;++I){var q=j-M+I&32767,G=q-p[q]&32767;G>$&&($=G,T=q)}}}M+=(O=T)-(T=p[O])&32767}if(P){x[E++]=268435456|oR[L]<<18|uR[P];var W=31&oR[L],V=31&uR[P];_+=tR[W]+rR[V],++w[257+W],++N[V],A=j+L,++S}else x[E++]=e[j],++w[e[j]]}}for(j=Math.max(j,A);j<s;++j)x[E++]=e[j],++w[e[j]];u=DR(e,l,c,x,w,N,_,E,k,j-k,u),c||(i.r=7&u|l[u/8|0]<<3,u-=7,i.h=g,i.p=p,i.i=j,i.w=A)}else{for(j=i.w||0;j<s+c;j+=65535){var K=j+65535;K>=s&&(l[u/8|0]=c,K=s),u=PR(l,u+1,e.subarray(j,K))}i.i=s}return jR(o,0,n+_R(u)+a)},UR=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=0|r.length,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=n+=r[s];n=(65535&n)+15*(n>>16),a=(65535&a)+15*(a>>16)}e=n,t=a},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},zR=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new QT(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return BR(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,n,a)},HR=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},$R=function(e,t){var r=t.level,n=0==r?0:r<6?1:9==r?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=UR();a.p(t.dictionary),HR(e,2,a.d())}},qR=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&AR(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&AR(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function GR(e,t){t||(t={});var r=UR();r.p(e);var n=zR(e,t,t.dictionary?6:2,4);return $R(n,t),HR(n,n.length-4,r.d()),n}function WR(e,t){return kR(e.subarray(qR(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var VR="undefined"!=typeof TextDecoder&&new TextDecoder;try{VR.decode(FR,{stream:!0})}catch(EM){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var KR=function(){return"undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:this}();function YR(){KR.console&&"function"==typeof KR.console.log&&KR.console.log.apply(KR.console,arguments)}var JR={log:YR,warn:function(e){KR.console&&("function"==typeof KR.console.warn?KR.console.warn.apply(KR.console,arguments):YR.call(null,arguments))},error:function(e){KR.console&&("function"==typeof KR.console.error?KR.console.error.apply(KR.console,arguments):YR(e))}};function XR(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){rI(n.response,t,r)},n.onerror=function(){JR.error("could not download file")},n.send()}function QR(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function ZR(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(ht){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var eI,tI,rI=KR.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,XT.A)(window))||window!==KR?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=KR.URL||KR.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?QR(a.href)?XR(e,t,r):ZR(a,a.target="_blank"):ZR(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){ZR(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download","string"==typeof e)if(QR(e))XR(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){ZR(n)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,XT.A)(t)&&(JR.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return XR(e,t,r);var a="application/octet-stream"===e.type,i=/constructor/i.test(KR.HTMLElement)||KR.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&"object"===("undefined"==typeof FileReader?"undefined":(0,XT.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},o.readAsDataURL(e)}else{var l=KR.URL||KR.webkitURL,c=l.createObjectURL(e);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function nI(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r}}function aI(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=sI(r,n,a,i,t[0],7,-680876936),i=sI(i,r,n,a,t[1],12,-389564586),a=sI(a,i,r,n,t[2],17,606105819),n=sI(n,a,i,r,t[3],22,-1044525330),r=sI(r,n,a,i,t[4],7,-176418897),i=sI(i,r,n,a,t[5],12,1200080426),a=sI(a,i,r,n,t[6],17,-1473231341),n=sI(n,a,i,r,t[7],22,-45705983),r=sI(r,n,a,i,t[8],7,1770035416),i=sI(i,r,n,a,t[9],12,-1958414417),a=sI(a,i,r,n,t[10],17,-42063),n=sI(n,a,i,r,t[11],22,-1990404162),r=sI(r,n,a,i,t[12],7,1804603682),i=sI(i,r,n,a,t[13],12,-40341101),a=sI(a,i,r,n,t[14],17,-1502002290),r=oI(r,n=sI(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=oI(i,r,n,a,t[6],9,-1069501632),a=oI(a,i,r,n,t[11],14,643717713),n=oI(n,a,i,r,t[0],20,-373897302),r=oI(r,n,a,i,t[5],5,-701558691),i=oI(i,r,n,a,t[10],9,38016083),a=oI(a,i,r,n,t[15],14,-660478335),n=oI(n,a,i,r,t[4],20,-405537848),r=oI(r,n,a,i,t[9],5,568446438),i=oI(i,r,n,a,t[14],9,-1019803690),a=oI(a,i,r,n,t[3],14,-187363961),n=oI(n,a,i,r,t[8],20,1163531501),r=oI(r,n,a,i,t[13],5,-1444681467),i=oI(i,r,n,a,t[2],9,-51403784),a=oI(a,i,r,n,t[7],14,1735328473),r=lI(r,n=oI(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=lI(i,r,n,a,t[8],11,-2022574463),a=lI(a,i,r,n,t[11],16,1839030562),n=lI(n,a,i,r,t[14],23,-35309556),r=lI(r,n,a,i,t[1],4,-1530992060),i=lI(i,r,n,a,t[4],11,1272893353),a=lI(a,i,r,n,t[7],16,-155497632),n=lI(n,a,i,r,t[10],23,-1094730640),r=lI(r,n,a,i,t[13],4,681279174),i=lI(i,r,n,a,t[0],11,-358537222),a=lI(a,i,r,n,t[3],16,-722521979),n=lI(n,a,i,r,t[6],23,76029189),r=lI(r,n,a,i,t[9],4,-640364487),i=lI(i,r,n,a,t[12],11,-421815835),a=lI(a,i,r,n,t[15],16,530742520),r=cI(r,n=lI(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=cI(i,r,n,a,t[7],10,1126891415),a=cI(a,i,r,n,t[14],15,-1416354905),n=cI(n,a,i,r,t[5],21,-57434055),r=cI(r,n,a,i,t[12],6,1700485571),i=cI(i,r,n,a,t[3],10,-1894986606),a=cI(a,i,r,n,t[10],15,-1051523),n=cI(n,a,i,r,t[1],21,-2054922799),r=cI(r,n,a,i,t[8],6,1873313359),i=cI(i,r,n,a,t[15],10,-30611744),a=cI(a,i,r,n,t[6],15,-1560198380),n=cI(n,a,i,r,t[13],21,1309151649),r=cI(r,n,a,i,t[4],6,-145523070),i=cI(i,r,n,a,t[11],10,-1120210379),a=cI(a,i,r,n,t[2],15,718787259),n=cI(n,a,i,r,t[9],21,-343485551),e[0]=yI(r,e[0]),e[1]=yI(n,e[1]),e[2]=yI(a,e[2]),e[3]=yI(i,e[3])}function iI(e,t,r,n,a,i){return t=yI(yI(t,e),yI(n,i)),yI(t<<a|t>>>32-a,r)}function sI(e,t,r,n,a,i,s){return iI(t&r|~t&n,e,t,a,i,s)}function oI(e,t,r,n,a,i,s){return iI(t&n|r&~n,e,t,a,i,s)}function lI(e,t,r,n,a,i,s){return iI(t^r^n,e,t,a,i,s)}function cI(e,t,r,n,a,i,s){return iI(r^(t|~n),e,t,a,i,s)}function uI(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)aI(n,dI(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(aI(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,aI(n,a),n}function dI(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}eI=KR.atob.bind(KR),tI=KR.btoa.bind(KR);var hI="0123456789abcdef".split("");function fI(e){for(var t="",r=0;r<4;r++)t+=hI[e>>8*r+4&15]+hI[e>>8*r&15];return t}function mI(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function pI(e){return uI(e).map(mI).join("")}var gI="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=fI(e[t]);return e.join("")}(uI("hello"));function yI(e,t){if(gI){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function vI(e,t){var r,n,a,i;if(e!==r){for(var s=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+s.charCodeAt(l))%256,o[l]=o[c],o[c]=u}r=e,n=o}else o=n;var d=t.length,h=0,f=0,m="";for(l=0;l<d;l++)f=(f+(u=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=u,s=o[(o[h]+o[f])%256],m+=String.fromCharCode(t.charCodeAt(l)^s);return m}var bI={print:4,modify:8,copy:16,"annot-forms":32};function xI(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(e){if(void 0!==bI.perm)throw new Error("Invalid permission: "+e);a+=bI[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=pI(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=vI(this.encryptionKey,this.padding)}function wI(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function NI(e){if("object"!==(0,XT.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,n){if(n=n||!1,"string"!=typeof e||"function"!=typeof r||"boolean"!=typeof n)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[r,!!n],a},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],0===Object.keys(t[r]).length&&delete t[r],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,n)}catch(r){KR.console&&JR.error("jsPDF PubSub Error",r.message,r)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function SI(e){if(!(this instanceof SI))return new SI(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function _I(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function jI(e,t,r,n,a){if(!(this instanceof jI))return new jI(e,t,r,n,a);this.type="axial"===e?2:3,this.coords=t,this.colors=r,_I.call(this,n,a)}function EI(e,t,r,n,a){if(!(this instanceof EI))return new EI(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,_I.call(this,n,a)}function AI(e){var t,r="string"==typeof arguments[0]?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,l=16,c="S",u=null;"object"===(0,XT.A)(e=e||{})&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),s=e.filters||(!0===i?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=NI;var m="1.3",p=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(e){m=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var y=f.__private__.getPageFormat=function(e){return g[e]};a=a||"a4";var v="compat",b="advanced",x=v;function w(){this.saveGraphicsState(),X(new Te(he,0,0,-he,0,cr()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),c="n",x=b}function N(){this.restoreGraphicsState(),c="S",x=v}var S=f.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};f.advancedAPI=function(e){var t=x===v;return t&&w.call(this),"function"!=typeof e||(e(this),t&&N.call(this)),this},f.compatAPI=function(e){var t=x===b;return t&&N.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},f.isAdvancedAPI=function(){return x===b};var _,j=function(e){if(x!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=f.roundToPrecision=f.__private__.roundToPrecision=function(e,r){var n=t||r;if(isNaN(e)||isNaN(n))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(n).replace(/0+$/,"")};_=f.hpf=f.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return E(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return E(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return E(e,16)};var A=f.f2=f.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return E(e,2)},k=f.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return E(e,3)},C=f.scale=f.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return x===v?e*he:x===b?e:void 0},O=function(e){return C(function(e){return x===v?cr()-e:x===b?e:void 0}(e))};f.__private__.setPrecision=f.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var T,R="00000000000000000000000000000000",I=f.__private__.getFileId=function(){return R},L=f.__private__.setFileId=function(e){return R=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():R.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(bt=new xI(u.userPermissions,u.userPassword,u.ownerPassword,R)),R};f.setFileId=function(e){return L(e),this},f.getFileId=function(){return I()};var P=f.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),r=t<0?"+":"-",n=Math.floor(Math.abs(t/60)),a=Math.abs(t%60),i=[r,U(n),"'",U(a),"'"].join("");return["D:",e.getFullYear(),U(e.getMonth()+1),U(e.getDate()),U(e.getHours()),U(e.getMinutes()),U(e.getSeconds()),i].join("")},D=f.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),r=parseInt(e.substr(6,2),10)-1,n=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),i=parseInt(e.substr(12,2),10),s=parseInt(e.substr(14,2),10);return new Date(t,r,n,a,i,s,0)},M=f.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=P(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return T=t},F=f.__private__.getCreationDate=function(e){var t=T;return"jsDate"===e&&(t=D(T)),t};f.setCreationDate=function(e){return M(e),this},f.getCreationDate=function(e){return F(e)};var B,U=f.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},z=f.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,$=[],q=[],G=0,W=[],V=[],K=!1,Y=q;f.__private__.setCustomOutputDestination=function(e){K=!0,Y=e};var J=function(e){K||(Y=e)};f.__private__.resetCustomOutputDestination=function(){K=!1,Y=q};var X=f.__private__.out=function(e){return e=e.toString(),G+=e.length+1,Y.push(e),Y},Q=f.__private__.write=function(e){return X(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Z=f.__private__.getArrayBuffer=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);t--;)n[t]=e.charCodeAt(t);return r},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(e){return te=x===b?e/he:e,this};var re,ne=f.__private__.getFontSize=f.getFontSize=function(){return x===v?te:te*he},ae=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(e){return ae=e,this},f.__private__.getR2L=f.getR2L=function(){return ae};var ie,se=f.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))re=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');re=e}else re=parseInt(e,10)};f.__private__.getZoomMode=function(){return re};var oe,le=f.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ie=e};f.__private__.getPageMode=function(){return ie};var ce=f.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};f.__private__.getLayoutMode=function(){return oe},f.__private__.setDisplayMode=f.setDisplayMode=function(e,t,r){return se(e),ce(t),le(r),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},f.__private__.getDocumentProperties=function(){return ue},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},f.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var de,he,fe,me,pe,ge={},ye={},ve=[],be={},xe={},we={},Ne={},Se=null,_e=0,je=[],Ee=new NI(f),Ae=e.hotfixes||[],ke={},Ce={},Oe=[],Te=function e(t,r,n,a,i,s){if(!(this instanceof e))return new e(t,r,n,a,i,s);isNaN(t)&&(t=1),isNaN(r)&&(r=0),isNaN(n)&&(n=0),isNaN(a)&&(a=1),isNaN(i)&&(i=0),isNaN(s)&&(s=0),this._matrix=[t,r,n,a,i,s]};Object.defineProperty(Te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Te.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Te.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(e)},Te.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,r=e.sx*this.shy+e.shy*this.sy,n=e.shx*this.sx+e.sy*this.shx,a=e.shx*this.shy+e.sy*this.sy,i=e.tx*this.sx+e.ty*this.shx+this.tx,s=e.tx*this.shy+e.ty*this.sy+this.ty;return new Te(t,r,n,a,i,s)},Te.prototype.decompose=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,i=this.ty,s=Math.sqrt(e*e+t*t),o=(e/=s)*r+(t/=s)*n;r-=e*o,n-=t*o;var l=Math.sqrt(r*r+n*n);return o/=l,e*(n/=l)<t*(r/=l)&&(e=-e,t=-t,o=-o,s=-s),{scale:new Te(s,0,0,l,0,0),translate:new Te(1,0,0,1,a,i),rotate:new Te(e,t,-t,e,0,0),skew:new Te(1,0,o,1,0,0)}},Te.prototype.toString=function(e){return this.join(" ")},Te.prototype.inversed=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,i=this.ty,s=1/(e*n-t*r),o=n*s,l=-t*s,c=-r*s,u=e*s;return new Te(o,l,c,u,-o*a-c*i,-l*a-u*i)},Te.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,r=e.x*this.shy+e.y*this.sy+this.ty;return new rr(t,r)},Te.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),r=this.applyToPoint(new rr(e.x+e.w,e.y+e.h));return new nr(t.x,t.y,r.x-t.x,r.y-t.y)},Te.prototype.clone=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,i=this.ty;return new Te(e,t,r,n,a,i)},f.Matrix=Te;var Re=f.matrixMult=function(e,t){return t.multiply(e)},Ie=new Te(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Ie;var Le=function(e,t){if(!xe[e]){var r=(t instanceof jI?"Sh":"P")+(Object.keys(be).length+1).toString(10);t.id=r,xe[e]=r,be[r]=t,Ee.publish("addPattern",t)}};f.ShadingPattern=jI,f.TilingPattern=EI,f.addShadingPattern=function(e,t){return j("addShadingPattern()"),Le(e,t),this},f.beginTilingPattern=function(e){j("beginTilingPattern()"),ir(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},f.endTilingPattern=function(e,t){j("endTilingPattern()"),t.stream=V[B].join("\n"),Le(e,t),Ee.publish("endTilingPattern",t),Oe.pop().restore()};var Pe,De=f.__private__.newObject=function(){var e=Me();return Fe(e,!0),e},Me=f.__private__.newObjectDeferred=function(){return H++,$[H]=function(){return G},H},Fe=function(e,t){return t="boolean"==typeof t&&t,$[e]=G,t&&X(e+" 0 obj"),e},Be=f.__private__.newAdditionalObject=function(){var e={objId:Me(),content:""};return W.push(e),e},Ue=Me(),ze=Me(),He=f.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var r=parseFloat(t[0]);t=[r,r,r,"r"]}for(var n="#",a=0;a<3;a++)n+=("0"+Math.floor(255*parseFloat(t[a])).toString(16)).slice(-2);return n},$e=f.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var r=e.ch1,n=e.ch2,a=e.ch3,i=e.ch4,s="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var o=new nI(r);if(o.ok)r=o.toHex();else if(!/^\d*\.?\d*$/.test(r))throw new Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var l=parseInt(r.substr(1),16);r=l>>16&255,n=l>>8&255,a=255&l}if(void 0===n||void 0===i&&r===n&&n===a)if("string"==typeof r)t=r+" "+s[0];else if(2===e.precision)t=A(r/255)+" "+s[0];else t=k(r/255)+" "+s[0];else if(void 0===i||"object"===(0,XT.A)(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",s[1]].join(" ");if("string"==typeof r)t=[r,n,a,s[1]].join(" ");else if(2===e.precision)t=[A(r/255),A(n/255),A(a/255),s[1]].join(" ");else t=[k(r/255),k(n/255),k(a/255),s[1]].join(" ")}else if("string"==typeof r)t=[r,n,a,i,s[2]].join(" ");else if(2===e.precision)t=[A(r),A(n),A(a),A(i),s[2]].join(" ");else t=[k(r),k(n),k(a),k(i),s[2]].join(" ");return t},qe=f.__private__.getFilters=function(){return s},Ge=f.__private__.putStream=function(e){var t=(e=e||{}).data||"",r=e.filters||qe(),n=e.alreadyAppliedFilters||[],a=e.addLength1||!1,i=t.length,s=e.objectId,o=function(e){return e};if(null!==u&&void 0===s)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=bt.encryptor(s,0));var l={};!0===r&&(r=["FlateEncode"]);var c=e.additionalKeyValues||[],d=(l=void 0!==AI.API.processDataByFilters?AI.API.processDataByFilters(t,r):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===a&&c.push({key:"Length1",value:i})),0!=d.length)if(d.split("/").length-1==1)c.push({key:"Filter",value:d});else{c.push({key:"Filter",value:"["+d+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var f=[],m=0;m<l.reverseChain.split("/").length-1;m+=1)f.push("null");f.push(c[h].value),c[h].value="["+f.join(" ")+"]"}}X("<<");for(var p=0;p<c.length;p++)X("/"+c[p].key+" "+c[p].value);X(">>"),0!==l.data.length&&(X("stream"),X(o(l.data)),X("endstream"))},We=f.__private__.putPage=function(e){var t=e.number,r=e.data,n=e.objId,a=e.contentsObjId;Fe(n,!0),X("<</Type /Page"),X("/Parent "+e.rootDictionaryObjId+" 0 R"),X("/Resources "+e.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(_(e.mediaBox.bottomLeftX))+" "+parseFloat(_(e.mediaBox.bottomLeftY))+" "+_(e.mediaBox.topRightX)+" "+_(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&X("/CropBox ["+_(e.cropBox.bottomLeftX)+" "+_(e.cropBox.bottomLeftY)+" "+_(e.cropBox.topRightX)+" "+_(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&X("/BleedBox ["+_(e.bleedBox.bottomLeftX)+" "+_(e.bleedBox.bottomLeftY)+" "+_(e.bleedBox.topRightX)+" "+_(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&X("/TrimBox ["+_(e.trimBox.bottomLeftX)+" "+_(e.trimBox.bottomLeftY)+" "+_(e.trimBox.topRightX)+" "+_(e.trimBox.topRightY)+"]"),null!==e.artBox&&X("/ArtBox ["+_(e.artBox.bottomLeftX)+" "+_(e.artBox.bottomLeftY)+" "+_(e.artBox.topRightX)+" "+_(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&X("/UserUnit "+e.userUnit),Ee.publish("putPage",{objId:n,pageContext:je[t],pageNumber:t,page:r}),X("/Contents "+a+" 0 R"),X(">>"),X("endobj");var i=r.join("\n");return x===b&&(i+="\nQ"),Fe(a,!0),Ge({data:i,filters:qe(),objectId:a}),X("endobj"),n},Ve=f.__private__.putPages=function(){var e,t,r=[];for(e=1;e<=_e;e++)je[e].objId=Me(),je[e].contentsObjId=Me();for(e=1;e<=_e;e++)r.push(We({number:e,data:V[e],objId:je[e].objId,contentsObjId:je[e].contentsObjId,mediaBox:je[e].mediaBox,cropBox:je[e].cropBox,bleedBox:je[e].bleedBox,trimBox:je[e].trimBox,artBox:je[e].artBox,userUnit:je[e].userUnit,rootDictionaryObjId:Ue,resourceDictionaryObjId:ze}));Fe(Ue,!0),X("<</Type /Pages");var n="/Kids [";for(t=0;t<_e;t++)n+=r[t]+" 0 R ";X(n+"]"),X("/Count "+_e),X(">>"),X("endobj"),Ee.publish("postPutPages")},Ke=function(e){Ee.publish("putFont",{font:e,out:X,newObject:De,putStream:Ge}),!0!==e.isAlreadyPutted&&(e.objectNumber=De(),X("<<"),X("/Type /Font"),X("/BaseFont /"+wI(e.postScriptName)),X("/Subtype /Type1"),"string"==typeof e.encoding&&X("/Encoding /"+e.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},Ye=function(e){e.objectNumber=De();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[_(e.x),_(e.y),_(e.x+e.width),_(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var r=e.pages[1].join("\n");Ge({data:r,additionalKeyValues:t,objectId:e.objectNumber}),X("endobj")},Je=function(e,t){t||(t=21);var r=De(),n=function(e,t){var r,n=[],a=1/(t-1);for(r=0;r<1;r+=a)n.push(r);if(n.push(1),0!=e[0].offset){var i={offset:0,color:e[0].color};e.unshift(i)}if(1!=e[e.length-1].offset){var s={offset:1,color:e[e.length-1].color};e.push(s)}for(var o="",l=0,c=0;c<n.length;c++){for(r=n[c];r>e[l+1].offset;)l++;var u=e[l].offset,d=(r-u)/(e[l+1].offset-u),h=e[l].color,f=e[l+1].color;o+=z(Math.round((1-d)*h[0]+d*f[0]).toString(16))+z(Math.round((1-d)*h[1]+d*f[1]).toString(16))+z(Math.round((1-d)*h[2]+d*f[2]).toString(16))}return o.trim()}(e.colors,t),a=[];a.push({key:"FunctionType",value:"0"}),a.push({key:"Domain",value:"[0.0 1.0]"}),a.push({key:"Size",value:"["+t+"]"}),a.push({key:"BitsPerSample",value:"8"}),a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge({data:n,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:r}),X("endobj"),e.objectNumber=De(),X("<< /ShadingType "+e.type),X("/ColorSpace /DeviceRGB");var i="/Coords ["+_(parseFloat(e.coords[0]))+" "+_(parseFloat(e.coords[1]))+" ";2===e.type?i+=_(parseFloat(e.coords[2]))+" "+_(parseFloat(e.coords[3])):i+=_(parseFloat(e.coords[2]))+" "+_(parseFloat(e.coords[3]))+" "+_(parseFloat(e.coords[4]))+" "+_(parseFloat(e.coords[5])),X(i+="]"),e.matrix&&X("/Matrix ["+e.matrix.toString()+"]"),X("/Function "+r+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},Xe=function(e,t){var r=Me(),n=De();t.push({resourcesOid:r,objectOid:n}),e.objectNumber=n;var a=[];a.push({key:"Type",value:"/Pattern"}),a.push({key:"PatternType",value:"1"}),a.push({key:"PaintType",value:"1"}),a.push({key:"TilingType",value:"1"}),a.push({key:"BBox",value:"["+e.boundingBox.map(_).join(" ")+"]"}),a.push({key:"XStep",value:_(e.xStep)}),a.push({key:"YStep",value:_(e.yStep)}),a.push({key:"Resources",value:r+" 0 R"}),e.matrix&&a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ge({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber}),X("endobj")},Qe=function(e){for(var t in e.objectNumber=De(),X("<<"),e)switch(t){case"opacity":X("/ca "+A(e[t]));break;case"stroke-opacity":X("/CA "+A(e[t]))}X(">>"),X("endobj")},Ze=function(e){Fe(e.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in X("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===d||!0===d&&h.hasOwnProperty(e))&&X("/"+e+" "+ge[e].objectNumber+" 0 R");X(">>")}(),function(){if(Object.keys(be).length>0){for(var e in X("/Shading <<"),be)be.hasOwnProperty(e)&&be[e]instanceof jI&&be[e].objectNumber>=0&&X("/"+e+" "+be[e].objectNumber+" 0 R");Ee.publish("putShadingPatternDict"),X(">>")}}(),function(e){if(Object.keys(be).length>0){for(var t in X("/Pattern <<"),be)be.hasOwnProperty(t)&&be[t]instanceof f.TilingPattern&&be[t].objectNumber>=0&&be[t].objectNumber<e&&X("/"+t+" "+be[t].objectNumber+" 0 R");Ee.publish("putTilingPatternDict"),X(">>")}}(e.objectOid),function(){if(Object.keys(we).length>0){var e;for(e in X("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&X("/"+e+" "+we[e].objectNumber+" 0 R");Ee.publish("putGStateDict"),X(">>")}}(),function(){for(var e in X("/XObject <<"),ke)ke.hasOwnProperty(e)&&ke[e].objectNumber>=0&&X("/"+e+" "+ke[e].objectNumber+" 0 R");Ee.publish("putXobjectDict"),X(">>")}(),X(">>"),X("endobj")},et=function(){var e=[];(function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===d||!0===d&&h.hasOwnProperty(e))&&Ke(ge[e])})(),function(){var e;for(e in we)we.hasOwnProperty(e)&&Qe(we[e])}(),function(){for(var e in ke)ke.hasOwnProperty(e)&&Ye(ke[e])}(),function(e){var t;for(t in be)be.hasOwnProperty(t)&&(be[t]instanceof jI?Je(be[t]):be[t]instanceof EI&&Xe(be[t],e))}(e),Ee.publish("putResources"),e.forEach(Ze),Ze({resourcesOid:ze,objectOid:Number.MAX_SAFE_INTEGER}),Ee.publish("postPutResources")},tt=function(e){ye[e.fontName]=ye[e.fontName]||{},ye[e.fontName][e.fontStyle]=e.id},rt=function(e,t,r,n,a){var i={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:r,encoding:n,isStandardFont:a||!1,metadata:{}};return Ee.publish("addFont",{font:i,instance:this}),ge[i.id]=i,tt(i),i.id},nt=f.__private__.pdfEscape=f.pdfEscape=function(e,t){return function(e,t){var r,n,a,i,s,o,l,c,u;if(a=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&ge[de].metadata&&ge[de].metadata[a]&&ge[de].metadata[a].encoding&&(i=ge[de].metadata[a].encoding,!s&&ge[de].encoding&&(s=ge[de].encoding),!s&&i.codePages&&(s=i.codePages[0]),"string"==typeof s&&(s=i[s]),s)){for(l=!1,o=[],r=0,n=e.length;r<n;r++)(c=s[e.charCodeAt(r)])?o.push(String.fromCharCode(c)):o.push(e[r]),o[r].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(r=e.length;void 0===l&&0!==r;)e.charCodeAt(r-1)>>8&&(l=!0),r--;if(!l)return e;for(o=t.noBOM?[]:[254,255],r=0,n=e.length;r<n;r++){if((u=(c=e.charCodeAt(r))>>8)>>8)throw new Error("Character at position "+r+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(u),o.push(c-(u<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},at=f.__private__.beginPage=function(e){V[++_e]=[],je[_e]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},ot(_e),J(V[B])},it=function(e,t){var n,i,s;switch(r=t||r,"string"==typeof e&&(n=y(e.toLowerCase()),Array.isArray(n)&&(i=n[0],s=n[1])),Array.isArray(e)&&(i=e[0]*he,s=e[1]*he),isNaN(i)&&(i=a[0],s=a[1]),(i>14400||s>14400)&&(JR.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),i=Math.min(14400,i),s=Math.min(14400,s)),a=[i,s],r.substr(0,1)){case"l":s>i&&(a=[s,i]);break;case"p":i>s&&(a=[s,i])}at(a),Bt(Mt),X(Vt),0!==Zt&&X(Zt+" J"),0!==er&&X(er+" j"),Ee.publish("addPage",{pageNumber:_e})},st=function(e){e>0&&e<=_e&&(V.splice(e,1),je.splice(e,1),_e--,B>_e&&(B=_e),this.setPage(B))},ot=function(e){e>0&&e<=_e&&(B=e)},lt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return V.length-1},ct=function(e,t,r){var n,a=void 0;return r=r||{},e=void 0!==e?e:ge[de].fontName,t=void 0!==t?t:ge[de].fontStyle,n=e.toLowerCase(),void 0!==ye[n]&&void 0!==ye[n][t]?a=ye[n][t]:void 0!==ye[e]&&void 0!==ye[e][t]?a=ye[e][t]:!1===r.disableWarning&&JR.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),a||r.noFallback||null==(a=ye.times[t])&&(a=ye.times.normal),a},ut=f.__private__.putInfo=function(){var e=De(),t=function(e){return e};for(var r in null!==u&&(t=bt.encryptor(e,0)),X("<<"),X("/Producer ("+nt(t("jsPDF "+AI.version))+")"),ue)ue.hasOwnProperty(r)&&ue[r]&&X("/"+r.substr(0,1).toUpperCase()+r.substr(1)+" ("+nt(t(ue[r]))+")");X("/CreationDate ("+nt(t(T))+")"),X(">>"),X("endobj")},dt=f.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Ue;switch(De(),X("<<"),X("/Type /Catalog"),X("/Pages "+t+" 0 R"),re||(re="fullwidth"),re){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var r=""+re;"%"===r.substr(r.length-1)&&(re=parseInt(re)/100),"number"==typeof re&&X("/OpenAction [3 0 R /XYZ null null "+A(re)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}ie&&X("/PageMode /"+ie),Ee.publish("putCatalog"),X(">>"),X("endobj")},ht=f.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(H+1)),X("/Root "+H+" 0 R"),X("/Info "+(H-1)+" 0 R"),null!==u&&X("/Encrypt "+bt.oid+" 0 R"),X("/ID [ <"+R+"> <"+R+"> ]"),X(">>")},ft=f.__private__.putHeader=function(){X("%PDF-"+m),X("%\xba\xdf\xac\xe0")},mt=f.__private__.putXRef=function(){var e="0000000000";X("xref"),X("0 "+(H+1)),X("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof $[t]?X((e+$[t]()).slice(-10)+" 00000 n "):void 0!==$[t]?X((e+$[t]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},pt=f.__private__.buildDocument=function(){H=0,G=0,q=[],$=[],W=[],Ue=Me(),ze=Me(),J(q),Ee.publish("buildDocument"),ft(),Ve(),function(){Ee.publish("putAdditionalObjects");for(var e=0;e<W.length;e++){var t=W[e];Fe(t.objId,!0),X(t.content),X("endobj")}Ee.publish("postPutAdditionalObjects")}(),et(),null!==u&&(bt.oid=De(),X("<<"),X("/Filter /Standard"),X("/V "+bt.v),X("/R "+bt.r),X("/U <"+bt.toHexString(bt.U)+">"),X("/O <"+bt.toHexString(bt.O)+">"),X("/P "+bt.P),X(">>"),X("endobj")),ut(),dt();var e=G;return mt(),ht(),X("startxref"),X(""+e),X("%%EOF"),J(V[B]),q.join("\n")},gt=f.__private__.getBlob=function(e){return new Blob([Z(e)],{type:"application/pdf"})},yt=f.output=f.__private__.output=(Pe=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":f.save(t.filename);break;case"arraybuffer":return Z(pt());case"blob":return gt(pt());case"bloburi":case"bloburl":if(void 0!==KR.URL&&"function"==typeof KR.URL.createObjectURL)return KR.URL&&KR.URL.createObjectURL(gt(pt()))||void 0;JR.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var r="",n=pt();try{r=tI(n)}catch(e){r=tI(unescape(encodeURIComponent(n)))}return"data:application/pdf;filename="+t.filename+";base64,"+r;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(KR)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",i=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,i="");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+i+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=KR.open();return null!==o&&o.document.write(s),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(KR)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=KR.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(KR))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=KR.open();if(null!==h&&(h.document.write(d),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return KR.document.location.href=this.output("datauristring",t);default:return null}},Pe.foo=function(){try{return Pe.apply(this,arguments)}catch(Pe){var e=Pe.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Pe.message;if(!KR.console)throw new Error(t);KR.console.error(t,Pe),KR.alert&&alert(t)}},Pe.foo.bar=Pe,Pe.foo),vt=function(e){return!0===Array.isArray(Ae)&&Ae.indexOf(e)>-1};switch(n){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==vt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof n)throw new Error("Invalid unit: "+n);he=n}var bt=null;M(),L();var xt=f.__private__.getPageInfo=f.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:je[e].objId,pageNumber:e,pageContext:je[e]}},wt=f.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in je)if(je[t].objId===e)break;return xt(t)},Nt=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:je[B].objId,pageNumber:B,pageContext:je[B]}};f.addPage=function(){return it.apply(this,arguments),this},f.setPage=function(){return ot.apply(this,arguments),J.call(this,V[B]),this},f.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},f.movePage=function(e,t){var r,n;if(e>t){r=V[e],n=je[e];for(var a=e;a>t;a--)V[a]=V[a-1],je[a]=je[a-1];V[t]=r,je[t]=n,this.setPage(t)}else if(e<t){r=V[e],n=je[e];for(var i=e;i<t;i++)V[i]=V[i+1],je[i]=je[i+1];V[t]=r,je[t]=n,this.setPage(t)}return this},f.deletePage=function(){return st.apply(this,arguments),this},f.__private__.text=f.text=function(e,t,r,n,a){var i,s,o,l,c,u,d,f,m,p=(n=n||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof r||Array.isArray(r))){var g=r;r=t,t=e,e=g}if(arguments[3]instanceof Te==0?(o=arguments[4],l=arguments[5],"object"===(0,XT.A)(d=arguments[3])&&null!==d||("string"==typeof o&&(l=o,o=null),"string"==typeof d&&(l=d,d=null),"number"==typeof d&&(o=d,d=null),n={flags:d,angle:o,align:l})):(j("The transform parameter of text() with a Matrix value"),m=a),isNaN(t)||isNaN(r)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return p;var y,v="",w="number"==typeof n.lineHeightFactor?n.lineHeightFactor:Dt,N=p.internal.scaleFactor;function S(e){return e=e.split("\t").join(Array(n.TabLen||9).join(" ")),nt(e,d)}function E(e){for(var t,r=e.concat(),n=[],a=r.length;a--;)"string"==typeof(t=r.shift())?n.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?n.push(t[0]):n.push([t[0],t[1],t[2]]);return n}function A(e,t){var r;if("string"==typeof e)r=t(e)[0];else if(Array.isArray(e)){for(var n,a,i=e.concat(),s=[],o=i.length;o--;)"string"==typeof(n=i.shift())?s.push(t(n)[0]):Array.isArray(n)&&"string"==typeof n[0]&&(a=t(n[0],n[1],n[2]),s.push([a[0],a[1],a[2]]));r=s}return r}var k=!1,O=!0;if("string"==typeof e)k=!0;else if(Array.isArray(e)){var T=e.concat();s=[];for(var R,I=T.length;I--;)("string"!=typeof(R=T.shift())||Array.isArray(R)&&"string"!=typeof R[0])&&(O=!1);k=O}if(!1===k)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=te/p.internal.scaleFactor,P=L*(w-1);switch(n.baseline){case"bottom":r-=P;break;case"top":r+=L-P;break;case"hanging":r+=L-2*P;break;case"middle":r+=L/2-P}if((u=n.maxWidth||0)>0&&("string"==typeof e?e=p.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(p.splitTextToSize(t,u))},[]))),i={text:e,x:t,y:r,options:n,mutex:{pdfEscape:nt,activeFontKey:de,fonts:ge,activeFontSize:te}},Ee.publish("preProcessText",i),e=i.text,o=(n=i.options).angle,m instanceof Te==0&&o&&"number"==typeof o){o*=Math.PI/180,0===n.rotationDirection&&(o=-o),x===b&&(o=-o);var D=Math.cos(o),M=Math.sin(o);m=new Te(D,M,-M,D,0,0)}else o&&o instanceof Te&&(m=o);x!==b||m||(m=Ie),void 0!==(c=n.charSpace||Xt)&&(v+=_(C(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=n.horizontalScale)&&(v+=_(100*f)+" Tz\n"),n.lang;var F=-1,B=void 0!==n.renderingMode?n.renderingMode:n.stroke,U=p.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":F=0;break;case 1:case!0:case"stroke":F=1;break;case 2:case"fillThenStroke":F=2;break;case 3:case"invisible":F=3;break;case 4:case"fillAndAddForClipping":F=4;break;case 5:case"strokeAndAddPathForClipping":F=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":F=6;break;case 7:case"addToPathForClipping":F=7}var z=void 0!==U.usedRenderingMode?U.usedRenderingMode:-1;-1!==F?v+=F+" Tr\n":-1!==z&&(v+="0 Tr\n"),-1!==F&&(U.usedRenderingMode=F),l=n.align||"left";var H,$=te*w,q=p.internal.pageSize.getWidth(),G=ge[de];c=n.charSpace||Xt,u=n.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},n.flags);var W=[],V=function(e){return p.getStringUnitWidth(e,{font:G,charSpace:c,fontSize:te,doKerning:!1})*te/N};if("[object Array]"===Object.prototype.toString.call(e)){var K;s=E(e),"left"!==l&&(H=s.map(V));var Y,J=0;if("right"===l){t-=H[0],e=[],I=s.length;for(var Q=0;Q<I;Q++)0===Q?(Y=$t(t),K=qt(r)):(Y=C(J-H[Q]),K=-$),e.push([s[Q],Y,K]),J=H[Q]}else if("center"===l){t-=H[0]/2,e=[],I=s.length;for(var Z=0;Z<I;Z++)0===Z?(Y=$t(t),K=qt(r)):(Y=C((J-H[Z])/2),K=-$),e.push([s[Z],Y,K]),J=H[Z]}else if("left"===l){e=[],I=s.length;for(var ee=0;ee<I;ee++)e.push(s[ee])}else if("justify"===l&&"Identity-H"===G.encoding){e=[],I=s.length,u=0!==u?u:q;for(var re=0,ne=0;ne<I;ne++)if(K=0===ne?qt(r):-$,Y=0===ne?$t(t):re,ne<I-1){var ie=C((u-H[ne])/(s[ne].split(" ").length-1)),se=s[ne].split(" ");e.push([se[0]+" ",Y,K]),re=0;for(var oe=1;oe<se.length;oe++){var le=(V(se[oe-1]+" "+se[oe])-V(se[oe]))*N+ie;oe==se.length-1?e.push([se[oe],le,0]):e.push([se[oe]+" ",le,0]),re-=le}}else e.push([s[ne],Y,K]);e.push(["",re,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],I=s.length,u=0!==u?u:q,ne=0;ne<I;ne++)K=0===ne?qt(r):-$,Y=0===ne?$t(t):0,ne<I-1?W.push(_(C((u-H[ne])/(s[ne].split(" ").length-1)))):W.push(0),e.push([s[ne],Y,K])}}!0===("boolean"==typeof n.R2L?n.R2L:ae)&&(e=A(e,function(e,t,r){return[e.split("").reverse().join(""),t,r]})),i={text:e,x:t,y:r,options:n,mutex:{pdfEscape:nt,activeFontKey:de,fonts:ge,activeFontSize:te}},Ee.publish("postProcessText",i),e=i.text,y=i.mutex.isHex||!1;var ce=ge[de].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=A(e,function(e,t,r){return[S(e),t,r]})),s=E(e),e=[];for(var ue,he,fe,me=Array.isArray(s[0])?1:0,pe="",ye=function(e,t,r){var a="";return r instanceof Te?(r="number"==typeof n.angle?Re(r,new Te(1,0,0,1,e,t)):Re(new Te(1,0,0,1,e,t),r),x===b&&(r=Re(new Te(1,0,0,-1,0,0),r)),a=r.join(" ")+" Tm\n"):a=_(e)+" "+_(t)+" Td\n",a},ve=0;ve<s.length;ve++){switch(pe="",me){case 1:fe=(y?"<":"(")+s[ve][0]+(y?">":")"),ue=parseFloat(s[ve][1]),he=parseFloat(s[ve][2]);break;case 0:fe=(y?"<":"(")+s[ve]+(y?">":")"),ue=$t(t),he=qt(r)}void 0!==W&&void 0!==W[ve]&&(pe=W[ve]+" Tw\n"),0===ve?e.push(pe+ye(ue,he,m)+fe):0===me?e.push(pe+fe):1===me&&e.push(pe+ye(ue,he,m)+fe)}e=0===me?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var be="BT\n/";return be+=de+" "+te+" Tf\n",be+=_(te*w)+" TL\n",be+=Yt+"\n",be+=v,be+=e,X(be+="ET"),h[de]=!0,p};var St=f.__private__.clip=f.clip=function(e){return X("evenodd"===e?"W*":"W"),this};f.clipEvenOdd=function(){return St("evenodd")},f.__private__.discardPath=f.discardPath=function(){return X("n"),this};var _t=f.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(e){return _t(e)&&(c=e),this};var jt=f.__private__.getStyle=f.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Et=f.close=function(){return X("h"),this};f.stroke=function(){return X("S"),this},f.fill=function(e){return At("f",e),this},f.fillEvenOdd=function(e){return At("f*",e),this},f.fillStroke=function(e){return At("B",e),this},f.fillStrokeEvenOdd=function(e){return At("B*",e),this};var At=function(e,t){"object"===(0,XT.A)(t)?Ot(t,e):X(e)},kt=function(e){null===e||x===b&&void 0===e||(e=jt(e),X(e))};function Ct(e,t,r,n,a){var i=new EI(t||this.boundingBox,r||this.xStep,n||this.yStep,this.gState,a||this.matrix);i.stream=this.stream;var s=e+"$$"+this.cloneIndex+++"$$";return Le(s,i),i}var Ot=function(e,t){var r=xe[e.key],n=be[r];if(n instanceof jI)X("q"),X(Tt(t)),n.gState&&f.setGState(n.gState),X(e.matrix.toString()+" cm"),X("/"+r+" sh"),X("Q");else if(n instanceof EI){var a=new Te(1,0,0,-1,0,cr());e.matrix&&(a=a.multiply(e.matrix||Ie),r=Ct.call(n,e.key,e.boundingBox,e.xStep,e.yStep,a).id),X("q"),X("/Pattern cs"),X("/"+r+" scn"),n.gState&&f.setGState(n.gState),X(t),X("Q")}},Tt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Rt=f.moveTo=function(e,t){return X(_(C(e))+" "+_(O(t))+" m"),this},It=f.lineTo=function(e,t){return X(_(C(e))+" "+_(O(t))+" l"),this},Lt=f.curveTo=function(e,t,r,n,a,i){return X([_(C(e)),_(O(t)),_(C(r)),_(O(n)),_(C(a)),_(O(i)),"c"].join(" ")),this};f.__private__.line=f.line=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!_t(a))throw new Error("Invalid arguments passed to jsPDF.line");return x===v?this.lines([[r-e,n-t]],e,t,[1,1],a||"S"):this.lines([[r-e,n-t]],e,t,[1,1]).stroke()},f.__private__.lines=f.lines=function(e,t,r,n,a,i){var s,o,l,c,u,d,h,f,m,p,g,y;if("number"==typeof e&&(y=r,r=t,t=e,e=y),n=n||[1,1],i=i||!1,isNaN(t)||isNaN(r)||!Array.isArray(e)||!Array.isArray(n)||!_t(a)||"boolean"!=typeof i)throw new Error("Invalid arguments passed to jsPDF.lines");for(Rt(t,r),s=n[0],o=n[1],c=e.length,p=t,g=r,l=0;l<c;l++)2===(u=e[l]).length?(p=u[0]*s+p,g=u[1]*o+g,It(p,g)):(d=u[0]*s+p,h=u[1]*o+g,f=u[2]*s+p,m=u[3]*o+g,p=u[4]*s+p,g=u[5]*o+g,Lt(d,h,f,m,p,g));return i&&Et(),kt(a),this},f.path=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.c;switch(r.op){case"m":Rt(n[0],n[1]);break;case"l":It(n[0],n[1]);break;case"c":Lt.apply(this,n);break;case"h":Et()}}return this},f.__private__.rect=f.rect=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!_t(a))throw new Error("Invalid arguments passed to jsPDF.rect");return x===v&&(n=-n),X([_(C(e)),_(O(t)),_(C(r)),_(C(n)),"re"].join(" ")),kt(a),this},f.__private__.triangle=f.triangle=function(e,t,r,n,a,i,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(i)||!_t(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[r-e,n-t],[a-r,i-n],[e-a,t-i]],e,t,[1,1],s,!0),this},f.__private__.roundedRect=f.roundedRect=function(e,t,r,n,a,i,s){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(i)||!_t(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return a=Math.min(a,.5*r),i=Math.min(i,.5*n),this.lines([[r-2*a,0],[a*o,0,a,i-i*o,a,i],[0,n-2*i],[0,i*o,-a*o,i,-a,i],[2*a-r,0],[-a*o,0,-a,-i*o,-a,-i],[0,2*i-n],[0,-i*o,a*o,-i,a,-i]],e+a,t,[1,1],s,!0),this},f.__private__.ellipse=f.ellipse=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!_t(a))throw new Error("Invalid arguments passed to jsPDF.ellipse");var i=4/3*(Math.SQRT2-1)*r,s=4/3*(Math.SQRT2-1)*n;return Rt(e+r,t),Lt(e+r,t-s,e+i,t-n,e,t-n),Lt(e-i,t-n,e-r,t-s,e-r,t),Lt(e-r,t+s,e-i,t+n,e,t+n),Lt(e+i,t+n,e+r,t+s,e+r,t),kt(a),this},f.__private__.circle=f.circle=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||!_t(n))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,r,r,n)},f.setFont=function(e,t,r){return r&&(t=S(t,r)),de=ct(e,t,{disableWarning:!1}),this};var Pt=f.__private__.getFont=f.getFont=function(){return ge[ct.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var e,t,r={};for(e in ye)if(ye.hasOwnProperty(e))for(t in r[e]=[],ye[e])ye[e].hasOwnProperty(t)&&r[e].push(t);return r},f.addFont=function(e,t,r,n,a){var i=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==i.indexOf(arguments[3])?a=arguments[3]:arguments[3]&&-1==i.indexOf(arguments[3])&&(r=S(r,n)),rt.call(this,e,t,r,a=a||"Identity-H")};var Dt,Mt=e.lineWidth||.200025,Ft=f.__private__.getLineWidth=f.getLineWidth=function(){return Mt},Bt=f.__private__.setLineWidth=f.setLineWidth=function(e){return Mt=e,X(_(C(e))+" w"),this};f.__private__.setLineDash=AI.API.setLineDash=AI.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return _(C(e))}).join(" "),t=_(C(t)),X("["+e+"] "+t+" d"),this};var Ut=f.__private__.getLineHeight=f.getLineHeight=function(){return te*Dt};f.__private__.getLineHeight=f.getLineHeight=function(){return te*Dt};var zt=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Dt=e),this},Ht=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Dt};zt(e.lineHeight);var $t=f.__private__.getHorizontalCoordinate=function(e){return C(e)},qt=f.__private__.getVerticalCoordinate=function(e){return x===b?e:je[B].mediaBox.topRightY-je[B].mediaBox.bottomLeftY-C(e)},Gt=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(e){return _($t(e))},Wt=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(e){return _(qt(e))},Vt=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return He(Vt)},f.__private__.setStrokeColor=f.setDrawColor=function(e,t,r,n){return Vt=$e({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"draw",precision:2}),X(Vt),this};var Kt=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return He(Kt)},f.__private__.setFillColor=f.setFillColor=function(e,t,r,n){return Kt=$e({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"fill",precision:2}),X(Kt),this};var Yt=e.textColor||"0 g",Jt=f.__private__.getTextColor=f.getTextColor=function(){return He(Yt)};f.__private__.setTextColor=f.setTextColor=function(e,t,r,n){return Yt=$e({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"text",precision:3}),this};var Xt=e.charSpace,Qt=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Xt||0)};f.__private__.setCharSpace=f.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xt=e,this};var Zt=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,X(t+" J"),this};var er=0;f.__private__.setLineJoin=f.setLineJoin=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return er=t,X(t+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(_(C(e))+" M"),this},f.GState=SI,f.setGState=function(e){(e="string"==typeof e?we[Ne[e]]:tr(null,e)).equals(Se)||(X("/"+e.id+" gs"),Se=e)};var tr=function(e,t){if(!e||!Ne[e]){var r=!1;for(var n in we)if(we.hasOwnProperty(n)&&we[n].equals(t)){r=!0;break}if(r)t=we[n];else{var a="GS"+(Object.keys(we).length+1).toString(10);we[a]=t,t.id=a}return e&&(Ne[e]=t.id),Ee.publish("addGState",t),t}};f.addGState=function(e,t){return tr(e,t),this},f.saveGraphicsState=function(){return X("q"),ve.push({key:de,size:te,color:Yt}),this},f.restoreGraphicsState=function(){X("Q");var e=ve.pop();return de=e.key,te=e.size,Yt=e.color,Se=null,this},f.setCurrentTransformationMatrix=function(e){return X(e.toString()+" cm"),this},f.comment=function(e){return X("#"+e),this};var rr=function(e,t){var r=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var n=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var a="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return a},set:function(e){a=e.toString()}}),this},nr=function(e,t,r,n){rr.call(this,e,t),this.type="rect";var a=r||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var i=n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}}),this},ar=function(){this.page=_e,this.currentPage=B,this.pages=V.slice(0),this.pagesContext=je.slice(0),this.x=fe,this.y=me,this.matrix=pe,this.width=or(B),this.height=cr(B),this.outputDestination=Y,this.id="",this.objectNumber=-1};ar.prototype.restore=function(){_e=this.page,B=this.currentPage,je=this.pagesContext,V=this.pages,fe=this.x,me=this.y,pe=this.matrix,lr(B,this.width),ur(B,this.height),Y=this.outputDestination};var ir=function(e,t,r,n,a){Oe.push(new ar),_e=B=0,V=[],fe=e,me=t,pe=a,at([r,n])};for(var sr in f.beginFormObject=function(e,t,r,n,a){return ir(e,t,r,n,a),this},f.endFormObject=function(e){return function(e){if(Ce[e])Oe.pop().restore();else{var t=new ar,r="Xo"+(Object.keys(ke).length+1).toString(10);t.id=r,Ce[e]=r,ke[r]=t,Ee.publish("addFormObject",t),Oe.pop().restore()}}(e),this},f.doFormObject=function(e,t){var r=ke[Ce[e]];return X("q"),X(t.toString()+" cm"),X("/"+r.id+" Do"),X("Q"),this},f.getFormObject=function(e){var t=ke[Ce[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},f.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(rI(gt(pt()),e),"function"==typeof rI.unload&&KR.setTimeout&&setTimeout(rI.unload,911),this):new Promise(function(t,r){try{var n=rI(gt(pt()),e);"function"==typeof rI.unload&&KR.setTimeout&&setTimeout(rI.unload,911),t(n)}catch(e){r(e.message)}})},AI.API)AI.API.hasOwnProperty(sr)&&("events"===sr&&AI.API.events.length?function(e,t){var r,n,a;for(a=t.length-1;-1!==a;a--)r=t[a][0],n=t[a][1],e.subscribe.apply(e,[r].concat("function"==typeof n?[n]:n))}(Ee,AI.API.events):f[sr]=AI.API[sr]);var or=f.getPageWidth=function(e){return(je[e=e||B].mediaBox.topRightX-je[e].mediaBox.bottomLeftX)/he},lr=f.setPageWidth=function(e,t){je[e].mediaBox.topRightX=t*he+je[e].mediaBox.bottomLeftX},cr=f.getPageHeight=function(e){return(je[e=e||B].mediaBox.topRightY-je[e].mediaBox.bottomLeftY)/he},ur=f.setPageHeight=function(e,t){je[e].mediaBox.topRightY=t*he+je[e].mediaBox.bottomLeftY};return f.internal={pdfEscape:nt,getStyle:jt,getFont:Pt,getFontSize:ne,getCharSpace:Qt,getTextColor:Jt,getLineHeight:Ut,getLineHeightFactor:Ht,getLineWidth:Ft,write:Q,getHorizontalCoordinate:$t,getVerticalCoordinate:qt,getCoordinateString:Gt,getVerticalCoordinateString:Wt,collections:{},newObject:De,newAdditionalObject:Be,newObjectDeferred:Me,newObjectDeferredBegin:Fe,getFilters:qe,putStream:Ge,events:Ee,scaleFactor:he,pageSize:{getWidth:function(){return or(B)},setWidth:function(e){lr(B,e)},getHeight:function(){return cr(B)},setHeight:function(e){ur(B,e)}},encryptionOptions:u,encryption:bt,getEncryptor:function(e){return null!==u?bt.encryptor(e,0):function(e){return e}},output:yt,getNumberOfPages:lt,pages:V,out:X,f2:A,f3:k,getPageInfo:xt,getPageInfoByObjId:wt,getCurrentPageInfo:Nt,getPDFVersion:p,Point:rr,Rectangle:nr,Matrix:Te,hasHotfix:vt},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return or(B)},set:function(e){lr(B,e)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return cr(B)},set:function(e){ur(B,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,r=ee.length;t<r;t++){var n=rt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===d&&(h[n]=!0);var a=e[t][0].split("-");tt({id:n,fontName:a[0],fontStyle:a[1]||""})}Ee.publish("addFonts",{fonts:ge,dictionary:ye})}.call(f,ee),de="F1",it(a,r),Ee.publish("initialized"),f}xI.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},xI.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xI.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},xI.prototype.processOwnerPassword=function(e,t){return vI(pI(t).substr(0,5),e)},xI.prototype.encryptor=function(e,t){var r=pI(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return vI(r,e)}},SI.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||(0,XT.A)(e)!==(0,XT.A)(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return 0===n},AI.API={events:[]},AI.version="3.0.1";var kI=AI.API,CI=1,OI=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},TI=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},RI=function(e){return e.toFixed(2)},II=function(e){return e.toFixed(5)};kI.__acroform__={};var LI=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},PI=function(e){return e*CI},DI=function(e){var t=new ZI,r=fL.internal.getHeight(e)||0,n=fL.internal.getWidth(e)||0;return t.BBox=[0,0,Number(RI(n)),Number(RI(r))],t},MI=kI.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},FI=kI.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},BI=kI.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},UI=kI.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BI(e,t-1)},zI=kI.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return MI(e,t-1)},HI=kI.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return FI(e,t-1)},$I=kI.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],o=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=r(a+s)||0,l.upperRight_Y=n(i)||0,[Number(RI(l.lowerLeft_X)),Number(RI(l.lowerLeft_Y)),Number(RI(l.upperRight_X)),Number(RI(l.upperRight_Y))]},qI=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=GI(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+RI(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=DI(e);return i.scope=e.scope,i.stream=t.join("\n"),i}},GI=function(e,t){var r=0===e.fontSize?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(e){return e.split("\n")}):a.map(function(e){return[e]});var i=r,s=fL.internal.getHeight(e)||0;s=s<0?-s:s;var o=fL.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,r,n){if(t+1<a.length){var i=r+" "+a[t+1][0];return WI(i,e,n).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var c,u,d=WI("3",e,i).height,h=e.multiline?s-i:(s-d)/2,f=h+=2,m=0,p=0,g=0;if(i<=0){t="(...) Tj\n",t+="% Width of Text: "+WI(t,e,i=12).width+", FieldWidth:"+o+"\n";break}for(var y="",v=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var x=!1;if(1!==a[b].length&&g!==a[b].length-1){if((d+2)*(v+2)+2>s)continue e;y+=a[b][g],x=!0,p=b,b--}else{y=" "==(y+=a[b][g]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var w=parseInt(b),N=l(w,y,i),S=b>=a.length-1;if(N&&!S){y+=" ",g=0;continue}if(N||S){if(S)p=w;else if(e.multiline&&(d+2)*(v+2)+2>s)continue e}else{if(!e.multiline)continue e;if((d+2)*(v+2)+2>s)continue e;p=w}}for(var _="",j=m;j<=p;j++){var E=a[j];if(e.multiline){if(j===p){_+=E[g]+" ",g=(g+1)%E.length;continue}if(j===m){_+=E[E.length-1]+" ";continue}}_+=E[0]+" "}switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,u=WI(_,e,i).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}t+=RI(c)+" "+RI(f)+" Td\n",t+="("+OI(_)+") Tj\n",t+=-RI(c)+" 0 Td\n",f=-(i+2),u=0,m=x?p:p+1,v++,y=""}break}return n.text=t,n.fontSize=i,n},WI=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},VI={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KI=function(e,t){var r={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===r.type&&e.object===r.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},YI=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(tL.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(VI)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");CI=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new eL,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];n.objId=void 0,n.hasAnnotation&&KI(n,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var r=!e;for(var n in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(n)){var a=e[n],i=[],s=a.Rect;if(a.Rect&&(a.Rect=$I(a.Rect,t)),t.internal.newObjectDeferredBegin(a.objId,!0),a.DA=fL.createDefaultAppearanceStream(a),"object"===(0,XT.A)(a)&&"function"==typeof a.getKeyValueListForStream&&(i=a.getKeyValueListForStream()),a.Rect=s,a.hasAppearanceStream&&!a.appearanceStreamContent){var o=qI(a);i.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(a.appearanceStreamContent){var l="";for(var c in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(c)){var u=a.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var n in u)if(u.hasOwnProperty(n)){var d=u[n];"function"==typeof d&&(d=d.call(t,a)),l+="/"+n+" "+d+" ",t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=u)&&(d=d.call(t,a)),l+="/"+n+" "+d,t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d);l+=">>"}i.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:a.objId}),t.internal.out("endobj")}r&&function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,XT.A)(a)&&"function"==typeof a.putStream&&a.putStream(),delete e[n]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},JI=kI.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(e){return e};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(0!==i&&(a+=" "),(0,XT.A)(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&r&&(n=r.internal.getEncryptor(t)),a+="("+OI(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},XI=function(e,t,r){var n=function(e){return e};return void 0!==t&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+OI(n(e))+")"},QI=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};QI.prototype.toString=function(){return this.objId+" 0 R"},QI.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},QI.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var r in t)if(!1===Object.getOwnPropertyDescriptor(this,t[r]).configurable){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:JI(a,this.objId,this.scope)}):a instanceof QI?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):"function"!=typeof a&&e.push({key:n,value:a}))}return e};var ZI=function(){QI.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};LI(ZI,QI);var eL=function(){QI.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+OI(t(e))+")"}},set:function(t){e=t}})};LI(eL,QI);var tL=function e(){QI.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(t,3))},set:function(e){!0===Boolean(e)?this.F=zI(t,3):this.F=HI(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');r=e}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==n.length)return n},set:function(e){n=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(e){n[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(e){n[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(e){n[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(e){n[3]=e}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof cL)return;i="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+OI(t(i))+")"},set:function(e){i=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/CI:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof cL||this instanceof dL))return XI(d,this.objId,this.scope)},set:function(e){e=e.toString(),d=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof sL==0?XI(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof sL==0?"("===e.substr(0,1)?TI(e.substr(1,e.length-2)):TI(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof sL==1?TI(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof sL==1?"/"+e:e}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof sL==0?XI(f,this.objId,this.scope):f},set:function(e){e=e.toString(),f=this instanceof sL==0?"("===e.substr(0,1)?TI(e.substr(1,e.length-2)):TI(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof sL==1?TI(f.substr(1,f.length-1)):f},set:function(e){e=e.toString(),f=this instanceof sL==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){e=Boolean(e),p=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(e){m=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,1):this.Ff=HI(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,2):this.Ff=HI(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,3):this.Ff=HI(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};LI(tL,QI);var rL=function(){tL.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return JI(t,this.objId,this.scope)},set:function(e){var r,n;n=[],"string"==typeof(r=e)&&(n=function(e,t,r){r||(r=1);for(var n,a=[];n=t.exec(e);)a.push(n[r]);return a}(r,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,18):this.Ff=HI(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=zI(this.Ff,19):this.Ff=HI(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=zI(this.Ff,20),t.sort()):this.Ff=HI(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,22):this.Ff=HI(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,23):this.Ff=HI(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,27):this.Ff=HI(this.Ff,27)}}),this.hasAppearanceStream=!1};LI(rL,tL);var nL=function(){rL.call(this),this.fontName="helvetica",this.combo=!1};LI(nL,rL);var aL=function(){nL.call(this),this.combo=!0};LI(aL,nL);var iL=function(){aL.call(this),this.edit=!0};LI(iL,aL);var sL=function(){tL.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,15):this.Ff=HI(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,16):this.Ff=HI(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,17):this.Ff=HI(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,26):this.Ff=HI(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var r,n=[];for(r in n.push("<<"),t)n.push("/"+r+" ("+OI(e(t[r]))+")");return n.push(">>"),n.join("\n")}},set:function(e){"object"===(0,XT.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};LI(sL,tL);var oL=function(){sL.call(this),this.pushButton=!0};LI(oL,sL);var lL=function(){sL.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};LI(lL,sL);var cL=function(){var e,t;tL.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,r=[];for(t in r.push("<<"),n)r.push("/"+t+" ("+OI(e(n[t]))+")");return r.push(">>"),r.join("\n")},set:function(e){"object"===(0,XT.A)(e)&&(n=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(e){"string"==typeof e&&(n.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=fL.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};LI(cL,tL),lL.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},lL.prototype.createOption=function(e){var t=new cL;return t.Parent=this,t.optionName=e,this.Kids.push(t),mL.call(this.scope,t),t};var uL=function(){sL.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=fL.CheckBox.createAppearanceStream()};LI(uL,sL);var dL=function(){tL.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,13):this.Ff=HI(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,21):this.Ff=HI(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,23):this.Ff=HI(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,24):this.Ff=HI(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,25):this.Ff=HI(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,26):this.Ff=HI(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};LI(dL,tL);var hL=function(){dL.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(UI(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=zI(this.Ff,14):this.Ff=HI(this.Ff,14)}}),this.password=!0};LI(hL,dL);var fL={CheckBox:{createAppearanceStream:function(){return{N:{On:fL.CheckBox.YesNormal},D:{On:fL.CheckBox.YesPushDown,Off:fL.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=DI(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=GI(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+RI(fL.internal.getWidth(e))+" "+RI(fL.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+RI(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join("\n"),t},YesNormal:function(e){var t=DI(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=fL.internal.getHeight(e),s=fL.internal.getWidth(e),o=GI(e,e.caption);return a.push("1 g"),a.push("0 0 "+RI(s)+" "+RI(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+RI(s-1)+" "+RI(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+RI(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=DI(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+RI(fL.internal.getWidth(e))+" "+RI(fL.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:fL.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=fL.RadioButton.Circle.YesNormal,t.D[e]=fL.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=DI(e);t.scope=e.scope;var r=[],n=fL.internal.getWidth(e)<=fL.internal.getHeight(e)?fL.internal.getWidth(e)/4:fL.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=fL.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+II(fL.internal.getWidth(e)/2)+" "+II(fL.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=DI(e);t.scope=e.scope;var r=[],n=fL.internal.getWidth(e)<=fL.internal.getHeight(e)?fL.internal.getWidth(e)/4:fL.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*fL.internal.Bezier_C).toFixed(5)),s=Number((n*fL.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+II(fL.internal.getWidth(e)/2)+" "+II(fL.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+II(fL.internal.getWidth(e)/2)+" "+II(fL.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=DI(e);t.scope=e.scope;var r=[],n=fL.internal.getWidth(e)<=fL.internal.getHeight(e)?fL.internal.getWidth(e)/4:fL.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*fL.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+II(fL.internal.getWidth(e)/2)+" "+II(fL.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:fL.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=fL.RadioButton.Cross.YesNormal,t.D[e]=fL.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=DI(e);t.scope=e.scope;var r=[],n=fL.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+RI(fL.internal.getWidth(e)-2)+" "+RI(fL.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(RI(n.x1.x)+" "+RI(n.x1.y)+" m"),r.push(RI(n.x2.x)+" "+RI(n.x2.y)+" l"),r.push(RI(n.x4.x)+" "+RI(n.x4.y)+" m"),r.push(RI(n.x3.x)+" "+RI(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=DI(e);t.scope=e.scope;var r=fL.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+RI(fL.internal.getWidth(e))+" "+RI(fL.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+RI(fL.internal.getWidth(e)-2)+" "+RI(fL.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(RI(r.x1.x)+" "+RI(r.x1.y)+" m"),n.push(RI(r.x2.x)+" "+RI(r.x2.y)+" l"),n.push(RI(r.x4.x)+" "+RI(r.x4.y)+" m"),n.push(RI(r.x3.x)+" "+RI(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=DI(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+RI(fL.internal.getWidth(e))+" "+RI(fL.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};fL.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=fL.internal.getWidth(e),r=fL.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},fL.internal.getWidth=function(e){var t=0;return"object"===(0,XT.A)(e)&&(t=PI(e.Rect[2])),t},fL.internal.getHeight=function(e){var t=0;return"object"===(0,XT.A)(e)&&(t=PI(e.Rect[3])),t};var mL=kI.addField=function(e){if(YI(this,e),!(e instanceof tL))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};kI.AcroFormChoiceField=rL,kI.AcroFormListBox=nL,kI.AcroFormComboBox=aL,kI.AcroFormEditBox=iL,kI.AcroFormButton=sL,kI.AcroFormPushButton=oL,kI.AcroFormRadioButton=lL,kI.AcroFormCheckBox=uL,kI.AcroFormTextField=dL,kI.AcroFormPasswordField=hL,kI.AcroFormAppearance=fL,kI.AcroForm={ChoiceField:rL,ListBox:nL,ComboBox:aL,EditBox:iL,Button:sL,PushButton:oL,RadioButton:lL,CheckBox:uL,TextField:dL,PasswordField:hL,Appearance:fL},AI.AcroForm={ChoiceField:rL,ListBox:nL,ComboBox:aL,EditBox:iL,Button:sL,PushButton:oL,RadioButton:lL,CheckBox:uL,TextField:dL,PasswordField:hL,Appearance:fL};AI.AcroForm;function pL(e){return e.reduce(function(e,t,r){return e[t]=r,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(e,n){var a,i,s,o,l,c=t;if("RGBA"===(n=n||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(N(e))for(l in r)for(s=r[l],a=0;a<s.length;a+=1){for(o=!0,i=0;i<s[a].length;i+=1)if(void 0!==s[a][i]&&s[a][i]!==e[i]){o=!1;break}if(!0===o){c=l;break}}else for(l in r)for(s=r[l],a=0;a<s.length;a+=1){for(o=!0,i=0;i<s[a].length;i+=1)if(void 0!==s[a][i]&&s[a][i]!==e.charCodeAt(i)){o=!1;break}if(!0===o){c=l;break}}return c===t&&n!==t&&(c=n),c},a=function e(t){for(var r=this.internal.write,n=this.internal.putStream,a=(0,this.internal.getFilters)();-1!==a.indexOf("FlateEncode");)a.splice(a.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var i=[];if(i.push({key:"Type",value:"/XObject"}),i.push({key:"Subtype",value:"/Image"}),i.push({key:"Width",value:t.width}),i.push({key:"Height",value:t.height}),t.colorSpace===g.INDEXED?i.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(i.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===g.DEVICE_CMYK&&i.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),i.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&i.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var s="",o=0,l=t.transparency.length;o<l;o++)s+=t.transparency[o]+" "+t.transparency[o]+" ";i.push({key:"Mask",value:"["+s+"]"})}void 0!==t.sMask&&i.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(n({data:t.data,additionalKeyValues:i,alreadyAppliedFilters:c,objectId:t.objectId}),r("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(d.filter=t.filter),e.call(this,d)}if(t.colorSpace===g.INDEXED){var h=this.internal.newObject();n({data:_(new Uint8Array(t.palette)),objectId:h}),r("endobj")}},i=function(){var e=this.internal.collections.addImage_images;for(var t in e)a.call(this,e[t])},s=function(){var e,t=this.internal.collections.addImage_images,r=this.internal.write;for(var n in t)r("/I"+(e=t[n]).index,e.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var e=this.internal.collections.addImage_images;return o.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===(0,XT.A)(e)&&1===e.nodeType},h=function(t,r){if("IMG"===t.nodeName&&t.hasAttribute("src")){var n=""+t.getAttribute("src");if(0===n.indexOf("data:image/"))return eI(unescape(n).split("base64,").pop());var a=e.loadFile(n,!0);if(void 0!==a)return a}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var i;switch(r){case"PNG":i="image/png";break;case"WEBP":i="image/webp";break;default:i="image/jpeg"}return eI(t.toDataURL(i,1).split("base64,").pop())}},f=function(e){var t=this.internal.collections.addImage_images;if(t)for(var r in t)if(e===t[r].alias)return t[r]},m=function(e,t,r){return e||t||(e=-96,t=-96),e<0&&(e=-1*r.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*r.height*72/t/this.internal.scaleFactor),0===e&&(e=t*r.width/r.height),0===t&&(t=e*r.height/r.width),[e,t]},p=function(e,t,r,n,a,i){var s=m.call(this,r,n,a),o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=l.call(this);if(r=s[0],n=s[1],u[a.index]=a,i){i*=Math.PI/180;var d=Math.cos(i),h=Math.sin(i),f=function(e){return e.toFixed(4)},p=[f(d),f(h),f(-1*h),f(d),0,0,"cm"]}this.internal.write("q"),i?(this.internal.write([1,"0","0",1,o(e),c(t+n),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([o(r),"0","0",o(n),"0","0","cm"].join(" "))):this.internal.write([o(r),"0","0",o(n),o(e),c(t+n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+a.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,r,n=0;if("string"==typeof e)for(r=e.length,t=0;t<r;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;else if(N(e))for(r=e.byteLength/2,t=0;t<r;t++)n=(n<<5)-n+e[t],n|=0;return n},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},x=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null},w=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return w()&&e instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(e){return w()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},S=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},_=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",r=N(e)?e:new Uint8Array(e),n=0;n<r.length;n+=8192)t+=String.fromCharCode.apply(null,r.subarray(n,n+8192));return t};e.addImage=function(){var e,r,n,a,i,s,l,c,u;if("number"==typeof arguments[1]?(r=t,n=arguments[1],a=arguments[2],i=arguments[3],s=arguments[4],l=arguments[5],c=arguments[6],u=arguments[7]):(r=arguments[1],n=arguments[2],a=arguments[3],i=arguments[4],s=arguments[5],l=arguments[6],c=arguments[7],u=arguments[8]),"object"===(0,XT.A)(e=arguments[0])&&!d(e)&&"imageData"in e){var h=e;e=h.imageData,r=h.format||r||t,n=h.x||n||0,a=h.y||a||0,i=h.w||h.width||i,s=h.h||h.height||s,l=h.alias||l,c=h.compression||c,u=h.rotation||h.angle||u}var f=this.internal.getFilters();if(void 0===c&&-1!==f.indexOf("FlateEncode")&&(c="SLOW"),isNaN(n)||isNaN(a))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var m=j.call(this,e,r,l,c);return p.call(this,n,a,i,s,m,u),this};var j=function(r,a,i,s){var o,l,m;if("string"==typeof r&&n(r)===t){r=unescape(r);var p=E(r,!1);(""!==p||void 0!==(p=e.loadFile(r,!0)))&&(r=p)}if(d(r)&&(r=h(r,a)),a=n(r,a),!u(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if((null==(m=i)||0===m.length)&&(i=function(e){return"string"==typeof e||N(e)?v(e):N(e.data)?v(e.data):null}(r)),(o=f.call(this,i))||(w()&&(r instanceof Uint8Array||"RGBA"===a||(l=r,r=S(r))),o=this["process"+a.toUpperCase()](r,c.call(this),i,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:y.NONE}(s),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},E=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var r,n="";if("string"==typeof e){var a;r=null!==(a=x(e))&&void 0!==a?a:e;try{n=eI(r)}catch(e){if(t)throw b(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return n};e.getImageProperties=function(r){var a,i,s="";if(d(r)&&(r=h(r)),"string"==typeof r&&n(r)===t&&(""===(s=E(r,!1))&&(s=e.loadFile(r)||""),r=s),i=n(r),!u(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(!w()||r instanceof Uint8Array||(r=S(r)),!(a=this["process"+i.toUpperCase()](r)))throw new Error("An unknown error occurred whilst processing the image");return a.fileType=i,a}}(AI.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};AI.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var r,n,a,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((r=l[u]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var d=0;d<l.length;d++){r=l[d];var h=this.internal.pdfEscape,f=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(m.objId),y=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(n="/Rect ["+i(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+h(g(r.contents))+")",a+=" /Popup "+p.objId+" 0 R",a+=" /P "+o.objId+" 0 R",a+=" /T ("+h(g(y))+") >>",m.content=a;var v=m.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+i(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+i(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+v,r.open&&(a+=" /Open true"),a+=" >>",p.content=a,this.internal.write(m.objId,"0 R",p.objId,"0 R");break;case"freetext":n="/Rect ["+i(r.bounds.x)+" "+s(r.bounds.y)+" "+i(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var b=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+h(f(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var x=this.annotations._nameMap[r.options.name];r.options.pageNumber=x.page,r.options.top=x.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+h(f(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var w=s(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+w+" "+r.options.zoom+"]"}""!=a&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,r,n,a){var i=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;i.pageContext.annotations.push({finalBounds:{x:s(e),y:o(t),w:s(e+r),h:o(t+n)},options:a,type:"link"})},e.textWithLink=function(e,t,r,n){var a,i,s=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){i=n.maxWidth;var l=this.splitTextToSize(e,i).length;a=Math.ceil(o*l)}else i=s,a=o;return this.text(e,t,r,n),r+=.2*o,"center"===n.align&&(t-=s/2),"right"===n.align&&(t-=s),this.link(t,r-o,i,a,n),s},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(AI.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&a.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&i(e)&&4==t[e.charCodeAt(0)].length},d=e.__arabicParser__.resolveLigatures=function(e){var t=0,n=r,a="",i=0;for(t=0;t<e.length;t+=1)void 0!==n[e.charCodeAt(t)]?(i++,"number"==typeof(n=n[e.charCodeAt(t)])&&(a+=String.fromCharCode(n),n=r,i=0),t===e.length-1&&(n=r,a+=e.charAt(t-(i-1)),t-=i-1,i=0)):(n=r,a+=e.charAt(t-i),t-=i,i=0);return a};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==n[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,r){return s(e)?!1===i(e)?-1:!c(e)||!s(t)&&!s(r)||!s(r)&&o(t)||o(e)&&!s(t)||o(e)&&l(t)||o(e)&&o(t)?0:u(e)&&s(t)&&!o(t)&&s(r)&&c(r)?3:o(e)||!s(r)?1:2:-1},f=function(e){var r=0,n=0,a=0,i="",o="",l="",c=(e=e||"").split("\\s+"),u=[];for(r=0;r<c.length;r+=1){for(u.push(""),n=0;n<c[r].length;n+=1)i=c[r][n],o=c[r][n-1],l=c[r][n+1],s(i)?(a=h(i,o,l),u[r]+=-1!==a?String.fromCharCode(t[i.charCodeAt(0)][a]):i):u[r]+=i;u[r]=d(u[r])}return u.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,r=[];if(Array.isArray(t)){var n=0;for(r=[],n=0;n<t.length;n+=1)Array.isArray(t[n])?r.push([f(t[n][0]),t[n][1],t[n][2]]):r.push([f(t[n])]);e=r}else e=f(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",m])}(AI.API),AI.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(e){r=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(e){n=e}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var r;if("2d"!==(e=e||"2d"))return null;for(r in t)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=t[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(AI.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var r=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var n=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var i=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(e){s=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return n.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){n.call(this);var r=(t=t||{}).fontSize||this.getFontSize(),a=t.font||this.getFont(),i=t.scaleFactor||this.internal.scaleFactor,s=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,u))},[])):e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)s<(l=this.getStringUnitWidth(e[d],{font:a})*r)&&(s=l);return 0!==s&&(o=e.length),{w:s/=i,h:Math.max((o*r*this.getLineHeightFactor()-r*(this.getLineHeightFactor()-1))/i,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var e;e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var a=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==a.lineNumber&&(a.lineNumber===e.lineNumber?(e.x=(a.x||0)+(a.width||0),e.y=a.y||0):a.y+a.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=a.y+a.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===r?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,r,l,c,u){if(n.call(this),!l)throw new Error("No data for PDF table.");var d,h,f,m,p=[],g=[],y=[],v={},b={},x=[],w=[],N=(u=u||{}).autoSize||!1,S=!1!==u.printHeaders,_=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,j=u.margins||Object.assign({width:this.getPageWidth()},t),E="number"==typeof u.padding?u.padding:3,A=u.headerBackgroundColor||"#c8c8c8",k=u.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=_,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=k,this.setFontSize(_),null==c)g=p=Object.keys(l[0]),y=p.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,XT.A)(c[0]))for(p=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),y=c.map(function(e){return e.align||"left"}),d=0;d<c.length;d+=1)b[c[d].name]=c[d].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(g=p=c,y=p.map(function(){return"left"}));if(N||Array.isArray(c)&&"string"==typeof c[0])for(d=0;d<p.length;d+=1){for(v[m=p[d]]=l.map(function(e){return e[m]}),this.setFont(void 0,"bold"),x.push(this.getTextDimensions(g[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=v[m],this.setFont(void 0,"normal"),f=0;f<h.length;f+=1)x.push(this.getTextDimensions(h[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[m]=Math.max.apply(null,x)+E+E,x=[]}if(S){var C={};for(d=0;d<p.length;d+=1)C[p[d]]={},C[p[d]].text=g[d],C[p[d]].align=y[d];var O=o.call(this,C,b);w=p.map(function(t){return new i(e,r,b[t],O,C[t].text,void 0,C[t].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var T=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(d=0;d<l.length;d+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:d,data:l[d]},this);var R=o.call(this,l[d],b);for(f=0;f<p.length;f+=1){var I=l[d][p[f]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:d,col:f,data:I},this),s.call(this,new i(e,r,b[p[f]],R,I,d+2,T[p[f]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=r,this};var o=function(e,t){var r=this.internal.__cell__.padding,n=this.internal.__cell__.table_font_size,a=this.internal.scaleFactor;return Object.keys(e).map(function(n){var a=e[n];return this.splitTextToSize(a.hasOwnProperty("text")?a.text:a,t[n]-r-r)},this).map(function(e){return this.getLineHeightFactor()*e.length*n/a+r+r},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){n.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var a;if(r=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){a=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(a.y=this.internal.__cell__.margins.top||0,l.push(a)),a.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,a),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),r=!1}}(AI.API);var gL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},yL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],vL=pL(yL),bL=[100,200,300,400,500,600,700,800,900],xL=pL(bL);function wL(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(e){return gL[e=e||"normal"]?e:"normal"}(e.style),n=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),a=function(e){return"number"==typeof vL[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function NL(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var SL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_L={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jL(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function EL(e){return e.trimLeft()}function AL(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function kL(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var CL,OL,TL,RL,IL=["times"];!function(e){var t,r,n,a,i,s,o,l,c,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new s,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new s,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var r=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var n=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var a=0;Object.defineProperty(this,"posX",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}});var i=0;Object.defineProperty(this,"posY",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(e){s=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof u&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var d=[];Object.defineProperty(this,"ctxStack",{get:function(){return d},set:function(e){d=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var f=null;function m(e,t){if(null===f){var r=function(e){var t=[];return Object.keys(e).forEach(function(r){e[r].forEach(function(e){var n=null;switch(e){case"bold":n={family:r,weight:"bold"};break;case"italic":n={family:r,style:"italic"};break;case"bolditalic":n={family:r,weight:"bold",style:"italic"};break;case"":case"normal":n={family:r}}null!==n&&(n.ref={name:r,style:e},t.push(n))})}),t}(e.getFontList());f=function(e){for(var t={},r=0;r<e.length;++r){var n=wL(e[r]),a=n.family,i=n.stretch,s=n.style,o=n.weight;t[a]=t[a]||{},t[a][i]=t[a][i]||{},t[a][i][s]=t[a][i][s]||{},t[a][i][s][o]=n}return t}(r.concat(t))}return f}var p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(e){f=null,p=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var r=t[1];t[2];var n=t[3],a=t[4];t[5];var i=t[6],s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(a)[2];a="px"===s?Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(a)*this.pdf.getFontSize()):Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(a);var o=function(e){var t,r,n=[],a=e.trim();if(""===a)return IL;if(a in _L)return[_L[a]];for(;""!==a;){switch(r=null,t=(a=EL(a)).charAt(0)){case'"':case"'":r=AL(a.substring(1),t);break;default:r=kL(a)}if(null===r)return IL;if(n.push(r[0]),""!==(a=EL(r[1]))&&","!==a.charAt(0))return IL;a=a.replace(/^,/,"")}return n}(i);if(this.fontFaces){var l=function(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},SL,r.genericFontFamilies||{}),i=null,s=null,o=0;o<t.length;++o)if(a[(i=wL(t[o])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){s=e[i.family];break}if(!(s=s||e[n]))throw new Error("Could not find a font-family for the rule '"+jL(i)+"' and default family '"+n+"'.");if(s=function(e,t){if(t[e])return t[e];var r=vL[e],n=r<=vL.normal?-1:1,a=NL(t,yL,r,n);if(!a)throw new Error("Could not find a matching font-stretch value for "+e);return a}(i.stretch,s),s=function(e,t){if(t[e])return t[e];for(var r=gL[e],n=0;n<r.length;++n)if(t[r[n]])return t[r[n]];throw new Error("Could not find a matching font-style for "+e)}(i.style,s),!(s=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var r=xL[e],n=NL(t,bL,r,e<400?-1:1);if(!n)throw new Error("Could not find a matching font-weight for value "+e);return n}(i.weight,s)))throw new Error("Failed to resolve a font for the rule '"+jL(i)+"'.");return s}(m(this.pdf,this.fontFaces),o.map(function(e){return{family:e,stretch:"normal",weight:n,style:r}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===n||parseInt(n,10)>=700||"bold"===r)&&(c="bold"),"italic"===r&&(c+="italic"),0===c.length&&(c="normal");for(var u="",d={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<o.length;h++){if(void 0!==this.pdf.internal.getFont(o[h],c,{noFallback:!0,disableWarning:!0})){u=o[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[h],"bold",{noFallback:!0,disableWarning:!0}))u=o[h],c="bold";else if(void 0!==this.pdf.internal.getFont(o[h],"normal",{noFallback:!0,disableWarning:!0})){u=o[h],c="normal";break}}if(""===u)for(var f=0;f<o.length;f++)if(d[o[f]]){u=d[o[f]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,M.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,M.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};d.prototype.setLineDash=function(e){this.lineDash=e},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){x.call(this,"fill",!1)},d.prototype.stroke=function(){x.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw JR.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var r=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"mt",x:r.x,y:r.y}),this.ctx.lastPoint=new s(e,t)},d.prototype.closePath=function(){var e=new s(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,XT.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new s(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(e.x,e.y)},d.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw JR.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var r=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"lt",x:r.x,y:r.y}),this.ctx.lastPoint=new s(r.x,r.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},d.prototype.quadraticCurveTo=function(e,t,r,n){if(isNaN(r)||isNaN(n)||isNaN(e)||isNaN(t))throw JR.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var a=this.ctx.transform.applyToPoint(new s(r,n)),i=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"qct",x1:i.x,y1:i.y,x:a.x,y:a.y}),this.ctx.lastPoint=new s(a.x,a.y)},d.prototype.bezierCurveTo=function(e,t,r,n,a,i){if(isNaN(a)||isNaN(i)||isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw JR.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new s(a,i)),l=this.ctx.transform.applyToPoint(new s(e,t)),c=this.ctx.transform.applyToPoint(new s(r,n));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new s(o.x,o.y)},d.prototype.arc=function(e,t,r,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a))throw JR.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(i=Boolean(i),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new s(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new s(0,r)),c=this.ctx.transform.applyToPoint(new s(0,0));r=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(a-n)>=2*Math.PI&&(n=0,a=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:r,startAngle:n,endAngle:a,counterclockwise:i})},d.prototype.arcTo=function(e,t,r,n,a){throw new Error("arcTo not implemented.")},d.prototype.rect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw JR.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.lineTo(e+r,t),this.lineTo(e,t)},d.prototype.fillRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw JR.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var a={};"butt"!==this.lineCap&&(a.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(a.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,r,n),this.fill(),a.hasOwnProperty("lineCap")&&(this.lineCap=a.lineCap),a.hasOwnProperty("lineJoin")&&(this.lineJoin=a.lineJoin)}},d.prototype.strokeRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw JR.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(e,t,r,n),this.stroke())},d.prototype.clearRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw JR.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,r,n))},d.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var n=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=n}},d.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,r,n,a;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,r=0,n=0,a=0;else{var i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==i)t=parseInt(i[1]),r=parseInt(i[2]),n=parseInt(i[3]),a=1;else if(null!==(i=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(i[1]),r=parseInt(i[2]),n=parseInt(i[3]),a=parseFloat(i[4]);else{if(a=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new nI(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,r=e.substring(2,3),r+=r,n=e.substring(3,4),n+=n):(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7)),t=parseInt(t,16),r=parseInt(r,16),n=parseInt(n,16)}}return{r:t,g:r,b:n,a:a,style:e}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};d.prototype.fillText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw JR.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(n=isNaN(n)?void 0:n,!f.call(this)){var a=L(this.ctx.transform.rotation),i=this.ctx.transform.scaleX;k.call(this,{text:e,x:t,y:r,scale:i,angle:a,align:this.textAlign,maxWidth:n})}},d.prototype.strokeText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw JR.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){n=isNaN(n)?void 0:n;var a=L(this.ctx.transform.rotation),i=this.ctx.transform.scaleX;k.call(this,{text:e,x:t,y:r,scale:i,renderingMode:"stroke",angle:a,align:this.textAlign,maxWidth:n})}},d.prototype.measureText=function(e){if("string"!=typeof e)throw JR.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,r=this.pdf.internal.scaleFactor,n=t.internal.getFontSize(),a=t.getStringUnitWidth(e)*n/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:a*=Math.round(96*r/72*1e4)/1e4})},d.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw JR.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var r=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(r)},d.prototype.rotate=function(e){if(isNaN(e))throw JR.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},d.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw JR.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var r=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(r)},d.prototype.transform=function(e,t,r,n,a,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(i))throw JR.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new l(e,t,r,n,a,i);this.ctx.transform=this.ctx.transform.multiply(s)},d.prototype.setTransform=function(e,t,r,n,a,i){e=isNaN(e)?1:e,t=isNaN(t)?0:t,r=isNaN(r)?0:r,n=isNaN(n)?1:n,a=isNaN(a)?0:a,i=isNaN(i)?0:i,this.ctx.transform=new l(e,t,r,n,a,i)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(e,t,r,n,a,i,s,c,u){var d=this.pdf.getImageProperties(e),h=1,f=1,m=1,y=1;void 0!==n&&void 0!==c&&(m=c/n,y=u/a,h=d.width/n*c/n,f=d.height/a*u/a),void 0===i&&(i=t,s=r,t=0,r=0),void 0!==n&&void 0===c&&(c=n,u=a),void 0===n&&void 0===c&&(c=d.width,u=d.height);for(var x,N=this.ctx.transform.decompose(),S=L(N.rotate.shx),_=new l,j=(_=(_=(_=_.multiply(N.translate)).multiply(N.skew)).multiply(N.scale)).applyToRectangle(new o(i-t*m,s-r*y,n*h,a*f)),E=g.call(this,j),A=[],k=0;k<E.length;k+=1)-1===A.indexOf(E[k])&&A.push(E[k]);if(b(A),this.autoPaging)for(var C=A[0],O=A[A.length-1],T=C;T<O+1;T++){this.pdf.setPage(T);var R=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===T?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],M=1===T?0:P+(T-2)*D;if(0!==this.ctx.clip_path.length){var F=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(x,this.posX+this.margin[3],-M+I+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=F}var B=JSON.parse(JSON.stringify(j));B=v([B],this.posX+this.margin[3],-M+I+this.ctx.prevPageLastElemOffset)[0];var U=(T>C||T<O)&&p.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],R,D,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,S),U&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",j.x,j.y,j.w,j.h,null,null,S)};var g=function(e,t,r){var n=[];t=t||this.pdf.internal.pageSize.width,r=r||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":n.push(Math.floor((e.y+a)/r)+1);break;case"arc":n.push(Math.floor((e.y+a-e.radius)/r)+1),n.push(Math.floor((e.y+a+e.radius)/r)+1);break;case"qct":var i=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);n.push(Math.floor((i.y+a)/r)+1),n.push(Math.floor((i.y+i.h+a)/r)+1);break;case"bct":var s=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);n.push(Math.floor((s.y+a)/r)+1),n.push(Math.floor((s.y+s.h+a)/r)+1);break;case"rect":n.push(Math.floor((e.y+a)/r)+1),n.push(Math.floor((e.y+e.h+a)/r)+1)}for(var o=0;o<n.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<n[o];)y.call(this);return n},y=function(){var e=this.fillStyle,t=this.strokeStyle,r=this.font,n=this.lineCap,a=this.lineWidth,i=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=r,this.lineCap=n,this.lineWidth=a,this.lineJoin=i},v=function(e,t,r){for(var n=0;n<e.length;n++)switch(e[n].type){case"bct":e[n].x2+=t,e[n].y2+=r;case"qct":e[n].x1+=t,e[n].y1+=r;default:e[n].x+=t,e[n].y+=r}return e},b=function(e){return e.sort(function(e,t){return e-t})},x=function(e,t){for(var r,n,a=this.fillStyle,i=this.strokeStyle,s=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),d=JSON.parse(JSON.stringify(this.path)),h=[],f=0;f<d.length;f++)if(void 0!==d[f].x)for(var m=g.call(this,d[f]),x=0;x<m.length;x+=1)-1===h.indexOf(m[x])&&h.push(m[x]);for(var N=0;N<h.length;N++)for(;this.pdf.internal.getNumberOfPages()<h[N];)y.call(this);if(b(h),this.autoPaging)for(var S=h[0],_=h[h.length-1],j=S;j<_+1;j++){this.pdf.setPage(j),this.fillStyle=a,this.strokeStyle=i,this.lineCap=s,this.lineWidth=l,this.lineJoin=c;var E=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],A=1===j?this.posY+this.margin[0]:this.margin[0],k=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],C=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],O=1===j?0:k+(j-2)*C;if(0!==this.ctx.clip_path.length){var T=this.path;r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(r,this.posX+this.margin[3],-O+A+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=T}if(n=JSON.parse(JSON.stringify(u)),this.path=v(n,this.posX+this.margin[3],-O+A+this.ctx.prevPageLastElemOffset),!1===t||0===j){var R=(j>S||j<_)&&p.call(this);R&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],E,C,null).clip().discardPath()),w.call(this,e,t),R&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=u},w=function(e,t){if(("stroke"!==e||t||!m.call(this))&&("stroke"===e||t||!f.call(this))){for(var r,n,a=[],i=this.path,s=0;s<i.length;s++){var o=i[s];switch(o.type){case"begin":a.push({begin:!0});break;case"close":a.push({close:!0});break;case"mt":a.push({start:o,deltas:[],abs:[]});break;case"lt":var l=a.length;if(i[s-1]&&!isNaN(i[s-1].x)&&(r=[o.x-i[s-1].x,o.y-i[s-1].y],l>0))for(;l>=0;l--)if(!0!==a[l-1].close&&!0!==a[l-1].begin){a[l-1].deltas.push(r),a[l-1].abs.push(o);break}break;case"bct":r=[o.x1-i[s-1].x,o.y1-i[s-1].y,o.x2-i[s-1].x,o.y2-i[s-1].y,o.x-i[s-1].x,o.y-i[s-1].y],a[a.length-1].deltas.push(r);break;case"qct":var c=i[s-1].x+2/3*(o.x1-i[s-1].x),u=i[s-1].y+2/3*(o.y1-i[s-1].y),d=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),p=o.x,g=o.y;r=[c-i[s-1].x,u-i[s-1].y,d-i[s-1].x,h-i[s-1].y,p-i[s-1].x,g-i[s-1].y],a[a.length-1].deltas.push(r);break;case"arc":a.push({deltas:[],abs:[],arc:!0}),Array.isArray(a[a.length-1].abs)&&a[a.length-1].abs.push(o)}}n=t?null:"stroke"===e?"stroke":"fill";for(var y=!1,v=0;v<a.length;v++)if(a[v].arc)for(var b=a[v].abs,x=0;x<b.length;x++){var w=b[x];"arc"===w.type?_.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!y):C.call(this,w.x,w.y),y=!0}else if(!0===a[v].close)this.pdf.internal.out("h"),y=!1;else if(!0!==a[v].begin){var N=a[v].start.x,S=a[v].start.y;O.call(this,a[v].deltas,N,S),y=!0}n&&j.call(this,n),t&&E.call(this)}},N=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,r=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-r;case"top":return e+t-r;case"hanging":return e+t-2*r;case"middle":return e+t/2-r;default:return e}},S=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(e,t,r,n,a,i,s,o,l){for(var c=R.call(this,r,n,a,i),u=0;u<c.length;u++){var d=c[u];0===u&&(l?A.call(this,d.x1+e,d.y1+t):C.call(this,d.x1+e,d.y1+t)),T.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}o?E.call(this):j.call(this,s)},j=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},E=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(e,t){this.pdf.internal.out(r(e)+" "+n(t)+" m")},k=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var r=this.pdf.getTextDimensions(e.text),n=N.call(this,e.y),a=S.call(this,n)-r.h,i=this.ctx.transform.applyToPoint(new s(e.x,n)),c=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var d,h,f,m=this.ctx.transform.applyToRectangle(new o(e.x,n,r.w,r.h)),y=u.applyToRectangle(new o(e.x,a,r.w,r.h)),x=g.call(this,y),_=[],j=0;j<x.length;j+=1)-1===_.indexOf(x[j])&&_.push(x[j]);if(b(_),this.autoPaging)for(var E=_[0],A=_[_.length-1],k=E;k<A+1;k++){this.pdf.setPage(k);var C=1===k?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[2],R=T-this.margin[0],I=this.pdf.internal.pageSize.width-this.margin[1],L=I-this.margin[3],P=1===k?0:O+(k-2)*R;if(0!==this.ctx.clip_path.length){var D=this.path;d=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(d,this.posX+this.margin[3],-1*P+C),w.call(this,"fill",!0),this.path=D}var M=v([JSON.parse(JSON.stringify(y))],this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale);var F="text"!==this.autoPaging;if(F||M.y+M.h<=T){if(F||M.y>=C&&M.x<=I){var B=F?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||I-M.x)[0],U=v([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset)[0],z=F&&(k>E||k<A)&&p.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,R,null).clip().discardPath()),this.pdf.text(B,U.x,U.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else M.y<T&&(this.ctx.prevPageLastElemOffset+=T-M.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale),this.pdf.text(e.text,i.x+this.posX,i.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)},C=function(e,t,a,i){a=a||0,i=i||0,this.pdf.internal.out(r(e+a)+" "+n(t+i)+" l")},O=function(e,t,r){return this.pdf.lines(e,t,r,null,null)},T=function(e,r,n,s,o,l,c,u){this.pdf.internal.out([t(a(n+e)),t(i(s+r)),t(a(o+e)),t(i(l+r)),t(a(c+e)),t(i(u+r)),"c"].join(" "))},R=function(e,t,r,n){for(var a=2*Math.PI,i=Math.PI/2;t>r;)t-=a;var s=Math.abs(r-t);s<a&&n&&(s=a-s);for(var o=[],l=n?-1:1,c=t;s>1e-5;){var u=c+l*Math.min(s,i);o.push(I.call(this,e,c,u)),s-=Math.abs(u-c),c=u}return o},I=function(e,t,r){var n=(r-t)/2,a=e*Math.cos(n),i=e*Math.sin(n),s=a,o=-i,l=s*s+o*o,c=l+s*a+o*i,u=4/3*(Math.sqrt(2*l*c)-c)/(s*i-o*a),d=s-u*o,h=o+u*s,f=d,m=-h,p=n+t,g=Math.cos(p),y=Math.sin(p);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:d*g-h*y,y2:d*y+h*g,x3:f*g-m*y,y3:f*y+m*g,x4:e*Math.cos(r),y4:e*Math.sin(r)}},L=function(e){return 180*e/Math.PI},P=function(e,t,r,n,a,i){var s=e+.5*(r-e),l=t+.5*(n-t),c=a+.5*(r-a),u=i+.5*(n-i),d=Math.min(e,a,s,c),h=Math.max(e,a,s,c),f=Math.min(t,i,l,u),m=Math.max(t,i,l,u);return new o(d,f,h-d,m-f)},D=function(e,t,r,n,a,i,s,l){var c,u,d,h,f,m,p,g,y,v,b,x,w,N,S=r-e,_=n-t,j=a-r,E=i-n,A=s-a,k=l-i;for(u=0;u<41;u++)y=(p=(d=e+(c=u/40)*S)+c*((f=r+c*j)-d))+c*(f+c*(a+c*A-f)-p),v=(g=(h=t+c*_)+c*((m=n+c*E)-h))+c*(m+c*(i+c*k-m)-g),0==u?(b=y,x=v,w=y,N=v):(b=Math.min(b,y),x=Math.min(x,v),w=Math.max(w,y),N=Math.max(N,v));return new o(Math.round(b),Math.round(x),Math.round(w-b),Math.round(N-x))},M=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,r=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==r&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=r)}}}(AI.API),function(e){var t=function(e){var t,r,n,a,i,s,o,l,c,u;for(/[^\x00-\xFF]/.test(e),r=[],n=0,a=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;a>n;n+=4)0!==(i=(e.charCodeAt(n)<<24)+(e.charCodeAt(n+1)<<16)+(e.charCodeAt(n+2)<<8)+e.charCodeAt(n+3))?(s=(i=((i=((i=((i=(i-(u=i%85))/85)-(c=i%85))/85)-(l=i%85))/85)-(o=i%85))/85)%85,r.push(s+33,o+33,l+33,c+33,u+33)):r.push(122);return function(e,t){for(var r=t;r>0;r--)e.pop()}(r,t.length),String.fromCharCode.apply(String,r)+"~>"},r=function(e){var t,r,n,a,i,s=String,o="length",l=255,c="charCodeAt",u="slice",d="replace";for(e[u](-2),e=e[u](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),n=[],a=0,i=(e+=t="uuuuu"[u](e[o]%5||5))[o];i>a;a+=5)r=52200625*(e[c](a)-33)+614125*(e[c](a+1)-33)+7225*(e[c](a+2)-33)+85*(e[c](a+3)-33)+(e[c](a+4)-33),n.push(l&r>>24,l&r>>16,l&r>>8,l&r);return function(e,t){for(var r=t;r>0;r--)e.pop()}(n,t[o]),s.fromCharCode.apply(s,n)},n=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var r="",n=0;n<e.length;n+=2)r+=String.fromCharCode("0x"+(e[n]+e[n+1]));return r},a=function(e){for(var t=new Uint8Array(e.length),r=e.length;r--;)t[r]=e.charCodeAt(r);return(t=GR(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,i){var s=0,o=e||"",l=[];for("string"==typeof(i=i||[])&&(i=[i]),s=0;s<i.length;s+=1)switch(i[s]){case"ASCII85Decode":case"/ASCII85Decode":o=r(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=n(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=a(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[s]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(AI.API),(RL=AI.API).loadFile=function(e,t,r){return function(e,t,r){t=!1!==t,r="function"==typeof r?r:function(){};var n=void 0;try{n=function(e,t,r){var n=new XMLHttpRequest,a=0,i=function(e){var t=e.length,r=[],n=String.fromCharCode;for(a=0;a<t;a+=1)r.push(n(255&e.charCodeAt(a)));return r.join("")};if(n.open("GET",e,!t),n.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(n.onload=function(){200===n.status?r(i(this.responseText)):r(void 0)}),n.send(null),t&&200===n.status)return i(n.responseText)}(e,t,r)}catch(e){}return n}(e,t,r)},RL.loadImageFile=RL.loadFile,function(e){function t(){return(KR.html2canvas?Promise.resolve(KR.html2canvas):r.e(239).then(r.t.bind(r,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function n(){return(KR.DOMPurify?Promise.resolve(KR.DOMPurify):r.e(977).then(r.bind(r,7977))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var a=function(e){var t=(0,XT.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var r=document.createElement(e);for(var n in t.className&&(r.className=t.className),t.innerHTML&&t.dompurify&&(r.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)r.style[n]=t.style[n];return r},s=function e(t){var r=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),n=e.convert(Promise.resolve(),r);return(n=n.setProgress(1,e,1,[e])).set(t)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(e,t){return e.__proto__=t||s.prototype,e},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(a(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(n).then(function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},s.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,r){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==r&&1===a.nodeType&&"SCRIPT"===a.nodeName||n.appendChild(e(a,r));return 1===t.nodeType&&("CANVAS"===t.nodeName?(n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value),n.addEventListener("load",function(){n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft},!0)),n}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,r=this.opt.fontFaces,n="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,a=Object.assign({async:!0,allowTaint:!0,scale:n,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=r,r)for(var i=0;i<r.length;++i){var s=r[i],o=s.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,s.ref.name,s.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=0==a.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,t.context2d.save(!0),e(this.prop.container,a)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(e,t,r){return"img"===(r=r||"pdf").toLowerCase()||"image"===r.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},s.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},s.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},s.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(e){if("object"!==a(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in s.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},s.prototype.get=function(e,t){return this.then(function(){var r=e in s.template.prop?this.prop[e]:this.opt[e];return t?t(r):r})},s.prototype.setMargin=function(e){return this.then(function(){switch(a(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},s.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||AI.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},s.prototype.setProgress=function(e,t,r,n){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=r&&(this.progress.n=r),null!=n&&(this.progress.stack=n),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(e,t,r,n){return this.setProgress(e?this.progress.val+e:null,t||null,r?this.progress.n+r:null,n?this.progress.stack.concat(n):null)},s.prototype.then=function(e,t){var r=this;return this.thenCore(e,t,function(e,t){return r.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return r.updateProgress(null,e),t}).then(e,t).then(function(e){return r.updateProgress(1),e})})},s.prototype.thenCore=function(e,t,r){r=r||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var n=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),a=r.call(n,e,t);return s.convert(a,this.__proto__)},s.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},s.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},s.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return s.convert(t,this)},s.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},s.prototype.error=function(e){return this.then(function(){throw new Error(e)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,AI.getPageSize=function(e,t,r){if("object"===(0,XT.A)(e)){var n=e;e=n.orientation,t=n.unit||t,r=n.format||r}t=t||"mm",r=r||"a4",e=(""+(e||"P")).toLowerCase();var a,i=(""+r).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(s.hasOwnProperty(i))l=s[i][1]/a,c=s[i][0]/a;else try{l=r[1],c=r[0]}catch(RL){throw new Error("Invalid format: "+r)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:a,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(wL):null;var r=new s(t);return t.worker?r:r.from(e).doCallback()}}(AI.API),AI.API.addJS=function(e){return TL=e,this.internal.events.subscribe("postPutResources",function(){CL=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(CL+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),OL=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+TL+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==CL&&void 0!==OL&&this.internal.out("/Names <</JavaScript "+CL+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=e.outline.render().split(/\r\n/),a=0;a<n.length;a++){var i=n[a],s=r.exec(i);if(null!=s){var o=s[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(i)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(a=0;a<l;a++){var u=e.internal.newObject();c.push(u);var d=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<c.length;a++)e.internal.write("(page_"+(a+1)+")"+c[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,r){var n={title:t,options:r,children:[]};return null==e&&(e=this.root),e.children.push(n),n},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var r=0;r<t.children.length;r++)this.genIds_r(t.children[r])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<t.children.length;n++){var a=t.children[n];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(t)),n>0&&this.line("/Prev "+this.makeRef(t.children[n-1])),n<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[n+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var i=this.count=this.count_r({count:0},a);if(i>0&&this.line("/Count "+i),a.options&&a.options.pageNumber){var s=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var r=0;r<t.children.length;r++)e.count++,this.count_r(e,t.children[r]);return e.count}}])}(AI.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,r,n,a,i,s){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=i||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var r,n=256*e.charCodeAt(4)+e.charCodeAt(5),a=e.length,i={width:0,height:0,numcomponents:1},s=4;s<a;s+=2){if(s+=n,-1!==t.indexOf(e.charCodeAt(s+1))){r=256*e.charCodeAt(s+5)+e.charCodeAt(s+6),i={width:256*e.charCodeAt(s+7)+e.charCodeAt(s+8),height:r,numcomponents:e.charCodeAt(s+9)};break}n=256*e.charCodeAt(s+2)+e.charCodeAt(s+3)}return i}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:s,bitsPerComponent:8,filter:l,index:r,alias:n}}return c}}(AI.API);var LL,PL,DL,ML,FL,BL=function(){var e,t,r;function n(e){var t,r,n,a,i,s,o,l,c,u,d,h,f,m;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),a=this.readUInt16()||100,s.delay=1e3*i/a,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=s?s.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if((u=n-this.transparency.indexed.length)>0)for(f=0;0<=u?f<u:f>u;0<=u?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(d=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,d.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,d.slice(o+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(m=this.colorType)||6===m,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,r=new Uint8Array(this.width*this.height*t),n=0,a=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function i(i,s,o,l){var c,u,d,h,f,m,p,g,y,v,b,x,w,N,S,_,j,E,A,k,C,O=Math.ceil((a.width-i)/o),T=Math.ceil((a.height-s)/l),R=a.width==O&&a.height==T;for(N=t*O,x=R?r:new Uint8Array(N*T),m=e.length,w=0,u=0;w<T&&n<m;){switch(e[n++]){case 0:for(h=j=0;j<N;h=j+=1)x[u++]=e[n++];break;case 1:for(h=E=0;E<N;h=E+=1)c=e[n++],f=h<t?0:x[u-t],x[u++]=(c+f)%256;break;case 2:for(h=A=0;A<N;h=A+=1)c=e[n++],d=(h-h%t)/t,S=w&&x[(w-1)*N+d*t+h%t],x[u++]=(S+c)%256;break;case 3:for(h=k=0;k<N;h=k+=1)c=e[n++],d=(h-h%t)/t,f=h<t?0:x[u-t],S=w&&x[(w-1)*N+d*t+h%t],x[u++]=(c+Math.floor((f+S)/2))%256;break;case 4:for(h=C=0;C<N;h=C+=1)c=e[n++],d=(h-h%t)/t,f=h<t?0:x[u-t],0===w?S=_=0:(S=x[(w-1)*N+d*t+h%t],_=d&&x[(w-1)*N+(d-1)*t+h%t]),p=f+S-_,g=Math.abs(p-f),v=Math.abs(p-S),b=Math.abs(p-_),y=g<=v&&g<=b?f:v<=b?S:_,x[u++]=(c+y)%256;break;default:throw new Error("Invalid filter algorithm: "+e[n-1])}if(!R){var I=((s+w*l)*a.width+i)*t,L=w*N;for(h=0;h<O;h+=1){for(var P=0;P<t;P+=1)r[I++]=x[L++];I+=(o-1)*t}}w++}}return e=WR(e),1==a.interlaceMethod?(i(0,0,8,8),i(4,0,8,8),i(0,4,4,8),i(2,0,4,4),i(0,2,2,4),i(1,0,2,2),i(0,1,1,2)):i(0,0,1,1),r},n.prototype.decodePalette=function(){var e,t,r,n,a,i,s,o,l;for(r=this.palette,i=this.transparency.indexed||[],a=new Uint8Array((i.length||0)+r.length),n=0,e=0,t=s=0,o=r.length;s<o;t=s+=3)a[n++]=r[t],a[n++]=r[t+1],a[n++]=r[t+2],a[n++]=null!=(l=i[e++])?l:255;return a},n.prototype.copyToImageData=function(e,t){var r,n,a,i,s,o,l,c,u,d,h;if(n=this.colors,u=null,r=this.hasAlphaChannel,this.palette.length&&(u=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),n=4,r=!0),c=(a=e.data||e).length,s=u||t,i=o=0,1===n)for(;i<c;)l=u?4*t[i/4]:o,d=s[l++],a[i++]=d,a[i++]=d,a[i++]=d,a[i++]=r?s[l++]:255,o=l;else for(;i<c;)l=u?4*t[i/4]:o,a[i++]=s[l++],a[i++]=s[l++],a[i++]=s[l++],a[i++]=r?s[l++]:255,o=l},n.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var a=function(){if("[object Window]"===Object.prototype.toString.call(KR)){try{t=KR.document.createElement("canvas"),r=t.getContext("2d")}catch(e){return!1}return!0}return!1};return a(),e=function(e){var n;if(!0===a())return r.width=e.width,r.height=e.height,r.clearRect(0,0,e.width,e.height),r.putImageData(e,0,0),(n=new Image).src=t.toDataURL(),n;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(t){var r,n,a,i,s,o,l,c;if(this.animation){for(c=[],n=s=0,o=(l=this.animation.frames).length;s<o;n=++s)r=l[n],a=t.createImageData(r.width,r.height),i=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(a,i),r.imageData=a,c.push(r.image=e(a));return c}},n.prototype.renderFrame=function(e,t){var r,n,a;return r=(n=this.animation.frames)[t],a=n[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?e.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&e.putImageData(a.imageData,a.xOffset,a.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},n.prototype.animate=function(e){var t,r,n,a,i,s,o=this;return r=0,s=this.animation,a=s.numFrames,n=s.frames,i=s.numPlays,(t=function(){var s,l;if(s=r++%a,l=n[s],o.renderFrame(e,s),a>1&&r/a<i)return o.animation._timeout=setTimeout(t,l.delay)})()},n.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},n.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},n}();function UL(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<1+(7&a);e[t++],e[t++];var o=null,l=null;i&&(o=t,l=s,t+=3*s);var c=!0,u=[],d=0,h=null,f=0,m=null;for(this.width=r,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var p=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],0==(1&p)&&(h=null),f=p>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++],w=x>>6&1,N=1<<1+(7&x),S=o,_=l,j=!1;x>>7&&(j=!0,S=t,_=N,t+=3*N);var E=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}u.push({x:g,y:y,width:v,height:b,has_local_palette:j,palette_offset:S,palette_size:_,data_offset:E,data_length:t-E,transparent_index:h,interlaced:!!w,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,n){var a=this.frameInfo(t),i=a.width*a.height,s=new Uint8Array(i);zL(e,a.data_offset,s,i);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,u=r-c,d=c,h=4*(a.y*r+a.x),f=4*((a.y+a.height)*r+a.x),m=h,p=4*u;!0===a.interlaced&&(p+=4*r*7);for(var g=8,y=0,v=s.length;y<v;++y){var b=s[y];if(0===d&&(d=c,(m+=p)>=f&&(p=4*u+4*r*(g-1),m=h+(c+u)*(g<<1),g>>=1)),b===l)m+=4;else{var x=e[o+3*b],w=e[o+3*b+1],N=e[o+3*b+2];n[m++]=N,n[m++]=w,n[m++]=x,n[m++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,n){var a=this.frameInfo(t),i=a.width*a.height,s=new Uint8Array(i);zL(e,a.data_offset,s,i);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,u=r-c,d=c,h=4*(a.y*r+a.x),f=4*((a.y+a.height)*r+a.x),m=h,p=4*u;!0===a.interlaced&&(p+=4*r*7);for(var g=8,y=0,v=s.length;y<v;++y){var b=s[y];if(0===d&&(d=c,(m+=p)>=f&&(p=4*u+4*r*(g-1),m=h+(c+u)*(g<<1),g>>=1)),b===l)m+=4;else{var x=e[o+3*b],w=e[o+3*b+1],N=e[o+3*b+2];n[m++]=x,n[m++]=w,n[m++]=N,n[m++]=255}--d}}}function zL(e,t,r,n){for(var a=e[t++],i=1<<a,s=i+1,o=s+1,l=a+1,c=(1<<l)-1,u=0,d=0,h=0,f=e[t++],m=new Int32Array(4096),p=null;;){for(;u<16&&0!==f;)d|=e[t++]<<u,u+=8,1===f?f=e[t++]:--f;if(u<l)break;var g=d&c;if(d>>=l,u-=l,g!==i){if(g===s)break;for(var y=g<o?g:p,v=0,b=y;b>i;)b=m[b]>>8,++v;var x=b;if(h+v+(y!==g?1:0)>n)return void JR.log("Warning, gif stream longer than expected.");r[h++]=x;var w=h+=v;for(y!==g&&(r[h++]=x),b=y;v--;)b=m[b],r[--w]=255&b,b>>=8;null!==p&&o<4096&&(m[o++]=p<<8|x,o>=c+1&&l<12&&(++l,c=c<<1|1)),p=g}else o=s+1,c=(1<<(l=a+1))-1,p=null}return h!==n&&JR.log("Warning, gif stream shorter than expected."),r}function HL(e){var t,r,n,a,i,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),m=new Array(64),p=[],g=0,y=7,v=new Array(64),b=new Array(64),x=new Array(64),w=new Array(256),N=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],T=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(e,t){for(var r=0,n=0,a=new Array,i=1;i<=16;i++){for(var s=1;s<=e[i];s++)a[t[n]]=[],a[t[n]][0]=r,a[t[n]][1]=i,n++,r++;r*=2}return a}function I(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(g|=1<<y),r--,--y<0&&(255==g?(L(255),L(0)):L(g),y=7,g=0)}function L(e){p.push(e)}function P(e){L(e>>8&255),L(255&e)}function D(e,t,r,n,a){for(var i,s=a[0],o=a[240],l=function(e,t){var r,n,a,i,s,o,l,c,u,d,h=0;for(u=0;u<8;++u){r=e[h],n=e[h+1],a=e[h+2],i=e[h+3],s=e[h+4],o=e[h+5],l=e[h+6];var m=r+(c=e[h+7]),p=r-c,g=n+l,y=n-l,v=a+o,b=a-o,x=i+s,w=i-s,N=m+x,S=m-x,_=g+v,j=g-v;e[h]=N+_,e[h+4]=N-_;var E=.707106781*(j+S);e[h+2]=S+E,e[h+6]=S-E;var A=.382683433*((N=w+b)-(j=y+p)),k=.5411961*N+A,C=1.306562965*j+A,O=.707106781*(_=b+y),T=p+O,R=p-O;e[h+5]=R+k,e[h+3]=R-k,e[h+1]=T+C,e[h+7]=T-C,h+=8}for(h=0,u=0;u<8;++u){r=e[h],n=e[h+8],a=e[h+16],i=e[h+24],s=e[h+32],o=e[h+40],l=e[h+48];var I=r+(c=e[h+56]),L=r-c,P=n+l,D=n-l,M=a+o,F=a-o,B=i+s,U=i-s,z=I+B,H=I-B,$=P+M,q=P-M;e[h]=z+$,e[h+32]=z-$;var G=.707106781*(q+H);e[h+16]=H+G,e[h+48]=H-G;var W=.382683433*((z=U+F)-(q=D+L)),V=.5411961*z+W,K=1.306562965*q+W,Y=.707106781*($=F+D),J=L+Y,X=L-Y;e[h+40]=X+V,e[h+24]=X-V,e[h+8]=J+K,e[h+56]=J-K,h++}for(u=0;u<64;++u)d=e[u]*t[u],f[u]=d>0?d+.5|0:d-.5|0;return f}(e,t),c=0;c<64;++c)m[S[c]]=l[c];var u=m[0]-r;r=m[0],0==u?I(n[0]):(I(n[h[i=32767+u]]),I(d[i]));for(var p=63;p>0&&0==m[p];)p--;if(0==p)return I(s),r;for(var g,y=1;y<=p;){for(var v=y;0==m[y]&&y<=p;)++y;var b=y-v;if(b>=16){g=b>>4;for(var x=1;x<=g;++x)I(o);b&=15}i=32767+m[y],I(a[(b<<4)+h[i]]),I(d[i]),y++}return 63!=p&&I(s),r}function M(e){e=Math.min(Math.max(e,1),100),i!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=s((t[r]*e+50)/100);n=Math.min(Math.max(n,1),255),o[S[r]]=n}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var d=s((a[i]*e+50)/100);d=Math.min(Math.max(d,1),255),l[S[i]]=d}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,m=0;m<8;m++)for(var p=0;p<8;p++)c[f]=1/(o[S[f]]*h[m]*h[p]*8),u[f]=1/(l[S[f]]*h[m]*h[p]*8),f++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),i=e)}this.encode=function(e,i){i&&M(i),p=new Array,g=0,y=7,P(65496),P(65504),P(16),L(74),L(70),L(73),L(70),L(0),L(1),L(1),L(0),P(1),P(1),L(0),L(0),function(){P(65499),P(132),L(0);for(var e=0;e<64;e++)L(o[e]);L(1);for(var t=0;t<64;t++)L(l[t])}(),function(e,t){P(65472),P(17),L(8),P(t),P(e),L(3),L(1),L(17),L(0),L(2),L(17),L(1),L(3),L(17),L(1)}(e.width,e.height),function(){P(65476),P(418),L(0);for(var e=0;e<16;e++)L(_[e+1]);for(var t=0;t<=11;t++)L(j[t]);L(16);for(var r=0;r<16;r++)L(E[r+1]);for(var n=0;n<=161;n++)L(A[n]);L(1);for(var a=0;a<16;a++)L(k[a+1]);for(var i=0;i<=11;i++)L(C[i]);L(17);for(var s=0;s<16;s++)L(O[s+1]);for(var o=0;o<=161;o++)L(T[o])}(),P(65498),P(12),L(3),L(1),L(0),L(2),L(17),L(3),L(17),L(0),L(63),L(0);var s=0,d=0,h=0;g=0,y=7,this.encode.displayName="_encode_";for(var f,m,w,S,R,F,B,U,z,H=e.data,$=e.width,q=e.height,G=4*$,W=0;W<q;){for(f=0;f<G;){for(R=G*W+f,B=-1,U=0,z=0;z<64;z++)F=R+(U=z>>3)*G+(B=4*(7&z)),W+U>=q&&(F-=G*(W+1+U-q)),f+B>=G&&(F-=f+B-G+4),m=H[F++],w=H[F++],S=H[F++],v[z]=(N[m]+N[w+256|0]+N[S+512|0]>>16)-128,b[z]=(N[m+768|0]+N[w+1024|0]+N[S+1280|0]>>16)-128,x[z]=(N[m+1280|0]+N[w+1536|0]+N[S+1792|0]>>16)-128;s=D(v,c,s,t,n),d=D(b,u,d,r,a),h=D(x,u,h,r,a),f+=32}W+=8}if(y>=0){var V=[];V[1]=y+1,V[0]=(1<<y+1)-1,I(V)}return P(65497),new Uint8Array(p)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=R(_,j),r=R(k,C),n=R(E,A),a=R(O,T),function(){for(var e=1,t=2,r=1;r<=15;r++){for(var n=e;n<t;n++)h[32767+n]=r,d[32767+n]=[],d[32767+n][1]=r,d[32767+n][0]=n;for(var a=-(t-1);a<=-e;a++)h[32767+a]=r,d[32767+a]=[],d[32767+a][1]=r,d[32767+a][0]=t-1+a;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)N[e]=19595*e,N[e+256|0]=38470*e,N[e+512|0]=7471*e+32768,N[e+768|0]=-11059*e,N[e+1024|0]=-21709*e,N[e+1280|0]=32768*e+8421375,N[e+1536|0]=-27439*e,N[e+1792|0]=-5329*e}(),M(e)}function $L(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function qL(e){function t(e){if(!e)throw Error("assert :P")}function r(e,t,r){for(var n=0;4>n;n++)if(e[t+n]!=r.charCodeAt(n))return!0;return!1}function n(e,t,r,n,a){for(var i=0;i<a;i++)e[t+i]=r[n+i]}function a(e,t,r,n){for(var a=0;a<n;a++)e[t+a]=r}function i(e){return new Int32Array(e)}function s(e,t){for(var r=[],n=0;n<e;n++)r.push(new t);return r}function o(e,t){var r=[];return function e(r,n,a){for(var i=a[n],s=0;s<i&&(r.push(a.length>n+1?[]:new t),!(a.length<n+1));s++)e(r[s],n+1,a)}(r,0,e),r}var l=function(){var e=this;function l(e,t){for(var r=1<<t-1>>>0;e&r;)r>>>=1;return r?(e&r-1)+r:e}function c(e,r,n,a,i){t(!(a%n));do{e[r+(a-=n)]=i}while(0<a)}function u(e,r,n,a,s){if(t(2328>=s),512>=s)var o=i(512);else if(null==(o=i(s)))return 0;return function(e,r,n,a,s,o){var u,h,f=r,m=1<<n,p=i(16),g=i(16);for(t(0!=s),t(null!=a),t(null!=e),t(0<n),h=0;h<s;++h){if(15<a[h])return 0;++p[a[h]]}if(p[0]==s)return 0;for(g[1]=0,u=1;15>u;++u){if(p[u]>1<<u)return 0;g[u+1]=g[u]+p[u]}for(h=0;h<s;++h)u=a[h],0<a[h]&&(o[g[u]++]=h);if(1==g[15])return(a=new d).g=0,a.value=o[0],c(e,f,1,m,a),m;var y,v=-1,b=m-1,x=0,w=1,N=1,S=1<<n;for(h=0,u=1,s=2;u<=n;++u,s<<=1){if(w+=N<<=1,0>(N-=p[u]))return 0;for(;0<p[u];--p[u])(a=new d).g=u,a.value=o[h++],c(e,f+x,s,S,a),x=l(x,u)}for(u=n+1,s=2;15>=u;++u,s<<=1){if(w+=N<<=1,0>(N-=p[u]))return 0;for(;0<p[u];--p[u]){if(a=new d,(x&b)!=v){for(f+=S,y=1<<(v=u)-n;15>v&&!(0>=(y-=p[v]));)++v,y<<=1;m+=S=1<<(y=v-n),e[r+(v=x&b)].g=y+n,e[r+v].value=f-r-v}a.g=u-n,a.value=o[h++],c(e,f+(x>>n),s,S,a),x=l(x,u)}}return w!=2*g[15]-1?0:m}(e,r,n,a,s,o)}function d(){this.value=this.g=0}function h(){this.value=this.g=0}function f(){this.G=s(5,d),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Fr,h)}function m(e,r,n,a){t(null!=e),t(null!=r),t(2147483648>a),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=r,e.pa=n,e.Jd=r,e.Yc=n+a,e.Zc=4<=a?n+a-4+1:n,E(e)}function p(e,t){for(var r=0;0<t--;)r|=k(e,128)<<t;return r}function g(e,t){var r=p(e,t);return A(e)?-r:r}function y(e,r,n,a){var i,s=0;for(t(null!=e),t(null!=r),t(4294967288>a),e.Sb=a,e.Ra=0,e.u=0,e.h=0,4<a&&(a=4),i=0;i<a;++i)s+=r[n+i]<<8*i;e.Ra=s,e.bb=a,e.oa=r,e.pa=n}function v(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<zr-8>>>0,++e.bb,e.u-=8;S(e)&&(e.h=1,e.u=0)}function b(e,r){if(t(0<=r),!e.h&&r<=Ur){var n=N(e)&Br[r];return e.u+=r,v(e),n}return e.h=1,e.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function N(e){return e.Ra>>>(e.u&zr-1)>>>0}function S(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>zr}function _(e,t){e.u=t,e.h=S(e)}function j(e){e.u>=Hr&&(t(e.u>=Hr),v(e))}function E(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function A(e){return p(e,1)}function k(e,t){var r=e.Ca;0>e.b&&E(e);var n=e.b,a=r*t>>>8,i=(e.I>>>n>a)+0;for(i?(r-=a,e.I-=a+1<<n>>>0):r=a+1,n=r,a=0;256<=n;)a+=8,n>>=8;return n=7^a+$r[n],e.b-=n,e.Ca=(r<<n)-1,i}function C(e,t,r){e[t+0]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function O(e,t){return e[t+0]|e[t+1]<<8}function T(e,t){return O(e,t)|e[t+2]<<16}function R(e,t){return O(e,t)|O(e,t+2)<<16}function I(e,r){var n=1<<r;return t(null!=e),t(0<r),e.X=i(n),null==e.X?0:(e.Mb=32-r,e.Xa=r,1)}function L(e,r){t(null!=e),t(null!=r),t(e.Xa==r.Xa),n(r.X,0,e.X,0,1<<r.Xa)}function P(){this.X=[],this.Xa=this.Mb=0}function D(e,r,n,a){t(null!=n),t(null!=a);var i=n[0],s=a[0];return 0==i&&(i=(e*s+r/2)/r),0==s&&(s=(r*i+e/2)/e),0>=i||0>=s?0:(n[0]=i,a[0]=s,1)}function M(e,t){return e+(1<<t)-1>>>t}function F(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function B(t,r){e[r]=function(r,n,a,i,s,o,l){var c;for(c=0;c<s;++c){var u=e[t](o[l+c-1],a,i+c);o[l+c]=F(r[n+c],u)}}}function U(){this.ud=this.hd=this.jd=0}function z(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function $(e,t){return H(e+(e-t+.5>>1))}function q(e,t,r){return Math.abs(t-r)-Math.abs(e-r)}function G(e,t,r,n,a,i,s){for(n=i[s-1],r=0;r<a;++r)i[s+r]=n=F(e[t+r],n)}function W(e,t,r,n,a){var i;for(i=0;i<r;++i){var s=e[t+i],o=s>>8&255,l=16711935&(l=(l=16711935&s)+((o<<16)+o));n[a+i]=(4278255360&s)+l>>>0}}function V(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function K(e,t,r,n,a,i){var s;for(s=0;s<n;++s){var o=t[r+s],l=o>>>8,c=o,u=255&(u=(u=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),a[i+s]=(4278255360&o)+(u<<16)+c}}function Y(t,r,n,a,i){e[r]=function(e,t,r,n,s,o,l,c,u){for(n=l;n<c;++n)for(l=0;l<u;++l)s[o++]=i(r[a(e[t++])])},e[t]=function(t,r,s,o,l,c,u){var d=8>>t.b,h=t.Ea,f=t.K[0],m=t.w;if(8>d)for(t=(1<<t.b)-1,m=(1<<d)-1;r<s;++r){var p,g=0;for(p=0;p<h;++p)p&t||(g=a(o[l++])),c[u++]=i(f[g&m]),g>>=d}else e["VP8LMapColor"+n](o,l,f,m,c,u,r,s,h)}}function J(e,t,r,n,a){for(r=t+r;t<r;){var i=e[t++];n[a++]=i>>16&255,n[a++]=i>>8&255,n[a++]=255&i}}function X(e,t,r,n,a){for(r=t+r;t<r;){var i=e[t++];n[a++]=i>>16&255,n[a++]=i>>8&255,n[a++]=255&i,n[a++]=i>>24&255}}function Q(e,t,r,n,a){for(r=t+r;t<r;){var i=(s=e[t++])>>16&240|s>>12&15,s=240&s|s>>28&15;n[a++]=i,n[a++]=s}}function Z(e,t,r,n,a){for(r=t+r;t<r;){var i=(s=e[t++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;n[a++]=i,n[a++]=s}}function ee(e,t,r,n,a){for(r=t+r;t<r;){var i=e[t++];n[a++]=255&i,n[a++]=i>>8&255,n[a++]=i>>16&255}}function te(e,t,r,a,i,s){if(0==s)for(r=t+r;t<r;)C(a,((s=e[t++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),i+=32;else n(a,i,e,t,r)}function re(t,r){e[r][0]=e[t+"0"],e[r][1]=e[t+"1"],e[r][2]=e[t+"2"],e[r][3]=e[t+"3"],e[r][4]=e[t+"4"],e[r][5]=e[t+"5"],e[r][6]=e[t+"6"],e[r][7]=e[t+"7"],e[r][8]=e[t+"8"],e[r][9]=e[t+"9"],e[r][10]=e[t+"10"],e[r][11]=e[t+"11"],e[r][12]=e[t+"12"],e[r][13]=e[t+"13"],e[r][14]=e[t+"0"],e[r][15]=e[t+"0"]}function ne(e){return e==$n||e==qn||e==Gn||e==Wn}function ae(){this.eb=[],this.size=this.A=this.fb=0}function ie(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function se(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ae,this.f.kb=new ie,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var r=e.T,a=t.ba.f.RGBA,i=a.eb,s=a.fb+e.ka*a.A,o=ya[t.ba.S],l=e.y,c=e.O,u=e.f,d=e.N,h=e.ea,f=e.W,m=t.cc,p=t.dc,g=t.Mc,y=t.Nc,v=e.ka,b=e.ka+e.T,x=e.U,w=x+1>>1;for(0==v?o(l,c,null,null,u,d,h,f,u,d,h,f,i,s,null,null,x):(o(t.ec,t.fc,l,c,m,p,g,y,u,d,h,f,i,s-a.A,i,s,x),++r);v+2<b;v+=2)m=u,p=d,g=h,y=f,d+=e.Rc,f+=e.Rc,s+=2*a.A,o(l,(c+=2*e.fa)-e.fa,l,c,m,p,g,y,u,d,h,f,i,s-a.A,i,s,x);return c+=e.fa,e.j+b<e.o?(n(t.ec,t.fc,l,c,x),n(t.cc,t.dc,u,d,w),n(t.Mc,t.Nc,h,f,w),r--):1&b||o(l,c,null,null,u,d,h,f,u,d,h,f,i,s+a.A,null,null,x),r}function de(e,r,n){var a=e.F,i=[e.J];if(null!=a){var s=e.U,o=r.ba.S,l=o==Un||o==Gn;r=r.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,i[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var d=r.eb;u=r.fb+u*r.A,e=jn(a,i[0],e.width,s,c,d,u+(l?0:3),r.A),t(n==c),e&&ne(o)&&Sn(d,u,l,s,c,r.A)}return 0}function he(e){var t=e.ma,r=t.ba.S,n=11>r,a=r==Mn||r==Bn||r==Un||r==zn||12==r||ne(r);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Pr(t.Oa,e,a?11:12))return 0;if(a&&ne(r)&&vr(),e.da)alert("todo:use_scaling");else{if(n){if(t.Ib=ce,e.Kb){if(r=e.U+1>>1,t.memory=i(e.U+2*r),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+r,t.Ib=ue,vr()}}else alert("todo:EmitYUV");a&&(t.Jb=de,n&&gr())}if(n&&!Ta){for(e=0;256>e;++e)Ra[e]=89858*(e-128)+Ea>>ja,Pa[e]=-22014*(e-128)+Ea,La[e]=-45773*(e-128),Ia[e]=113618*(e-128)+Ea>>ja;for(e=Aa;e<ka;++e)t=76283*(e-16)+Ea>>ja,Da[e-Aa]=Ge(t,255),Ma[e-Aa]=Ge(t+8>>4,15);Ta=1}return 1}function fe(e){var r=e.ma,n=e.U,a=e.T;return t(!(1&e.ka)),0>=n||0>=a?0:(n=r.Ib(e,r),null!=r.Jb&&r.Jb(e,r,n),r.Dc+=n,1)}function me(e){e.ma.memory=null}function pe(e,t,r,n){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,r[0]=b(e,14)+1,n[0]=b(e,1),0!=b(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var r=e-2>>1;return(2+(1&e)<<r)+b(t,r)+1}function ye(e,t){return 120<t?t-120:1<=(r=((r=Qn[t-1])>>4)*e+(8-(15&r)))?r:1;var r}function ve(e,t,r){var n=N(r),a=e[t+=255&n].g-8;return 0<a&&(_(r,r.u+8),n=N(r),t+=e[t].value,t+=n&(1<<a)-1),_(r,r.u+e[t].g),e[t].value}function be(e,r,n){return n.g+=e.g,n.value+=e.value<<r>>>0,t(8>=n.g),e.g}function xe(e,r,n){var a=e.xc;return t((r=0==a?0:e.vc[e.md*(n>>a)+(r>>a)])<e.Wb),e.Ya[r]}function we(e,r,a,i){var s=e.ab,o=e.c*r,l=e.C;r=l+r;var c=a,u=i;for(i=e.Ta,a=e.Ua;0<s--;){var d=e.gc[s],h=l,f=r,m=c,p=u,g=(u=i,c=a,d.Ea);switch(t(h<f),t(f<=d.nc),d.hc){case 2:Wr(m,p,(f-h)*g,u,c);break;case 0:var y=h,v=f,b=u,x=c,w=(E=d).Ea;0==y&&(qr(m,p,null,null,1,b,x),G(m,p+1,0,0,w-1,b,x+1),p+=w,x+=w,++y);for(var N=1<<E.b,S=N-1,_=M(w,E.b),j=E.K,E=E.w+(y>>E.b)*_;y<v;){var A=j,k=E,C=1;for(Gr(m,p,b,x-w,1,b,x);C<w;){var O=(C&~S)+N;O>w&&(O=w),(0,Xr[A[k++]>>8&15])(m,p+ +C,b,x+C-w,O-C,b,x+C),C=O}p+=w,x+=w,++y&S||(E+=_)}f!=d.nc&&n(u,c-g,u,c+(f-h-1)*g,g);break;case 1:for(g=m,v=p,w=(m=d.Ea)-(x=m&~(b=(p=1<<d.b)-1)),y=M(m,d.b),N=d.K,d=d.w+(h>>d.b)*y;h<f;){for(S=N,_=d,j=new U,E=v+x,A=v+m;v<E;)V(S[_++],j),Qr(j,g,v,p,u,c),v+=p,c+=p;v<A&&(V(S[_++],j),Qr(j,g,v,w,u,c),v+=w,c+=w),++h&b||(d+=y)}break;case 3:if(m==u&&p==c&&0<d.b){for(v=u,m=g=c+(f-h)*g-(x=(f-h)*M(d.Ea,d.b)),p=u,b=c,y=[],x=(w=x)-1;0<=x;--x)y[x]=p[b+x];for(x=w-1;0<=x;--x)v[m+x]=y[x];Vr(d,h,f,u,g,u,c)}else Vr(d,h,f,m,p,u,c)}c=i,u=a}u!=a&&n(i,a,c,u,o)}function Ne(e,r){var n=e.V,a=e.Ba+e.c*e.C,i=r-e.C;if(t(r<=e.l.o),t(16>=i),0<i){var s=e.l,o=e.Ta,l=e.Ua,c=s.width;if(we(e,i,n,a),i=l=[l],t((n=e.C)<(a=r)),t(s.v<s.va),a>s.o&&(a=s.o),n<s.j){var u=s.j-n;n=s.j,i[0]+=u*c}if(n>=a?n=0:(i[0]+=4*s.v,s.ka=n-s.j,s.U=s.va-s.v,s.T=a-n,n=1),n){if(l=l[0],11>(n=e.ca).S){var d=n.f.RGBA,h=(a=n.S,i=s.U,s=s.T,u=d.eb,d.A),f=s;for(d=d.fb+e.Ma*d.A;0<f--;){var m=o,p=l,g=i,y=u,v=d;switch(a){case Dn:Zr(m,p,g,y,v);break;case Mn:en(m,p,g,y,v);break;case $n:en(m,p,g,y,v),Sn(y,v,0,g,1,0);break;case Fn:nn(m,p,g,y,v);break;case Bn:te(m,p,g,y,v,1);break;case qn:te(m,p,g,y,v,1),Sn(y,v,0,g,1,0);break;case Un:te(m,p,g,y,v,0);break;case Gn:te(m,p,g,y,v,0),Sn(y,v,1,g,1,0);break;case zn:tn(m,p,g,y,v);break;case Wn:tn(m,p,g,y,v),_n(y,v,g,1,0);break;case Hn:rn(m,p,g,y,v);break;default:t(0)}l+=c,d+=h}e.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=n.height)}}e.C=r,t(e.C<=e.i)}function Se(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var r=e.Ya[t].G,n=e.Ya[t].H;if(0<r[1][n[1]+0].g||0<r[2][n[2]+0].g||0<r[3][n[3]+0].g)return 0}return 1}function _e(e,r,n,a,i,s){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ga[e.Z]);r<n;++r)ga[e.Z](o,l,a,i,a,i,s),o=a,l=i,i+=s;e.qd=o,e.rd=l}}function je(e,r){var n=e.l.ma,a=0==n.Z||1==n.Z?e.l.j:e.C;if(a=e.C<a?a:e.C,t(r<=e.l.o),r>a){var i=e.l.width,s=n.ca,o=n.tb+i*a,l=e.V,c=e.Ba+e.c*a,u=e.gc;t(1==e.ab),t(3==u[0].hc),Yr(u[0],a,r,l,c,s,o),_e(n,a,r,s,o,i)}e.C=e.Ma=r}function Ee(e,r,n,a,i,s,o){var l=e.$/a,c=e.$%a,u=e.m,d=e.s,h=n+e.$,f=h;i=n+a*i;var m=n+a*s,p=280+d.ua,g=e.Pb?l:16777216,y=0<d.ua?d.Wa:null,v=d.wc,b=h<m?xe(d,c,l):null;t(e.C<s),t(m<=i);var x=!1;e:for(;;){for(;x||h<m;){var w=0;if(l>=g){var E=h-n;t((g=e).Pb),g.wd=g.m,g.xd=E,0<g.s.ua&&L(g.s.Wa,g.s.vb),g=l+ea}if(c&v||(b=xe(d,c,l)),t(null!=b),b.Qb&&(r[h]=b.qb,x=!0),!x)if(j(u),b.jc){w=u,E=r;var A=h,k=b.pd[N(w)&Fr-1];t(b.jc),256>k.g?(_(w,w.u+k.g),E[A]=k.value,w=0):(_(w,w.u+k.g-256),t(256<=k.value),w=k.value),0==w&&(x=!0)}else w=ve(b.G[0],b.H[0],u);if(u.h)break;if(x||256>w){if(!x)if(b.nd)r[h]=(b.qb|w<<8)>>>0;else{if(j(u),x=ve(b.G[1],b.H[1],u),j(u),E=ve(b.G[2],b.H[2],u),A=ve(b.G[3],b.H[3],u),u.h)break;r[h]=(A<<24|x<<16|w<<8|E)>>>0}if(x=!1,++h,++c>=a&&(c=0,++l,null!=o&&l<=s&&!(l%16)&&o(e,l),null!=y))for(;f<h;)w=r[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else if(280>w){if(w=ge(w-256,u),E=ve(b.G[4],b.H[4],u),j(u),E=ye(a,E=ge(E,u)),u.h)break;if(h-n<E||i-h<w)break e;for(A=0;A<w;++A)r[h+A]=r[h+A-E];for(h+=w,c+=w;c>=a;)c-=a,++l,null!=o&&l<=s&&!(l%16)&&o(e,l);if(t(h<=i),c&v&&(b=xe(d,c,l)),null!=y)for(;f<h;)w=r[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else{if(!(w<p))break e;for(x=w-280,t(null!=y);f<h;)w=r[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w;w=h,t(!(x>>>(E=y).Xa)),r[w]=E.X[x],x=!0}x||t(u.h==S(u))}if(e.Pb&&u.h&&h<i)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&L(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=o&&o(e,l>s?s:l),e.a=0,e.$=h-n}return 1}return e.a=3,0}function Ae(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var r=e.Wa;null!=r&&(r.X=null),e.vb=null,t(null!=e)}function ke(){var t=new sr;return null==t?null:(t.a=0,t.xb=pa,re("Predictor","VP8LPredictors"),re("Predictor","VP8LPredictors_C"),re("PredictorAdd","VP8LPredictorsAdd"),re("PredictorAdd","VP8LPredictorsAdd_C"),Wr=W,Qr=K,Zr=J,en=X,tn=Q,rn=Z,nn=ee,e.VP8LMapColor32b=Kr,e.VP8LMapColor8b=Jr,t)}function Ce(e,r,n,o,l){var c=1,h=[e],m=[r],p=o.m,g=o.s,y=null,v=0;e:for(;;){if(n)for(;c&&b(p,1);){var x=h,w=m,S=o,E=1,A=S.m,k=S.gc[S.ab],C=b(A,2);if(S.Oc&1<<C)c=0;else{switch(S.Oc|=1<<C,k.hc=C,k.Ea=x[0],k.nc=w[0],k.K=[null],++S.ab,t(4>=S.ab),C){case 0:case 1:k.b=b(A,3)+2,E=Ce(M(k.Ea,k.b),M(k.nc,k.b),0,S,k.K),k.K=k.K[0];break;case 3:var O,T=b(A,8)+1,R=16<T?0:4<T?1:2<T?2:3;if(x[0]=M(k.Ea,R),k.b=R,O=E=Ce(T,1,0,S,k.K)){var L,P=T,D=k,B=1<<(8>>D.b),U=i(B);if(null==U)O=0;else{var z=D.K[0],H=D.w;for(U[0]=D.K[0][0],L=1;L<1*P;++L)U[L]=F(z[H+L],U[L-1]);for(;L<4*B;++L)U[L]=0;D.K[0]=null,D.K[0]=U,O=1}}E=O;break;case 2:break;default:t(0)}c=E}}if(h=h[0],m=m[0],c&&b(p,1)&&!(c=1<=(v=b(p,4))&&11>=v)){o.a=3;break e}var $;if($=c)t:{var q,G,W,V=o,K=h,Y=m,J=v,X=n,Q=V.m,Z=V.s,ee=[null],te=1,re=0,ne=Zn[J];r:for(;;){if(X&&b(Q,1)){var ae=b(Q,3)+2,ie=M(K,ae),se=M(Y,ae),oe=ie*se;if(!Ce(ie,se,0,V,ee))break r;for(ee=ee[0],Z.xc=ae,q=0;q<oe;++q){var le=ee[q]>>8&65535;ee[q]=le,le>=te&&(te=le+1)}}if(Q.h)break r;for(G=0;5>G;++G){var ce=Yn[G];!G&&0<J&&(ce+=1<<J),re<ce&&(re=ce)}var ue=s(te*ne,d),de=te,he=s(de,f);if(null==he)var fe=null;else t(65536>=de),fe=he;var me=i(re);if(null==fe||null==me||null==ue){V.a=1;break r}var pe=ue;for(q=W=0;q<te;++q){var ge=fe[q],ye=ge.G,ve=ge.H,xe=0,we=1,Ne=0;for(G=0;5>G;++G){ce=Yn[G],ye[G]=pe,ve[G]=W,!G&&0<J&&(ce+=1<<J);n:{var Se,_e=ce,je=V,ke=me,Oe=pe,Te=W,Re=0,Ie=je.m,Le=b(Ie,1);if(a(ke,0,0,_e),Le){var Pe=b(Ie,1)+1,De=b(Ie,1),Me=b(Ie,0==De?1:8);ke[Me]=1,2==Pe&&(ke[Me=b(Ie,8)]=1);var Fe=1}else{var Be=i(19),Ue=b(Ie,4)+4;if(19<Ue){je.a=3;var ze=0;break n}for(Se=0;Se<Ue;++Se)Be[Xn[Se]]=b(Ie,3);var He=void 0,$e=void 0,qe=je,Ge=Be,We=_e,Ve=ke,Ke=0,Ye=qe.m,Je=8,Xe=s(128,d);a:for(;u(Xe,0,7,Ge,19);){if(b(Ye,1)){var Qe=2+2*b(Ye,3);if((He=2+b(Ye,Qe))>We)break a}else He=We;for($e=0;$e<We&&He--;){j(Ye);var Ze=Xe[0+(127&N(Ye))];_(Ye,Ye.u+Ze.g);var et=Ze.value;if(16>et)Ve[$e++]=et,0!=et&&(Je=et);else{var tt=16==et,rt=et-16,nt=Kn[rt],at=b(Ye,Vn[rt])+nt;if($e+at>We)break a;for(var it=tt?Je:0;0<at--;)Ve[$e++]=it}}Ke=1;break a}Ke||(qe.a=3),Fe=Ke}(Fe=Fe&&!Ie.h)&&(Re=u(Oe,Te,8,ke,_e)),Fe&&0!=Re?ze=Re:(je.a=3,ze=0)}if(0==ze)break r;if(we&&1==Jn[G]&&(we=0==pe[W].g),xe+=pe[W].g,W+=ze,3>=G){var st,ot=me[0];for(st=1;st<ce;++st)me[st]>ot&&(ot=me[st]);Ne+=ot}}if(ge.nd=we,ge.Qb=0,we&&(ge.qb=(ye[3][ve[3]+0].value<<24|ye[1][ve[1]+0].value<<16|ye[2][ve[2]+0].value)>>>0,0==xe&&256>ye[0][ve[0]+0].value&&(ge.Qb=1,ge.qb+=ye[0][ve[0]+0].value<<8)),ge.jc=!ge.Qb&&6>Ne,ge.jc){var lt,ct=ge;for(lt=0;lt<Fr;++lt){var ut=lt,dt=ct.pd[ut],ht=ct.G[0][ct.H[0]+ut];256<=ht.value?(dt.g=ht.g+256,dt.value=ht.value):(dt.g=0,dt.value=0,ut>>=be(ht,8,dt),ut>>=be(ct.G[1][ct.H[1]+ut],16,dt),ut>>=be(ct.G[2][ct.H[2]+ut],0,dt),be(ct.G[3][ct.H[3]+ut],24,dt))}}}Z.vc=ee,Z.Wb=te,Z.Ya=fe,Z.yc=ue,$=1;break t}$=0}if(!(c=$)){o.a=3;break e}if(0<v){if(g.ua=1<<v,!I(g.Wa,v)){o.a=1,c=0;break e}}else g.ua=0;var ft=o,mt=h,pt=m,gt=ft.s,yt=gt.xc;if(ft.c=mt,ft.i=pt,gt.md=M(mt,yt),gt.wc=0==yt?-1:(1<<yt)-1,n){o.xb=ma;break e}if(null==(y=i(h*m))){o.a=1,c=0;break e}c=(c=Ee(o,y,0,h,m,m,null))&&!p.h;break e}return c?(null!=l?l[0]=y:(t(null==y),t(n)),o.$=0,n||Ae(g)):Ae(g),c}function Oe(e,r){var n=e.c*e.i,a=n+r+16*r;return t(e.c<=r),e.V=i(a),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+n+r,1)}function Te(e,r){var n=e.C,a=r-n,i=e.V,s=e.Ba+e.c*n;for(t(r<=e.l.o);0<a;){var o=16<a?16:a,l=e.l.ma,c=e.l.width,u=c*o,d=l.ca,h=l.tb+c*n,f=e.Ta,m=e.Ua;we(e,o,i,s),En(f,m,d,h,u),_e(l,n,n+o,d,h,c),a-=o,i+=o*e.c,n+=o}t(n==r),e.C=e.Ma=r}function Re(){this.ub=this.yd=this.td=this.Rb=0}function Ie(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Le(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Pe(){this.Yb=function(){var e=[];return function e(t,r,n){for(var a=n[r],i=0;i<a&&(t.push(n.length>r+1?[]:0),!(n.length<r+1));i++)e(t[i],r+1,n)}(e,0,[3,11]),e}()}function De(){this.jb=i(3),this.Wc=o([4,8],Pe),this.Xc=o([4,17],Pe)}function Me(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Fe(){this.ld=this.La=this.dd=this.tc=0}function Be(){this.Na=this.la=0}function Ue(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ze(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fe),this.Y=0,this.ya=Array(new ze),this.aa=0,this.l=new We}function $e(){this.y=i(16),this.f=i(8),this.ea=i(8)}function qe(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new Re,this.Kc=new Ie,this.ed=new Me,this.Qa=new Le,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,x),this.ia=0,this.pb=s(4,Ue),this.Pa=new De,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $e),this.Hd=0,this.rb=Array(new Be),this.sb=0,this.wa=Array(new Fe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ze),this.L=this.aa=0,this.gd=o([4,2],Fe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ge(e,t){return 0>e?0:e>t?t:e}function We(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ve(){var e=new qe;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,na||(na=Xe)),e}function Ke(e,t,r){return 0==e.a&&(e.a=t,e.sc=r,e.cb=0),0}function Ye(e,t,r){return 3<=r&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Je(e,r){if(null==e)return 0;if(e.a=0,e.sc="OK",null==r)return Ke(e,2,"null VP8Io passed to VP8GetHeaders()");var n=r.data,i=r.w,s=r.ha;if(4>s)return Ke(e,7,"Truncated header.");var o=n[i+0]|n[i+1]<<8|n[i+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return Ke(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ke(e,4,"Frame not displayable.");i+=3,s-=3;var c=e.Kc;if(l.Rb){if(7>s)return Ke(e,7,"cannot parse picture header");if(!Ye(n,i,s))return Ke(e,3,"Bad code word");c.c=16383&(n[i+4]<<8|n[i+3]),c.Td=n[i+4]>>6,c.i=16383&(n[i+6]<<8|n[i+5]),c.Ud=n[i+6]>>6,i+=7,s-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,r.width=c.c,r.height=c.i,r.Da=0,r.j=0,r.v=0,r.va=r.width,r.o=r.height,r.da=0,r.ib=r.width,r.hb=r.height,r.U=r.width,r.T=r.height,a((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,a(o.Zb,0,0,o.Zb.length),a(o.Lb,0,0,o.Lb)}if(l.ub>s)return Ke(e,7,"bad partition length");m(o=e.m,n,i,l.ub),i+=l.ub,s-=l.ub,l.Rb&&(c.Ld=A(o),c.Kd=A(o)),c=e.Qa;var u,d=e.Pa;if(t(null!=o),t(null!=c),c.Cb=A(o),c.Cb){if(c.Bb=A(o),A(o)){for(c.Fb=A(o),u=0;4>u;++u)c.Zb[u]=A(o)?g(o,7):0;for(u=0;4>u;++u)c.Lb[u]=A(o)?g(o,6):0}if(c.Bb)for(u=0;3>u;++u)d.jb[u]=A(o)?p(o,8):255}else c.Bb=0;if(o.Ka)return Ke(e,3,"cannot parse segment header");if((c=e.ed).zd=A(o),c.Tb=p(o,6),c.wb=p(o,3),c.Pc=A(o),c.Pc&&A(o)){for(d=0;4>d;++d)A(o)&&(c.vd[d]=g(o,6));for(d=0;4>d;++d)A(o)&&(c.od[d]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return Ke(e,3,"cannot parse filter header");var h=s;if(s=u=i,i=u+h,c=h,e.Xb=(1<<p(e.m,2))-1,h<3*(d=e.Xb))n=7;else{for(u+=3*d,c-=3*d,h=0;h<d;++h){var f=n[s+0]|n[s+1]<<8|n[s+2]<<16;f>c&&(f=c),m(e.Jc[+h],n,u,f),u+=f,c-=f,s+=3}m(e.Jc[+d],n,u,c),n=u<i?0:5}if(0!=n)return Ke(e,n,"cannot parse partitions");for(n=p(u=e.m,7),s=A(u)?g(u,4):0,i=A(u)?g(u,4):0,c=A(u)?g(u,4):0,d=A(u)?g(u,4):0,u=A(u)?g(u,4):0,h=e.Qa,f=0;4>f;++f){if(h.Cb){var y=h.Zb[f];h.Fb||(y+=n)}else{if(0<f){e.pb[f]=e.pb[0];continue}y=n}var v=e.pb[f];v.Sc[0]=ta[Ge(y+s,127)],v.Sc[1]=ra[Ge(y+0,127)],v.Eb[0]=2*ta[Ge(y+i,127)],v.Eb[1]=101581*ra[Ge(y+c,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=ta[Ge(y+d,117)],v.Qc[1]=ra[Ge(y+u,127)],v.lc=y+u}if(!l.Rb)return Ke(e,4,"Not a key frame.");for(A(o),l=e.Pa,n=0;4>n;++n){for(s=0;8>s;++s)for(i=0;3>i;++i)for(c=0;11>c;++c)d=k(o,ca[n][s][i][c])?p(o,8):oa[n][s][i][c],l.Wc[n][s].Yb[i][c]=d;for(s=0;17>s;++s)l.Xc[n][s]=l.Wc[n][ua[s]]}return e.kc=A(o),e.kc&&(e.Bd=p(o,8)),e.cb=1}function Xe(e,t,r,n,a,i,s){var o=t[a].Yb[r];for(r=0;16>a;++a){if(!k(e,o[r+0]))return a;for(;!k(e,o[r+1]);)if(o=t[++a].Yb[0],r=0,16==a)return 16;var l=t[a+1].Yb;if(k(e,o[r+2])){var c=e,u=0;if(k(c,(h=o)[(d=r)+3]))if(k(c,h[d+6])){for(o=0,d=2*(u=k(c,h[d+8]))+(h=k(c,h[d+9+u])),u=0,h=aa[d];h[o];++o)u+=u+k(c,h[o]);u+=3+(8<<d)}else k(c,h[d+7])?(u=7+2*k(c,165),u+=k(c,145)):u=5+k(c,159);else u=k(c,h[d+4])?3+k(c,h[d+5]):2;o=l[2]}else u=1,o=l[1];l=s+ia[a],0>(c=e).b&&E(c);var d,h=c.b,f=(d=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=f,c.Ca|=1,c.I-=(d+1&f)<<h,i[l]=((u^f)-f)*n[(0<a)+0]}return 16}function Qe(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,a(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,r){if(null==e)return 0;if(null==r)return Ke(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Je(e,r))return 0;if(t(e.cb),null==r.ac||r.ac(r)){r.ob&&(e.L=0);var o=Ba[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=r.v-o>>4,e.zb=r.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=r.o+15+o>>4,e.Hb=r.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var u=e.Qa.Lb[o];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var d=e.gd[o][c],h=u;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var f=h;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),d.dd=f,d.tc=2*h+f,d.ld=40<=h?2:15<=h?1:0}else d.tc=0;d.La=c}}}o=0}else Ke(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=za);e:{o=e.Ic,l=4*(f=e.za);var m=32*f,p=f+1,g=0<e.L?f*(0<e.Aa?2:1):0,y=(2==e.Aa?2:1)*f;if((d=l+832+(c=3*(16*o+Ba[e.L])/2*m)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=d)o=0;else{if(d>e.Vb){if(e.Vb=0,e.Ec=i(d),e.Fc=0,null==e.Ec){o=Ke(e,1,"no memory during frame initialization.");break e}e.Vb=d}d=e.Ec,h=e.Fc,e.Ac=d,e.Bc=h,h+=l,e.Gd=s(m,$e),e.Hd=0,e.rb=s(p+1,Be),e.sb=1,e.wa=g?s(g,Fe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=f),t(!0),e.oc=d,e.pc=h,h+=832,e.ya=s(y,ze),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=f),e.R=16*f,e.B=8*f,f=(m=Ba[e.L])*e.R,m=m/2*e.B,e.sa=d,e.ta=h+f,e.qa=e.sa,e.ra=e.ta+16*o*e.R+m,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+m,e.$c=0,h+=c,e.mb=u?d:null,e.nb=u?h:null,t(h+u<=e.Fc+e.Vb),Qe(e),a(e.Ac,e.Bc,0,l),o=1}}if(o){if(r.ka=0,r.y=e.sa,r.O=e.ta,r.f=e.qa,r.N=e.ra,r.ea=e.Ha,r.Vd=e.Ia,r.fa=e.R,r.Rc=e.B,r.F=null,r.J=0,!Tn){for(o=-255;255>=o;++o)An[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)kn[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Cn[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)On[255+o]=0>o?0:255<o?255:o;Tn=1}an=ct,sn=it,ln=st,cn=ot,un=lt,on=at,dn=Kt,hn=Yt,fn=Qt,mn=Zt,pn=Jt,gn=Xt,yn=er,vn=tr,bn=Ht,xn=$t,wn=qt,Nn=Gt,ha[0]=_t,ha[1]=dt,ha[2]=Nt,ha[3]=St,ha[4]=jt,ha[5]=At,ha[6]=Et,ha[7]=kt,ha[8]=Ot,ha[9]=Ct,da[0]=yt,da[1]=ft,da[2]=mt,da[3]=pt,da[4]=vt,da[5]=bt,da[6]=xt,fa[0]=Lt,fa[1]=ht,fa[2]=Tt,fa[3]=Rt,fa[4]=Dt,fa[5]=Pt,fa[6]=Mt,o=1}else o=0}o&&(o=function(e,r){for(e.M=0;e.M<e.Va;++e.M){var s,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(s=0;s<c.za;++s){var u=l,d=c,h=d.Ac,f=d.Bc+4*s,m=d.zc,p=d.ya[d.aa+s];if(d.Qa.Bb?p.$b=k(u,d.Pa.jb[0])?2+k(u,d.Pa.jb[2]):k(u,d.Pa.jb[1]):p.$b=0,d.kc&&(p.Ad=k(u,d.Bd)),p.Za=!k(u,145)+0,p.Za){var g=p.Ob,y=0;for(d=0;4>d;++d){var v,b=m[0+d];for(v=0;4>v;++v){b=la[h[f+v]][b];for(var x=sa[k(u,b[0])];0<x;)x=sa[2*x+k(u,b[x])];b=-x,h[f+v]=b}n(g,y,h,f,4),y+=4,m[0+d]=b}}else b=k(u,156)?k(u,128)?1:3:k(u,163)?2:0,p.Ob[0]=b,a(h,f,b,4),a(m,0,b,4);p.Dd=k(u,142)?k(u,114)?k(u,183)?1:3:2:0}if(c.m.Ka)return Ke(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,u=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],f=l.kc?s.Ad:0)u.la=h.la=0,s.Za||(u.Na=h.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var w,N;if(u=h,h=c,f=l.Pa.Xc,m=l.ya[l.aa+l.ja],p=l.pb[m.$b],d=m.ad,g=0,y=l.rb[l.sb-1],b=v=0,a(d,g,0,384),m.Za)var S=0,_=f[3];else{x=i(16);var j=u.Na+y.Na;if(j=na(h,f[1],j,p.Eb,0,x,0),u.Na=y.Na=(0<j)+0,1<j)an(x,0,d,g);else{var E=x[0]+3>>3;for(x=0;256>x;x+=16)d[g+x]=E}S=1,_=f[0]}var A=15&u.la,C=15&y.la;for(x=0;4>x;++x){var O=1&C;for(E=N=0;4>E;++E)A=A>>1|(O=(j=na(h,_,j=O+(1&A),p.Sc,S,d,g))>S)<<7,N=N<<2|(3<j?3:1<j?2:0!=d[g+0]),g+=16;A>>=4,C=C>>1|O<<7,v=(v<<8|N)>>>0}for(_=A,S=C>>4,w=0;4>w;w+=2){for(N=0,A=u.la>>4+w,C=y.la>>4+w,x=0;2>x;++x){for(O=1&C,E=0;2>E;++E)j=O+(1&A),A=A>>1|(O=0<(j=na(h,f[2],j,p.Qc,0,d,g)))<<3,N=N<<2|(3<j?3:1<j?2:0!=d[g+0]),g+=16;A>>=2,C=C>>1|O<<5}b|=N<<4*w,_|=A<<4<<w,S|=(240&C)<<w}u.la=_,y.la=S,m.Hc=v,m.Gc=b,m.ia=43690&b?0:p.ia,f=!(v|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!f),c.Ka)return Ke(e,7,"Premature end-of-file encountered.")}if(Qe(e),l=r,c=1,s=(o=e).D,u=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(s.M=o.M,s.uc=u,Ir(o,s),c=1,s=(N=o.D).Nb,u=(b=Ba[o.L])*o.R,h=b/2*o.B,x=16*s*o.R,E=8*s*o.B,f=o.sa,m=o.ta-u+x,p=o.qa,d=o.ra-h+E,g=o.Ha,y=o.Ia-h+E,C=0==(A=N.M),v=A>=o.Va-1,2==o.Aa&&Ir(o,N),N.uc)for(O=(j=o).D.M,t(j.D.uc),N=j.yb;N<j.Hb;++N){S=N,_=O;var T=(R=(z=j).D).Nb;w=z.R;var R=R.wa[R.Y+S],I=z.sa,L=z.ta+16*T*w+16*S,P=R.dd,D=R.tc;if(0!=D)if(t(3<=D),1==z.L)0<S&&xn(I,L,w,D+4),R.La&&Nn(I,L,w,D),0<_&&bn(I,L,w,D+4),R.La&&wn(I,L,w,D);else{var M=z.B,F=z.qa,B=z.ra+8*T*M+8*S,U=z.Ha,z=z.Ia+8*T*M+8*S;T=R.ld,0<S&&(hn(I,L,w,D+4,P,T),mn(F,B,U,z,M,D+4,P,T)),R.La&&(gn(I,L,w,D,P,T),vn(F,B,U,z,M,D,P,T)),0<_&&(dn(I,L,w,D+4,P,T),fn(F,B,U,z,M,D+4,P,T)),R.La&&(pn(I,L,w,D,P,T),yn(F,B,U,z,M,D,P,T))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(N=16*A,A=16*(A+1),C?(l.y=o.sa,l.O=o.ta+x,l.f=o.qa,l.N=o.ra+E,l.ea=o.Ha,l.W=o.Ia+E):(N-=b,l.y=f,l.O=m,l.f=p,l.N=d,l.ea=g,l.W=y),v||(A-=b),A>l.o&&(A=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&N<A&&(l.J=dr(o,l,N,A-N),l.F=o.mb,null==l.F&&0==l.F.length)){c=Ke(o,3,"Could not decode alpha data.");break e}N<l.j&&(b=l.j-N,N=l.j,t(!(1&b)),l.O+=o.R*b,l.N+=o.B*(b>>1),l.W+=o.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),N<A&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=N-l.j,l.U=l.va-l.v,l.T=A-N,c=l.put(l))}s+1!=o.Ic||v||(n(o.sa,o.ta-u,f,m+16*o.R,u),n(o.qa,o.ra-h,p,d+8*o.B,h),n(o.Ha,o.Ia-h,g,y+8*o.B,h))}if(!c)return Ke(e,6,"Output aborted.")}return 1}(e,r)),null!=r.bc&&r.bc(r),o&=1}return o?(e.cb=0,o):0}function et(e,t,r,n,a){a=e[t+r+32*n]+(a>>3),e[t+r+32*n]=-256&a?0>a?0:255:a}function tt(e,t,r,n,a,i){et(e,t,0,r,n+a),et(e,t,1,r,n+i),et(e,t,2,r,n-i),et(e,t,3,r,n-a)}function rt(e){return(20091*e>>16)+e}function nt(e,t,r,n){var a,s=0,o=i(16);for(a=0;4>a;++a){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-rt(e[t+12]),d=rt(e[t+4])+(35468*e[t+12]>>16);o[s+0]=l+d,o[s+1]=c+u,o[s+2]=c-u,o[s+3]=l-d,s+=4,t++}for(a=s=0;4>a;++a)l=(e=o[s+0]+4)+o[s+8],c=e-o[s+8],u=(35468*o[s+4]>>16)-rt(o[s+12]),et(r,n,0,0,l+(d=rt(o[s+4])+(35468*o[s+12]>>16))),et(r,n,1,0,c+u),et(r,n,2,0,c-u),et(r,n,3,0,l-d),s++,n+=32}function at(e,t,r,n){var a=e[t+0]+4,i=35468*e[t+4]>>16,s=rt(e[t+4]),o=35468*e[t+1]>>16;tt(r,n,0,a+s,e=rt(e[t+1]),o),tt(r,n,1,a+i,e,o),tt(r,n,2,a-i,e,o),tt(r,n,3,a-s,e,o)}function it(e,t,r,n,a){nt(e,t,r,n),a&&nt(e,t+16,r,n+4)}function st(e,t,r,n){sn(e,t+0,r,n,1),sn(e,t+32,r,n+128,1)}function ot(e,t,r,n){var a;for(e=e[t+0]+4,a=0;4>a;++a)for(t=0;4>t;++t)et(r,n,t,a,e)}function lt(e,t,r,n){e[t+0]&&cn(e,t+0,r,n),e[t+16]&&cn(e,t+16,r,n+4),e[t+32]&&cn(e,t+32,r,n+128),e[t+48]&&cn(e,t+48,r,n+128+4)}function ct(e,t,r,n){var a,s=i(16);for(a=0;4>a;++a){var o=e[t+0+a]+e[t+12+a],l=e[t+4+a]+e[t+8+a],c=e[t+4+a]-e[t+8+a],u=e[t+0+a]-e[t+12+a];s[0+a]=o+l,s[8+a]=o-l,s[4+a]=u+c,s[12+a]=u-c}for(a=0;4>a;++a)o=(e=s[0+4*a]+3)+s[3+4*a],l=s[1+4*a]+s[2+4*a],c=s[1+4*a]-s[2+4*a],u=e-s[3+4*a],r[n+0]=o+l>>3,r[n+16]=u+c>>3,r[n+32]=o-l>>3,r[n+48]=u-c>>3,n+=64}function ut(e,t,r){var n,a=t-32,i=Ln,s=255-e[a-1];for(n=0;n<r;++n){var o,l=i,c=s+e[t-1];for(o=0;o<r;++o)e[t+o]=l[c+e[a+o]];t+=32}}function dt(e,t){ut(e,t,4)}function ht(e,t){ut(e,t,8)}function ft(e,t){ut(e,t,16)}function mt(e,t){var r;for(r=0;16>r;++r)n(e,t+32*r,e,t-32,16)}function pt(e,t){var r;for(r=16;0<r;--r)a(e,t,e[t-1],16),t+=32}function gt(e,t,r){var n;for(n=0;16>n;++n)a(t,r+32*n,e,16)}function yt(e,t){var r,n=16;for(r=0;16>r;++r)n+=e[t-1+32*r]+e[t+r-32];gt(n>>5,e,t)}function vt(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t-1+32*r];gt(n>>4,e,t)}function bt(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t+r-32];gt(n>>4,e,t)}function xt(e,t){gt(128,e,t)}function wt(e,t,r){return e+2*t+r+2>>2}function Nt(e,t){var r,a=t-32;for(a=new Uint8Array([wt(e[a-1],e[a+0],e[a+1]),wt(e[a+0],e[a+1],e[a+2]),wt(e[a+1],e[a+2],e[a+3]),wt(e[a+2],e[a+3],e[a+4])]),r=0;4>r;++r)n(e,t+32*r,a,0,a.length)}function St(e,t){var r=e[t-1],n=e[t-1+32],a=e[t-1+64],i=e[t-1+96];C(e,t+0,16843009*wt(e[t-1-32],r,n)),C(e,t+32,16843009*wt(r,n,a)),C(e,t+64,16843009*wt(n,a,i)),C(e,t+96,16843009*wt(a,i,i))}function _t(e,t){var r,n=4;for(r=0;4>r;++r)n+=e[t+r-32]+e[t-1+32*r];for(n>>=3,r=0;4>r;++r)a(e,t+32*r,n,4)}function jt(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],i=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=wt(n,a,e[t-1+96]),e[t+1+96]=e[t+0+64]=wt(r,n,a),e[t+2+96]=e[t+1+64]=e[t+0+32]=wt(i,r,n),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=wt(s,i,r),e[t+3+64]=e[t+2+32]=e[t+1+0]=wt(o,s,i),e[t+3+32]=e[t+2+0]=wt(l,o,s),e[t+3+0]=wt(c,l,o)}function Et(e,t){var r=e[t+1-32],n=e[t+2-32],a=e[t+3-32],i=e[t+4-32],s=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=wt(e[t+0-32],r,n),e[t+1+0]=e[t+0+32]=wt(r,n,a),e[t+2+0]=e[t+1+32]=e[t+0+64]=wt(n,a,i),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=wt(a,i,s),e[t+3+32]=e[t+2+64]=e[t+1+96]=wt(i,s,o),e[t+3+64]=e[t+2+96]=wt(s,o,l),e[t+3+96]=wt(o,l,l)}function At(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],i=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=i+s+1>>1,e[t+1+0]=e[t+2+64]=s+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=wt(a,n,r),e[t+0+64]=wt(n,r,i),e[t+0+32]=e[t+1+96]=wt(r,i,s),e[t+1+32]=e[t+2+96]=wt(i,s,o),e[t+2+32]=e[t+3+96]=wt(s,o,l),e[t+3+32]=wt(o,l,c)}function kt(e,t){var r=e[t+0-32],n=e[t+1-32],a=e[t+2-32],i=e[t+3-32],s=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=r+n+1>>1,e[t+1+0]=e[t+0+64]=n+a+1>>1,e[t+2+0]=e[t+1+64]=a+i+1>>1,e[t+3+0]=e[t+2+64]=i+s+1>>1,e[t+0+32]=wt(r,n,a),e[t+1+32]=e[t+0+96]=wt(n,a,i),e[t+2+32]=e[t+1+96]=wt(a,i,s),e[t+3+32]=e[t+2+96]=wt(i,s,o),e[t+3+64]=wt(s,o,l),e[t+3+96]=wt(o,l,c)}function Ct(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],i=e[t-1+96];e[t+0+0]=r+n+1>>1,e[t+2+0]=e[t+0+32]=n+a+1>>1,e[t+2+32]=e[t+0+64]=a+i+1>>1,e[t+1+0]=wt(r,n,a),e[t+3+0]=e[t+1+32]=wt(n,a,i),e[t+3+32]=e[t+1+64]=wt(a,i,i),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=i}function Ot(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],i=e[t-1+96],s=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=r+s+1>>1,e[t+0+32]=e[t+2+64]=n+r+1>>1,e[t+0+64]=e[t+2+96]=a+n+1>>1,e[t+0+96]=i+a+1>>1,e[t+3+0]=wt(o,l,c),e[t+2+0]=wt(s,o,l),e[t+1+0]=e[t+3+32]=wt(r,s,o),e[t+1+32]=e[t+3+64]=wt(n,r,s),e[t+1+64]=e[t+3+96]=wt(a,n,r),e[t+1+96]=wt(i,a,n)}function Tt(e,t){var r;for(r=0;8>r;++r)n(e,t+32*r,e,t-32,8)}function Rt(e,t){var r;for(r=0;8>r;++r)a(e,t,e[t-1],8),t+=32}function It(e,t,r){var n;for(n=0;8>n;++n)a(t,r+32*n,e,8)}function Lt(e,t){var r,n=8;for(r=0;8>r;++r)n+=e[t+r-32]+e[t-1+32*r];It(n>>4,e,t)}function Pt(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t+r-32];It(n>>3,e,t)}function Dt(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t-1+32*r];It(n>>3,e,t)}function Mt(e,t){It(128,e,t)}function Ft(e,t,r){var n=e[t-r],a=e[t+0],i=3*(a-n)+Rn[1020+e[t-2*r]-e[t+r]],s=In[112+(i+4>>3)];e[t-r]=Ln[255+n+In[112+(i+3>>3)]],e[t+0]=Ln[255+a-s]}function Bt(e,t,r,n){var a=e[t+0],i=e[t+r];return Pn[255+e[t-2*r]-e[t-r]]>n||Pn[255+i-a]>n}function Ut(e,t,r,n){return 4*Pn[255+e[t-r]-e[t+0]]+Pn[255+e[t-2*r]-e[t+r]]<=n}function zt(e,t,r,n,a){var i=e[t-3*r],s=e[t-2*r],o=e[t-r],l=e[t+0],c=e[t+r],u=e[t+2*r],d=e[t+3*r];return 4*Pn[255+o-l]+Pn[255+s-c]>n?0:Pn[255+e[t-4*r]-i]<=a&&Pn[255+i-s]<=a&&Pn[255+s-o]<=a&&Pn[255+d-u]<=a&&Pn[255+u-c]<=a&&Pn[255+c-l]<=a}function Ht(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)Ut(e,t+n,r,a)&&Ft(e,t+n,r)}function $t(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)Ut(e,t+n*r,1,a)&&Ft(e,t+n*r,1)}function qt(e,t,r,n){var a;for(a=3;0<a;--a)Ht(e,t+=4*r,r,n)}function Gt(e,t,r,n){var a;for(a=3;0<a;--a)$t(e,t+=4,r,n)}function Wt(e,t,r,n,a,i,s,o){for(i=2*i+1;0<a--;){if(zt(e,t,r,i,s))if(Bt(e,t,r,o))Ft(e,t,r);else{var l=e,c=t,u=r,d=l[c-2*u],h=l[c-u],f=l[c+0],m=l[c+u],p=l[c+2*u],g=27*(v=Rn[1020+3*(f-h)+Rn[1020+d-m]])+63>>7,y=18*v+63>>7,v=9*v+63>>7;l[c-3*u]=Ln[255+l[c-3*u]+v],l[c-2*u]=Ln[255+d+y],l[c-u]=Ln[255+h+g],l[c+0]=Ln[255+f-g],l[c+u]=Ln[255+m-y],l[c+2*u]=Ln[255+p-v]}t+=n}}function Vt(e,t,r,n,a,i,s,o){for(i=2*i+1;0<a--;){if(zt(e,t,r,i,s))if(Bt(e,t,r,o))Ft(e,t,r);else{var l=e,c=t,u=r,d=l[c-u],h=l[c+0],f=l[c+u],m=In[112+(4+(p=3*(h-d))>>3)],p=In[112+(p+3>>3)],g=m+1>>1;l[c-2*u]=Ln[255+l[c-2*u]+g],l[c-u]=Ln[255+d+p],l[c+0]=Ln[255+h-m],l[c+u]=Ln[255+f-g]}t+=n}}function Kt(e,t,r,n,a,i){Wt(e,t,r,1,16,n,a,i)}function Yt(e,t,r,n,a,i){Wt(e,t,1,r,16,n,a,i)}function Jt(e,t,r,n,a,i){var s;for(s=3;0<s;--s)Vt(e,t+=4*r,r,1,16,n,a,i)}function Xt(e,t,r,n,a,i){var s;for(s=3;0<s;--s)Vt(e,t+=4,1,r,16,n,a,i)}function Qt(e,t,r,n,a,i,s,o){Wt(e,t,a,1,8,i,s,o),Wt(r,n,a,1,8,i,s,o)}function Zt(e,t,r,n,a,i,s,o){Wt(e,t,1,a,8,i,s,o),Wt(r,n,1,a,8,i,s,o)}function er(e,t,r,n,a,i,s,o){Vt(e,t+4*a,a,1,8,i,s,o),Vt(r,n+4*a,a,1,8,i,s,o)}function tr(e,t,r,n,a,i,s,o){Vt(e,t+4,1,a,8,i,s,o),Vt(r,n+4,1,a,8,i,s,o)}function rr(){this.ba=new se,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ar(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ir(){this.ua=0,this.Wa=new P,this.vb=new P,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new d}function sr(){this.xb=this.a=0,this.l=new We,this.ca=new se,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ir,this.ab=0,this.gc=s(4,ar),this.Oc=0}function or(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new We,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lr(e,t,r,n,a,i,s){for(e=null==e?0:e[t+0],t=0;t<s;++t)a[i+t]=e+r[n+t]&255,e=a[i+t]}function cr(e,t,r,n,a,i,s){var o;if(null==e)lr(null,null,r,n,a,i,s);else for(o=0;o<s;++o)a[i+o]=e[t+o]+r[n+o]&255}function ur(e,t,r,n,a,i,s){if(null==e)lr(null,null,r,n,a,i,s);else{var o,l=e[t+0],c=l,u=l;for(o=0;o<s;++o)c=u+(l=e[t+o])-c,u=r[n+o]+(-256&c?0>c?0:255:c)&255,c=l,a[i+o]=u}}function dr(e,r,a,s){var o=r.width,l=r.o;if(t(null!=e&&null!=r),0>a||0>=s||a+s>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new or,(c=null==e.ga)||(c=r.width*r.o,t(0==e.Gb.length),e.Gb=i(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,d=e.P,h=e.qc,f=e.mb,m=e.nb,p=d+1,g=h-1,v=c.l;if(t(null!=u&&null!=f&&null!=r),ga[0]=null,ga[1]=lr,ga[2]=cr,ga[3]=ur,c.ca=f,c.tb=m,c.c=r.width,c.i=r.height,t(0<c.c&&0<c.i),1>=h)r=0;else if(c.$a=3&u[d+0],c.Z=u[d+0]>>2&3,c.Lc=u[d+0]>>4&3,d=u[d+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||d)r=0;else if(v.put=fe,v.ac=he,v.bc=me,v.ma=c,v.width=r.width,v.height=r.height,v.Da=r.Da,v.v=r.v,v.va=r.va,v.j=r.j,v.o=r.o,c.$a)e:{t(1==c.$a),r=ke();t:for(;;){if(null==r){r=0;break e}if(t(null!=c),c.mc=r,r.c=c.c,r.i=c.i,r.l=c.l,r.l.ma=c,r.l.width=c.c,r.l.height=c.i,r.a=0,y(r.m,u,p,g),!Ce(c.c,c.i,1,r,null))break t;if(1==r.ab&&3==r.gc[0].hc&&Se(r.s)?(c.ic=1,u=r.c*r.i,r.Ta=null,r.Ua=0,r.V=i(u),r.Ba=0,null==r.V?(r.a=1,r=0):r=1):(c.ic=0,r=Oe(r,c.c)),!r)break t;r=1;break e}c.mc=null,r=0}else r=g>=c.c*c.i;c=!r}if(c)return null;1!=e.ga.Lc?e.Ga=0:s=l-a}t(null!=e.ga),t(a+s<=l);e:{if(r=(u=e.ga).c,l=u.l.o,0==u.$a){if(p=e.rc,g=e.Vc,v=e.Fa,d=e.P+1+a*r,h=e.mb,f=e.nb+a*r,t(d<=e.P+e.qc),0!=u.Z)for(t(null!=ga[u.Z]),c=0;c<s;++c)ga[u.Z](p,g,v,d,h,f,r),p=h,g=f,f+=r,d+=r;else for(c=0;c<s;++c)n(h,f,v,d,r),p=h,g=f,f+=r,d+=r;e.rc=p,e.Vc=g}else{if(t(null!=u.mc),r=a+s,t(null!=(c=u.mc)),t(r<=c.i),c.C>=r)r=1;else if(u.ic||gr(),u.ic){u=c.V,p=c.Ba,g=c.c;var b=c.i,x=(v=1,d=c.$/g,h=c.$%g,f=c.m,m=c.s,c.$),w=g*b,N=g*r,_=m.wc,E=x<N?xe(m,h,d):null;t(x<=w),t(r<=b),t(Se(m));t:for(;;){for(;!f.h&&x<N;){if(h&_||(E=xe(m,h,d)),t(null!=E),j(f),256>(b=ve(E.G[0],E.H[0],f)))u[p+x]=b,++x,++h>=g&&(h=0,++d<=r&&!(d%16)&&je(c,d));else{if(!(280>b)){v=0;break t}b=ge(b-256,f);var A,k=ve(E.G[4],E.H[4],f);if(j(f),!(x>=(k=ye(g,k=ge(k,f)))&&w-x>=b)){v=0;break t}for(A=0;A<b;++A)u[p+x+A]=u[p+x+A-k];for(x+=b,h+=b;h>=g;)h-=g,++d<=r&&!(d%16)&&je(c,d);x<N&&h&_&&(E=xe(m,h,d))}t(f.h==S(f))}je(c,d>r?r:d);break t}!v||f.h&&x<w?(v=0,c.a=f.h?5:3):c.$=x,r=v}else r=Ee(c,c.V,c.Ba,c.c,c.i,r,Te);if(!r){s=0;break e}}a+s>=l&&(e.Cc=1),s=1}if(!s)return null;if(e.Cc&&(null!=(s=e.ga)&&(s.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*o}function hr(e,t,r,n,a,i){for(;0<a--;){var s,o=e,l=t+(r?1:0),c=e,u=t+(r?0:3);for(s=0;s<n;++s){var d=c[u+4*s];255!=d&&(d*=32897,o[l+4*s+0]=o[l+4*s+0]*d>>23,o[l+4*s+1]=o[l+4*s+1]*d>>23,o[l+4*s+2]=o[l+4*s+2]*d>>23)}t+=i}}function fr(e,t,r,n,a){for(;0<n--;){var i;for(i=0;i<r;++i){var s=e[t+2*i+0],o=15&(c=e[t+2*i+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*i+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,e[t+2*i+1]=240&c|o}t+=a}}function mr(e,t,r,n,a,i,s,o){var l,c,u=255;for(c=0;c<a;++c){for(l=0;l<n;++l){var d=e[t+l];i[s+4*l]=d,u&=d}t+=r,s+=o}return 255!=u}function pr(e,t,r,n,a){var i;for(i=0;i<a;++i)r[n+i]=e[t+i]>>8}function gr(){Sn=hr,_n=fr,jn=mr,En=pr}function yr(r,n,a){e[r]=function(e,r,i,s,o,l,c,u,d,h,f,m,p,g,y,v,b){var x,w=b-1>>1,N=o[l+0]|c[u+0]<<16,S=d[h+0]|f[m+0]<<16;t(null!=e);var _=3*N+S+131074>>2;for(n(e[r+0],255&_,_>>16,p,g),null!=i&&(_=3*S+N+131074>>2,n(i[s+0],255&_,_>>16,y,v)),x=1;x<=w;++x){var j=o[l+x]|c[u+x]<<16,E=d[h+x]|f[m+x]<<16,A=N+j+S+E+524296,k=A+2*(j+S)>>3;_=k+N>>1,N=(A=A+2*(N+E)>>3)+j>>1,n(e[r+2*x-1],255&_,_>>16,p,g+(2*x-1)*a),n(e[r+2*x-0],255&N,N>>16,p,g+(2*x-0)*a),null!=i&&(_=A+S>>1,N=k+E>>1,n(i[s+2*x-1],255&_,_>>16,y,v+(2*x-1)*a),n(i[s+2*x+0],255&N,N>>16,y,v+(2*x+0)*a)),N=j,S=E}1&b||(_=3*N+S+131074>>2,n(e[r+b-1],255&_,_>>16,p,g+(b-1)*a),null!=i&&(_=3*S+N+131074>>2,n(i[s+b-1],255&_,_>>16,y,v+(b-1)*a)))}}function vr(){ya[Dn]=va,ya[Mn]=xa,ya[Fn]=ba,ya[Bn]=wa,ya[Un]=Na,ya[zn]=Sa,ya[Hn]=_a,ya[$n]=xa,ya[qn]=wa,ya[Gn]=Na,ya[Wn]=Sa}function br(e){return e&~Oa?0>e?0:255:e>>Ca}function xr(e,t){return br((19077*e>>8)+(26149*t>>8)-14234)}function wr(e,t,r){return br((19077*e>>8)-(6419*t>>8)-(13320*r>>8)+8708)}function Nr(e,t){return br((19077*e>>8)+(33050*t>>8)-17685)}function Sr(e,t,r,n,a){n[a+0]=xr(e,r),n[a+1]=wr(e,t,r),n[a+2]=Nr(e,t)}function _r(e,t,r,n,a){n[a+0]=Nr(e,t),n[a+1]=wr(e,t,r),n[a+2]=xr(e,r)}function jr(e,t,r,n,a){var i=wr(e,t,r);t=i<<3&224|Nr(e,t)>>3,n[a+0]=248&xr(e,r)|i>>5,n[a+1]=t}function Er(e,t,r,n,a){var i=240&Nr(e,t)|15;n[a+0]=240&xr(e,r)|wr(e,t,r)>>4,n[a+1]=i}function Ar(e,t,r,n,a){n[a+0]=255,Sr(e,t,r,n,a+1)}function kr(e,t,r,n,a){_r(e,t,r,n,a),n[a+3]=255}function Cr(e,t,r,n,a){Sr(e,t,r,n,a),n[a+3]=255}function Ge(e,t){return 0>e?0:e>t?t:e}function Or(t,r,n){e[t]=function(e,t,a,i,s,o,l,c,u){for(var d=c+(-2&u)*n;c!=d;)r(e[t+0],a[i+0],s[o+0],l,c),r(e[t+1],a[i+0],s[o+0],l,c+n),t+=2,++i,++o,c+=2*n;1&u&&r(e[t+0],a[i+0],s[o+0],l,c)}}function Tr(e,t,r){return 0==r?0==e?0==t?6:5:0==t?4:0:r}function Rr(e,t,r,n,a){switch(e>>>30){case 3:sn(t,r,n,a,0);break;case 2:on(t,r,n,a);break;case 1:cn(t,r,n,a)}}function Ir(e,t){var r,i,s=t.M,o=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,d=e.pc+584,h=e.oc,f=e.pc+600;for(r=0;16>r;++r)l[c+32*r-1]=129;for(r=0;8>r;++r)u[d+32*r-1]=129,h[f+32*r-1]=129;for(0<s?l[c-1-32]=u[d-1-32]=h[f-1-32]=129:(a(l,c-32-1,127,21),a(u,d-32-1,127,9),a(h,f-32-1,127,9)),i=0;i<e.za;++i){var m=t.ya[t.aa+i];if(0<i){for(r=-1;16>r;++r)n(l,c+32*r-4,l,c+32*r+12,4);for(r=-1;8>r;++r)n(u,d+32*r-4,u,d+32*r+4,4),n(h,f+32*r-4,h,f+32*r+4,4)}var p=e.Gd,g=e.Hd+i,y=m.ad,v=m.Hc;if(0<s&&(n(l,c-32,p[g].y,0,16),n(u,d-32,p[g].f,0,8),n(h,f-32,p[g].ea,0,8)),m.Za){var b=l,x=c-32+16;for(0<s&&(i>=e.za-1?a(b,x,p[g].y[15],4):n(b,x,p[g+1].y,0,4)),r=0;4>r;r++)b[x+128+r]=b[x+256+r]=b[x+384+r]=b[x+0+r];for(r=0;16>r;++r,v<<=2)b=l,x=c+Fa[r],ha[m.Ob[r]](b,x),Rr(v,y,16*+r,b,x)}else if(b=Tr(i,s,m.Ob[0]),da[b](l,c),0!=v)for(r=0;16>r;++r,v<<=2)Rr(v,y,16*+r,l,c+Fa[r]);for(r=m.Gc,b=Tr(i,s,m.Dd),fa[b](u,d),fa[b](h,f),v=y,b=u,x=d,255&(m=r|0)&&(170&m?ln(v,256,b,x):un(v,256,b,x)),m=h,v=f,255&(r>>=8)&&(170&r?ln(y,320,m,v):un(y,320,m,v)),s<e.Ub-1&&(n(p[g].y,0,l,c+480,16),n(p[g].f,0,u,d+224,8),n(p[g].ea,0,h,f+224,8)),r=8*o*e.B,p=e.sa,g=e.ta+16*i+16*o*e.R,y=e.qa,m=e.ra+8*i+r,v=e.Ha,b=e.Ia+8*i+r,r=0;16>r;++r)n(p,g+r*e.R,l,c+32*r,16);for(r=0;8>r;++r)n(y,m+r*e.B,u,d+32*r,8),n(v,b+r*e.B,h,f+32*r,8)}}function Lr(e,n,a,i,s,o,l,c,u){var d=[0],h=[0],f=0,m=null!=u?u.kd:0,p=null!=u?u:new nr;if(null==e||12>a)return 7;p.data=e,p.w=n,p.ha=a,n=[n],a=[a],p.gb=[p.gb];e:{var g=n,v=a,b=p.gb;if(t(null!=e),t(null!=v),t(null!=b),b[0]=0,12<=v[0]&&!r(e,g[0],"RIFF")){if(r(e,g[0]+8,"WEBP")){b=3;break e}var x=R(e,g[0]+4);if(12>x||4294967286<x){b=3;break e}if(m&&x>v[0]-8){b=7;break e}b[0]=x,g[0]+=12,v[0]-=12}b=0}if(0!=b)return b;for(x=0<p.gb[0],a=a[0];;){e:{var N=e;v=n,b=a;var S=d,_=h,j=g=[0];if((k=f=[f])[0]=0,8>b[0])b=7;else{if(!r(N,v[0],"VP8X")){if(10!=R(N,v[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var E=R(N,v[0]+8),A=1+T(N,v[0]+12);if(2147483648<=A*(N=1+T(N,v[0]+15))){b=3;break e}null!=j&&(j[0]=E),null!=S&&(S[0]=A),null!=_&&(_[0]=N),v[0]+=18,b[0]-=18,k[0]=1}b=0}}if(f=f[0],g=g[0],0!=b)return b;if(v=!!(2&g),!x&&f)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=v),null!=c&&(c[0]=0),l=d[0],g=h[0],f&&v&&null==u){b=0;break}if(4>a){b=7;break}if(x&&f||!x&&!f&&!r(e,n[0],"ALPH")){a=[a],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];e:{E=e,b=n,x=a;var k=p.gb;S=p.na,_=p.P,j=p.Sa,A=22,t(null!=E),t(null!=x),N=b[0];var C=x[0];for(t(null!=S),t(null!=j),S[0]=null,_[0]=null,j[0]=0;;){if(b[0]=N,x[0]=C,8>C){b=7;break e}var O=R(E,N+4);if(4294967286<O){b=3;break e}var I=8+O+1&-2;if(A+=I,0<k&&A>k){b=3;break e}if(!r(E,N,"VP8 ")||!r(E,N,"VP8L")){b=0;break e}if(C[0]<I){b=7;break e}r(E,N,"ALPH")||(S[0]=E,_[0]=N+8,j[0]=O),N+=I,C-=I}}if(a=a[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=b)break}a=[a],p.Ja=[p.Ja],p.xa=[p.xa];e:if(k=e,b=n,x=a,S=p.gb[0],_=p.Ja,j=p.xa,E=b[0],N=!r(k,E,"VP8 "),A=!r(k,E,"VP8L"),t(null!=k),t(null!=x),t(null!=_),t(null!=j),8>x[0])b=7;else{if(N||A){if(k=R(k,E+4),12<=S&&k>S-12){b=3;break e}if(m&&k>x[0]-8){b=7;break e}_[0]=k,b[0]+=8,x[0]-=8,j[0]=A}else j[0]=5<=x[0]&&47==k[E+0]&&!(k[E+4]>>5),_[0]=x[0];b=0}if(a=a[0],p.Ja=p.Ja[0],p.xa=p.xa[0],n=n[0],0!=b)break;if(4294967286<p.Ja)return 3;if(null==c||v||(c[0]=p.xa?2:1),l=[l],g=[g],p.xa){if(5>a){b=7;break}c=l,m=g,v=o,null==e||5>a?e=0:5<=a&&47==e[n+0]&&!(e[n+4]>>5)?(x=[0],k=[0],S=[0],y(_=new w,e,n,a),pe(_,x,k,S)?(null!=c&&(c[0]=x[0]),null!=m&&(m[0]=k[0]),null!=v&&(v[0]=S[0]),e=1):e=0):e=0}else{if(10>a){b=7;break}c=g,null==e||10>a||!Ye(e,n+3,a-3)?e=0:(m=e[n+0]|e[n+1]<<8|e[n+2]<<16,v=16383&(e[n+7]<<8|e[n+6]),e=16383&(e[n+9]<<8|e[n+8]),1&m||3<(m>>1&7)||!(m>>4&1)||m>>5>=p.Ja||!v||!e?e=0:(l&&(l[0]=v),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],f&&(d[0]!=l||h[0]!=g))return 3;null!=u&&(u[0]=p,u.offset=n-u.w,t(4294967286>n-u.w),t(u.offset==u.ha-a));break}return 0==b||7==b&&f&&null==u?(null!=o&&(o[0]|=null!=p.na&&0<p.na.length),null!=i&&(i[0]=l),null!=s&&(s[0]=g),0):b}function Pr(e,t,r){var n=t.width,a=t.height,i=0,s=0,o=n,l=a;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,i=e.v,s=e.j,11>r||(i&=-2,s&=-2),0>i||0>s||0>=o||0>=l||i+o>n||s+l>a))return 0;if(t.v=i,t.j=s,t.va=i+o,t.o=s+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!D(o,l,r=[e.ib],i=[e.hb]))return 0;t.ib=r[0],t.hb=i[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*n/4&&t.hb<3*a/4,t.Kb=0),1}function Dr(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Mr(e,t,r,n){if(null==n||0>=e||0>=t)return 2;if(null!=r){if(r.Da){var a=r.cd,s=r.bd,o=-2&r.v,l=-2&r.j;if(0>o||0>l||0>=a||0>=s||o+a>e||l+s>t)return 2;e=a,t=s}if(r.da){if(!D(e,t,a=[r.ib],s=[r.hb]))return 2;e=a[0],t=s[0]}}n.width=e,n.height=t;e:{var c=n.width,u=n.height;if(e=n.S,0>=c||0>=u||!(e>=Dn&&13>e))e=2;else{if(0>=n.Rd&&null==n.sd){o=s=a=t=0;var d=(l=c*Ha[e])*u;if(11>e||(s=(u+1)/2*(t=(c+1)/2),12==e&&(o=(a=c)*u)),null==(u=i(d+2*s+o))){e=1;break e}n.sd=u,11>e?((c=n.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=d):((c=n.f.kb).y=u,c.O=0,c.fa=l,c.Fd=d,c.f=u,c.N=0+d,c.Ab=t,c.Cd=s,c.ea=u,c.W=0+d+s,c.Db=t,c.Ed=s,12==e&&(c.F=u,c.J=0+d+2*s),c.Tc=o,c.lb=a)}if(t=1,a=n.S,s=n.width,o=n.height,a>=Dn&&13>a)if(11>a)e=n.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+s<=e.size,t&=l>=s*Ha[a],t&=null!=e.eb;else{e=n.f.kb,l=(s+1)/2,d=(o+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var h=Math.abs(e.Db),f=Math.abs(e.lb),m=f*(o-1)+s;t&=c*(o-1)+s<=e.Fd,t&=u*(d-1)+l<=e.Cd,t=(t&=h*(d-1)+l<=e.Ed)&c>=s&u>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==a&&(t&=f>=s,t&=m<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=r&&r.fd&&(e=Dr(n)),e}var Fr=64,Br=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ur=24,zr=32,Hr=8,$r=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,r){return t[r+0]},e.Predictor3=function(e,t,r){return t[r+1]},e.Predictor4=function(e,t,r){return t[r-1]},e.Predictor5=function(e,t,r){return z(z(e,t[r+1]),t[r+0])},e.Predictor6=function(e,t,r){return z(e,t[r-1])},e.Predictor7=function(e,t,r){return z(e,t[r+0])},e.Predictor8=function(e,t,r){return z(t[r-1],t[r+0])},e.Predictor9=function(e,t,r){return z(t[r+0],t[r+1])},e.Predictor10=function(e,t,r){return z(z(e,t[r-1]),z(t[r+0],t[r+1]))},e.Predictor11=function(e,t,r){var n=t[r+0];return 0>=q(n>>24&255,e>>24&255,(t=t[r-1])>>24&255)+q(n>>16&255,e>>16&255,t>>16&255)+q(n>>8&255,e>>8&255,t>>8&255)+q(255&n,255&e,255&t)?n:e},e.Predictor12=function(e,t,r){var n=t[r+0];return(H((e>>24&255)+(n>>24&255)-((t=t[r-1])>>24&255))<<24|H((e>>16&255)+(n>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(n>>8&255)-(t>>8&255))<<8|H((255&e)+(255&n)-(255&t)))>>>0},e.Predictor13=function(e,t,r){var n=t[r-1];return($((e=z(e,t[r+0]))>>24&255,n>>24&255)<<24|$(e>>16&255,n>>16&255)<<16|$(e>>8&255,n>>8&255)<<8|$(255&e,255&n))>>>0};var qr=e.PredictorAdd0;e.PredictorAdd1=G,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Gr=e.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Wr,Vr=e.ColorIndexInverseTransform,Kr=e.MapARGB,Yr=e.VP8LColorIndexInverseTransformAlpha,Jr=e.MapAlpha,Xr=e.VP8LPredictorsAdd=[];Xr.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Qr,Zr,en,tn,rn,nn,an,sn,on,ln,cn,un,dn,hn,fn,mn,pn,gn,yn,vn,bn,xn,wn,Nn,Sn,_n,jn,En,An=i(511),kn=i(2041),Cn=i(225),On=i(767),Tn=0,Rn=kn,In=Cn,Ln=On,Pn=An,Dn=0,Mn=1,Fn=2,Bn=3,Un=4,zn=5,Hn=6,$n=7,qn=8,Gn=9,Wn=10,Vn=[2,3,7],Kn=[3,3,11],Yn=[280,256,256,256,40],Jn=[0,1,1,1,0],Xn=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ea=8,ta=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ra=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],na=null,aa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ia=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sa=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oa=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],la=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ca=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ua=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],da=[],ha=[],fa=[],ma=1,pa=2,ga=[],ya=[];yr("UpsampleRgbLinePair",Sr,3),yr("UpsampleBgrLinePair",_r,3),yr("UpsampleRgbaLinePair",Cr,4),yr("UpsampleBgraLinePair",kr,4),yr("UpsampleArgbLinePair",Ar,4),yr("UpsampleRgba4444LinePair",Er,2),yr("UpsampleRgb565LinePair",jr,2);var va=e.UpsampleRgbLinePair,ba=e.UpsampleBgrLinePair,xa=e.UpsampleRgbaLinePair,wa=e.UpsampleBgraLinePair,Na=e.UpsampleArgbLinePair,Sa=e.UpsampleRgba4444LinePair,_a=e.UpsampleRgb565LinePair,ja=16,Ea=1<<ja-1,Aa=-227,ka=482,Ca=6,Oa=(256<<Ca)-1,Ta=0,Ra=i(256),Ia=i(256),La=i(256),Pa=i(256),Da=i(ka-Aa),Ma=i(ka-Aa);Or("YuvToRgbRow",Sr,3),Or("YuvToBgrRow",_r,3),Or("YuvToRgbaRow",Cr,4),Or("YuvToBgraRow",kr,4),Or("YuvToArgbRow",Ar,4),Or("YuvToRgba4444Row",Er,2),Or("YuvToRgb565Row",jr,2);var Fa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ba=[0,2,8],Ua=[8,7,6,4,4,2,2,2,1,1,1,1],za=1;this.WebPDecodeRGBA=function(e,r,n,a,i){var s=Mn,o=new rr,l=new se;o.ba=l,l.S=s,l.width=[l.width],l.height=[l.height];var c=l.width,u=l.height,d=new oe;if(null==d||null==e)var h=2;else t(null!=d),h=Lr(e,r,n,d.width,d.height,d.Pd,d.Qd,d.format,null);if(0!=h?c=0:(null!=c&&(c[0]=d.width[0]),null!=u&&(u[0]=d.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=a&&(a[0]=l.width),null!=i&&(i[0]=l.height);e:{if(a=new We,(i=new nr).data=e,i.w=r,i.ha=n,i.kd=1,r=[0],t(null!=i),(0==(e=Lr(i.data,i.w,i.ha,null,null,null,r,null,i))||7==e)&&r[0]&&(e=4),0==(r=e)){if(t(null!=o),a.data=i.data,a.w=i.w+i.offset,a.ha=i.ha-i.offset,a.put=fe,a.ac=he,a.bc=me,a.ma=o,i.xa){if(null==(e=ke())){o=1;break e}if(function(e,r){var n=[0],a=[0],i=[0];t:for(;;){if(null==e)return 0;if(null==r)return e.a=2,0;if(e.l=r,e.a=0,y(e.m,r.data,r.w,r.ha),!pe(e.m,n,a,i)){e.a=3;break t}if(e.xb=pa,r.width=n[0],r.height=a[0],!Ce(n[0],a[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,a)){if(a=0==(r=Mr(a.width,a.height,o.Oa,o.ba))){t:{a=e;r:for(;;){if(null==a){a=0;break t}if(t(null!=a.s.yc),t(null!=a.s.Ya),t(0<a.s.Wb),t(null!=(n=a.l)),t(null!=(i=n.ma)),0!=a.xb){if(a.ca=i.ba,a.tb=i.tb,t(null!=a.ca),!Pr(i.Oa,n,Bn)){a.a=2;break r}if(!Oe(a,n.width))break r;if(n.da)break r;if((n.da||ne(a.ca.S))&&gr(),11>a.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=a.ca.f.kb.F&&gr()),a.Pb&&0<a.s.ua&&null==a.s.vb.X&&!I(a.s.vb,a.s.Wa.Xa)){a.a=1;break r}a.xb=0}if(!Ee(a,a.V,a.Ba,a.c,a.i,n.o,Ne))break r;i.Dc=a.Ma,a=1;break t}t(0!=a.a),a=0}a=!a}a&&(r=e.a)}else r=e.a}else{if(null==(e=new Ve)){o=1;break e}if(e.Fa=i.na,e.P=i.P,e.qc=i.Sa,Je(e,a)){if(0==(r=Mr(a.width,a.height,o.Oa,o.ba))){if(e.Aa=0,n=o.Oa,t(null!=(i=e)),null!=n){if(0<(c=0>(c=n.Md)?0:100<c?255:255*c/100)){for(u=d=0;4>u;++u)12>(h=i.pb[u]).lc&&(h.ia=c*Ua[0>h.lc?0:h.lc]>>3),d|=h.ia;d&&(alert("todo:VP8InitRandom"),i.ia=1)}i.Ga=n.Id,100<i.Ga?i.Ga=100:0>i.Ga&&(i.Ga=0)}Ze(e,a)||(r=e.a)}}else r=e.a}0==r&&null!=o.Oa&&o.Oa.fd&&(r=Dr(o.ba))}o=r}s=0!=o?null:11>s?l.f.RGBA.eb:l.f.kb.y}else s=null;return s};var Ha=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var r="",n=0;n<4;n++)r+=String.fromCharCode(e[t++]);return r}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],f=[0],m=[],p=new l,g=e,y=function(e,t){var r={},n=0,a=!1,i=0,s=0;if(r.frames=[],!function(e,t){for(var r=0;r<4;r++)if(e[t+r]!="RIFF".charCodeAt(r))return!0;return!1}(e,t)){for(d(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=d(e,t+=4);t+=4;var h=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===r.frames[n]&&(r.frames[n]={}),(p=r.frames[n]).src_off=a?s:t-8,p.src_size=i+l+8,n++,a&&(a=!1,i=0,s=0);break;case"VP8X":(p=r.header={}).feature_flags=e[t];var f=t+4;p.canvas_width=1+u(e,f),f+=3,p.canvas_height=1+u(e,f),f+=3;break;case"ALPH":a=!0,i=h+8,s=t-8;break;case"ANIM":(p=r.header).bgcolor=d(e,t),f=t+4,p.loop_count=(g=e)[(y=f)+0]|g[y+1]<<8,f+=2;break;case"ANMF":var m,p;(p=r.frames[n]={}).offset_x=2*u(e,t),t+=3,p.offset_y=2*u(e,t),t+=3,p.width=1+u(e,t),t+=3,p.height=1+u(e,t),t+=3,p.duration=u(e,t),t+=3,m=e[t++],p.dispose=1&m,p.blend=m>>1&1}"ANMF"!=o&&(t+=h)}var g,y;return r}}(g,0);y.response=g,y.rgbaoutput=!0,y.dataurl=!1;var v=y.header?y.header:null,b=y.frames?y.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],f=[v.canvas_width];for(var x=0;x<b.length&&0!=b[x].blend;x++);}var w=b[0],N=p.WebPDecodeRGBA(g,w.src_off,w.src_size,f,h);w.rgba=N,w.imgwidth=f[0],w.imgheight=h[0];for(var S=0;S<f[0]*h[0]*4;S++)m[S]=N[S];return this.width=f,this.height=h,this.data=m,this}!function(e){var t=function(t,n,l,c){var u=4,d=i;switch(c){case e.image_compression.FAST:u=1,d=a;break;case e.image_compression.MEDIUM:u=6,d=s;break;case e.image_compression.SLOW:u=9,d=o}var h=GR(t=r(t,n,l,d),{level:u});return e.__addimage__.arrayBufferToBinaryString(h)},r=function(e,t,r,n){for(var a,i,s,o=e.length/t,l=new Uint8Array(e.length+o),d=c(),h=0;h<o;h+=1){if(s=h*t,a=e.subarray(s,s+t),n)l.set(n(a,r,i),s+h);else{for(var f,m=d.length,p=[];f<m;f+=1)p[f]=d[f](a,r,i);var g=u(p.concat());l.set(p[g],s+h)}i=a}return l},n=function(e){var t=Array.apply([],e);return t.unshift(0),t},a=function(e,t){var r,n=[],a=e.length;n[0]=1;for(var i=0;i<a;i+=1)r=e[i-t]||0,n[i+1]=e[i]-r+256&255;return n},i=function(e,t,r){var n,a=[],i=e.length;a[0]=2;for(var s=0;s<i;s+=1)n=r&&r[s]||0,a[s+1]=e[s]-n+256&255;return a},s=function(e,t,r){var n,a,i=[],s=e.length;i[0]=3;for(var o=0;o<s;o+=1)n=e[o-t]||0,a=r&&r[o]||0,i[o+1]=e[o]+256-(n+a>>>1)&255;return i},o=function(e,t,r){var n,a,i,s,o=[],c=e.length;o[0]=4;for(var u=0;u<c;u+=1)n=e[u-t]||0,a=r&&r[u]||0,i=r&&r[u-t]||0,s=l(n,a,i),o[u+1]=e[u]-s+256&255;return o},l=function(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r},c=function(){return[n,a,i,s,o]},u=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(r,n,a,i){var s,o,l,c,u,d,h,f,m,p,g,y,v,b,x,w=this.decode.FLATE_DECODE,N="";if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){if(r=(l=new BL(r)).imgData,o=l.bits,s=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){m=(f=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(m*l.colors),p=new Uint8Array(m);var S,_=l.pixelBitlength-l.bits;for(b=0,x=0;b<m;b++){for(v=f[b],S=0;S<_;)g[x++]=v>>>S&255,S+=l.bits;p[b]=v>>>S&255}}if(16===l.bits){m=(f=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(m*(32/l.pixelBitlength)*l.colors),p=new Uint8Array(m*(32/l.pixelBitlength)),y=l.colors>1,b=0,x=0;for(var j=0;b<m;)v=f[b++],g[x++]=v>>>0&255,y&&(g[x++]=v>>>16&255,v=f[b++],g[x++]=v>>>0&255),p[j++]=v>>>16&255;o=8}i!==e.image_compression.NONE?(r=t(g,l.width*l.colors,l.colors,i),h=t(p,l.width,1,i)):(r=g,h=p,w=void 0)}if(3===l.colorType&&(s=this.color_spaces.INDEXED,d=l.palette,l.transparency.indexed)){var E=l.transparency.indexed,A=0;for(b=0,m=E.length;b<m;++b)A+=E[b];if((A/=255)===m-1&&-1!==E.indexOf(0))c=[E.indexOf(0)];else if(A!==m){for(f=l.decodePixels(),p=new Uint8Array(f.length),b=0,m=f.length;b<m;b++)p[b]=E[f[b]];h=t(p,l.width,1)}}var k=function(t){var r;switch(t){case e.image_compression.FAST:r=11;break;case e.image_compression.MEDIUM:r=13;break;case e.image_compression.SLOW:r=14;break;default:r=12}return r}(i);return w===this.decode.FLATE_DECODE&&(N="/Predictor "+k+" "),N+="/Colors "+u+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:a,data:r,index:n,filter:w,decodeParameters:N,transparency:c,palette:d,sMask:h,predictor:k,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:s}}}}(AI.API),function(e){e.processGIF89A=function(t,r,n,a){var i=new UL(t),s=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},u=new HL(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)},e.processGIF87A=e.processGIF89A}(AI.API),$L.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$L.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){JR.log("bit decode error:"+e)}},$L.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}0!==r&&(this.pos+=4-r)}},$L.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}0!==t&&(this.pos+=4-t)}},$L.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}0!==e&&(this.pos+=4-e)}},$L.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,c=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=c}this.pos+=e}},$L.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&r)/r*255|0,c=(s>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},$L.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},$L.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=s}},$L.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new $L(t,!1),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new HL(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(AI.API),qL.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new qL(t),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new HL(100).encode(l,100);return e.processJPEG.call(this,c,r,n,a)}}(AI.API),AI.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var u=n[c],d=n[c+1],h=n[c+2],f=n[c+3];i[o++]=u,i[o++]=d,i[o++]=h,s[l++]=f}var m=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},AI.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},LL=AI.API,PL=LL.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=!1!==t.doKerning,h=0,f=e.length,m=0,p=o[0]||l,g=[];for(r=0;r<f;r++)n=e.charCodeAt(r),"function"==typeof a.metadata.widthOfString?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(h=d&&"object"===(0,XT.A)(c[n])&&!isNaN(parseInt(c[n][m],10))?c[n][m]/u:0,g.push((o[n]||p)/l+h)),m=n;return g},DL=LL.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return LL.processArabic&&(e=LL.processArabic(e)),"function"==typeof n.metadata.widthOfString?n.metadata.widthOfString(e,r,a)/r:PL.apply(this,arguments).reduce(function(e,t){return e+t},0)},ML=function(e,t,r,n){for(var a=[],i=0,s=e.length,o=0;i!==s&&o+t[i]<r;)o+=t[i],i++;a.push(e.slice(0,i));var l=i;for(o=0;i!==s;)o+t[i]>n&&(a.push(e.slice(l,i)),o=0,l=i),o+=t[i],i++;return l!==i&&a.push(e.slice(l,i)),a},FL=function(e,t,r){r||(r={});var n,a,i,s,o,l,c,u=[],d=[u],h=r.textIndent||0,f=0,m=0,p=e.split(" "),g=PL.apply(this,[" ",r])[0];if(l=-1===r.lineIndent?p[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),v=[];p.map(function(e){(e=e.split(/\s*\n/)).length>1?v=v.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):v.push(e[0])}),p=v,l=DL.apply(this,[y,r])}for(i=0,s=p.length;i<s;i++){var b=0;if(n=p[i],l&&"\n"==n[0]&&(n=n.substr(1),b=1),h+f+(m=(a=PL.apply(this,[n,r])).reduce(function(e,t){return e+t},0))>t||b){if(m>t){for(o=ML.apply(this,[n,a,t-(h+f),t]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);m=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(e,t){return e+t},0)}else u=[n];d.push(u),h=m+l,f=g}else u.push(n),h+=f+m,f=g}return c=l?function(e,t){return(t?y:"")+e.join(" ")}:function(e){return e.join(" ")},d.map(c)},LL.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(FL.apply(this,[n[o],s,i]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<16;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(e){return"0x"+parseInt(e,10).toString(16)},s=e.__fontmetrics__.compress=function(e){var t,r,a,o,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?r="'"+c+"'":(c=parseInt(c,10),r=(r=i(c).slice(2)).slice(0,-1)+n[r.slice(-1)]),"number"==typeof t)t<0?(a=i(t).slice(3),o="-"):(a=i(t).slice(2),o=""),a=o+a.slice(0,-1)+n[a.slice(-1)];else{if("object"!==(0,XT.A)(t))throw new Error("Don't know what to do with value type "+(0,XT.A)(t)+".");a=s(t)}l.push(r+a)}return l.push("}"),l.join("")},o=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,a,i,s={},o=1,l=s,c=[],u="",d="",h=e.length-1,f=1;f<h;f+=1)"'"==(i=e[f])?t?(a=t.join(""),t=void 0):t=[]:t?t.push(i):"{"==i?(c.push([l,a]),l={},a=void 0):"}"==i?((n=c.pop())[0][n[1]]=l,a=void 0,l=n[0]):"-"==i?o=-1:void 0===a?r.hasOwnProperty(i)?(u+=r[i],a=parseInt(u,16)*o,o=1,u=""):u+=i:r.hasOwnProperty(i)?(d+=r[i],l[a]=parseInt(d,16)*o,o=1,a=void 0,d=""):d+=i;return s},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode={},t.metadata.Unicode.widths=r.widths,t.metadata.Unicode.kerning=r.kerning);var n=c.Unicode[t.postScriptName];n&&(t.metadata.Unicode.encoding=n,t.encoding=n.codePages[0])}])}(AI.API),function(e){var t=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(void 0===i)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(n=!1===i.existsFileInVFS(a.postScriptName)?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");!function(r,n){n=/^\x00\x01\x00\x00/.test(n)?t(n):t(eI(n)),r.metadata=e.API.TTFFont.open(n),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]}(a,n)}}])}(AI),function(){function e(){return(KR.canvg?Promise.resolve(KR.canvg):r.e(732).then(r.bind(r,3732))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}AI.API.addSvgAsImage=function(t,r,n,a,i,s,o,l){if(isNaN(r)||isNaN(n))throw JR.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw JR.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=a,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(e){return e.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(d)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),r,n,a,i,o,l)})}}(),AI.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},AI.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,u=0,d=0;function h(e,t){var r,n=!1;for(r=0;r<e.length;r+=1)e[r]===t&&(n=!0);return n}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var f=o.length;for(d=0;d<f;d+=1)r[o[d]].value=r[o[d]].defaultValue,r[o[d]].explicitSet=!1}if("object"===(0,XT.A)(e))for(a in e)if(i=e[a],h(o,a)&&void 0!==i){if("boolean"===r[a].type&&"boolean"==typeof i)r[a].value=i;else if("name"===r[a].type&&h(r[a].valueSet,i))r[a].value=i;else if("integer"===r[a].type&&Number.isInteger(i))r[a].value=i;else if("array"===r[a].type){for(c=0;c<i.length;c+=1)if(n=!0,1===i[c].length&&"number"==typeof i[c][0])l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)"number"!=typeof i[c][u]&&(n=!1);!0===n&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in r)!0===r[e].explicitSet&&("name"===r[e].type?t.push("/"+e+" /"+r[e].value):t.push("/"+e+" "+r[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(e)),n=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),s=r.length+n.length+a.length+t.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(t+r+n+a+i),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,n){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(AI.API),function(e){var t=e.API,r=t.pdfEscape16=function(e,t){for(var r,n=t.metadata.Unicode.widths,a=["","0","00","000","0000"],i=[""],s=0,o=e.length;s<o;++s){if(r=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(r),t.metadata.toUnicode[r]=e.charCodeAt(s),-1==n.indexOf(r)&&(n.push(r),n.push([parseInt(t.metadata.widthOfGlyph(r),10)])),"0"==r)return i.join("");r=r.toString(16),i.push(a[4-r.length],r)}return i.join("")},n=function(e){var t,r,n,a,i,s,o;for(i="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",n=[],s=0,o=(r=Object.keys(e).sort(function(e,t){return e-t})).length;s<o;s++)t=r[s],n.length>=100&&(i+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar",n=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(a=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),n.push("<"+t+"><"+a+">"));return n.length&&(i+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar\n"),i+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,i=t.newObject,s=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"Identity-H"===r.encoding){for(var o=r.metadata.Unicode.widths,l=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var d=i();s({data:c,addLength1:!0,objectId:d}),a("endobj");var h=i();s({data:n(r.metadata.toUnicode),addLength1:!0,objectId:h}),a("endobj");var f=i();a("<<"),a("/Type /FontDescriptor"),a("/FontName /"+wI(r.fontName)),a("/FontFile2 "+d+" 0 R"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/Flags "+r.metadata.flags),a("/StemV "+r.metadata.stemV),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a(">>"),a("endobj");var m=i();a("<<"),a("/Type /Font"),a("/BaseFont /"+wI(r.fontName)),a("/FontDescriptor "+f+" 0 R"),a("/W "+e.API.PDFObject.convert(o)),a("/CIDToGIDMap /Identity"),a("/DW 1000"),a("/Subtype /CIDFontType2"),a("/CIDSystemInfo"),a("<<"),a("/Supplement 0"),a("/Registry (Adobe)"),a("/Ordering ("+r.encoding+")"),a(">>"),a(">>"),a("endobj"),r.objectNumber=i(),a("<<"),a("/Type /Font"),a("/Subtype /Type0"),a("/ToUnicode "+h+" 0 R"),a("/BaseFont /"+wI(r.fontName)),a("/Encoding /"+r.encoding),a("/DescendantFonts ["+m+" 0 R]"),a(">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,i=t.newObject,s=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===r.encoding){for(var o=r.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var u=i();s({data:l,addLength1:!0,objectId:u}),a("endobj");var d=i();s({data:n(r.metadata.toUnicode),addLength1:!0,objectId:d}),a("endobj");var h=i();a("<<"),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a("/StemV "+r.metadata.stemV),a("/Type /FontDescriptor"),a("/FontFile2 "+u+" 0 R"),a("/Flags 96"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/FontName /"+wI(r.fontName)),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a(">>"),a("endobj"),r.objectNumber=i();for(var f=0;f<r.metadata.hmtx.widths.length;f++)r.metadata.hmtx.widths[f]=parseInt(r.metadata.hmtx.widths[f]*(1e3/r.metadata.head.unitsPerEm));a("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+wI(r.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]);var a=function(e){var t,n=e.text||"",a=e.x,i=e.y,s=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,u=o.fonts,d=c,h="",f=0,m="",p=u[d].encoding;if("Identity-H"!==u[d].encoding)return{text:n,x:a,y:i,options:s,mutex:o};for(m=n,d=c,Array.isArray(n)&&(m=n[0]),f=0;f<m.length;f+=1)u[d].metadata.hasOwnProperty("cmap")&&(t=u[d].metadata.cmap.unicode.codeMap[m[f].charCodeAt(0)]),t||m[f].charCodeAt(0)<256&&u[d].metadata.hasOwnProperty("Unicode")?h+=m[f]:h+="";var g="";return parseInt(d.slice(1))<14||"WinAnsiEncoding"===p?g=l(h,d).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===p&&(g=r(h,u[d])),o.isHex=!0,{text:g,x:a,y:i,options:s,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",r=[],n={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var i=0;for(i=0;i<t.length;i+=1)Array.isArray(t[i])&&3===t[i].length?r.push([a(Object.assign({},n,{text:t[i][0]})).text,t[i][1],t[i][2]]):r.push(a(Object.assign({},n,{text:t[i]})).text);e.text=r}else e.text=a(Object.assign({},n,{text:t})).text}])}(AI),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(AI.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var r,n,a,i,s,o,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,y=0;this.__bidiEngine__={};var v=function(e){var t=e.charCodeAt(),r=t>>8,n=f[r];return void 0!==n?c[256*n+(255&t)]:252===r||253===r?"AL":p.test(r)?"L":8===r?"R":"N"},b=function(e){for(var t,r=0;r<e.length;r++){if("L"===(t=v(e.charAt(r))))return!1;if("R"===t)return!0}return!1},x=function(e,t,s,o){var l,c,u,d,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=s[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?s[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===s[o-1]){h="EN";break}if(g){h="N";break}for(u=o+1,d=t.length;u<d&&"ET"===t[u];)u++;h=u<d&&"EN"===t[u]?"EN":"N";break;case"NSM":if(a&&!i){for(d=t.length,u=o+1;u<d&&"NSM"===t[u];)u++;if(u<d){var f=e[o],m=f>=1425&&f<=2303||64286===f;if(l=t[u],m&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":s[o-1];break;case"B":g=!1,r=!0,h=y;break;case"S":n=!0,h="N"}return h},w=function(e,t,r){var n=e.split("");return r&&N(n,r,{hiLevel:y}),n.reverse(),t&&t.reverse(),n.join("")},N=function(e,t,a){var i,s,o,l,c,f=-1,m=e.length,p=0,b=[],w=y?d:u,N=[];for(g=!1,r=!1,n=!1,s=0;s<m;s++)N[s]=v(e[s]);for(o=0;o<m;o++){if(c=p,b[o]=x(e,N,b,o),i=240&(p=w[c][h[b[o]]]),p&=15,t[o]=l=w[p][5],i>0)if(16===i){for(s=f;s<o;s++)t[s]=1;f=-1}else f=-1;if(w[p][6])-1===f&&(f=o);else if(f>-1){for(s=f;s<o;s++)t[s]=l;f=-1}"B"===N[o]&&(t[o]=0),a.hiLevel|=l}n&&function(e,t,r){for(var n=0;n<r;n++)if("S"===e[n]){t[n]=y;for(var a=n-1;a>=0&&"WS"===e[a];a--)t[a]=y}}(N,t,m)},S=function(e,t,n,a,i){if(!(i.hiLevel<e)){if(1===e&&1===y&&!r)return t.reverse(),void(n&&n.reverse());for(var s,o,l,c,u=t.length,d=0;d<u;){if(a[d]>=e){for(l=d+1;l<u&&a[l]>=e;)l++;for(c=d,o=l-1;c<o;c++,o--)s=t[c],t[c]=t[o],t[o]=s,n&&(s=n[c],n[c]=n[o],n[o]=s);d=l}d++}}},_=function(e,t,r){var n=e.split(""),a={hiLevel:y};return r||(r=[]),N(n,r,a),function(e,t,r){if(0!==r.hiLevel&&l)for(var n,a=0;a<e.length;a++)1===t[a]&&(n=m.indexOf(e[a]))>=0&&(e[a]=m[n+1])}(n,r,a),S(2,n,t,r,a),S(1,n,t,r,a),n.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,r){if(function(e,t){if(t)for(var r=0;r<e.length;r++)t[r]=r;void 0===i&&(i=b(e)),void 0===o&&(o=b(e))}(e,t),a||!s||o)if(a&&s&&i^o)y=i?1:0,e=w(e,t,r);else if(!a&&s&&o)y=i?1:0,e=_(e,t,r),e=w(e,t);else if(!a||i||s||o){if(a&&!s&&i^o)e=w(e,t),i?(y=0,e=_(e,t,r)):(y=1,e=_(e,t,r),e=w(e,t));else if(a&&i&&!s&&o)y=1,e=_(e,t,r),e=w(e,t);else if(!a&&!s&&i^o){var n=l;i?(y=1,e=_(e,t,r),y=0,l=!1,e=_(e,t,r),l=n):(y=0,e=_(e,t,r),e=w(e,t),y=1,l=!1,e=_(e,t,r),l=n,e=w(e,t))}}else y=0,e=_(e,t,r);else y=i?1:0,e=_(e,t,r);return e},this.__bidiEngine__.setOptions=function(e){e&&(a=e.isInputVisual,s=e.isOutputVisual,i=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var n=e.options||{};e.mutex,n.lang;var a=[];if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,r.setOptions(n),"[object Array]"===Object.prototype.toString.call(t)){var i=0;for(a=[],i=0;i<t.length;i+=1)"[object Array]"===Object.prototype.toString.call(t[i])?a.push([r.doBidiReorder(t[i][0]),t[i][1],t[i][2]]):a.push([r.doBidiReorder(t[i])]);e.text=a}else e.text=r.doBidiReorder(t);r.setOptions({isInputVisual:!0})}])}(AI),AI.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new WL(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new dP(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new VL(this.contents),this.head=new JL(this),this.name=new nP(this),this.cmap=new QL(this),this.toUnicode={},this.hhea=new ZL(this),this.maxp=new aP(this),this.hmtx=new iP(this),this.post=new tP(this),this.os2=new eP(this),this.loca=new uP(this),this.glyf=new oP(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,r,n,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,r,n,a;for(a=[],t=0,r=(n=this.bbox).length;t<r;t++)e=n[t],a.push(Math.round(e*this.scaleFactor));return a}.call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),0!=(32768&(t=n>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(a=this.familyClass)||2===a||3===a||4===a||5===a||7===a,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,r){var n,a,i,s;for(i=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)n=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/t)||0;return i*(t/1e3)},e.prototype.lineHeight=function(e,t){var r;return null==t&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},e}();var GL,WL=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(e){var t,r,n;for(n=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)n.push(this.writeByte(e.charCodeAt(t)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,r,n,a,i,s,o;return e=this.readByte(),t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^a)+65536*(255^i)+256*(255^s)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*n+16777216*a+65536*i+256*s+o},e.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(e){var t,r,n,a;for(a=[],r=0,n=e.length;r<n;r++)t=e[r],a.push(this.writeByte(t));return a},e}(),VL=function(){var e;function t(e){var t,r,n;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,n=this.tableCount;0<=n?r<n:r>n;r=0<=n?++r:--r)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var r,n,a,i,s,o,l,c,u,d,h,f,m;for(m in h=Object.keys(t).length,o=Math.log(2),u=16*Math.floor(Math.log(h)/o),i=Math.floor(u/o),c=16*h-u,(n=new WL).writeInt(this.scalarType),n.writeShort(h),n.writeShort(u),n.writeShort(i),n.writeShort(c),a=16*h,l=n.pos+a,s=null,f=[],t)for(d=t[m],n.writeString(m),n.writeInt(e(d)),n.writeInt(l),n.writeInt(d.length),f=f.concat(d),"head"===m&&(s=l),l+=d.length;l%4;)f.push(0),l++;return n.write(f),r=2981146554-e(n.data),n.pos=s+8,n.writeUInt32(r),n.data},e=function(e){var t,r,n,a;for(e=sP.call(e);e.length%4;)e.push(0);for(n=new WL(e),r=0,t=0,a=e.length;t<a;t=t+=4)r+=n.readUInt32();return 4294967295&r},t}(),KL={}.hasOwnProperty,YL=function(e,t){for(var r in t)KL.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};GL=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var JL=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new WL).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),XL=function(){function e(e,t){var r,n,a,i,s,o,l,c,u,d,h,f,m,p,g,y,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),d=h/2,e.pos+=6,a=function(){var t,r;for(r=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)r.push(e.readUInt16());return r}(),e.pos+=2,m=function(){var t,r;for(r=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)r.push(e.readUInt16());return r}(),l=function(){var t,r;for(r=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)r.push(e.readUInt16());return r}(),c=function(){var t,r;for(r=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)r.push(e.readUInt16());return r}(),n=(this.length-e.pos+this.offset)/2,s=function(){var t,r;for(r=[],o=t=0;0<=n?t<n:t>n;o=0<=n?++t:--t)r.push(e.readUInt16());return r}(),o=g=0,v=a.length;g<v;o=++g)for(p=a[o],r=y=f=m[o];f<=p?y<=p:y>=p;r=f<=p?++y:--y)0===c[o]?i=r+l[o]:0!==(i=s[c[o]/2+(r-f)-(d-o)]||0)&&(i+=l[o]),this.codeMap[r]=65535&i}e.pos=u}return e.encode=function(e,t){var r,n,a,i,s,o,l,c,u,d,h,f,m,p,g,y,v,b,x,w,N,S,_,j,E,A,k,C,O,T,R,I,L,P,D,M,F,B,U,z,H,$,q,G,W,V;switch(C=new WL,i=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(m=0,p=function(){var e=[];for(f=0;f<256;++f)e.push(0);return e}(),y={0:0},a={},O=0,L=i.length;O<L;O++)null==y[q=e[n=i[O]]]&&(y[q]=++m),a[n]={old:e[n],new:y[e[n]]},p[n]=y[e[n]];return C.writeUInt16(1),C.writeUInt16(0),C.writeUInt32(12),C.writeUInt16(0),C.writeUInt16(262),C.writeUInt16(0),C.write(p),{charMap:a,subtable:C.data,maxGlyphID:m+1};case"unicode":for(A=[],u=[],v=0,y={},r={},g=l=null,T=0,P=i.length;T<P;T++)null==y[x=e[n=i[T]]]&&(y[x]=++v),r[n]={old:x,new:y[x]},s=y[x]-n,null!=g&&s===l||(g&&u.push(g),A.push(n),l=s),g=n;for(g&&u.push(g),u.push(65535),A.push(65535),j=2*(_=A.length),S=2*Math.pow(Math.log(_)/Math.LN2,2),d=Math.log(S/2)/Math.LN2,N=2*_-S,o=[],w=[],h=[],f=R=0,D=A.length;R<D;f=++R){if(E=A[f],c=u[f],65535===E){o.push(0),w.push(0);break}if(E-(k=r[E].new)>=32768)for(o.push(0),w.push(2*(h.length+_-f)),n=I=E;E<=c?I<=c:I>=c;n=E<=c?++I:--I)h.push(r[n].new);else o.push(k-E),w.push(0)}for(C.writeUInt16(3),C.writeUInt16(1),C.writeUInt32(12),C.writeUInt16(4),C.writeUInt16(16+8*_+2*h.length),C.writeUInt16(0),C.writeUInt16(j),C.writeUInt16(S),C.writeUInt16(d),C.writeUInt16(N),H=0,M=u.length;H<M;H++)n=u[H],C.writeUInt16(n);for(C.writeUInt16(0),$=0,F=A.length;$<F;$++)n=A[$],C.writeUInt16(n);for(G=0,B=o.length;G<B;G++)s=o[G],C.writeUInt16(s);for(W=0,U=w.length;W<U;W++)b=w[W],C.writeUInt16(b);for(V=0,z=h.length;V<z;V++)m=h[V],C.writeUInt16(m);return{charMap:r,subtable:C.data,maxGlyphID:v+1}}},e}(),QL=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,r,n;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t=new XL(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var r,n;return null==t&&(t="macroman"),r=XL.encode(e,t),(n=new WL).writeUInt16(0),n.writeUInt16(1),r.table=n.data.concat(r.subtable),r},e}(),ZL=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),eP=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),tP=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="post",e.prototype.parse=function(e){var t,r,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)t=e.readByte(),n.push(this.names.push(e.readString(t)));return n;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=function(){var t,r,n;for(n=[],a=t=0,r=this.file.maxp.numGlyphs;0<=r?t<r:t>r;a=0<=r?++t:--t)n.push(e.readUInt32());return n}.call(this)}},e}(),rP=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},nP=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="name",e.prototype.parse=function(e){var t,r,n,a,i,s,o,l,c,u,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(o={},a=c=0,u=r.length;c<u;a=++c)n=r[a],e.pos=n.offset,l=e.readString(n.length),i=new rP(l,n),null==o[d=n.nameID]&&(o[d]=[]),o[n.nameID].push(i);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),aP=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),iP=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,r,n,a,i,s,o;for(e.pos=this.offset,this.metrics=[],t=0,s=this.file.hhea.numberOfMetrics;0<=s?t<s:t>s;t=0<=s?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var r,a;for(a=[],t=r=0;0<=n?r<n:r>n;t=0<=n?++r:--r)a.push(e.readInt16());return a}(),this.widths=function(){var e,t,r,n;for(n=[],e=0,t=(r=this.metrics).length;e<t;e++)a=r[e],n.push(a.advance);return n}.call(this),r=this.widths[this.widths.length-1],o=[],t=i=0;0<=n?i<n:i>n;t=0<=n?++i:--i)o.push(this.widths.push(r));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),sP=[].slice,oP=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,r,n,a,i,s,o,l,c,u;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),0===(n=a.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+r,i=(s=new WL(t.read(n))).readShort(),l=s.readShort(),u=s.readShort(),o=s.readShort(),c=s.readShort(),this.cache[e]=-1===i?new cP(s,l,u,o,c):new lP(s,i,l,u,o,c),this.cache[e]))},e.prototype.encode=function(e,t,r){var n,a,i,s,o;for(i=[],a=[],s=0,o=t.length;s<o;s++)n=e[t[s]],a.push(i.length),n&&(i=i.concat(n.encode(r)));return a.push(i.length),{table:i,offsets:a}},e}(),lP=function(){function e(e,t,r,n,a,i){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),cP=function(){function e(e,t,r,n,a){var i,s;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=n,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;s=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&s;)i.pos+=1&s?4:2,128&s?i.pos+=8:64&s?i.pos+=4:8&s&&(i.pos+=2)}return e.prototype.encode=function(){var e,t,r;for(t=new WL(sP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),uP=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return YL(e,GL),e.prototype.tag="loca",e.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=2)n.push(2*e.readUInt16());return n}.call(this):function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=4)n.push(e.readUInt32());return n}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),n=0,a=0,i=0;i<r.length;++i)if(r[i]=n,a<t.length&&t[a]==i){++a,r[i]=n;var s=this.offsets[i],o=this.offsets[i+1]-s;o>0&&(n+=o)}for(var l=new Array(4*r.length),c=0;c<r.length;++c)l[4*c+3]=255&r[c],l[4*c+2]=(65280&r[c])>>8,l[4*c+1]=(16711680&r[c])>>16,l[4*c]=(4278190080&r[c])>>24;return l},e}(),dP=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,r,n,a;for(t in n=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=n[r];return e},e.prototype.glyphsFor=function(e){var t,r,n,a,i,s,o;for(n={},i=0,s=e.length;i<s;i++)n[a=e[i]]=this.font.glyf.glyphFor(a);for(a in t=[],n)(null!=(r=n[a])?r.compound:void 0)&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in o=this.glyphsFor(t))r=o[a],n[a]=r;return n},e.prototype.encode=function(e,t){var r,n,a,i,s,o,l,c,u,d,h,f,m,p,g;for(n in r=QL.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),h={0:0},g=r.charMap)h[(o=g[n]).old]=o.new;for(f in d=r.maxGlyphID,i)f in h||(h[f]=d++);return c=function(e){var t,r;for(t in r={},e)r[e[t]]=t;return r}(h),u=Object.keys(c).sort(function(e,t){return e-t}),m=function(){var e,t,r;for(r=[],e=0,t=u.length;e<t;e++)s=u[e],r.push(c[s]);return r}(),a=this.font.glyf.encode(i,m,h),l=this.font.loca.encode(a.offsets,m),p={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();function hP(e,t,r,n,a){n=n||{};var i=a.internal.scaleFactor,s=a.internal.getFontSize()/i,o=s*(a.getLineHeightFactor?a.getLineHeightFactor():1.15),l="",c=1;if("middle"!==n.valign&&"bottom"!==n.valign&&"center"!==n.halign&&"right"!==n.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),r+=s*(2-1.15),"middle"===n.valign?r-=c/2*o:"bottom"===n.valign&&(r-=c*o),"center"===n.halign||"right"===n.halign){var u=s;if("center"===n.halign&&(u*=.5),l&&c>=1){for(var d=0;d<l.length;d++)a.text(l[d],t-a.getStringUnitWidth(l[d])*u,r),r+=o;return a}t-=a.getStringUnitWidth(e)*u}return"justify"===n.halign?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}AI.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(r){var n,a,i,s;if(Array.isArray(r))return"["+function(){var e,a,i;for(i=[],e=0,a=r.length;e<a;e++)n=r[e],i.push(t.convert(n));return i}().join(" ")+"]";if("string"==typeof r)return"/"+r;if(null!=r?r.isString:void 0)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(r)){for(a in i=["<<"],r)s=r[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join("\n")}return""+r},t}();var fP={},mP=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:fP=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,r){var n,a,i;void 0===r&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(o)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),(u=e.unifyColor(t.textColor))&&(a=this.jsPDFDocument).setTextColor.apply(a,u),(u=e.unifyColor(t.lineColor))&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},e.prototype.rect=function(e,t,r,n,a){return this.jsPDFDocument.rect(e,t,r,n,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return fP||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),pP=function(e,t){return pP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},pP(e,t)};function gP(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}pP(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}"function"===typeof SuppressedError&&SuppressedError;var yP=function(e){function t(t){var r=e.call(this)||this;return r._element=t,r}return gP(t,e),t}(Array);function vP(e,t,r){r.applyStyles(t,!0);var n=(Array.isArray(e)?e:[e]).map(function(e){return r.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0);return n}function bP(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=xP(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function xP(e,t){var r=e>0,n=t||0===t;return r&&n?"DF":r?"S":n?"F":null}function wP(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(r=e.left)&&void 0!==r?r:t,top:null!==(n=e.top)&&void 0!==n?n:t,right:null!==(a=e.right)&&void 0!==a?a:t,bottom:null!==(i=e.bottom)&&void 0!==i?i:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}function NP(e,t){var r=wP(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function SP(e,t,r,n,a){var i={},s=96/72,o=_P(t,function(e){return a.getComputedStyle(e).backgroundColor});null!=o&&(i.fillColor=o);var l=_P(t,function(e){return a.getComputedStyle(e).color});null!=l&&(i.textColor=l);var c=function(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(e){return parseInt(e||"0")/n}),s=wP(i,0);a>s.top&&(s.top=a);a>s.bottom&&(s.bottom=a);return s}(n,r);c&&(i.cellPadding=c);var u="borderTopColor",d=s*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var f=(parseFloat(h)||0)/d;f&&(i.lineWidth=f)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/d,right:(parseFloat(n.borderRightWidth)||0)/d,bottom:(parseFloat(n.borderBottomWidth)||0)/d,left:(parseFloat(n.borderLeftWidth)||0)/d},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var m=_P(t,function(e){return a.getComputedStyle(e)[u]});null!=m&&(i.lineColor=m);var p=["left","right","center","justify"];-1!==p.indexOf(n.textAlign)&&(i.halign=n.textAlign),-1!==(p=["middle","bottom","top"]).indexOf(n.verticalAlign)&&(i.valign=n.verticalAlign);var g=parseInt(n.fontSize||"");isNaN(g)||(i.fontSize=g/s);var y=function(e){var t="";("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold");"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic");return t}(n);y&&(i.fontStyle=y);var v=(n.fontFamily||"").toLowerCase();return-1!==e.indexOf(v)&&(i.font=v),i}function _P(e,t){var r=jP(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];return 0===parseInt(n[4])||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function jP(e,t){var r=t(e);return"rgba(0, 0, 0, 0)"===r||"transparent"===r||"initial"===r||"inherit"===r?null==e.parentElement?null:jP(e.parentElement,t):r}function EP(e,t,r,n,a){var i,s,o;void 0===n&&(n=!1),void 0===a&&(a=!1),o="string"===typeof t?r.document.querySelector(t):t;var l=Object.keys(e.getFontList()),c=e.scaleFactor(),u=[],d=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:u,body:d,foot:h};for(var f=0;f<o.rows.length;f++){var m=o.rows[f],p=null===(s=null===(i=null===m||void 0===m?void 0:m.parentElement)||void 0===i?void 0:i.tagName)||void 0===s?void 0:s.toLowerCase(),g=AP(l,c,r,m,n,a);g&&("thead"===p?u.push(g):"tfoot"===p?h.push(g):d.push(g))}return{head:u,body:d,foot:h}}function AP(e,t,r,n,a,i){for(var s=new yP(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(a||"none"!==c.display){var u=void 0;i&&(u=SP(e,l,t,c,r)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:kP(l)})}}var d=r.getComputedStyle(n);if(s.length>0&&(a||"none"!==d.display))return s}function kP(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}function CP(e,t,r,n,a){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i}function OP(e,t){var r=new mP(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();!function(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&"object"!==typeof i&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&"number"!==typeof i.startY&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}(a,n,t);var i,s=CP({},a,n,t);"undefined"!==typeof window&&(i=window);var o=function(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(a){if("columnStyles"===a){var i=e[a],s=t[a],o=r[a];n.columnStyles=CP({},i,s,o)}else{var l=[e,t,r].map(function(e){return e[a]||{}});n[a]=CP({},l[0],l[1],l[2])}},i=0,s=Object.keys(n);i<s.length;i++){a(s[i])}return n}(a,n,t),l=function(e,t,r){for(var n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=[e,t,r];a<i.length;a++){var s=i[a];s.didParseCell&&n.didParseCell.push(s.didParseCell),s.willDrawCell&&n.willDrawCell.push(s.willDrawCell),s.didDrawCell&&n.didDrawCell.push(s.didDrawCell),s.willDrawPage&&n.willDrawPage.push(s.willDrawPage),s.didDrawPage&&n.didDrawPage.push(s.didDrawPage)}return n}(a,n,t),c=function(e,t){var r,n,a,i,s,o,l,c,u,d,h,f,m,p,g=wP(t.margin,40/e.scaleFactor()),y=null!==(r=function(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){i=r.startPageNumber+r.pageNumber-1===a}if("number"===typeof t)return t;if((null==t||!1===t)&&i&&null!=(null===r||void 0===r?void 0:r.finalY))return r.finalY+20/n;return null}(e,t.startY))&&void 0!==r?r:g.top;m=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(n=t.showFoot)&&void 0!==n?n:"everyPage";p=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(a=t.showHead)&&void 0!==a?a:"everyPage";var v=null!==(i=t.useCss)&&void 0!==i&&i,b=t.theme||(v?"plain":"striped"),x=!!t.horizontalPageBreak,w=null!==(s=t.horizontalPageBreakRepeat)&&void 0!==s?s:null;return{includeHiddenHtml:null!==(o=t.includeHiddenHtml)&&void 0!==o&&o,useCss:v,theme:b,startY:y,margin:g,pageBreak:null!==(l=t.pageBreak)&&void 0!==l?l:"auto",rowPageBreak:null!==(c=t.rowPageBreak)&&void 0!==c?c:"auto",tableWidth:null!==(u=t.tableWidth)&&void 0!==u?u:"auto",showHead:p,showFoot:m,tableLineWidth:null!==(d=t.tableLineWidth)&&void 0!==d?d:0,tableLineColor:null!==(h=t.tableLineColor)&&void 0!==h?h:200,horizontalPageBreak:x,horizontalPageBreakRepeat:w,horizontalPageBreakBehaviour:null!==(f=t.horizontalPageBreakBehaviour)&&void 0!==f?f:"afterAllRows"}}(r,s),u=function(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=EP(e,t.html,r,s,t.useCss)||{};n=o.head||n,a=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||function(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(e){return"_element"!==e}).forEach(function(e){var t,r=1;"object"!==typeof(t=Array.isArray(n)?n[parseInt(e)]:n[e])||Array.isArray(t)||(r=(null===t||void 0===t?void 0:t.colSpan)||1);for(var i=0;i<r;i++){var s={dataKey:Array.isArray(n)?a.length:e+(i>0?"_".concat(i):"")};a.push(s)}}),a}(n,a,i);return{columns:l,head:n,body:a,foot:i}}(r,s,i);return{id:t.tableId,content:u,hooks:l,styles:o,settings:c}}var TP,RP=function(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()},IP=function(e){function t(t,r,n,a,i,s){var o=e.call(this,t,r,s)||this;return o.cell=n,o.row=a,o.column=i,o.section=a.section,o}return gP(t,e),t}(RP),LP=function(){function e(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,r,n,a,i){for(var s=0,o=t;s<o.length;s++){var l=!1===(0,o[s])(new IP(e,this,r,n,a,i));if(r.text=Array.isArray(r.text)?r.text:[r.text],l)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,n=this.hooks.didDrawPage;r<n.length;r++){(0,n[r])(new RP(e,this,t))}},e.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,n=this.hooks.willDrawPage;r<n.length;r++){(0,n[r])(new RP(e,this,t))}},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}(),PP=function(){function e(e,t,r,n,a){void 0===a&&(a=!1),this.height=0,this.raw=e,e instanceof yP&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=n,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,r){var n;return Math.max(e,(null===(n=t.cells[r.index])||void 0===n?void 0:n.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var r=t.cells[e.index];return!!r&&r.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(e,n){var a=r.cells[n.index];if(!a)return 0;var i=t.getLineHeight(a.styles.fontSize),s=a.padding("vertical")+i;return s>e?s:e},0)},e}(),DP=function(){function e(e,t,r){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=null!==(n=e.content)&&void 0!==n?n:e,e._element&&(this.raw=e._element));var i=null!=a?""+a:"";this.text=i.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var n=this.width-this.padding("horizontal");t=this.x+n/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var r=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(r,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=wP(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}(),MP=function(){function e(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,n=e.allRows();r<n.length;r++){var a=n[r].cells[this.index];a&&"number"===typeof a.styles.cellWidth&&(t=Math.max(t,a.styles.cellWidth))}return t},e}();function FP(e,t){!function(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=NP(e,t);t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){var u=t.hooks.didParseCell;t.callCellHooks(e,u,c,i,l,null);var d=c.padding("horizontal");c.contentWidth=vP(c.text,c.styles,e)+d;var h=vP(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=h+c.padding("horizontal"),"number"===typeof c.styles.cellWidth)c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if("wrap"===c.styles.cellWidth||!0===n)c.contentWidth>a?(c.minWidth=a,c.wrappedWidth=a):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var f=10/r;c.minWidth=c.styles.minCellWidth||f,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(e){for(var r=0,n=t.columns;r<n.length;r++){var a=n[r],i=e.cells[a.index];if(i&&1===i.colSpan)a.wrappedWidth=Math.max(a.wrappedWidth,i.wrappedWidth),a.minWidth=Math.max(a.minWidth,i.minWidth),a.minReadableWidth=Math.max(a.minReadableWidth,i.minReadableWidth);else{var s=t.styles.columnStyles[a.dataKey]||t.styles.columnStyles[a.index]||{},o=s.cellWidth||s.minCellWidth;o&&"number"===typeof o&&(a.minWidth=o,a.wrappedWidth=o)}i&&(i.colSpan>1&&!a.minWidth&&(a.minWidth=i.minWidth),i.colSpan>1&&!a.wrappedWidth&&(a.wrappedWidth=i.minWidth))}})}(e,t);var r=[],n=0;t.columns.forEach(function(e){var a=e.getMaxCustomCellWidth(t);a?e.width=a:(e.width=e.wrappedWidth,r.push(e)),n+=e.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=BP(r,a,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),a&&(a=BP(r,a,function(e){return e.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),function(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,s=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if((s-=1)>1&&e.columns[o+1])i+=l.width,delete n.cells[l.index];else if(a){var c=a;delete n.cells[l.index],a=null,c.width=l.width+i}else{if(!(c=n.cells[l.index]))continue;if(s=c.colSpan,i=0,c.colSpan>1){a=c,i+=l.width;continue}c.width=l.width+i}}}(t),function(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){t.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if("linebreak"===c.styles.overflow)c.text=t.splitTextToSize(c.text,u+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if("ellipsize"===c.styles.overflow)c.text=UP(c.text,u,c.styles,t,"...");else if("hidden"===c.styles.overflow)c.text=UP(c.text,u,c.styles,t,"");else if("function"===typeof c.styles.overflow){var d=c.styles.overflow(c.text,u);c.text="string"===typeof d?[d]:d}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<h*c.rowSpan?r={height:h,count:c.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}(t,e),function(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=t[l.index];if(r>1)r--,delete i.cells[l.index];else if(c)c.cell.height+=i.height,r=c.cell.colSpan,delete i.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=i.cells[l.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var d=n.length-a,h=u.rowSpan>d?d:u.rowSpan;t[l.index]={cell:u,left:h,row:i}}}}}(t)}function BP(e,t,r){for(var n=t,a=e.reduce(function(e,t){return e+t.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],o=n*(s.wrappedWidth/a),l=s.width+o,c=r(s),u=l<c?c:l;t-=u-s.width,s.width=u}if(t=Math.round(1e10*t)/1e10){var d=e.filter(function(e){return!(t<0)||e.width>r(e)});d.length&&(t=BP(d,t,r))}return t}function UP(e,t,r,n,a){return e.map(function(e){return function(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=vP(e,r,n))return e;for(;t<vP(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}(e,t,r,n,a)})}function zP(e,t){var r=new mP(e),n=function(e,t){var r=e.content,n=function(e){return e.map(function(e,t){var r,n;return n="object"===typeof e&&null!==(r=e.dataKey)&&void 0!==r?r:t,new MP(n,e,t)})}(r.columns);if(0===r.head.length){(a=$P(n,"head"))&&r.head.push(a)}if(0===r.foot.length){var a;(a=$P(n,"foot"))&&r.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:n,head:HP("head",r.head,n,s,i,t),body:HP("body",r.body,n,s,i,t),foot:HP("foot",r.foot,n,s,i,t)}}(t,r.scaleFactor()),a=new LP(t,n);return FP(r,a),r.applyStyles(r.userStyles),a}function HP(e,t,r,n,a,i){var s={};return t.map(function(t,o){for(var l=0,c={},u=0,d=0,h=0,f=r;h<f.length;h++){var m=f[h];if(null==s[m.index]||0===s[m.index].left)if(0===d){var p=void 0,g={};"object"!==typeof(p=Array.isArray(t)?t[m.index-u-l]:t[m.dataKey])||Array.isArray(p)||(g=(null===p||void 0===p?void 0:p.styles)||{});var y=qP(e,m,o,a,n,i,g),v=new DP(p,y,e);c[m.dataKey]=v,c[m.index]=v,d=v.colSpan-1,s[m.index]={left:v.rowSpan-1,times:d}}else d--,u++;else s[m.index].left--,d=s[m.index].times,l++}return new PP(t,o,e,c)})}function $P(e,t){var r={};return e.forEach(function(e){if(null!=e.raw){var n=function(e,t){if("head"===e){if("object"===typeof t)return t.header||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=n&&(r[e.dataKey]=n)}}),Object.keys(r).length>0?r:null}function qP(e,t,r,n,a,i,s){var o,l={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[n];"head"===e?o=a.headStyles:"body"===e?o=a.bodyStyles:"foot"===e&&(o=a.footStyles);var c=CP({},l.table,l[e],a.styles,o),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},d="body"===e?u:{},h="body"===e&&r%2===0?CP({},l.alternateRow,a.alternateRowStyles):{},f=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}(i),m=CP({},f,c,h,d);return CP(m,s)}function GP(e,t,r){var n;void 0===r&&(r={});var a=NP(e,t),i=new Map,s=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(e){var r=t.columns.find(function(t){return t.dataKey===e||t.index===e});r&&!i.has(r.index)&&(i.set(r.index,!0),s.push(r.index),o.push(t.columns[r.index]),a-=r.wrappedWidth)});for(var c=!0,u=null!==(n=null===r||void 0===r?void 0:r.start)&&void 0!==n?n:0;u<t.columns.length;)if(i.has(u))u++;else{var d=t.columns[u].wrappedWidth;if(!(c||a>=d))break;c=!1,s.push(u),o.push(t.columns[u]),a-=d,u++}return{colIndexes:s,columns:o,lastIndex:u-1}}function WP(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+s;"avoid"===r.pageBreak&&(o+=t.body.reduce(function(e,t){return e+t.height},0));var l=new mP(e);("always"===r.pageBreak||null!=r.startY&&o>l.pageSize().height)&&(rD(l),i.y=a.top),t.callWillDrawPageHooks(l,i);var c=CP({},i);t.startPageNumber=l.pageNumber(),r.horizontalPageBreak?function(e,t,r,n){var a=function(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=GP(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}(e,t),i=t.settings;if("afterAllRows"===i.horizontalPageBreakBehaviour)a.forEach(function(a,i){e.applyStyles(e.userStyles),i>0?tD(e,t,r,n,a.columns,!0):VP(e,t,n,a.columns),function(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var o=s===t.body.length-1;XP(e,t,i,o,r,n,a)})}(e,t,r,n,a.columns),YP(e,t,n,a.columns)});else for(var s=-1,o=a[0],l=function(){var i=s;if(o){e.applyStyles(e.userStyles);var l=o.columns;s>=0?tD(e,t,r,n,l,!0):VP(e,t,n,l),i=KP(e,t,s+1,n,l),YP(e,t,n,l)}var c=i-s;a.slice(1).forEach(function(a){e.applyStyles(e.userStyles),tD(e,t,r,n,a.columns,!0),KP(e,t,s+1,n,a.columns,c),YP(e,t,n,a.columns)}),s=i};s<t.body.length-1;)l()}(l,t,c,i):(l.applyStyles(l.userStyles),"firstPage"!==r.showHead&&"everyPage"!==r.showHead||t.head.forEach(function(e){return QP(l,t,e,i,t.columns)}),l.applyStyles(l.userStyles),t.body.forEach(function(e,r){var n=r===t.body.length-1;XP(l,t,e,n,c,i,t.columns)}),l.applyStyles(l.userStyles),"lastPage"!==r.showFoot&&"everyPage"!==r.showFoot||t.foot.forEach(function(e){return QP(l,t,e,i,t.columns)})),bP(l,t,c,i),t.callEndPageHooks(l,i),t.finalY=i.y,e.lastAutoTable=t,l.applyStyles(l.userStyles)}function VP(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),"firstPage"!==a.showHead&&"everyPage"!==a.showHead||t.head.forEach(function(a){return QP(e,t,a,r,n)})}function KP(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=null!==i&&void 0!==i?i:t.body.length;var s=Math.min(r+i,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(i,s){var l=r+s===t.body.length-1,c=eD(e,t,l,n);i.canEntireRowFit(c,a)&&(QP(e,t,i,n,a),o=r+s)}),o}function YP(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),"lastPage"!==a.showFoot&&"everyPage"!==a.showFoot||t.foot.forEach(function(a){return QP(e,t,a,r,n)})}function JP(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function XP(e,t,r,n,a,i,s){var o=eD(e,t,n,i);if(r.canEntireRowFit(o,s))QP(e,t,r,i,s);else if(function(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,s=a-(i.top+i.bottom);"body"===t.section&&(s-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var o=t.getMinimumRowHeight(n.columns,e),l=o<r;if(o>s)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(n.columns);return t.getMaxCellHeight(n.columns)>s?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==n.settings.rowPageBreak}(e,r,o,t)){var l=function(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,o=r.columns;s<o.length;s++){var l=o[s];if(g=e.cells[l.index]){Array.isArray(g.text)||(g.text=[g.text]),(p=CP(p=new DP(g.raw,g.styles,g.section),g)).text=[];var c=JP(g,t,n);g.text.length>c&&(p.text=g.text.splice(c,g.text.length));var u=n.scaleFactor(),d=n.getLineHeightFactor();g.contentHeight=g.getContentHeight(u,d),g.contentHeight>=t&&(g.contentHeight=t,p.styles.minCellHeight-=t),g.contentHeight>e.height&&(e.height=g.contentHeight),p.contentHeight=p.getContentHeight(u,d),p.contentHeight>i&&(i=p.contentHeight),a[l.index]=p}}var h=new PP(e.raw,-1,e.section,a,!0);h.height=i;for(var f=0,m=r.columns;f<m.length;f++){var p,g;l=m[f],(p=h.cells[l.index])&&(p.height=h.height),(g=e.cells[l.index])&&(g.height=e.height)}return h}(r,o,t,e);QP(e,t,r,i,s),tD(e,t,a,i,s),XP(e,t,l,n,a,i,s)}else tD(e,t,a,i,s),XP(e,t,r,n,a,i,s)}function QP(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var o=s[i],l=r.cells[o.index];if(l)if(e.applyStyles(l.styles),l.x=n.x,l.y=n.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,l,r,o,n)){ZP(e,l,n);var c=l.getTextPos();hP(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,o,n),n.x+=o.width}else n.x+=o.width;else n.x+=o.width}n.y+=r.height}function ZP(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof n.lineWidth){var a=xP(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else"object"===typeof n.lineWidth&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),function(e,t,r,n){var a,i,s,o;n.top&&(a=r.x,i=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,i,s,o));n.bottom&&(a=r.x,i=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,i,s,o));n.left&&(a=r.x,i=r.y,s=r.x,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,a,i,s,o));n.right&&(a=r.x+t.width,i=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,a,i,s,o));function l(t,r,n,a,i){e.getDocument().setLineWidth(t),e.getDocument().line(r,n,a,i,"S")}}(e,t,r,n.lineWidth))}function eD(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return("everyPage"===i||"lastPage"===i&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function tD(e,t,r,n,a,i){void 0===a&&(a=[]),void 0===i&&(i=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||i||t.foot.forEach(function(r){return QP(e,t,r,n,a)}),t.callEndPageHooks(e,n);var s=t.settings.margin;bP(e,t,r,n),rD(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),"everyPage"===t.settings.showHead&&(t.head.forEach(function(r){return QP(e,t,r,n,a)}),e.applyStyles(e.userStyles))}function rD(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}function nD(e,t){WP(e,zP(e,OP(e,t)))}try{if("undefined"!==typeof window&&window){var aD=window,iD=aD.jsPDF||(null===(TP=aD.jspdf)||void 0===TP?void 0:TP.jsPDF);iD&&function(e){e.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return WP(this,zP(this,OP(this,e[0]))),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(e,t,r,n){hP(e,t,r,n,this)},e.API.autoTableSetDefaults=function(e){return mP.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){mP.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var r;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=EP(new mP(this),e,window,t,!1),a=n.head,i=n.body,s=(null===(r=a[0])||void 0===r?void 0:r.map(function(e){return e.content}))||[];return{columns:s,rows:i,data:i}}}(iD)}}catch(AM){console.error("Could not apply autoTable plugin",AM)}const sD=(e,t)=>{const r=new AI;r.setProperties({title:`${t} Detailed Report - ${e.name}`,subject:"Individual Screening Report",author:"AML Platform",creator:"AML Platform"});const n=((e,t)=>{const r={id:e.id,name:e.name,score:e.score,source:t,generatedDate:(new Date).toISOString(),lastUpdated:new Date(Date.now()-30*Math.random()*24*60*60*1e3).toISOString(),confidence:Math.floor(40*Math.random())+60,status:"Active"};switch(t){case"Dow Jones":return{...r,reportType:"Dow Jones Risk & Compliance Report",riskCategory:e.score>=70?"High Risk":e.score>=40?"Medium Risk":"Low Risk",sanctions:e.score>=70?["OFAC SDN","UN Sanctions"]:[],pepStatus:e.score>=40?"Politically Exposed Person":"Not PEP",adverseMedia:e.score>=50?["Negative news coverage in 2023","Regulatory violations reported","Legal proceedings ongoing"]:[],businessRelationships:["Former director at Global Corp","Shareholder in Tech Solutions Ltd","Advisor to Government Agency"],riskFactors:["High-value transactions","Multiple jurisdictions","Complex ownership structure"],recommendations:["Enhanced due diligence required","Monitor for changes in status","Regular review recommended"],sourceDetails:{database:"Dow Jones Risk & Compliance",coverage:"Global sanctions, PEP, adverse media",updateFrequency:"Real-time",dataQuality:"Premium"}};case"Free Sources":return{...r,reportType:"Open Source Intelligence Report",sanctionsLists:e.score>=70?["OFAC SDN","UN 1267","EU Sanctions"]:[],watchlists:e.score>=40?["FBI Most Wanted","Interpol Red Notice"]:[],adverseMedia:e.score>=50?["Criminal investigation in 2022","Fraud allegations reported","Money laundering concerns"]:[],legalProceedings:e.score>=60?["Civil lawsuit pending","Regulatory investigation","Criminal charges filed"]:[],associations:["Known associates with criminal records","Suspicious business relationships","High-risk jurisdictions"],recommendations:["Immediate investigation required","Enhanced monitoring","Consider case creation"],sourceDetails:{database:"Multiple open sources",coverage:"Global sanctions, watchlists, media",updateFrequency:"Daily",dataQuality:"Standard"}};case"Central Bank":return{...r,reportType:"Central Bank Regulatory Report",regulatoryStatus:e.score>=70?"Under Investigation":"Compliant",licensing:e.score>=40?"License Suspended":"Active License",violations:e.score>=60?["Capital adequacy violations","Anti-money laundering failures","Reporting deficiencies"]:[],regulatoryActions:e.score>=70?["Cease and desist order","Civil monetary penalties","Enhanced supervision"]:[],complianceHistory:["Previous violations in 2021","Regulatory warnings issued","Compliance improvement plan"],recommendations:["Regulatory consultation required","Enhanced compliance monitoring","Regular regulatory reporting"],sourceDetails:{database:"Central Bank Registry",coverage:"Financial institution oversight",updateFrequency:"Weekly",dataQuality:"Official"}};case"Company Whitelist":return{...r,reportType:"Company Verification Report",verificationStatus:"Verified",businessRegistration:"Active",complianceRating:"Excellent",positiveIndicators:["Established business history","Strong financial position","Good compliance record","Reputable industry standing"],certifications:["ISO 9001 Certified","Industry Best Practices","Quality Management System"],businessMetrics:{yearsInBusiness:"15+ years",employeeCount:"500+ employees",annualRevenue:"$50M+",creditRating:"A+"},recommendations:["Standard due diligence","Routine monitoring","Continue normal operations"],sourceDetails:{database:"Company Whitelist",coverage:"Verified businesses",updateFrequency:"Monthly",dataQuality:"Verified"}};case"Company Blacklist":return{...r,reportType:"Company Risk Assessment Report",riskCategory:"High Risk",blacklistReason:e.score>=90?"Fraudulent Activity":"Compliance Violations",violations:["Securities fraud","Money laundering","False financial statements","Regulatory non-compliance"],enforcementActions:["Cease and desist orders","Civil penalties","Criminal investigations","Asset freezes"],associatedRisks:["Shell company operations","Suspicious transactions","High-risk jurisdictions","Complex ownership structure"],recommendations:["Immediate termination of relationship","Enhanced due diligence","Regulatory reporting required","Monitor for additional risks"],sourceDetails:{database:"Company Blacklist",coverage:"High-risk entities",updateFrequency:"Real-time",dataQuality:"Verified"}};case"UAE Lists":return{...r,reportType:"UAE Regulatory Report",uaeStatus:e.score>=70?"Under Investigation":"Compliant",regulatoryCategory:e.score>=40?"Enhanced Monitoring":"Standard",uaeViolations:e.score>=60?["Anti-money laundering violations","Reporting failures","Suspicious activity"]:[],localActions:e.score>=70?["Central Bank warnings","Regulatory fines","Enhanced supervision"]:[],businessRelationships:["Local business partnerships","Government contracts","Financial institution relationships"],recommendations:["UAE regulatory consultation","Enhanced local monitoring","Regular compliance reporting"],sourceDetails:{database:"UAE Regulatory Lists",coverage:"UAE-specific oversight",updateFrequency:"Weekly",dataQuality:"Official"}};default:return{...r,reportType:"General Screening Report",riskCategory:"Unknown",recommendations:["Additional verification required"],sourceDetails:{database:"Unknown",coverage:"Limited",updateFrequency:"Unknown",dataQuality:"Unknown"}}}})(e,t),a={header:{title:(i=n).reportType,id:i.id,name:i.name,score:i.score,riskCategory:i.riskCategory,generatedDate:new Date(i.generatedDate).toLocaleDateString(),lastUpdated:new Date(i.lastUpdated).toLocaleDateString(),confidence:`${i.confidence}%`,status:i.status},sections:{sanctions:i.sanctions||[],watchlists:i.watchlists||[],adverseMedia:i.adverseMedia||[],violations:i.violations||[],legalProceedings:i.legalProceedings||[],associations:i.associations||[],businessRelationships:i.businessRelationships||[],riskFactors:i.riskFactors||[],positiveIndicators:i.positiveIndicators||[],certifications:i.certifications||[],enforcementActions:i.enforcementActions||[],associatedRisks:i.associatedRisks||[],uaeViolations:i.uaeViolations||[],localActions:i.localActions||[],businessMetrics:i.businessMetrics||{},complianceHistory:i.complianceHistory||[]},recommendations:i.recommendations||[],sourceDetails:i.sourceDetails};var i;r.setFillColor(41,128,185),r.rect(0,0,220,30,"F"),r.setTextColor(255,255,255),r.setFontSize(18),r.setFont("helvetica","bold"),r.text(`${t} DETAILED REPORT`,105,15,{align:"center"}),r.setFontSize(12),r.setFont("helvetica","normal"),r.text(`Generated on: ${(new Date).toLocaleDateString()} at ${(new Date).toLocaleTimeString()}`,105,25,{align:"center"});let s=40;r.setTextColor(0,0,0),r.setFontSize(16),r.setFont("helvetica","bold"),r.text("1. BASIC INFORMATION",14,s),s+=10,r.setFontSize(10),r.setFont("helvetica","normal");const o=[["Field","Value"],["Name",a.header.name],["Report ID",a.header.id],["Risk Score",a.header.score.toString()],["Risk Category",a.header.riskCategory],["Confidence",a.header.confidence],["Status",a.header.status],["Generated Date",a.header.generatedDate],["Last Updated",a.header.lastUpdated]];if(nD(r,{head:[o[0]],body:o.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15,a.sections.sanctions.length>0||a.sections.watchlists.length>0){r.setFontSize(16),r.setFont("helvetica","bold"),r.text("2. SANCTIONS & WATCHLISTS",14,s),s+=10;const e=[["Type","List/Source"]];a.sections.sanctions.forEach(t=>{e.push(["Sanction",t])}),a.sections.watchlists.forEach(t=>{e.push(["Watchlist",t])}),nD(r,{head:[e[0]],body:e.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[220,53,69],textColor:[255,255,255]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15}if(a.sections.adverseMedia.length>0){r.setFontSize(16),r.setFont("helvetica","bold"),r.text("3. ADVERSE MEDIA",14,s),s+=10;const e=[["Media Item"]];a.sections.adverseMedia.forEach(t=>{e.push([t])}),nD(r,{head:[e[0]],body:e.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[255,193,7],textColor:[0,0,0]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15}if(a.sections.violations.length>0||a.sections.legalProceedings.length>0){r.setFontSize(16),r.setFont("helvetica","bold"),r.text("4. VIOLATIONS & LEGAL PROCEEDINGS",14,s),s+=10;const e=[["Type","Description"]];a.sections.violations.forEach(t=>{e.push(["Violation",t])}),a.sections.legalProceedings.forEach(t=>{e.push(["Legal Proceeding",t])}),nD(r,{head:[e[0]],body:e.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[220,53,69],textColor:[255,255,255]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15}if(a.sections.businessRelationships.length>0){r.setFontSize(16),r.setFont("helvetica","bold"),r.text("5. BUSINESS RELATIONSHIPS",14,s),s+=10;const e=[["Relationship"]];a.sections.businessRelationships.forEach(t=>{e.push([t])}),nD(r,{head:[e[0]],body:e.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[13,110,253],textColor:[255,255,255]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15}if(a.sections.positiveIndicators.length>0){r.setFontSize(16),r.setFont("helvetica","bold"),r.text("6. POSITIVE INDICATORS",14,s),s+=10;const e=[["Indicator"]];a.sections.positiveIndicators.forEach(t=>{e.push([t])}),nD(r,{head:[e[0]],body:e.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[25,135,84],textColor:[255,255,255]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15}if(Object.keys(a.sections.businessMetrics).length>0){r.setFontSize(16),r.setFont("helvetica","bold"),r.text("7. BUSINESS METRICS",14,s),s+=10;const e=[["Metric","Value"]];Object.entries(a.sections.businessMetrics).forEach(t=>{let[r,n]=t;e.push([r.replace(/([A-Z])/g," $1").trim(),n])}),nD(r,{head:[e[0]],body:e.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[108,117,125],textColor:[255,255,255]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15}r.setFontSize(16),r.setFont("helvetica","bold"),r.text("8. RECOMMENDATIONS",14,s),s+=10;const l=[["Recommendation"]];a.recommendations.forEach(e=>{l.push([e])}),nD(r,{head:[l[0]],body:l.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[111,66,193],textColor:[255,255,255]},margin:{left:14,right:14}}),s=r.lastAutoTable.finalY+15,r.setFontSize(16),r.setFont("helvetica","bold"),r.text("9. SOURCE INFORMATION",14,s),s+=10;const c=[["Field","Value"],["Database",a.sourceDetails.database],["Coverage",a.sourceDetails.coverage],["Update Frequency",a.sourceDetails.updateFrequency],["Data Quality",a.sourceDetails.dataQuality]];nD(r,{head:[c[0]],body:c.slice(1),startY:s,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14}});const u=r.internal.getNumberOfPages();for(let f=1;f<=u;f++)r.setPage(f),r.setFontSize(8),r.setTextColor(128,128,128),r.text(`Page ${f} of ${u}`,105,290,{align:"center"}),r.text("AML Platform - Individual Screening Report",105,295,{align:"center"});const d=r.output("blob"),h=URL.createObjectURL(d);window.open(h,"_blank");setTimeout(()=>{URL.revokeObjectURL(h)},1e3)},oD=()=>{const[e,r]=(0,t.useState)({fullName:"",entityType:"All",gender:"",dob:"",nationality:"",screeningList:"All",matchType:"Precise",remarks:""}),[n,a]=(0,t.useState)({}),[i,s]=(0,t.useState)({}),[o,l]=(0,t.useState)({dowjones:[],freeSource:[],centralBank:[],companyWhitelist:[],companyBlacklist:[],uaeList:[]}),[c,u]=(0,t.useState)(!1),d=(e,t)=>{switch(e){case"fullName":return t&&t.trim().length>100?"Full name must be less than 100 characters":t&&!/^[a-zA-Z\s\-'\.]+$/.test(t.trim())?"Full name can only contain letters, spaces, hyphens, apostrophes, and periods":"";case"entityType":case"gender":case"nationality":case"screeningList":case"matchType":default:return"";case"dob":if(t){const e=new Date,r=new Date(t);if(r>e)return"Date of birth cannot be in the future";if(e.getFullYear()-r.getFullYear()>120)return"Date of birth seems invalid (age over 120)"}return"";case"remarks":return t&&t.trim().length>500?"Remarks must be less than 500 characters":""}},h=e=>{const{name:t,value:n}=e.target;r(e=>({...e,[t]:n}));const i=d(t,n);a(e=>({...e,[t]:i}))},f=e=>{const{name:t}=e.target;s(e=>({...e,[t]:!0}))},m=(e,t)=>{try{sD(e,t),Ht.success(`${t} report opened in new window`)}catch(AM){console.error("Error generating detailed report:",AM),Ht.error("Failed to generate detailed report: "+AM.message)}},p=(e,t)=>{const r=t||[];return r.length>0?(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:[e," (",r.length," match",r.length>1?"es":"",")"]}),(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"table-auto w-full border border-gray-300 text-sm",children:[(0,Zt.jsx)("thead",{className:"bg-gray-100",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"p-2 border",children:"ID"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Name"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Score"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Search Type"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"List"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"DOB"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Country"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Title"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,Zt.jsx)("tbody",{children:r.map(t=>(0,Zt.jsxs)("tr",{className:"border",children:[(0,Zt.jsx)("td",{className:"p-2 border",children:t.id}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.name}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.score}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.searchType}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.searchList}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.dob||"-"}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.country}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.title}),(0,Zt.jsx)("td",{className:"p-2 border",children:(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>m(t,e),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors duration-200 shadow-sm",children:"View"}),(0,Zt.jsx)("button",{onClick:()=>m(t,e),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors duration-200 shadow-sm",children:"View Profile"})]})})]},t.id))})]})})]}):null};return(0,Zt.jsxs)("div",{className:"p-6 bg-white shadow rounded-md",children:[(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Instant Screening"}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),(0,Zt.jsx)("input",{name:"fullName",type:"text",value:e.fullName,onChange:h,onBlur:f,className:"w-full border p-2 rounded "+(i.fullName&&n.fullName?"border-red-500":"border-gray-300"),placeholder:"Enter full name"}),i.fullName&&n.fullName&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.fullName})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Entity Type"}),(0,Zt.jsxs)("select",{name:"entityType",value:e.entityType,onChange:h,onBlur:f,className:"w-full border p-2 rounded "+(i.entityType&&n.entityType?"border-red-500":"border-gray-300"),children:[(0,Zt.jsx)("option",{value:"All",children:"All"}),XO.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]}),i.entityType&&n.entityType&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.entityType})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Gender"}),(0,Zt.jsxs)("select",{name:"gender",value:e.gender,onChange:h,onBlur:f,className:"w-full border p-2 rounded "+(i.gender&&n.gender?"border-red-500":"border-gray-300"),children:[(0,Zt.jsx)("option",{value:"",children:"Select Gender"}),(0,Zt.jsx)("option",{value:"Male",children:"Male"}),(0,Zt.jsx)("option",{value:"Female",children:"Female"}),(0,Zt.jsx)("option",{value:"Other",children:"Other"})]}),i.gender&&n.gender&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.gender})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date of Birth"}),(0,Zt.jsx)("input",{name:"dob",type:"date",value:e.dob,onChange:h,onBlur:f,className:"w-full border p-2 rounded "+(i.dob&&n.dob?"border-red-500":"border-gray-300")}),i.dob&&n.dob&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.dob})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nationality"}),(0,Zt.jsxs)("select",{name:"nationality",value:e.nationality,onChange:h,onBlur:f,className:"w-full border p-2 rounded "+(i.nationality&&n.nationality?"border-red-500":"border-gray-300"),children:[(0,Zt.jsx)("option",{value:"",children:"Select Country"}),oO.map(e=>(0,Zt.jsx)("option",{value:e.code,children:e.name},e.code))]}),i.nationality&&n.nationality&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.nationality})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Screening List"}),(0,Zt.jsxs)("select",{name:"screeningList",value:e.screeningList,onChange:h,onBlur:f,className:"w-full border p-2 rounded "+(i.screeningList&&n.screeningList?"border-red-500":"border-gray-300"),children:[(0,Zt.jsx)("option",{value:"All",children:"All"}),(0,Zt.jsx)("option",{value:"Sanctions",children:"Sanctions"}),(0,Zt.jsx)("option",{value:"PEP",children:"PEP"}),(0,Zt.jsx)("option",{value:"Watchlists",children:"Watchlists"}),(0,Zt.jsx)("option",{value:"Adverse Media",children:"Adverse Media"})]}),i.screeningList&&n.screeningList&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.screeningList})]})]}),(0,Zt.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-4 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Match Type"}),(0,Zt.jsx)("div",{className:"flex gap-4",children:["Precise","Near","Broad"].map(t=>(0,Zt.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Zt.jsx)("input",{type:"radio",name:"matchType",value:t,checked:e.matchType===t,onChange:h,onBlur:f}),t]},t))}),i.matchType&&n.matchType&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.matchType})]}),(0,Zt.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Remarks"}),(0,Zt.jsx)("textarea",{name:"remarks",value:e.remarks,onChange:h,onBlur:f,className:"w-full border p-2 rounded "+(i.remarks&&n.remarks?"border-red-500":"border-gray-300"),rows:"2",placeholder:"Optional remarks about the screening request"}),i.remarks&&n.remarks&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.remarks}),e.remarks&&(0,Zt.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:[e.remarks.length,"/500 characters"]})]})]}),(0,Zt.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,Zt.jsx)("button",{onClick:async()=>{if(!(()=>{const t={};return Object.keys(e).forEach(r=>{const n=d(r,e[r]);n&&(t[r]=n)}),a(t),0===Object.keys(t).length})()){const t={};return Object.keys(e).forEach(e=>{t[e]=!0}),void s(t)}u(!0);try{const t={fullName:e.fullName||"Test Customer",entityType:"All"===e.entityType?"Individual":e.entityType||"Individual",gender:e.gender||"",dob:e.dob||"",nationality:e.nationality||"",screeningList:e.screeningList||"All",matchType:e.matchType||"Broad",remarks:e.remarks||""},r=await MO.performInstantScreening(null,t);r&&r.results?(l(r.results),Ht.success(`Screening completed! Found ${r.totalMatches||0} matches.`)):Ht.error("Screening failed. Please try again.")}catch(AM){console.error("Screening error:",AM),Ht.error("Screening failed: "+(AM.message||"Unknown error"))}finally{u(!1)}},className:"btn-primary",children:"Start Screening"}),(0,Zt.jsx)("button",{className:"btn-secondary",children:"Create Case"}),(0,Zt.jsx)("button",{onClick:()=>(e=>{const t=new AI;t.setFontSize(16),t.text("Instant Screening - Print Result",14,20);let r=30;const n=["ID","Record Type","Name","Score","Search Type","Primary Name","Search List","DOB","Country","Gender","Subsidiary","Title"];Object.entries(e).forEach(e=>{let[a,i]=e;if(Array.isArray(i)&&i.length>0){t.setFontSize(13),t.text(a,14,r),r+=6;const e=i.map((e,t)=>[e.id||t+1,e.recordType||"-",e.name||"-",e.score||"-",e.searchType||"-",e.primaryName||"-",e.searchList||"-",e.dateOfBirth||"-",e.countryTerritoryName||"-",e.gender||"-",e.isSubsidiary?"Yes":"No",e.title||"-"]);nD(t,{head:[n],body:e,startY:r,theme:"grid",styles:{fontSize:9},margin:{left:14,right:14}}),r=t.lastAutoTable.finalY+10}}),t.save("print_result.pdf")})(o),className:"px-4 py-2 rounded "+(o&&Object.values(o).some(e=>e&&e.length>0)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-400 text-gray-600 cursor-not-allowed"),disabled:c||!o||!Object.values(o).some(e=>e&&e.length>0),children:"Print Result"}),(0,Zt.jsx)("button",{className:"btn-secondary",children:"Print PDF"}),(0,Zt.jsx)("button",{onClick:()=>{try{if(0===[...o.dowjones||[],...o.freeSource||[],...o.centralBank||[],...o.companyWhitelist||[],...o.companyBlacklist||[],...o.uaeList||[]].length)return void Ht.warning("No screening results available for advanced report.");((e,t)=>{try{const r=new AI;r.setProperties({title:"Advanced Screening Report",subject:"Comprehensive Screening Analysis",author:"AML Platform",creator:"AML Platform"}),r.setFillColor(41,128,185),r.rect(0,0,220,30,"F"),r.setTextColor(255,255,255),r.setFontSize(20),r.setFont("helvetica","bold"),r.text("ADVANCED SCREENING REPORT",105,15,{align:"center"}),r.setFontSize(12),r.setFont("helvetica","normal"),r.text(`Generated on: ${(new Date).toLocaleDateString()} at ${(new Date).toLocaleTimeString()}`,105,25,{align:"center"});let n=40;r.setTextColor(0,0,0),r.setFontSize(16),r.setFont("helvetica","bold"),r.text("1. CUSTOMER INFORMATION",14,n),n+=10,r.setFontSize(10),r.setFont("helvetica","normal");const a=[["Field","Value"],["Full Name",e.fullName||"Not Provided"],["Entity Type",e.entityType||"Not Specified"],["Nationality",e.nationality||"Not Provided"],["Gender",e.gender||"Not Provided"],["Date of Birth",e.dob||"Not Provided"]];nD(r,{head:[a[0]],body:a.slice(1),startY:n,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14}}),n=r.lastAutoTable.finalY+15,r.setFontSize(16),r.setFont("helvetica","bold"),r.text("2. SCREENING CRITERIA",14,n),n+=10,r.setFontSize(10),r.setFont("helvetica","normal");const i=[["Parameter","Value"],["Screening List",e.screeningList||"All"],["Match Type",e.matchType||"Broad"],["Remarks",e.remarks||"None"]];nD(r,{head:[i[0]],body:i.slice(1),startY:n,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14}}),n=r.lastAutoTable.finalY+15,r.setFontSize(16),r.setFont("helvetica","bold"),r.text("3. RESULTS SUMMARY",14,n),n+=10;const s=[...t.dowjones||[],...t.freeSource||[],...t.centralBank||[],...t.companyWhitelist||[],...t.companyBlacklist||[],...t.uaeList||[]],o=s.length,l=s.filter(e=>(e.score||0)>=70).length,c=s.filter(e=>(e.score||0)>=40&&(e.score||0)<70).length,u=s.filter(e=>(e.score||0)<40).length,d=Math.max(...s.map(e=>e.score||0),0),h=d>=70?"High":d>=40?"Medium":"Low",f=[["Metric","Count"],["Total Matches",o.toString()],["High Risk Matches (70+)",l.toString()],["Medium Risk Matches (40-69)",c.toString()],["Low Risk Matches (<40)",u.toString()],["Highest Risk Score",d.toString()],["Overall Risk Level",h]];nD(r,{head:[f[0]],body:f.slice(1),startY:n,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14}}),n=r.lastAutoTable.finalY+15,r.setFontSize(16),r.setFont("helvetica","bold"),r.text("4. SOURCES CHECKED",14,n),n+=10,r.setFontSize(10),r.setFont("helvetica","normal");const m=[["Source","Status","Matches Found"],["Dow Jones","Completed",((t.dowjones||[]).length||0).toString()],["Free Sources (OFAC, UN, Interpol, EU)","Completed",((t.freeSource||[]).length||0).toString()],["Central Banks","Completed",((t.centralBank||[]).length||0).toString()],["Company Whitelist","Completed",((t.companyWhitelist||[]).length||0).toString()],["Company Blacklist","Completed",((t.companyBlacklist||[]).length||0).toString()],["UAE Lists","Completed",((t.uaeList||[]).length||0).toString()]];nD(r,{head:[m[0]],body:m.slice(1),startY:n,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14}}),n=r.lastAutoTable.finalY+15,r.setFontSize(16),r.setFont("helvetica","bold"),r.text("5. RISK ASSESSMENT",14,n),n+=10,r.setFontSize(10),r.setFont("helvetica","normal");let p=[];p=d>=70?["Immediate investigation required","Enhanced due diligence recommended","Consider case creation","Monitor for additional risks"]:d>=40?["Additional verification recommended","Monitor for changes","Standard due diligence","Regular review required"]:["Standard procedures","Routine monitoring","No immediate action required","Continue normal operations"];const g=[["Risk Level",h],["Highest Score",d.toString()],["Total Matches",o.toString()],["Assessment Date",(new Date).toLocaleDateString()]];if(nD(r,{head:[["Risk Assessment","Value"]],body:g,startY:n,theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14}}),n=r.lastAutoTable.finalY+10,r.setFontSize(12),r.setFont("helvetica","bold"),r.text("Recommendations:",14,n),n+=8,r.setFontSize(10),r.setFont("helvetica","normal"),p.forEach((e,t)=>{r.text(`${t+1}. ${e}`,20,n),n+=6}),n+=10,o>0){r.setFontSize(16),r.setFont("helvetica","bold"),r.text("6. DETAILED RESULTS",14,n),n+=10;const e=s.map(e=>[(e.id||"N/A").toString(),(e.name||"N/A").toString(),(e.score||"N/A").toString(),(e.searchType||"N/A").toString(),(e.searchList||"N/A").toString(),(e.country||"N/A").toString(),(e.title||"N/A").toString(),(e.source||"N/A").toString()]);nD(r,{head:[["ID","Name","Score","Search Type","List","Country","Title","Source"]],body:e,startY:n,theme:"grid",styles:{fontSize:8},headStyles:{fillColor:[41,128,185],textColor:[255,255,255]},margin:{left:14,right:14},pageBreak:"auto"})}const y=r.internal.getNumberOfPages();for(let e=1;e<=y;e++)r.setPage(e),r.setFontSize(8),r.setTextColor(128,128,128),r.text(`Page ${e} of ${y}`,105,290,{align:"center"}),r.text("AML Platform - Advanced Screening Report",105,295,{align:"center"});const v=`advanced_screening_report_${e.fullName||"unknown"}_${Date.now()}.pdf`;r.save(v)}catch(AM){throw console.error("Error generating advanced screening report:",AM),new Error(`Failed to generate PDF: ${AM.message}`)}})(e,o),Ht.success("Advanced screening report generated successfully!")}catch(AM){console.error("Advanced report error:",AM),Ht.error("Failed to generate advanced report: "+AM.message)}},className:"px-4 py-2 rounded "+(o&&Object.values(o).some(e=>e&&e.length>0)?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-400 text-gray-600 cursor-not-allowed"),disabled:c||!o||!Object.values(o).some(e=>e&&e.length>0),children:"Advanced Screening Report"})]}),c&&(0,Zt.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-3 text-gray-600",children:"Performing screening..."})]}),!c&&(0,Zt.jsxs)(Zt.Fragment,{children:[p("DowJones",o.dowjones),p("Free Source",o.freeSource),p("Central Bank",o.centralBank),p("Company Whitelist Source",o.companyWhitelist),p("Company Blacklist Source",o.companyBlacklist),p("UAE List Source",o.uaeList),!c&&(!o.dowjones||0===o.dowjones.length)&&(!o.freeSource||0===o.freeSource.length)&&(!o.centralBank||0===o.centralBank.length)&&(!o.companyWhitelist||0===o.companyWhitelist.length)&&(!o.companyBlacklist||0===o.companyBlacklist.length)&&(!o.uaeList||0===o.uaeList.length)&&(0,Zt.jsxs)("div",{className:"text-center py-8",children:[(0,Zt.jsx)("p",{className:"text-gray-500",children:"No screening results found."}),(0,Zt.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Try adjusting your search criteria."})]})]})]})},lD=[{id:"alert-101",entity:"Acme Corp",screeningDate:"2025-08-04 09:00",alertType:"Sanction List Match",riskLevel:"High",status:"Open"},{id:"alert-102",entity:"John Doe",screeningDate:"2025-08-03 16:45",alertType:"Adverse Media",riskLevel:"Medium",status:"Under Review"},{id:"alert-103",entity:"Global Traders Ltd",screeningDate:"2025-08-02 11:15",alertType:"PEP Match",riskLevel:"Low",status:"Closed"}],cD=()=>{const[e,r]=(0,t.useState)(""),[n,a]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),c=lD.filter(t=>{const r=t.entity.toLowerCase().includes(e.toLowerCase()),a=""===n||t.alertType===n,s=""===i||t.riskLevel===i,l=""===o||t.status===o;return r&&a&&s&&l});return(0,Zt.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Ongoing Screening Alerts"}),(0,Zt.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search by entity",value:e,onChange:e=>r(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"}),(0,Zt.jsxs)("select",{value:n,onChange:e=>a(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300",children:[(0,Zt.jsx)("option",{value:"",children:"All Alert Types"}),(0,Zt.jsx)("option",{value:"Sanction List Match",children:"Sanction List Match"}),(0,Zt.jsx)("option",{value:"Adverse Media",children:"Adverse Media"}),(0,Zt.jsx)("option",{value:"PEP Match",children:"PEP Match"})]}),(0,Zt.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300",children:[(0,Zt.jsx)("option",{value:"",children:"All Risk Levels"}),(0,Zt.jsx)("option",{value:"High",children:"High"}),(0,Zt.jsx)("option",{value:"Medium",children:"Medium"}),(0,Zt.jsx)("option",{value:"Low",children:"Low"})]}),(0,Zt.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300",children:[(0,Zt.jsx)("option",{value:"",children:"All Statuses"}),(0,Zt.jsx)("option",{value:"Open",children:"Open"}),(0,Zt.jsx)("option",{value:"Under Review",children:"Under Review"}),(0,Zt.jsx)("option",{value:"Closed",children:"Closed"})]})]}),(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"w-full border border-gray-300 rounded",children:[(0,Zt.jsx)("thead",{className:"bg-gray-200 text-gray-700",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Entity"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Screening Date"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Alert Type"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Risk Level"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Status"}),(0,Zt.jsx)("th",{className:"p-3 text-left",children:"Actions"})]})}),(0,Zt.jsx)("tbody",{children:0===c.length?(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:6,className:"text-center p-4 text-gray-500",children:"No alerts found."})}):c.map(e=>(0,Zt.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.entity}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.screeningDate}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.alertType}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.riskLevel}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.status}),(0,Zt.jsxs)("td",{className:"p-3 border-t border-gray-300 space-x-2",children:[(0,Zt.jsx)(at,{to:`/screening/case/${e.id}`,className:"text-blue-600 hover:underline",children:"View"}),(0,Zt.jsx)("button",{onClick:()=>e(`Escalate ${e.entity} (mock)`),className:"px-2 py-1 bg-yellow-400 rounded text-sm hover:bg-yellow-500",children:"Escalate"}),(0,Zt.jsx)("button",{onClick:()=>e(`Close ${e.entity} (mock)`),className:"px-2 py-1 bg-red-500 rounded text-sm text-white hover:bg-red-600",children:"Close"})]})]},e.id))})]})})]})},uD=[{id:"case-002",entity:"Acme Corp",lastScreeningDate:"2025-08-03 15:20",riskLevel:"High",monitoringStatus:"Active"},{id:"case-005",entity:"Global Traders Ltd",lastScreeningDate:"2025-08-01 09:10",riskLevel:"Medium",monitoringStatus:"Active"},{id:"case-007",entity:"Jane Smith",lastScreeningDate:"2025-07-30 16:50",riskLevel:"Low",monitoringStatus:"Pending Review"}],dD=()=>{const[e,r]=(0,t.useState)(""),[n,a]=(0,t.useState)(""),i=uD.filter(t=>{const r=""===e||t.riskLevel.toLowerCase()===e.toLowerCase(),a=t.entity.toLowerCase().includes(n.toLowerCase());return r&&a});return(0,Zt.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Monitoring List"}),(0,Zt.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search by entity",value:n,onChange:e=>a(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"}),(0,Zt.jsxs)("select",{value:e,onChange:e=>r(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300",children:[(0,Zt.jsx)("option",{value:"",children:"All Risk Levels"}),(0,Zt.jsx)("option",{value:"High",children:"High"}),(0,Zt.jsx)("option",{value:"Medium",children:"Medium"}),(0,Zt.jsx)("option",{value:"Low",children:"Low"})]})]}),(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"w-full border border-gray-300 rounded",children:[(0,Zt.jsx)("thead",{className:"bg-gray-200 text-gray-700",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Entity"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Last Screening"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Risk Level"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Monitoring Status"}),(0,Zt.jsx)("th",{className:"p-3 text-left",children:"Details"})]})}),(0,Zt.jsx)("tbody",{children:0===i.length?(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No monitored entities found."})}):i.map(e=>(0,Zt.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.entity}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.lastScreeningDate}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.riskLevel}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.monitoringStatus}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:(0,Zt.jsx)(at,{to:`/screening/case/${e.id}`,className:"text-blue-600 hover:underline",children:"View Details"})})]},e.id))})]})})]})},hD=[{id:"case-001",screenedEntity:"John Doe",screeningType:"Instant",date:"2025-08-04 10:30",result:"No Match",riskScore:5},{id:"case-002",screenedEntity:"Acme Corp",screeningType:"Ongoing",date:"2025-08-03 15:20",result:"Match Found",riskScore:85},{id:"case-003",screenedEntity:"Jane Smith",screeningType:"Instant",date:"2025-08-02 11:45",result:"No Match",riskScore:10}],fD=()=>{const[e,r]=(0,t.useState)(""),[n,a]=(0,t.useState)(""),i=hD.filter(t=>{const r=""===e||t.result.toLowerCase()===e.toLowerCase(),a=t.screenedEntity.toLowerCase().includes(n.toLowerCase());return r&&a});return(0,Zt.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Screening History"}),(0,Zt.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search by entity",value:n,onChange:e=>a(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300"}),(0,Zt.jsxs)("select",{value:e,onChange:e=>r(e.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-300",children:[(0,Zt.jsx)("option",{value:"",children:"All Results"}),(0,Zt.jsx)("option",{value:"No Match",children:"No Match"}),(0,Zt.jsx)("option",{value:"Match Found",children:"Match Found"})]})]}),(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"w-full border border-gray-300 rounded",children:[(0,Zt.jsx)("thead",{className:"bg-gray-200 text-gray-700",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Date & Time"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Entity"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Screening Type"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Result"}),(0,Zt.jsx)("th",{className:"p-3 border-r border-gray-300 text-left",children:"Risk Score"}),(0,Zt.jsx)("th",{className:"p-3 text-left",children:"Details"})]})}),(0,Zt.jsx)("tbody",{children:0===i.length?(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:6,className:"text-center p-4 text-gray-500",children:"No screening cases found."})}):i.map(e=>(0,Zt.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.date}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.screenedEntity}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.screeningType}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.result}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:e.riskScore}),(0,Zt.jsx)("td",{className:"p-3 border-t border-gray-300",children:(0,Zt.jsx)(at,{to:`/screening/case/${e.id}`,className:"text-blue-600 hover:underline",children:"View Details"})})]},e.id))})]})})]})},mD={"case-002":{id:"case-002",entity:"Acme Corp",riskProfile:"High Risk",screeningType:"Ongoing",screeningDate:"2025-08-03 15:20",status:"Under Review",matches:[{type:"Sanction List",detail:"Matched with UN Sanctions"},{type:"Adverse Media",detail:"Negative news article"}],analystNotes:"Requires enhanced due diligence."},"case-005":{id:"case-005",entity:"Global Traders Ltd",riskProfile:"Medium Risk",screeningType:"Ongoing",screeningDate:"2025-08-01 09:10",status:"Active",matches:[{type:"PEP List",detail:"Politically exposed person"}],analystNotes:""}},pD=()=>{const{caseId:e}=ne(),r=re(),n=mD[e],[a,i]=(0,t.useState)((null===n||void 0===n?void 0:n.analystNotes)||"");return n?(0,Zt.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen max-w-4xl mx-auto",children:[(0,Zt.jsxs)("h2",{className:"text-2xl font-semibold mb-6",children:["Case Details - ",n.entity]}),(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("strong",{children:"Risk Profile:"})," ",n.riskProfile]}),(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("strong",{children:"Screening Type:"})," ",n.screeningType]}),(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("strong",{children:"Screening Date:"})," ",n.screeningDate]}),(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("strong",{children:"Status:"})," ",n.status]}),(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h3",{className:"font-semibold mb-2",children:"Matches Found:"}),0===n.matches.length?(0,Zt.jsx)("p",{children:"No matches found."}):(0,Zt.jsx)("ul",{className:"list-disc list-inside",children:n.matches.map((e,t)=>(0,Zt.jsxs)("li",{children:[(0,Zt.jsxs)("strong",{children:[e.type,":"]})," ",e.detail]},t))})]}),(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h3",{className:"font-semibold mb-2",children:"Analyst Notes:"}),(0,Zt.jsx)("textarea",{rows:5,className:"w-full border border-gray-300 rounded p-2 focus:outline-none focus:ring focus:ring-blue-300",value:a,onChange:e=>i(e.target.value),placeholder:"Add or update notes here..."})]}),(0,Zt.jsxs)("div",{className:"flex gap-4",children:[(0,Zt.jsx)("button",{onClick:()=>alert("Notes saved! (Implement actual save logic)"),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Save Notes"}),(0,Zt.jsx)("button",{onClick:()=>r(-1),className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Back to List"})]})]}):(0,Zt.jsxs)("div",{className:"p-6 text-center",children:[(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Case not found"}),(0,Zt.jsx)("button",{onClick:()=>r(-1),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Back"})]})},gD=()=>{const[e,r]=(0,t.useState)("manual"),[n,a]=(0,t.useState)(null),[i,s]=(0,t.useState)({customerName:"",customerId:"",customerType:"",directorId:"",directorName:"",descriptionOfReport:"",actionTakenByReportingEntity:"",date:"",internalReferenceNumber:"",transactionProduct:"",paymentMode:"",channel:"",sourceOfFunds:"",transactionPurpose:"",currency:"",rate:"",invoiceAmount:"",itemType:"",statusCode:"",reason:"",description:"",beneficiaryName:"",beneficiaryComments:"",lateDeposit:"",branch:"",indemnifiedForRepatriation:"",executedBy:"",amountLc:"",estimatedAmount:"",itemSize:"",itemUnit:"",statusComments:"",carrierName:"",carrierDetails:"",isStrIstr:!1}),[o,l]=(0,t.useState)({}),[c,u]=(0,t.useState)({}),[d,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)([]),[p,g]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[b,x]=(0,t.useState)(""),w=(0,t.useRef)(null),[N,S]=(0,t.useState)(null),[_,j]=(0,t.useState)([]),[E,A]=(0,t.useState)(!1),k=(e,t)=>{switch(e){case"customerName":return t.trim()?"":"Customer Name is required";case"directorId":return"Legal Entities"!==i.customerType||t?"":"Director/Representative is required for Legal Entities";case"descriptionOfReport":return t.trim()?"":"Description of the Report is required";case"actionTakenByReportingEntity":return t.trim()?"":"Action taken by reporting entity is required";case"date":return t?"":"Date is required";case"internalReferenceNumber":return t.trim()?"":"Internal reference number is required";case"transactionProduct":return t?"":"Transaction product is required";case"paymentMode":return t?"":"Payment Mode is required";case"channel":return t?"":"Channel is required";case"sourceOfFunds":return t?"":"Source of funds is required";case"transactionPurpose":return t?"":"Transaction purpose is required";case"currency":return t?"":"Currency is required";case"rate":if(!t)return"Rate is required";const e=parseFloat(t);return isNaN(e)||e<=0?"Rate must be a positive number":"";case"invoiceAmount":if(!t)return"Invoice amount is required";const r=parseFloat(t);return isNaN(r)||r<=0?"Invoice amount must be a positive number":"";case"itemType":return t?"":"Item type is required";case"statusCode":return t?"":"Status code is required";case"reason":return t.trim()?"":"Reason is required";case"description":return t.trim()?"":"Description is required";default:return""}},C=e=>{const{name:t,value:r,type:n,checked:a}=e.target,i="checkbox"===n?a:r;s(e=>({...e,[t]:i}));const o=k(t,i);l(e=>({...e,[t]:o}))},O=e=>{const{name:t}=e.target;u(e=>({...e,[t]:!0}))},T=e=>{if("Natural Person"===e.customer_type&&e.natural_person_details){return`${e.natural_person_details.firstname||""} ${e.natural_person_details.lastname||""}`.trim()||"Natural Person"}return"Legal Entities"===e.customer_type&&e.legal_entity_details?e.legal_entity_details.legalname||e.legal_entity_details.alias||"Legal Entity":e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`.trim():e.first_name||e.alias||"Customer"},R=async()=>{if(!(f.length>0)){g(!0);try{const e=await jO.getCustomers(1,1e3);e.success&&e.data&&m(e.data)}catch(AM){console.error("Error loading customers:",AM),Ht.error("Failed to load customers")}finally{g(!1)}}};(0,t.useEffect)(()=>{R()},[]),(0,t.useEffect)(()=>{const e=e=>{if(w.current&&!w.current.contains(e.target))if(v(!1),i.customerId){const e=f.find(e=>e.id===i.customerId);e&&x(T(e))}else x("")};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i.customerId,f]);const I=f.filter(e=>{if(!b.trim())return!0;const t=b.toLowerCase(),r=T(e).toLowerCase(),n=(e.customer_type||e.customerType||"").toLowerCase(),a=(e.id||"").toLowerCase();return r.includes(t)||n.includes(t)||a.includes(t)}),L=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";const l=c[e]&&o[e];if("checkbox"===r){const r=`checkbox-${e}`;return(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("div",{className:"h-7 mb-2"}),(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("input",{type:"checkbox",id:r,name:e,checked:i[e],onChange:C,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),(0,Zt.jsxs)("label",{htmlFor:r,className:"ml-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t," ",a&&(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]})]}),l&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o[e]})]})}return(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t," ",a&&(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),"select"===r?(0,Zt.jsxs)("select",{name:e,value:i[e],onChange:C,onBlur:O,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(l?"border-red-500":"border-gray-300"),children:[(0,Zt.jsxs)("option",{value:"",children:["Select ",t]}),n&&n.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]}):"textarea"===r?(0,Zt.jsx)("textarea",{name:e,value:i[e],onChange:C,onBlur:O,rows:3,placeholder:s,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(l?"border-red-500":"border-gray-300")}):(0,Zt.jsx)("input",{type:r,name:e,value:i[e],onChange:C,onBlur:O,placeholder:s,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(l?"border-red-500":"border-gray-300")}),l&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o[e]})]})};return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Add Transactions"}),(0,Zt.jsxs)("div",{className:"flex gap-4 border-b mb-6",children:[(0,Zt.jsx)("button",{className:"pb-2 "+("manual"===e?"border-b-2 border-blue-500 font-medium":"text-gray-500"),onClick:()=>r("manual"),children:"Manual Entry"}),(0,Zt.jsx)("button",{className:"pb-2 "+("upload"===e?"border-b-2 border-blue-500 font-medium":"text-gray-500"),onClick:()=>r("upload"),children:"Upload File"}),(0,Zt.jsx)("button",{className:"pb-2 "+("connect"===e?"border-b-2 border-blue-500 font-medium":"text-gray-500"),onClick:()=>r("connect"),children:"Connect Accounting Software"})]}),"manual"===e&&(0,Zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t={};if(Object.keys(i).forEach(e=>{t[e]=!0}),u(t),(()=>{const e={};return Object.keys(i).forEach(t=>{const r=k(t,i[t]);r&&(e[t]=r)}),i.customerId||(e.customerName="Please select a customer from the dropdown"),"Legal Entities"!==i.customerType||i.directorId||(e.directorId="Please select a director/representative"),l(e),0===Object.keys(e).length})()){h(!0);try{console.log("\ud83d\udd0d Processing transaction submission..."),console.log("\ud83d\udcca Form data:",i);const e={customer_id:i.customerId,director_id:i.directorId||null,transaction_type:i.paymentMode||null,amount:parseFloat(i.invoiceAmount)||0,currency:i.currency,transaction_date:i.date||(new Date).toISOString(),source_account:i.customerName||null,destination_account:i.beneficiaryName||null,description_of_report:i.descriptionOfReport||null,action_taken_by_reporting_entity:i.actionTakenByReportingEntity||null,internal_reference_number:i.internalReferenceNumber||null,transaction_product:i.transactionProduct||null,payment_mode:i.paymentMode||null,channel:i.channel||null,source_of_funds:i.sourceOfFunds||null,transaction_purpose:i.transactionPurpose||null,rate:i.rate?parseFloat(i.rate):null,invoice_amount:i.invoiceAmount?parseFloat(i.invoiceAmount):null,amount_lc:i.amountLc?parseFloat(i.amountLc):null,estimated_amount:i.estimatedAmount?parseFloat(i.estimatedAmount):null,item_type:i.itemType||null,item_size:i.itemSize||null,item_unit:i.itemUnit||null,status_code:i.statusCode||null,status_comments:i.statusComments||null,beneficiary_name:i.beneficiaryName||null,beneficiary_comments:i.beneficiaryComments||null,late_deposit:i.lateDeposit||null,branch:i.branch||null,indemnified_for_repatriation:i.indemnifiedForRepatriation||null,executed_by:i.executedBy||null,carrier_name:i.carrierName||null,carrier_details:i.carrierDetails||null,is_str_istr:i.isStrIstr||!1,reason:i.reason||null,description:i.description||null};console.log("\ud83d\udcca Transaction payload:",e);const t=await FO(e);if(!t||!1===t.success)throw new Error((null===t||void 0===t?void 0:t.error)||"Failed to create transaction");console.log("\u2705 Transaction created successfully:",t),Ht.success("Transaction created successfully!");s({customerName:"",customerId:"",customerType:"",directorId:"",directorName:"",descriptionOfReport:"",actionTakenByReportingEntity:"",date:"",internalReferenceNumber:"",transactionProduct:"",paymentMode:"",channel:"",sourceOfFunds:"",transactionPurpose:"",currency:"",rate:"",invoiceAmount:"",itemType:"",statusCode:"",reason:"",description:"",beneficiaryName:"",beneficiaryComments:"",lateDeposit:"",branch:"",indemnifiedForRepatriation:"",executedBy:"",amountLc:"",estimatedAmount:"",itemSize:"",itemUnit:"",statusComments:"",carrierName:"",carrierDetails:"",isStrIstr:!1}),S(null),j([]),l({}),u({})}catch(AM){console.error("\u274c Error adding transaction:",AM),Ht.error("Failed to add transaction. Please try again.")}finally{h(!1)}}else Ht.error("Please fix the errors before submitting")},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Zt.jsxs)("div",{className:"relative",ref:w,children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Customer Name / ID ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),p?(0,Zt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"text-sm text-gray-600",children:"Loading customers..."})]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)("input",{type:"text",name:"customerName",value:b,onChange:e=>{const t=e.target.value;x(t),v(!0),t.trim()||(s(e=>({...e,customerName:"",customerId:"",customerType:"",directorId:"",directorName:""})),S(null),j([]))},onFocus:()=>{0===f.length&&R(),v(!0)},onBlur:O,placeholder:"Type to search customers...",className:"w-full border rounded-md px-3 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(c.customerName&&o.customerName?"border-red-500":"border-gray-300")}),(0,Zt.jsx)("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 transition-transform pointer-events-none "+(y?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&I.length>0&&(0,Zt.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-64 overflow-y-auto",children:I.map(e=>{const t=T(e),r=e.customer_type||e.customerType||"";return(0,Zt.jsxs)("div",{onClick:()=>(async e=>{const t=T(e);if(x(t),s(r=>({...r,customerName:t,customerId:e.id,customerType:e.customer_type||e.customerType||"",directorId:"",directorName:""})),S(e),v(!1),"Legal Entities"===(e.customer_type||e.customerType)){A(!0);try{const t=await jO.getDirectors(e.id);t.success?j(t.data||[]):(console.error("Failed to fetch directors:",t.error),j([]))}catch(AM){console.error("Error fetching directors:",AM),j([])}finally{A(!1)}}else j([])})(e),className:"px-4 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0 "+(i.customerId===e.id?"bg-blue-50":""),children:[(0,Zt.jsx)("div",{className:"font-medium text-gray-900",children:t}),(0,Zt.jsxs)("div",{className:"text-sm text-gray-600",children:[r," \u2022 ID: ",e.id.substring(0,8),"..."]})]},e.id)})}),y&&0===I.length&&b.trim()&&(0,Zt.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg px-4 py-8 text-center text-gray-500",children:"No customers found"})]}),c.customerName&&o.customerName&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.customerName})]}),"Legal Entities"===i.customerType?(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Director/Representative ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),E?(0,Zt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"text-sm text-gray-600",children:"Loading directors..."})]}):(0,Zt.jsxs)("select",{name:"directorId",value:i.directorId,onChange:e=>{const t=_.find(t=>t.id===e.target.value);C(e),s(e=>({...e,directorName:t?`${t.firstName||""} ${t.lastName||""}`.trim()||t.alias||"Director":""}))},onBlur:O,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(c.directorId&&o.directorId?"border-red-500":"border-gray-300"),children:[(0,Zt.jsx)("option",{value:"",children:"Select Director/Representative"}),_.map(e=>{const t=e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.alias||"Director",r=e.isRepresentative?" (Representative)":e.isCeo?" (CEO)":"";return(0,Zt.jsxs)("option",{value:e.id,children:[t,r]},e.id)})]}),c.directorId&&o.directorId&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.directorId})]}):(0,Zt.jsx)("div",{}),L("descriptionOfReport","Description of the Report","textarea",null,!0,"Enter description of the report"),L("actionTakenByReportingEntity","Action taken by reporting entity","textarea",null,!0,"Enter action taken"),L("date","Date","date",null,!0),L("internalReferenceNumber","Internal reference number","text",null,!0,"Enter internal reference number"),L("transactionProduct","Transaction product","select",sT,!0),L("paymentMode","Payment Mode","select",gT,!0),L("channel","Channel","select",rT,!0),L("sourceOfFunds","Source of funds","select",iT,!0),L("transactionPurpose","Transaction purpose","select",yT,!0),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Currency ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{name:"currency",value:i.currency,onChange:C,onBlur:O,className:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(c.currency&&o.currency?"border-red-500":"border-gray-300"),children:[(0,Zt.jsx)("option",{value:"",children:"Select Currency"}),[...CT].sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,Zt.jsxs)("option",{value:e.code,children:[e.name," (",e.code,")"]},e.code))]}),c.currency&&o.currency&&(0,Zt.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.currency})]}),L("rate","Rate","number",null,!0,"0.00"),L("invoiceAmount","Invoice amount","number",null,!0,"0.00"),L("itemType","Item type","select",bT,!0),L("statusCode","Status code","select",vT,!0),L("beneficiaryName","Beneficiary name","text",null,!1,"Enter beneficiary name"),L("beneficiaryComments","Beneficiary comments","textarea",null,!1,"Enter beneficiary comments"),L("lateDeposit","Late deposit","select",pT,!1),L("branch","Branch","text",null,!1,"Enter branch"),L("indemnifiedForRepatriation","Indemnified for repatriation","select",pT,!1),L("executedBy","Executed by","select",xT,!1),L("amountLc","Amount LC","number",null,!1,"0.00"),L("estimatedAmount","Estimated amount","number",null,!1,"0.00"),L("itemSize","Item size","text",null,!1,"Enter item size"),L("itemUnit","Item unit","text",null,!1,"Enter item unit"),L("statusComments","Status comments","textarea",null,!1,"Enter status comments"),L("carrierName","Carrier name","text",null,!1,"Enter carrier name"),L("carrierDetails","Carrier details","textarea",null,!1,"Enter carrier details"),L("isStrIstr","Is STR/ISTR","checkbox",null,!1),L("reason","Reason","textarea",null,!0,"Enter reason"),L("description","Description","textarea",null,!0,"Enter description"),(0,Zt.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,Zt.jsx)("button",{type:"submit",disabled:d,className:"px-6 py-3 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 "+(d?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:d?"Submitting...":"Submit Transaction"})})]}),"upload"===e&&(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsx)("input",{type:"file",accept:".csv, .xlsx",onChange:e=>{a(e.target.files[0])}}),n&&(0,Zt.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected file: ",n.name]}),(0,Zt.jsx)("a",{href:"/sample-template.xlsx",download:!0,className:"text-blue-500 underline",children:"Download sample template"}),(0,Zt.jsx)("button",{className:"btn-primary",children:"Upload"})]}),"connect"===e&&(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsx)("button",{className:"btn-disabled",children:"Connect to QuickBooks (Coming Soon)"}),(0,Zt.jsx)("button",{className:"btn-disabled",children:"Connect to Xero (Coming Soon)"}),(0,Zt.jsx)("p",{className:"text-sm text-gray-500",children:"These integrations will allow automated syncing of customer transactions in future updates."})]})]})};function yD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const vD=t.forwardRef(yD);function bD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const xD=t.forwardRef(bD);function wD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ND=t.forwardRef(wD);function SD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const _D=t.forwardRef(SD);function jD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ED=t.forwardRef(jD),AD=()=>{var e;const[r,n]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0),[s,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(0),[u,d]=(0,t.useState)({search:"",dateFrom:"",dateTo:"",status:"",page:1,limit:50}),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),[g,y]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[x,w]=(0,t.useState)(""),[N,S]=(0,t.useState)(null),[_,j]=(0,t.useState)(!1),[E,A]=(0,t.useState)({}),[k,C]=(0,t.useState)(!1),O=e=>{if(!e)return"Unknown Customer";if("Natural Person"===e.customer_type&&e.natural_person_details){return`${e.natural_person_details.firstname||""} ${e.natural_person_details.lastname||""}`.trim()||"Natural Person"}return"Legal Entities"===e.customer_type&&e.legal_entity_details?e.legal_entity_details.legalname||e.legal_entity_details.alias||"Legal Entity":e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`.trim():e.first_name||e.alias||"Customer"},T=async()=>{i(!0),o(null);try{const e=await BO(u.page,u.limit,u);e.success?(n(e.data||[]),c(e.count||0)):(o(e.error||"Failed to fetch transactions"),Ht.error("Failed to load transactions"))}catch(s){console.error("Error fetching transactions:",s),o("Failed to fetch transactions"),Ht.error("Failed to load transactions")}finally{i(!1)}};(0,t.useEffect)(()=>{T()},[u.page,u.limit,u.status]);const R=(e,t)=>{d(r=>({...r,[e]:t,page:1}))};return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Transaction Approvals"}),(0,Zt.jsxs)("p",{className:"text-gray-600 mt-1",children:[l," transaction",1!==l?"s":""," total","Pending"===u.status&&(0,Zt.jsxs)("span",{children:[" \u2022 ",r.filter(e=>"Pending"===e.status).length," pending"]})]})]}),(0,Zt.jsxs)("button",{onClick:()=>f(!h),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,Zt.jsx)(vD,{className:"w-4 h-4"}),"Filters"]})]}),(0,Zt.jsxs)("div",{className:"fixed inset-0 z-40 flex justify-end transition-opacity duration-300 "+(h?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[(0,Zt.jsx)("div",{className:"flex-1 transition-opacity duration-300 "+(h?"opacity-100":"opacity-0"),onClick:()=>f(!1)}),(0,Zt.jsxs)("div",{className:"w-full max-w-md h-full bg-white shadow-xl border-l border-gray-200 flex flex-col transform transition-transform duration-300 ease-out "+(h?"translate-x-0":"translate-x-full"),children:[(0,Zt.jsxs)("div",{className:"px-5 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"}),(0,Zt.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Filter transactions by criteria"})]}),(0,Zt.jsxs)("button",{type:"button",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:[(0,Zt.jsx)("span",{className:"sr-only",children:"Close filters"}),(0,Zt.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,Zt.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Search"}),(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)(xD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,Zt.jsx)("input",{type:"text",placeholder:"Search by customer name...",value:u.search,onChange:e=>R("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date From"}),(0,Zt.jsx)("input",{type:"date",value:u.dateFrom,onChange:e=>R("dateFrom",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date To"}),(0,Zt.jsx)("input",{type:"date",value:u.dateTo,onChange:e=>R("dateTo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),(0,Zt.jsxs)("select",{value:u.status,onChange:e=>R("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"All Status"}),(0,Zt.jsx)("option",{value:"Pending",children:"Pending"}),(0,Zt.jsx)("option",{value:"Approved",children:"Approved"}),(0,Zt.jsx)("option",{value:"Rejected",children:"Rejected"})]})]})]}),(0,Zt.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>{T(),f(!1)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Apply Filters"}),(0,Zt.jsx)("button",{onClick:()=>{d({search:"",dateFrom:"",dateTo:"",status:"",page:1,limit:50}),f(!1)},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors text-sm font-medium",children:"Clear"})]})]})]}),a&&(0,Zt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading transactions..."})]}),s&&(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)(ND,{className:"w-5 h-5 text-red-400 mr-2"}),(0,Zt.jsx)("span",{className:"text-red-800",children:s})]})}),!a&&!s&&(0,Zt.jsx)("div",{className:"overflow-auto bg-white rounded-xl shadow border",children:(0,Zt.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,Zt.jsx)("thead",{children:(0,Zt.jsxs)("tr",{className:"bg-gray-100 text-gray-700 border-b",children:[(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Date"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Customer"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Amount"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Payment Mode"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Reference Number"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Status"})]})}),(0,Zt.jsx)("tbody",{children:0===r.length?(0,Zt.jsx)("tr",{children:(0,Zt.jsxs)("td",{colSpan:"6",className:"p-12 text-center",children:[(0,Zt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Zt.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Zt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No transactions found"}),(0,Zt.jsx)("p",{className:"text-gray-500",children:"There are no pending transactions awaiting approval."})]})}):r.map(e=>{const t=e.customers||{},r=O(t);return(0,Zt.jsxs)("tr",{className:"border-b hover:bg-blue-50 cursor-pointer transition-all duration-200 hover:shadow-sm",onClick:()=>(async e=>{try{const t=await UO(e);p(t),j(!1),A({}),y(!0)}catch(s){console.error("Error fetching transaction details:",s),Ht.error("Failed to load transaction details")}})(e.id),children:[(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:new Date(e.transaction_date).toLocaleDateString()}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:r}),(0,Zt.jsxs)("td",{className:"p-4 text-gray-900",children:[e.currency," ",parseFloat(e.invoice_amount||e.amount||0).toLocaleString()]}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:e.payment_mode||e.transaction_type||"N/A"}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:e.internal_reference_number||"N/A"}),(0,Zt.jsx)("td",{className:"p-4",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("pending"===(e.status||"").toLowerCase()?"bg-yellow-100 text-yellow-800":"approved"===(e.status||"").toLowerCase()?"bg-green-100 text-green-800":"rejected"===(e.status||"").toLowerCase()?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})})]},e.id)})})]})}),l>u.limit&&(0,Zt.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,Zt.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(u.page-1)*u.limit+1," to ",Math.min(u.page*u.limit,l)," of ",l," results"]}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>R("page",u.page-1),disabled:1===u.page,className:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,Zt.jsx)("button",{onClick:()=>R("page",u.page+1),disabled:u.page*u.limit>=l,className:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]}),g&&m&&(0,Zt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",onClick:()=>{_||(y(!1),p(null),j(!1),A({}))},children:(0,Zt.jsxs)("div",{className:"relative w-full max-w-6xl bg-white rounded-lg shadow-xl max-h-[90vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200 bg-gray-50",children:[(0,Zt.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:_?"Edit Transaction":"Transaction Details"}),(0,Zt.jsx)("button",{onClick:()=>{y(!1),p(null),j(!1),A({})},className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Zt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Zt.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:_?(0,Zt.jsx)("div",{className:"space-y-6",children:(0,Zt.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Transaction Information"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"date",value:E.date||"",onChange:e=>A({...E,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Transaction Product ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.transactionProduct||"",onChange:e=>A({...E,transactionProduct:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),sT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Mode ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.paymentMode||"",onChange:e=>A({...E,paymentMode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),gT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Channel ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.channel||"",onChange:e=>A({...E,channel:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),rT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Source of Funds ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.sourceOfFunds||"",onChange:e=>A({...E,sourceOfFunds:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),iT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Transaction Purpose ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.transactionPurpose||"",onChange:e=>A({...E,transactionPurpose:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),yT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Currency ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.currency||"",onChange:e=>A({...E,currency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),CT.sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,Zt.jsxs)("option",{value:e.code,children:[e.name," (",e.code,")"]},e.code))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rate ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"number",step:"0.0001",value:E.rate||"",onChange:e=>A({...E,rate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.0000",required:!0})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Invoice Amount ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"number",step:"0.01",value:E.invoiceAmount||"",onChange:e=>A({...E,invoiceAmount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",required:!0})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount LC"}),(0,Zt.jsx)("input",{type:"number",step:"0.01",value:E.amountLc||"",onChange:e=>A({...E,amountLc:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Amount"}),(0,Zt.jsx)("input",{type:"number",step:"0.01",value:E.estimatedAmount||"",onChange:e=>A({...E,estimatedAmount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Item Information"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Item Type ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.itemType||"",onChange:e=>A({...E,itemType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),bT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Size"}),(0,Zt.jsx)("input",{type:"text",value:E.itemSize||"",onChange:e=>A({...E,itemSize:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Unit"}),(0,Zt.jsx)("input",{type:"text",value:E.itemUnit||"",onChange:e=>A({...E,itemUnit:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Status Information"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status Code ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:E.statusCode||"",onChange:e=>A({...E,statusCode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),vT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Comments"}),(0,Zt.jsx)("textarea",{value:E.statusComments||"",onChange:e=>A({...E,statusComments:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Late Deposit"}),(0,Zt.jsxs)("select",{value:E.lateDeposit||"",onChange:e=>A({...E,lateDeposit:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),pT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),(0,Zt.jsx)("input",{type:"text",value:E.branch||"",onChange:e=>A({...E,branch:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indemnified for Repatriation"}),(0,Zt.jsxs)("select",{value:E.indemnifiedForRepatriation||"",onChange:e=>A({...E,indemnifiedForRepatriation:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),pT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Executed By"}),(0,Zt.jsxs)("select",{value:E.executedBy||"",onChange:e=>A({...E,executedBy:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select..."}),xT.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("div",{className:"h-7 mb-2"}),(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("input",{type:"checkbox",id:"isStrIstr",checked:E.isStrIstr||!1,onChange:e=>A({...E,isStrIstr:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),(0,Zt.jsx)("label",{htmlFor:"isStrIstr",className:"ml-2 text-sm font-medium text-gray-700 cursor-pointer",children:"Is STR/ISTR"})]})]})]})]})]}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Report Information"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description of Report ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("textarea",{value:E.descriptionOfReport||"",onChange:e=>A({...E,descriptionOfReport:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Action Taken by Reporting Entity ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("textarea",{value:E.actionTakenByReportingEntity||"",onChange:e=>A({...E,actionTakenByReportingEntity:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Internal Reference Number ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"text",value:E.internalReferenceNumber||"",onChange:e=>A({...E,internalReferenceNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Beneficiary Information"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beneficiary Name"}),(0,Zt.jsx)("input",{type:"text",value:E.beneficiaryName||"",onChange:e=>A({...E,beneficiaryName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Beneficiary Comments"}),(0,Zt.jsx)("textarea",{value:E.beneficiaryComments||"",onChange:e=>A({...E,beneficiaryComments:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Carrier Information"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carrier Name"}),(0,Zt.jsx)("input",{type:"text",value:E.carrierName||"",onChange:e=>A({...E,carrierName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carrier Details"}),(0,Zt.jsx)("textarea",{value:E.carrierDetails||"",onChange:e=>A({...E,carrierDetails:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Additional Information"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reason ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("textarea",{value:E.reason||"",onChange:e=>A({...E,reason:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("textarea",{value:E.description||"",onChange:e=>A({...E,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]})]})]})}):(0,Zt.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Transaction Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Transaction ID:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.id})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:new Date(m.transaction_date).toLocaleString()})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Transaction Product:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.transaction_product||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Payment Mode:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.payment_mode||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Channel:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.channel||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Source of Funds:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.source_of_funds||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Transaction Purpose:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.transaction_purpose||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Currency:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.currency||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Rate:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.rate||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Invoice Amount:"}),(0,Zt.jsxs)("span",{className:"font-medium text-gray-900",children:[m.currency," ",parseFloat(m.invoice_amount||0).toLocaleString()]})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Amount LC:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.amount_lc?parseFloat(m.amount_lc).toLocaleString():"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Estimated Amount:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.estimated_amount?parseFloat(m.estimated_amount).toLocaleString():"N/A"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Item Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Item Type:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.item_type||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Item Size:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.item_size||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Item Unit:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.item_unit||"N/A"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Status Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Status Code:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.status_code||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Status Comments:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.status_comments||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Late Deposit:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.late_deposit||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Branch:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.branch||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Indemnified for Repatriation:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.indemnified_for_repatriation||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Executed By:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.executed_by||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Is STR/ISTR:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.is_str_istr?"Yes":"No"})]})]})]})]}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Customer Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Customer:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:O(m.customers)})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Customer Type:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:(null===(e=m.customers)||void 0===e?void 0:e.customer_type)||"N/A"})]}),m.director_id&&(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Director/Representative:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.director_name||"N/A"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Beneficiary Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Beneficiary Name:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.beneficiary_name||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex flex-col",children:[(0,Zt.jsx)("span",{className:"text-gray-600 mb-1",children:"Beneficiary Comments:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.beneficiary_comments||"N/A"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Carrier Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Carrier Name:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.carrier_name||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex flex-col",children:[(0,Zt.jsx)("span",{className:"text-gray-600 mb-1",children:"Carrier Details:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.carrier_details||"N/A"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Report Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex flex-col",children:[(0,Zt.jsx)("span",{className:"text-gray-600 mb-1",children:"Description of Report:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.description_of_report||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex flex-col",children:[(0,Zt.jsx)("span",{className:"text-gray-600 mb-1",children:"Action Taken by Reporting Entity:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.action_taken_by_reporting_entity||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex justify-between",children:[(0,Zt.jsx)("span",{className:"text-gray-600",children:"Internal Reference Number:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.internal_reference_number||"N/A"})]})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Additional Information"}),(0,Zt.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Zt.jsxs)("div",{className:"flex flex-col",children:[(0,Zt.jsx)("span",{className:"text-gray-600 mb-1",children:"Reason:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.reason||"N/A"})]}),(0,Zt.jsxs)("div",{className:"flex flex-col",children:[(0,Zt.jsx)("span",{className:"text-gray-600 mb-1",children:"Description:"}),(0,Zt.jsx)("span",{className:"font-medium text-gray-900",children:m.description||"N/A"})]})]})]})]})]})}),(0,Zt.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:_?(0,Zt.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Zt.jsx)("button",{onClick:()=>{j(!1),A({})},disabled:k,className:"px-6 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,Zt.jsx)("button",{onClick:async()=>{if(m){C(!0);try{const e={description_of_report:E.descriptionOfReport,action_taken_by_reporting_entity:E.actionTakenByReportingEntity,transaction_date:E.date?new Date(E.date).toISOString():m.transaction_date,internal_reference_number:E.internalReferenceNumber,transaction_product:E.transactionProduct,payment_mode:E.paymentMode,channel:E.channel,source_of_funds:E.sourceOfFunds,transaction_purpose:E.transactionPurpose,currency:E.currency,rate:E.rate?parseFloat(E.rate):null,invoice_amount:E.invoiceAmount?parseFloat(E.invoiceAmount):null,item_type:E.itemType,status_code:E.statusCode,reason:E.reason,description:E.description,beneficiary_name:E.beneficiaryName||null,beneficiary_comments:E.beneficiaryComments||null,late_deposit:E.lateDeposit||null,branch:E.branch||null,indemnified_for_repatriation:E.indemnifiedForRepatriation||null,executed_by:E.executedBy||null,amount_lc:E.amountLc?parseFloat(E.amountLc):null,estimated_amount:E.estimatedAmount?parseFloat(E.estimatedAmount):null,item_size:E.itemSize||null,item_unit:E.itemUnit||null,status_comments:E.statusComments||null,carrier_name:E.carrierName||null,carrier_details:E.carrierDetails||null,is_str_istr:E.isStrIstr||!1};await zO(m.id,e),Ht.success("Transaction updated successfully");const t=await UO(m.id);p(t),j(!1),A({}),T()}catch(s){console.error("Error updating transaction:",s),Ht.error("Failed to update transaction")}finally{C(!1)}}},disabled:k,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Changes"})]}):"Pending"===m.status?(0,Zt.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Zt.jsxs)("button",{onClick:()=>{return e=m.id,S(e),w(""),void b(!0);var e},className:"flex items-center gap-2 px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[(0,Zt.jsx)(ND,{className:"w-5 h-5"}),"Reject"]}),(0,Zt.jsxs)("button",{onClick:()=>{if(!m)return;const e={descriptionOfReport:m.description_of_report||"",actionTakenByReportingEntity:m.action_taken_by_reporting_entity||"",date:m.transaction_date?new Date(m.transaction_date).toISOString().split("T")[0]:"",internalReferenceNumber:m.internal_reference_number||"",transactionProduct:m.transaction_product||"",paymentMode:m.payment_mode||"",channel:m.channel||"",sourceOfFunds:m.source_of_funds||"",transactionPurpose:m.transaction_purpose||"",currency:m.currency||"",rate:m.rate||"",invoiceAmount:m.invoice_amount||"",itemType:m.item_type||"",statusCode:m.status_code||"",reason:m.reason||"",description:m.description||"",beneficiaryName:m.beneficiary_name||"",beneficiaryComments:m.beneficiary_comments||"",lateDeposit:m.late_deposit||"",branch:m.branch||"",indemnifiedForRepatriation:m.indemnified_for_repatriation||"",executedBy:m.executed_by||"",amountLc:m.amount_lc||"",estimatedAmount:m.estimated_amount||"",itemSize:m.item_size||"",itemUnit:m.item_unit||"",statusComments:m.status_comments||"",carrierName:m.carrier_name||"",carrierDetails:m.carrier_details||"",isStrIstr:m.is_str_istr||!1};A(e),j(!0)},className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,Zt.jsx)(_D,{className:"w-5 h-5"}),"Edit"]}),(0,Zt.jsxs)("button",{onClick:()=>(async e=>{try{await HO(e),Ht.success("Transaction approved successfully"),y(!1),p(null),T()}catch(s){console.error("Error approving transaction:",s),Ht.error("Failed to approve transaction")}})(m.id),className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,Zt.jsx)(ED,{className:"w-5 h-5"}),"Approve"]})]}):null})]})}),v&&(0,Zt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:()=>{b(!1),w(""),S(null)},children:(0,Zt.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 lg:w-1/3 shadow-lg rounded-md bg-white",onClick:e=>e.stopPropagation(),children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Zt.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Reject Transaction"}),(0,Zt.jsx)("button",{onClick:()=>{b(!1),w(""),S(null)},className:"text-gray-400 hover:text-gray-600",children:(0,Zt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Please provide a reason for rejection ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("textarea",{value:x,onChange:e=>w(e.target.value),placeholder:"Enter rejection reason...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",autoFocus:!0})]}),(0,Zt.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Zt.jsx)("button",{onClick:()=>{b(!1),w(""),S(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,Zt.jsxs)("button",{onClick:async()=>{if(x.trim())try{await $O(N,x),Ht.success("Transaction rejected successfully"),b(!1),w(""),S(null),y(!1),p(null),T()}catch(s){console.error("Error rejecting transaction:",s),Ht.error("Failed to reject transaction")}else Ht.error("Rejection reason is required")},disabled:!x.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,Zt.jsx)(ND,{className:"w-5 h-5"}),"Reject Transaction"]})]})]})})]})};function kD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const CD=t.forwardRef(kD),OD=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(0),[c,u]=(0,t.useState)({search:"",dateFrom:"",dateTo:"",status:"",xmlGenerated:"",page:1,limit:100}),[d,h]=(0,t.useState)(!1),f=e=>{if(!e)return"Unknown Customer";if("Natural Person"===e.customer_type&&e.natural_person_details){return`${e.natural_person_details.firstname||""} ${e.natural_person_details.lastname||""}`.trim()||"Natural Person"}return"Legal Entities"===e.customer_type&&e.legal_entity_details?e.legal_entity_details.legalname||e.legal_entity_details.alias||"Legal Entity":e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`.trim():e.first_name||e.alias||"Customer"},m=async()=>{a(!0),s(null);try{const e=await BO(c.page,c.limit,c);e.success?(r(e.data||[]),l(e.count||0)):(s(e.error||"Failed to fetch transactions"),Ht.error("Failed to load transactions"))}catch(i){console.error("Error fetching transactions:",i),s("Failed to fetch transactions"),Ht.error("Failed to load transactions")}finally{a(!1)}};(0,t.useEffect)(()=>{m()},[c.page,c.limit,c.status]);const p=(e,t)=>{u(r=>({...r,[e]:t,page:1}))},g=(()=>{const t={Total:e.length,Pending:0,Approved:0,Rejected:0};return e.forEach(e=>{const r=(e.status||"").toLowerCase();"pending"===r?t.Pending++:"approved"===r?t.Approved++:"rejected"===r&&t.Rejected++}),t})();return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Zt.jsx)("div",{children:(0,Zt.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Transaction Reports"})}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsxs)("button",{onClick:()=>{const t=[["Date","Customer","Amount","Currency","Payment Mode","Reference Number","Status","Transaction Product","Purpose"],...e.map(e=>{const t=e.customers||{},r=f(t);return[new Date(e.transaction_date).toLocaleDateString(),r,parseFloat(e.invoice_amount||e.amount||0).toLocaleString(),e.currency||"N/A",e.payment_mode||e.transaction_type||"N/A",e.internal_reference_number||"N/A",e.status||"N/A",e.transaction_product||"N/A",e.transaction_purpose||"N/A"]})].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(r);n.setAttribute("href",a),n.setAttribute("download",`transaction-report-${(new Date).toISOString().split("T")[0]}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),Ht.success("Report exported successfully")},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,Zt.jsx)(CD,{className:"w-4 h-4"}),"Export CSV"]}),(0,Zt.jsxs)("button",{onClick:()=>h(!d),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,Zt.jsx)(vD,{className:"w-4 h-4"}),"Filters"]})]})]}),!n&&!i&&e.length>0&&(0,Zt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Zt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Zt.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Total"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:g.Total})]}),(0,Zt.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,Zt.jsx)("div",{className:"text-sm text-yellow-600 font-medium",children:"Pending"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:g.Pending})]}),(0,Zt.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,Zt.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Approved"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-green-800",children:g.Approved})]}),(0,Zt.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,Zt.jsx)("div",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-red-800",children:g.Rejected})]})]}),(0,Zt.jsxs)("div",{className:"fixed inset-0 z-40 flex justify-end transition-opacity duration-300 "+(d?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[(0,Zt.jsx)("div",{className:"flex-1 transition-opacity duration-300 "+(d?"opacity-100":"opacity-0"),onClick:()=>h(!1)}),(0,Zt.jsxs)("div",{className:"w-full max-w-md h-full bg-white shadow-xl border-l border-gray-200 flex flex-col transform transition-transform duration-300 ease-out "+(d?"translate-x-0":"translate-x-full"),children:[(0,Zt.jsxs)("div",{className:"px-5 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"}),(0,Zt.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Filter transactions by criteria"})]}),(0,Zt.jsxs)("button",{type:"button",onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:[(0,Zt.jsx)("span",{className:"sr-only",children:"Close filters"}),(0,Zt.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,Zt.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Search"}),(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)(xD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,Zt.jsx)("input",{type:"text",placeholder:"Search by customer name...",value:c.search,onChange:e=>p("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date From"}),(0,Zt.jsx)("input",{type:"date",value:c.dateFrom,onChange:e=>p("dateFrom",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date To"}),(0,Zt.jsx)("input",{type:"date",value:c.dateTo,onChange:e=>p("dateTo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),(0,Zt.jsxs)("select",{value:c.status,onChange:e=>p("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"All Status"}),(0,Zt.jsx)("option",{value:"Pending",children:"Pending"}),(0,Zt.jsx)("option",{value:"Approved",children:"Approved"}),(0,Zt.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,Zt.jsx)("option",{value:"Normal",children:"Normal"}),(0,Zt.jsx)("option",{value:"Flagged",children:"Flagged"}),(0,Zt.jsx)("option",{value:"Blocked",children:"Blocked"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"XML Generated"}),(0,Zt.jsxs)("select",{value:c.xmlGenerated,onChange:e=>p("xmlGenerated",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"All"}),(0,Zt.jsx)("option",{value:"yes",children:"Yes"}),(0,Zt.jsx)("option",{value:"no",children:"No"})]})]})]}),(0,Zt.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>{m(),h(!1)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Apply Filters"}),(0,Zt.jsx)("button",{onClick:()=>{u({search:"",dateFrom:"",dateTo:"",status:"",xmlGenerated:"",page:1,limit:100}),h(!1)},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors text-sm font-medium",children:"Clear"})]})]})]}),n&&(0,Zt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading transactions..."})]}),i&&(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)(ND,{className:"w-5 h-5 text-red-400 mr-2"}),(0,Zt.jsx)("span",{className:"text-red-800",children:i})]})}),!n&&!i&&(0,Zt.jsx)("div",{className:"overflow-auto bg-white rounded-xl shadow border",children:(0,Zt.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,Zt.jsx)("thead",{children:(0,Zt.jsxs)("tr",{className:"bg-gray-100 text-gray-700 border-b",children:[(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Date"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Customer"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Amount"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Currency"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Payment Mode"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Reference Number"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Transaction Product"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Purpose"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"Status"}),(0,Zt.jsx)("th",{className:"p-4 font-medium",children:"XML Generated"})]})}),(0,Zt.jsx)("tbody",{children:0===e.length?(0,Zt.jsx)("tr",{children:(0,Zt.jsxs)("td",{colSpan:"10",className:"p-12 text-center",children:[(0,Zt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Zt.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Zt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No transactions found"}),(0,Zt.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filters."})]})}):e.map(e=>{const t=e.customers||{},r=f(t);return(0,Zt.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:new Date(e.transaction_date).toLocaleDateString()}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:r}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:parseFloat(e.invoice_amount||e.amount||0).toLocaleString()}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:e.currency||"N/A"}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:e.payment_mode||e.transaction_type||"N/A"}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:e.internal_reference_number||"N/A"}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:e.transaction_product||"N/A"}),(0,Zt.jsx)("td",{className:"p-4 text-gray-900",children:e.transaction_purpose||"N/A"}),(0,Zt.jsx)("td",{className:"p-4",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("pending"===(e.status||"").toLowerCase()?"bg-yellow-100 text-yellow-800":"approved"===(e.status||"").toLowerCase()?"bg-green-100 text-green-800":"rejected"===(e.status||"").toLowerCase()?"bg-red-100 text-red-800":"flagged"===(e.status||"").toLowerCase()?"bg-orange-100 text-orange-800":"blocked"===(e.status||"").toLowerCase()?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"),children:e.status||"N/A"})}),(0,Zt.jsx)("td",{className:"p-4",children:"approved"===(e.status||"").toLowerCase()?(0,Zt.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.xml_generated_at?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.xml_generated_at?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Yes"]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"No"]})}),e.xml_generated_at&&(0,Zt.jsx)("span",{className:"text-xs text-gray-500",title:new Date(e.xml_generated_at).toLocaleString(),children:new Date(e.xml_generated_at).toLocaleDateString()})]}):(0,Zt.jsx)("span",{className:"text-gray-400 text-xs",children:"N/A"})})]},e.id)})})]})}),o>c.limit&&(0,Zt.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,Zt.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(c.page-1)*c.limit+1," to ",Math.min(c.page*c.limit,o)," of ",o," results"]}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>p("page",c.page-1),disabled:1===c.page,className:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,Zt.jsx)("button",{onClick:()=>p("page",c.page+1),disabled:c.page*c.limit>=o,className:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})},TD=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(0),[c,u]=(0,t.useState)(new Set),[d,h]=(0,t.useState)(new Set),[f,m]=(0,t.useState)({}),[p,g]=(0,t.useState)({search:"",dateFrom:"",dateTo:"",status:"",page:1,limit:100}),[y,v]=(0,t.useState)(!1),b=e=>{u(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},x=async()=>{a(!0),s(null);try{const e={...p,statusFilter:["Approved"]},t=await BO(p.page,p.limit,e);if(t.success){const e=(t.data||[]).filter(e=>{const t=(e.status||"").trim();return"Approved"===t||"approved"===t.toLowerCase()});r(e),l(t.count||e.length);const n=e.filter(e=>e.xml_generated_at).map(async e=>{try{const t=await GO(e.id);t.success&&t.data&&m(r=>({...r,[e.id]:t.data.xml_content}))}catch(i){console.error(`Error loading XML for transaction ${e.id}:`,i)}});await Promise.all(n)}else s(t.error||"Failed to fetch transactions"),Ht.error("Failed to load transactions")}catch(i){console.error("Error fetching transactions:",i),s("Failed to fetch transactions"),Ht.error("Failed to load transactions")}finally{a(!1)}};(0,t.useEffect)(()=>{x()},[p.page,p.limit]);const w=(e,t)=>{g(r=>({...r,[e]:t,page:1}))},N=e=>e?String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",S=e=>{if(!e)return"";return new Date(e).toISOString()},_=async t=>{h(e=>new Set(e).add(t.id));try{const n=t.customers||{},a=n.natural_person_details||{},s=n.legal_entity_details||{};let o=null;if(t.director_id)try{const e=await jO.getDirectorById(t.director_id);e.success&&e.data&&(o=e.data)}catch(i){console.error("Error fetching director:",i)}const l="Legal Entities"===n.customer_type,c=l?s.legalname||s.alias||"":a.firstname&&a.lastname?`${a.firstname} ${a.lastname}`:"",u=l&&(s.commercialname||s.legalname||s.alias)||"",d=l&&s.incorporationnumber||"",h=l?s.phone||n.phone||"":a.phone||n.phone||"",f=l?s.address||"":a.address||"",p=l?s.city||"":a.city||"",g=l?s.countrycode||"AE":a.nationality||"AE",y=l?s.state||s.city||"":a.city||"",v=l&&(s.state||s.city)||"",b=l?s.countrycode||"AE":"",w=(a.gender||"M").toUpperCase(),_=(a.firstname||"MLRO").toUpperCase(),j=(a.lastname||"OFFICER").toUpperCase(),E=a.idnumber||"",A=a.idnumber||"",k=(a.nationality||"AE").toUpperCase(),C=n.email||"",O=(a.occupation||"MLRO").toUpperCase(),T=`    <reporting_person>\n        <gender>${N(w)}</gender>\n        <first_name>${N(_)}</first_name>\n        <last_name>${N(j)}</last_name>\n        <ssn>${N(E)}</ssn>\n        <id_number>${N(A)}</id_number>\n        <nationality1>${N(k)}</nationality1>\n        <email>${N(C)}</email>\n        <occupation>${N(O)}</occupation>\n    </reporting_person>`,R=`    <location>\n        <address_type>BU</address_type>\n        <address>${N(f||"")}</address>\n        <city>${N(p||"")}</city>\n        <country_code>${N((g||"AE").toUpperCase())}</country_code>\n        <state>${N(y||"")}</state>\n    </location>`;let I="";if(o){const e=o.idNumber||o.phone||"",t=o.idNumber||o.phone||"",r=o.dateOfBirth?S(o.dateOfBirth):"";I=`                    <director_id>\n                        <first_name>${N((o.firstName||"").toUpperCase())}</first_name>\n                        <last_name>${N((o.lastName||"").toUpperCase())}</last_name>\n                        <birthdate>${r}</birthdate>\n                        <ssn>${N(e)}</ssn>\n                        <id_number>${N(t)}</id_number>\n                        <nationality1>${N((o.nationality||"AE").toUpperCase())}</nationality1>\n                        <residence>${N((o.countryOfResidence||"AE").toUpperCase())}</residence>\n                        ${o.phone?`                        <phones>\n                            <phone>\n                                <tph_contact_type>BU</tph_contact_type>\n                                <tph_communication_type>L</tph_communication_type>\n                                <tph_number>${N(o.phone)}</tph_number>\n                            </phone>\n                        </phones>`:""}\n                        <role>ATR</role>\n                    </director_id>`}const L=`            <report_party>\n                ${`                <entity>\n                    <name>${N((c||"").toUpperCase())}</name>\n                    ${l?`                    <commercial_name>${N((u||"").toUpperCase())}</commercial_name>`:""}\n                    ${l&&d?`                    <incorporation_number>${N(d)}</incorporation_number>`:""}\n                    ${h?`                    <phones>\n                        <phone>\n                            <tph_contact_type>BU</tph_contact_type>\n                            <tph_communication_type>L</tph_communication_type>\n                            <tph_number>${N(h)}</tph_number>\n                        </phone>\n                    </phones>`:""}\n                    ${l&&v?`                    <incorporation_state>${N(v)}</incorporation_state>`:""}\n                    ${l&&b?`                    <incorporation_country_code>${N((b||"AE").toUpperCase())}</incorporation_country_code>`:""}\n                    ${I}\n                </entity>`}\n                <reason>DPMSJ</reason>\n                <comments>${N(t.reason||t.description||"")}</comments>\n            </report_party>`,P=(t.item_type||"GOLD").toUpperCase(),D=t.estimated_amount||t.invoice_amount||0,M=t.invoice_amount||t.estimated_amount||0,F=(t.currency||"AED").toUpperCase(),B=S(t.transaction_date),U=`    <activity>\n        <report_parties>\n            ${L}\n        </report_parties>\n        ${`        <goods_services>\n            <item>\n                <item_type>${N(P)}</item_type>\n                <estimated_value>${D}</estimated_value>\n                <status_comments>${N(t.status_comments||t.description||"")}</status_comments>\n                <disposed_value>${M}</disposed_value>\n                <currency_code>${N(F)}</currency_code>\n                <registration_date>${B}</registration_date>\n            </item>\n        </goods_services>`}\n    </activity>`,z="    <report_indicators>\n        <indicator>DPMSJ</indicator>\n    </report_indicators>",H=t.internal_reference_number||`TRS${(new Date).getFullYear()}${String(t.id).substring(0,6).toUpperCase()}`,$=S(new Date),q=(t.currency||"AED").toUpperCase(),G=`${'<?xml version="1.0" encoding="utf-8"?>\n'}<report>\n    <rentity_id>xxx</rentity_id>\n    <submission_code>E</submission_code>\n    <report_code>DPMSR</report_code>\n    <entity_reference>${N(H)}</entity_reference>\n    <submission_date>${$}</submission_date>\n    <currency_code_local>${N(q)}</currency_code_local>\n${T}\n${R}\n    <reason>${N(t.reason||"")}</reason>\n    <action>${N(t.action_taken_by_reporting_entity||"")}</action>\n${U}\n${z}\n</report>`;m(e=>({...e,[t.id]:G}));try{const n=(new Date).toISOString(),a=await qO(t.id,G,"XML generated");a.success||console.error("Error saving XML history:",a.error);const i=await zO(t.id,{xml_generated_at:n});if(i&&i.success){const a=e.find(e=>e.id===t.id);a&&(a.xml_generated_at=n,r([...e])),await x()}else console.error("Error updating transaction XML timestamp"),Ht.error("XML generated but failed to save to database. Please try again.")}catch(i){console.error("Error saving XML history or updating timestamp:",i),Ht.error("XML generated but failed to save to database. Please try again.")}Ht.success("XML generated successfully")}catch(i){console.error("Error generating XML:",i),Ht.error("Failed to generate XML report")}finally{h(e=>{const r=new Set(e);return r.delete(t.id),r})}};return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"XML Report Generation (GoAML)"}),(0,Zt.jsxs)("p",{className:"text-gray-600 mt-1",children:[o," approved transaction",1!==o?"s":""," available for XML export"]})]}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsxs)("button",{onClick:async()=>{const t=e.filter(e=>"approved"===(e.status||"").toLowerCase()&&!f[e.id]);if(0===t.length)return void Ht.info("No transactions need XML generation");if(window.confirm(`Generate XML for ${t.length} transaction(s)? This may take a while.`)){for(let e=0;e<t.length;e++){const r=t[e];h(e=>new Set([...e,r.id])),await _(r),await new Promise(e=>setTimeout(e,500))}Ht.success(`XML generated for ${t.length} transaction(s)`)}},disabled:0===e.filter(e=>"approved"===(e.status||"").toLowerCase()&&!f[e.id]).length,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Zt.jsx)(CD,{className:"w-4 h-4"}),"Generate All XML"]}),(0,Zt.jsxs)("button",{onClick:()=>v(!y),className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[(0,Zt.jsx)(vD,{className:"w-4 h-4"}),"Filters"]})]})]}),(0,Zt.jsxs)("div",{className:"fixed inset-0 z-40 flex justify-end transition-opacity duration-300 "+(y?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[(0,Zt.jsx)("div",{className:"flex-1 transition-opacity duration-300 "+(y?"opacity-100":"opacity-0"),onClick:()=>v(!1)}),(0,Zt.jsxs)("div",{className:"w-full max-w-md h-full bg-white shadow-xl border-l border-gray-200 flex flex-col transform transition-transform duration-300 ease-out "+(y?"translate-x-0":"translate-x-full"),children:[(0,Zt.jsxs)("div",{className:"px-5 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Zt.jsx)("div",{children:(0,Zt.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"})}),(0,Zt.jsxs)("button",{type:"button",onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:[(0,Zt.jsx)("span",{className:"sr-only",children:"Close filters"}),(0,Zt.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,Zt.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Search"}),(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)(xD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,Zt.jsx)("input",{type:"text",placeholder:"Search by customer name...",value:p.search,onChange:e=>w("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date From"}),(0,Zt.jsx)("input",{type:"date",value:p.dateFrom,onChange:e=>w("dateFrom",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date To"}),(0,Zt.jsx)("input",{type:"date",value:p.dateTo,onChange:e=>w("dateTo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Zt.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>{x(),v(!1)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Apply Filters"}),(0,Zt.jsx)("button",{onClick:()=>{g({search:"",dateFrom:"",dateTo:"",status:"",page:1,limit:100}),v(!1)},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors text-sm font-medium",children:"Clear"})]})]})]}),n&&(0,Zt.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading transactions..."})]}),i&&(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)(ND,{className:"w-5 h-5 text-red-400 mr-2"}),(0,Zt.jsx)("span",{className:"text-red-800",children:i})]})}),!n&&!i&&(0,Zt.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:0===e.length?(0,Zt.jsxs)("div",{className:"text-center py-12",children:[(0,Zt.jsx)("div",{className:"text-gray-400 mb-4",children:(0,Zt.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Zt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No approved transactions found"}),(0,Zt.jsx)("p",{className:"text-gray-500",children:"Only approved transactions can be exported to GoAML format."})]}):(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,Zt.jsx)("thead",{children:(0,Zt.jsxs)("tr",{className:"bg-gray-100 text-gray-700 border-b",children:[(0,Zt.jsx)("th",{className:"p-3 font-medium",children:"Date"}),(0,Zt.jsx)("th",{className:"p-3 font-medium",children:"Customer"}),(0,Zt.jsx)("th",{className:"p-3 font-medium",children:"Amount"}),(0,Zt.jsx)("th",{className:"p-3 font-medium",children:"Currency"}),(0,Zt.jsx)("th",{className:"p-3 font-medium",children:"Payment Mode"}),(0,Zt.jsx)("th",{className:"p-3 font-medium",children:"Reference Number"}),(0,Zt.jsx)("th",{className:"p-3 font-medium",children:"Status"})]})}),(0,Zt.jsx)("tbody",{children:e.map(e=>{const r=(e=>{if(!e)return"Unknown Customer";if("Natural Person"===e.customer_type&&e.natural_person_details)return`${e.natural_person_details.firstname||""} ${e.natural_person_details.lastname||""}`.trim()||"Natural Person";return"Legal Entities"===e.customer_type&&e.legal_entity_details?e.legal_entity_details.legalname||e.legal_entity_details.alias||"Legal Entity":e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`.trim():e.first_name||e.alias||"Customer"})(e.customers||{}),n=c.has(e.id),a=f[e.id]||e.xml_generated_at,s=d.has(e.id);return(0,Zt.jsxs)(t.Fragment,{children:[(0,Zt.jsxs)("tr",{onClick:()=>b(e.id),className:"border-b hover:bg-gray-50 transition-colors cursor-pointer "+(n?"bg-blue-50":""),children:[(0,Zt.jsx)("td",{className:"p-3 text-gray-900",children:new Date(e.transaction_date).toLocaleDateString()}),(0,Zt.jsx)("td",{className:"p-3 text-gray-900",children:r}),(0,Zt.jsx)("td",{className:"p-3 text-gray-900",children:parseFloat(e.invoice_amount||e.amount||0).toLocaleString()}),(0,Zt.jsx)("td",{className:"p-3 text-gray-900",children:e.currency||"N/A"}),(0,Zt.jsx)("td",{className:"p-3 text-gray-900",children:e.payment_mode||e.transaction_type||"N/A"}),(0,Zt.jsx)("td",{className:"p-3 text-gray-900",children:e.internal_reference_number||"N/A"}),(0,Zt.jsx)("td",{className:"p-3",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("approved"===(e.status||"").toLowerCase()?"bg-green-100 text-green-800":"rejected"===(e.status||"").toLowerCase()?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status||"N/A"})})]}),n&&(0,Zt.jsx)("tr",{className:"bg-gray-50 border-b",children:(0,Zt.jsx)("td",{colSpan:"7",className:"p-4",children:(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[a?(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{await _(e)})(e)},disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:s?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Regenerating..."]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Regenerate XML"]})}):(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),_(e)},disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:s?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating..."]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)(CD,{className:"w-4 h-4"}),"Generate XML"]})}),a&&(0,Zt.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{const t=f[e];if(!t)return void Ht.warning("Please generate XML first");const r=new Blob([t],{type:"application/xml;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(r);n.setAttribute("href",a),n.setAttribute("download",`goaml-report-${e}-${(new Date).toISOString().split("T")[0]}.xml`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a);try{const t=await zO(e,{xml_exported_at:(new Date).toISOString()});t&&t.success&&await x()}catch(i){console.error("Error updating XML export timestamp:",i)}Ht.success("XML report exported successfully")})(e.id)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium",children:[(0,Zt.jsx)(CD,{className:"w-4 h-4"}),"Export XML"]}),(0,Zt.jsx)("button",{onClick:t=>{t.stopPropagation(),b(e.id)},className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors text-sm font-medium",children:"Close"})]}),a&&(0,Zt.jsxs)("div",{className:"bg-white border border-gray-300 rounded-md p-4",children:[(0,Zt.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"XML Preview"}),(0,Zt.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3 overflow-x-auto",children:(0,Zt.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap font-mono",children:f[e.id]})})]})]})})})]},e.id)})})]})})}),o>p.limit&&(0,Zt.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,Zt.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(p.page-1)*p.limit+1," to ",Math.min(p.page*p.limit,o)," of ",o," results"]}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>w("page",p.page-1),disabled:1===p.page,className:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,Zt.jsx)("button",{onClick:()=>w("page",p.page+1),disabled:p.page*p.limit>=o,className:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})},RD={PURPOSE:[{rule:"PAR VALUE ",score:5,logic:"high"},{rule:"MARKET VALUE ",score:5,logic:"high"}],"":[],"Source Of Fund":[{rule:"Salary ",score:1,logic:"low"},{rule:"Bank - Cash withdrawal Slip ",score:1,logic:"low"},{rule:"End of Services Funds ",score:1,logic:"low"},{rule:"Bank Statement ",score:1,logic:"low"},{rule:"LOANS ",score:1,logic:"low"},{rule:"Loan from Financial Institutions ",score:1,logic:"low"},{rule:"Funds from Dividend Payouts ",score:2,logic:"medium_low"},{rule:"Business Proceeds ",score:2,logic:"medium_low"},{rule:"Funds From Schemes and Raffles ",score:2,logic:"medium_low"},{rule:"Loan from Friends and Family ",score:4,logic:"medium_high"},{rule:"Personal Savings ",score:4,logic:"medium_high"},{rule:"Other sources ",score:4,logic:"medium_high"},{rule:"INVESTMENTS ",score:4,logic:"medium_high"}],Amount:[{rule:"1 - 54999.75 (Logic:AML POLICY - CID)",score:1,logic:"low"},{rule:"55000 - 99999.75 (Logic:AML POLICY - CDD)",score:2,logic:"medium_low"},{rule:"100000 - 200000 (Logic:AML POLICY - EDD)",score:4,logic:"medium_high"},{rule:"200001 - 50000000 (Logic:AML POLICY - EDD)",score:5,logic:"high"}],"Item Type":[{rule:"ACCOUNTANCY (CONSULTANCY) ",score:1,logic:"low"},{rule:"GOLD ",score:4,logic:"medium_high"}],"Payment Mode":[{rule:"Cash Transaction ",score:1,logic:"low"},{rule:"Exchange of Metal ",score:1,logic:"low"},{rule:"Bank Transfer ",score:4,logic:"medium_high"}],"Delivery Channel":[{rule:"FACE TO FACE ",score:1,logic:"low"},{rule:"NON FACE TO FACE ",score:4,logic:"medium_high"}],"No. Of Transaction":[{rule:"3 TRANSACTION ",score:1,logic:"low"},{rule:"10 TRANSACTION ",score:4,logic:"medium_high"},{rule:"7 TRANSACTION ",score:4,logic:"medium_high"}]},ID=()=>{const[e,r]=(0,t.useState)(""),n=RD.map(e=>({name:e.name,description:e.description,condition:e.condition.toString().includes(">")?">":e.condition.toString().includes("<")?"<":e.condition.toString().includes("===")?"===":"Check",threshold:e.condition.toString().includes("10000")?"> $10,000":e.condition.toString().includes("5000")?"> $5,000":e.condition.toString().includes("5")?"> 5 transactions":e.condition.toString().includes("true")?"Match":"Custom",category:e.category,status:"Active",score:e.score})).filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Transaction Monitoring Rules"}),(0,Zt.jsx)("p",{className:"text-gray-600 mt-1",children:"System-defined rules for transaction risk assessment"})]}),(0,Zt.jsx)("div",{className:"mb-6",children:(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search rules by name...",value:e,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Zt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,Zt.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rule Name"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Score"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,Zt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>(0,Zt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Zt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.description}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.score>=60?"bg-red-100 text-red-800":e.score>=40?"bg-orange-100 text-orange-800":e.score>=20?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.score," points"]})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.status})})]},t))})]})})})]})},LD=e=>{switch(e){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return""}},PD=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)({totalCustomers:0,byRiskLevel:{Low:0,Medium:0,High:0},averageRiskScore:0});(0,t.useEffect)(()=>{d(),h()},[]);const d=async()=>{try{a(!0);const e=await KO.getCustomersByRiskLevel(null,1,100);e.success?(r(e.data||[]),s(null)):(s(e.error||"Failed to fetch customers"),r([]))}catch(i){s("Failed to fetch customers"),r([]),console.error("Error fetching customers:",i)}finally{a(!1)}},h=async()=>{try{const e=await KO.getRiskStats();u(e)}catch(i){console.error("Error fetching stats:",i)}},f=e.filter(e=>`${e.first_name} ${e.last_name}`.toLowerCase().includes(o.toLowerCase()));return n?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):i?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Zt.jsxs)("div",{className:"flex",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Zt.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Zt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),(0,Zt.jsx)("div",{className:"mt-2 text-sm text-red-700",children:i}),(0,Zt.jsx)("div",{className:"mt-4",children:(0,Zt.jsx)("button",{onClick:()=>{s(null),d(),h()},className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Retry"})})]})]})})}):(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Risk Assessments"}),(0,Zt.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor and manage customer risk profiles"})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Customers"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.totalCustomers})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Low Risk"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byRiskLevel.Low})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Medium Risk"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byRiskLevel.Medium})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"High Risk"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byRiskLevel.High})]})]})})]}),(0,Zt.jsx)("div",{className:"mb-6",children:(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search by customer name...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Zt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,Zt.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Name"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Score"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Level"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Assessed"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Zt.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[f.map(e=>{var t,r;return(0,Zt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Zt.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,Zt.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null===(t=e.first_name)||void 0===t?void 0:t.charAt(0),null===(r=e.last_name)||void 0===r?void 0:r.charAt(0)]})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Zt.jsx)("div",{className:"text-sm text-gray-900",children:e.risk_score||0})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Zt.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${LD(e.risk_level)}`,children:e.risk_level||"Not Assessed"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.last_risk_assessment?new Date(e.last_risk_assessment).toLocaleDateString():"Never"}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Zt.jsx)("button",{onClick:()=>(async e=>{try{console.log("Starting risk assessment for customer:",e);const t=await KO.performRiskAssessment(e);console.log("Risk assessment result:",t),t.success?(Ht.success("Risk assessment completed successfully"),d(),h()):(Ht.error(t.error||"Failed to perform risk assessment"),console.error("Risk assessment failed:",t.error))}catch(i){Ht.error("Error performing risk assessment"),console.error("Error:",i)}})(e.id),className:"text-green-600 hover:text-green-900 font-medium",children:"Reassess"})})]},e.id)}),0===f.length&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center",children:(0,Zt.jsxs)("div",{className:"text-gray-500",children:[(0,Zt.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Zt.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No customers found"}),(0,Zt.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o?"No customers match your search criteria.":"No customers have been added yet."})]})})})]})]})})})]})},DD=()=>{const[e,r]=(0,t.useState)(""),[n,a]=(0,t.useState)([]),[i,s]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)("name"),[f,m]=(0,t.useState)("asc"),[p,g]=(0,t.useState)("ONBOARDING"),[y,v]=(0,t.useState)(!1),[b,x]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1),[S,_]=(0,t.useState)(!1),[j,E]=(0,t.useState)(!1),[A,k]=(0,t.useState)(null),[C,O]=(0,t.useState)(1),[T,R]=(0,t.useState)(50),[I,L]=(0,t.useState)({ruleText:"",categoryName:"",riskLogic:"",riskScore:"",status:""}),[P,D]=(0,t.useState)({categoryId:"",ruleName:"",riskScore:"",isActive:!0}),[M,F]=(0,t.useState)({categoryId:"",ruleName:"",riskScore:"",isActive:!0});(0,t.useEffect)(()=>{(async()=>{try{l(!0);const e="ONBOARDING"===p?"ONBOARDING":"TRANSACTION"===p?"TRANSACTION":null,t=await KO.getRiskRules(e);t.success?(a(t.rules||[]),s(t.categories||[])):u(t.error||"Failed to load risk rules")}catch(AR){console.error("Error loading risk rules:",AR),u(AR.message||"Failed to load risk rules")}finally{l(!1)}})()},[p]);const B=(0,t.useMemo)(()=>{let t=n;if(e.trim()){const r=e.toLowerCase();t=t.filter(e=>(e.ruleText||"").toLowerCase().includes(r)||(e.categoryName||"").toLowerCase().includes(r)||(e.riskLogic||"").toLowerCase().includes(r))}if(I.ruleText.trim()){const e=I.ruleText.toLowerCase();t=t.filter(t=>(t.ruleText||"").toLowerCase().includes(e))}if(I.categoryName&&(t=t.filter(e=>e.categoryName===I.categoryName)),I.riskLogic&&(t=t.filter(e=>(e.riskLogic||"").toUpperCase()===I.riskLogic.toUpperCase())),I.status){const e="ACTIVE"===I.status;t=t.filter(t=>!!t.isActive===e)}if(I.riskScore){const e=Number(I.riskScore);t=t.filter(t=>(t.riskScore||0)===e)}const r=[...t].sort((e,t)=>{const r="asc"===f?1:-1;if("name"===d)return r*(e.ruleText||"").localeCompare(t.ruleText||"");if("category"===d){const n=(e.categoryName||"").localeCompare(t.categoryName||"");return 0!==n?r*n:r*(e.ruleText||"").localeCompare(t.ruleText||"")}return"score"===d?r*((e.riskScore||0)-(t.riskScore||0)):"status"===d?r*((e.isActive?1:0)-(t.isActive?1:0)):0});return r},[n,e,d,f,p,I]),U=(0,t.useMemo)(()=>{const e=(C-1)*T,t=e+T;return B.slice(e,t)},[B,C,T]);(0,t.useEffect)(()=>{O(1)},[e,I,p]);const z=e=>{d===e?m(e=>"asc"===e?"desc":"asc"):(h(e),m("asc"))},H=e=>d!==e?null:(0,Zt.jsx)("span",{className:"ml-1 text-gray-400",children:"asc"===f?"\u25b2":"\u25bc"}),$=(0,t.useMemo)(()=>(i||[]).filter(e=>!p||e.rule_type===p).map(e=>({id:e.id,name:e.name})).sort((e,t)=>e.name.localeCompare(t.name)),[i,p]),q=(0,t.useMemo)(()=>{const e=new Set;return n.forEach(t=>{t.riskLogic&&e.add(t.riskLogic.toUpperCase())}),Array.from(e).sort()},[n]),G=(0,t.useMemo)(()=>{const e=new Set;return n.forEach(t=>{"number"===typeof t.riskScore&&e.add(t.riskScore)}),Array.from(e).sort((e,t)=>e-t)},[n]),W=B.length,V=n.length;return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Risk Rules"}),(0,Zt.jsxs)("div",{className:"mt-1 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[(0,Zt.jsx)("p",{className:"text-gray-600",children:"System-defined rules for customer risk assessment"}),(0,Zt.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",(0,Zt.jsx)("span",{className:"font-semibold text-gray-800",children:W}),V?(0,Zt.jsxs)(Zt.Fragment,{children:[" ","of ",(0,Zt.jsx)("span",{className:"font-semibold text-gray-800",children:V})," rules"]}):" rules"]})]})]}),(0,Zt.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,Zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Zt.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Rule type:"}),(0,Zt.jsxs)("div",{className:"inline-flex rounded-md shadow-sm border border-gray-200 bg-white",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>{g("ONBOARDING"),O(1)},className:"px-4 py-1.5 text-sm font-medium border-r border-gray-200 "+("ONBOARDING"===p?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"),children:"Onboarding"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>{g("TRANSACTION"),O(1)},className:"px-4 py-1.5 text-sm font-medium "+("TRANSACTION"===p?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"),children:"Transaction"})]})]}),(0,Zt.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Zt.jsxs)("div",{className:"relative flex-1 max-w-xl",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Quick search by rule, category, or logic...",value:e,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Zt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,Zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Zt.jsxs)("button",{type:"button",onClick:()=>v(e=>!e),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,Zt.jsx)("svg",{className:"h-4 w-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L15 12.414V19a1 1 0 01-.447.832l-4 2.5A1 1 0 019 21.5V12.414L3.293 6.707A1 1 0 013 6V4z"})}),y?"Hide filters":"Show filters"]}),(0,Zt.jsxs)("button",{type:"button",onClick:()=>{D({categoryId:"",ruleText:"",riskLogic:"",riskScore:"",isActive:!0}),x(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,Zt.jsx)("svg",{className:"h-4 w-4 mr-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add New Rule"]})]})]})]}),(0,Zt.jsxs)("div",{className:"fixed inset-0 z-40 flex justify-end transition-opacity duration-300 "+(y?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[(0,Zt.jsx)("div",{className:"flex-1 transition-opacity duration-300 "+(y?"opacity-100":"opacity-0"),onClick:()=>v(!1)}),(0,Zt.jsxs)("div",{className:"w-full max-w-md h-full bg-white shadow-xl border-l border-gray-200 flex flex-col transform transition-transform duration-300 ease-out "+(y?"translate-x-0":"translate-x-full"),children:[(0,Zt.jsxs)("div",{className:"px-5 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Filters"}),(0,Zt.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Refine rules by column values"})]}),(0,Zt.jsxs)("button",{type:"button",onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:[(0,Zt.jsx)("span",{className:"sr-only",children:"Close filters"}),(0,Zt.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,Zt.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Rule Name"}),(0,Zt.jsx)("input",{type:"text",value:I.ruleText,onChange:e=>L(t=>({...t,ruleText:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Contains..."})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Category"}),(0,Zt.jsxs)("select",{value:I.categoryName,onChange:e=>L(t=>({...t,categoryName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"All"}),$.map(e=>(0,Zt.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Risk Logic"}),(0,Zt.jsxs)("select",{value:I.riskLogic,onChange:e=>L(t=>({...t,riskLogic:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"All"}),q.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),(0,Zt.jsxs)("select",{value:I.status,onChange:e=>L(t=>({...t,status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"All"}),(0,Zt.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,Zt.jsx)("option",{value:"INACTIVE",children:"Inactive"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Risk Score"}),(0,Zt.jsxs)("select",{value:I.riskScore,onChange:e=>L(t=>({...t,riskScore:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"All"}),G.map(e=>(0,Zt.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Zt.jsxs)("div",{className:"px-5 py-3 border-t border-gray-200 flex items-center justify-between",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>L({ruleText:"",categoryName:"",riskLogic:"",riskScore:"",status:""}),className:"inline-flex justify-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500",children:"Clear filters"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>v(!1),className:"inline-flex justify-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500",children:"Apply"})]})]})]}),w&&A&&(0,Zt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 overflow-y-auto p-4",onClick:e=>{e.target===e.currentTarget&&(N(!1),k(null))},children:(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-auto my-8 max-h-[90vh] overflow-hidden flex flex-col transform transition-all duration-200 ease-out",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,Zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Zt.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,Zt.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Risk Rule"})]}),(0,Zt.jsx)("button",{onClick:()=>{N(!1),k(null)},className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-white transition duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,Zt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Zt.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:(0,Zt.jsxs)("div",{className:"space-y-5",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:M.categoryId,onChange:e=>F(t=>({...t,categoryId:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 bg-white hover:border-gray-400",children:[(0,Zt.jsx)("option",{value:"",children:"Select category"}),$.map(e=>(0,Zt.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Rule Name ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"text",value:M.ruleName,onChange:e=>F(t=>({...t,ruleName:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 placeholder-gray-400 hover:border-gray-400",placeholder:"Enter rule name..."})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Risk Score ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:M.riskScore,onChange:e=>F(t=>({...t,riskScore:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 bg-white hover:border-gray-400",children:[(0,Zt.jsx)("option",{value:"",children:"Select score"}),(0,Zt.jsx)("option",{value:"1",children:"1 - Low Risk"}),(0,Zt.jsx)("option",{value:"2",children:"2 - Medium Low Risk"}),(0,Zt.jsx)("option",{value:"3",children:"3 - Medium Risk"}),(0,Zt.jsx)("option",{value:"4",children:"4 - Medium High Risk"}),(0,Zt.jsx)("option",{value:"5",children:"5 - High Risk"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),(0,Zt.jsxs)("div",{className:"mt-2 flex items-center p-3 border border-gray-300 rounded-lg hover:border-gray-400 transition duration-200",children:[(0,Zt.jsx)("input",{id:"editRuleActive",type:"checkbox",checked:M.isActive,onChange:e=>F(t=>({...t,isActive:e.target.checked})),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"}),(0,Zt.jsx)("label",{htmlFor:"editRuleActive",className:"ml-3 block text-sm font-medium text-gray-700 cursor-pointer",children:M.isActive?(0,Zt.jsx)("span",{className:"text-green-600",children:"Active"}):(0,Zt.jsx)("span",{className:"text-gray-500",children:"Inactive"})})]})]})]})]})}),(0,Zt.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>{N(!1),k(null)},disabled:j,className:"inline-flex items-center px-5 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,Zt.jsx)("button",{type:"button",disabled:j||!M.categoryId||!M.ruleName.trim()||""===M.riskScore,onClick:async()=>{try{E(!0);const e=Number(M.riskScore),t={1:"LOW",2:"MEDIUM LOW",3:"MEDIUM",4:"MEDIUM HIGH",5:"HIGH"}[e]||"LOW",r={categoryId:M.categoryId,ruleText:M.ruleName.trim(),riskLogic:t,riskScore:e,isActive:M.isActive},n=await KO.updateRiskRule(A.id,r);if(n.success){const e=await KO.getRiskRules();e.success&&a(e.rules||[]),N(!1),k(null)}else console.error(n.error||"Failed to update rule"),alert(n.error||"Failed to update rule")}catch(AR){console.error("Error updating rule:",AR),alert("An error occurred while updating the rule")}finally{E(!1)}},className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:j?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Zt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Zt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update Rule"]})})]})]})}),b&&(0,Zt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 overflow-y-auto p-4",onClick:e=>{e.target===e.currentTarget&&x(!1)},children:(0,Zt.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-auto my-8 max-h-[90vh] overflow-hidden flex flex-col transform transition-all duration-200 ease-out",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[(0,Zt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Zt.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,Zt.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Risk Rule"})]}),(0,Zt.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-white transition duration-200 focus:outline-none focus:ring-2 focus:ring-green-500",children:(0,Zt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Zt.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:(0,Zt.jsxs)("div",{className:"space-y-5",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:P.categoryId,onChange:e=>D(t=>({...t,categoryId:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 bg-white hover:border-gray-400",children:[(0,Zt.jsx)("option",{value:"",children:"Select category"}),$.map(e=>(0,Zt.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Rule Name ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"text",value:P.ruleName,onChange:e=>D(t=>({...t,ruleName:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 placeholder-gray-400 hover:border-gray-400",placeholder:"Enter rule name..."})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Risk Score ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{value:P.riskScore,onChange:e=>D(t=>({...t,riskScore:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 bg-white hover:border-gray-400",children:[(0,Zt.jsx)("option",{value:"",children:"Select score"}),(0,Zt.jsx)("option",{value:"1",children:"1 - Low Risk"}),(0,Zt.jsx)("option",{value:"2",children:"2 - Medium Low Risk"}),(0,Zt.jsx)("option",{value:"3",children:"3 - Medium Risk"}),(0,Zt.jsx)("option",{value:"4",children:"4 - Medium High Risk"}),(0,Zt.jsx)("option",{value:"5",children:"5 - High Risk"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),(0,Zt.jsxs)("div",{className:"mt-2 flex items-center p-3 border border-gray-300 rounded-lg hover:border-gray-400 transition duration-200",children:[(0,Zt.jsx)("input",{id:"newRuleActive",type:"checkbox",checked:P.isActive,onChange:e=>D(t=>({...t,isActive:e.target.checked})),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"}),(0,Zt.jsx)("label",{htmlFor:"newRuleActive",className:"ml-3 block text-sm font-medium text-gray-700 cursor-pointer",children:P.isActive?(0,Zt.jsx)("span",{className:"text-green-600",children:"Active"}):(0,Zt.jsx)("span",{className:"text-gray-500",children:"Inactive"})})]})]})]})]})}),(0,Zt.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>x(!1),disabled:S,className:"inline-flex items-center px-5 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,Zt.jsx)("button",{type:"button",disabled:S||!P.categoryId||!P.ruleName.trim()||""===P.riskScore,onClick:async()=>{try{_(!0);const e=Number(P.riskScore),t={1:"LOW",2:"MEDIUM LOW",3:"MEDIUM",4:"MEDIUM HIGH",5:"HIGH"}[e]||"LOW",r={categoryId:P.categoryId,ruleText:P.ruleName.trim(),riskLogic:t,riskScore:e,isActive:P.isActive},n=await KO.createRiskRule(r);if(n.success){const e=await KO.getRiskRules();e.success&&a(e.rules||[]),x(!1)}else console.error(n.error||"Failed to create rule")}catch(AR){console.error("Error creating rule:",AR)}finally{_(!1)}},className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-lg text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:S?(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Zt.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Zt.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Add New Rule"]})})]})]})}),(0,Zt.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsxs)("th",{onClick:()=>z("name"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:["Rule Name",H("name")]}),(0,Zt.jsxs)("th",{onClick:()=>z("category"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:["Category",H("category")]}),(0,Zt.jsxs)("th",{onClick:()=>z("score"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:["Risk Score",H("score")]}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Logic"}),(0,Zt.jsxs)("th",{onClick:()=>z("status"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:["Status",H("status")]})]})}),(0,Zt.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[o&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading rules..."})}),!o&&c&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-red-600",children:c})}),!o&&!c&&0===B.length&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No rules found."})}),!o&&!c&&U.map(e=>(0,Zt.jsxs)("tr",{className:"hover:bg-blue-50 cursor-pointer transition-all duration-150 group border-b border-gray-100",onClick:()=>{k(e),F({categoryId:e.categoryId,ruleName:e.ruleText,riskScore:e.riskScore.toString(),isActive:e.isActive}),N(!0)},children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 group-hover:text-blue-700 transition-colors",children:(0,Zt.jsxs)("div",{className:"flex items-center gap-2",children:[e.ruleText,(0,Zt.jsx)("svg",{className:"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})]})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:e.categoryName})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border "+(e.riskScore>=4?"bg-red-100 text-red-800 border-red-200":e.riskScore>=3?"bg-orange-100 text-orange-800 border-orange-200":e.riskScore>=2?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"),children:e.riskScore})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:e.riskLogic||"-"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border "+(e.isActive?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"),children:e.isActive?"Active":"Inactive"})})]},e.id))]})]})})}),B.length>T&&(0,Zt.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,Zt.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(C-1)*T+1," to ",Math.min(C*T,B.length)," of ",B.length," results"]}),(0,Zt.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Zt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Zt.jsx)("label",{className:"text-sm text-gray-700",children:"Items per page:"}),(0,Zt.jsxs)("select",{value:T,onChange:e=>{R(Number(e.target.value)),O(1)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:25,children:"25"}),(0,Zt.jsx)("option",{value:50,children:"50"}),(0,Zt.jsx)("option",{value:100,children:"100"}),(0,Zt.jsx)("option",{value:200,children:"200"})]})]}),(0,Zt.jsxs)("div",{className:"flex gap-2",children:[(0,Zt.jsx)("button",{onClick:()=>O(e=>Math.max(1,e-1)),disabled:1===C,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Previous"}),(0,Zt.jsxs)("span",{className:"px-3 py-2 text-sm text-gray-700",children:["Page ",C," of ",Math.ceil(B.length/T)]}),(0,Zt.jsx)("button",{onClick:()=>O(e=>Math.min(Math.ceil(B.length/T),e+1)),disabled:C>=Math.ceil(B.length/T),className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Next"})]})]})]})]})},MD=()=>{const[e,r]=(0,t.useState)([{id:1,name:"Default UAE Model",description:"Standard model for UAE FI clients",scoringRange:"0 - 100",mapping:"Low (0\u201330), Med (31\u201370), High (71\u2013100)",status:"Active"},{id:2,name:"High-Risk Entity Model",description:"Customized scoring for high-risk entities",scoringRange:"0 - 10",mapping:"Low (0\u20133), Med (4\u20136), High (7\u201310)",status:"Inactive"}]);return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold",children:"Risk Models"}),(0,Zt.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ Add Risk Model"})]}),(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full bg-white border rounded-lg",children:[(0,Zt.jsx)("thead",{className:"bg-gray-100",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"py-3 px-4 text-left",children:"Model Name"}),(0,Zt.jsx)("th",{className:"py-3 px-4 text-left",children:"Description"}),(0,Zt.jsx)("th",{className:"py-3 px-4 text-left",children:"Scoring Range"}),(0,Zt.jsx)("th",{className:"py-3 px-4 text-left",children:"Risk Level Mapping"}),(0,Zt.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,Zt.jsx)("th",{className:"py-3 px-4",children:"Actions"})]})}),(0,Zt.jsx)("tbody",{children:e.map(e=>(0,Zt.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,Zt.jsx)("td",{className:"py-3 px-4",children:e.description}),(0,Zt.jsx)("td",{className:"py-3 px-4",children:e.scoringRange}),(0,Zt.jsx)("td",{className:"py-3 px-4",children:e.mapping}),(0,Zt.jsx)("td",{className:"py-3 px-4",children:(0,Zt.jsx)("span",{className:"px-2 py-1 rounded text-sm font-medium "+("Active"===e.status?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700"),children:e.status})}),(0,Zt.jsxs)("td",{className:"py-3 px-4 text-center space-x-2",children:[(0,Zt.jsx)("button",{className:"text-blue-600 hover:underline",children:"Edit"}),(0,Zt.jsx)("button",{className:"text-gray-600 hover:underline",children:"Duplicate"}),(0,Zt.jsx)("button",{className:"text-red-600 hover:underline",children:"Delete"})]})]},e.id))})]})})]})},FD={1:{name:"Mohammad Zain",riskScore:82,riskLevel:"High",scoring:{kyc:25,screening:30,transaction:20,behavior:7},lastAssessed:"2025-07-29",comments:"Multiple high-value transactions to sanctioned countries."},2:{name:"Fatima Bano",riskScore:45,riskLevel:"Medium",scoring:{kyc:15,screening:10,transaction:15,behavior:5},lastAssessed:"2025-07-26",comments:"Some inconsistencies in address verification."},3:{name:"Ali Khan",riskScore:20,riskLevel:"Low",scoring:{kyc:5,screening:5,transaction:5,behavior:5},lastAssessed:"2025-07-15",comments:"Clean background and limited transaction activity."}},BD=e=>{switch(e){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return""}},UD=()=>{const{id:e}=ne(),t=FD[e];return t?(0,Zt.jsxs)("div",{className:"p-6 max-w-3xl",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Risk Profile"}),(0,Zt.jsx)("p",{className:"text-gray-600 mb-6",children:t.name}),(0,Zt.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"font-semibold text-gray-700",children:"Risk Score:"}),(0,Zt.jsx)("p",{children:t.riskScore})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"font-semibold text-gray-700",children:"Risk Level:"}),(0,Zt.jsx)("p",{className:`inline-block px-2 py-1 text-sm rounded ${BD(t.riskLevel)}`,children:t.riskLevel})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"font-semibold text-gray-700",children:"Last Assessed:"}),(0,Zt.jsx)("p",{children:t.lastAssessed})]})]}),(0,Zt.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Scoring Breakdown"}),(0,Zt.jsxs)("ul",{className:"mb-6 list-disc pl-5 text-gray-700",children:[(0,Zt.jsxs)("li",{children:["KYC Risk: ",t.scoring.kyc]}),(0,Zt.jsxs)("li",{children:["Screening Risk: ",t.scoring.screening]}),(0,Zt.jsxs)("li",{children:["Transaction Risk: ",t.scoring.transaction]}),(0,Zt.jsxs)("li",{children:["Behavioral Risk: ",t.scoring.behavior]})]}),(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Analyst Comments"}),(0,Zt.jsx)("p",{className:"text-gray-800",children:t.comments})]}),(0,Zt.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Update Risk Profile"})]}):(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Risk Profile"}),(0,Zt.jsx)("p",{className:"text-red-500",children:"Profile not found."})]})};function zD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const HD=t.forwardRef(zD);function $D(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const qD=t.forwardRef($D);function GD(e,r){let{title:n,titleId:a,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const WD=t.forwardRef(GD),VD=[{value:"Any",label:"Any"},{value:"Transaction",label:"Transaction"}],KD=[{value:"Any",label:"Any"},{value:"High Risk Country",label:"High Risk Country"},{value:"High Risk Nationality",label:"High Risk Nationality"},{value:"Cash Payment",label:"Cash Payment"},{value:"Id Expired",label:"Id Expired"},{value:"Sanction Match",label:"Sanction Match"},{value:"High Risk Business Activity / Profession",label:"High Risk Business Activity / Profession"},{value:"High Risk",label:"High Risk"},{value:"Match in UN List or Local List",label:"Match in UN List or Local List"},{value:"Non Resident",label:"Non Resident"},{value:"Done By High Risk Nationality",label:"Done By High Risk Nationality"},{value:"High Value Cash Transaction - Individual",label:"High Value Cash Transaction - Individual"},{value:"High Value Cash Transaction - Corporate",label:"High Value Cash Transaction - Corporate"},{value:"High Value Cumulative - Individual 30 Days",label:"High Value Cumulative - Individual 30 Days"},{value:"High Value Cumulative - Corporate 30 Days",label:"High Value Cumulative - Corporate 30 Days"},{value:"High Value Cumulative - Individual 90 Days",label:"High Value Cumulative - Individual 90 Days"},{value:"High Value Cumulative - Corporate 90 Days",label:"High Value Cumulative - Corporate 90 Days"},{value:"Transaction Count Individual",label:"Transaction Count Individual"},{value:"Transaction Count Corporate",label:"Transaction Count Corporate"},{value:"Customer Red Flagged",label:"Customer Red Flagged"},{value:"Splitting of Transactions",label:"Splitting of Transactions"},{value:"Gold Exchange Above Limit ",label:"Gold Exchange Above Limit "},{value:"PEP/FPEP Individual Transactions",label:"PEP/FPEP Individual Transactions"},{value:"PEP/FPEP UBO Transactions",label:"PEP/FPEP UBO Transactions"},{value:"Below the Radar",label:"Below the Radar"},{value:"Purpose Of Txn - Gift",label:"Purpose Of Txn - Gift"},{value:"Customers Reported - STR/ISTR",label:"Customers Reported - STR/ISTR"},{value:"Customer in Internal Watchlist",label:"Customer in Internal Watchlist"}],YD=[{value:"Equal To",label:"Equal To"},{value:"Not Equal To",label:"Not Equal To"},{value:"Greater Than",label:"Greater Than"},{value:"Less Than",label:"Less Than"},{value:"Greater Than or Equal To",label:"Greater Than or Equal To"},{value:"Less Than or Equal To",label:"Less Than or Equal To"}],JD=[{value:"Equal To",label:"Equal To"},{value:"Not Equal To",label:"Not Equal To"},{value:"Greater Than",label:"Greater Than"},{value:"Less Than",label:"Less Than"},{value:"Greater Than or Equal To",label:"Greater Than or Equal To"},{value:"Less Than or Equal To",label:"Less Than or Equal To"},{value:"Each Transaction Equal to",label:"Each Transaction Equal to"},{value:"Each Transaction Not Equal to",label:"Each Transaction Not Equal to"},{value:"Each Transaction Greater Than",label:"Each Transaction Greater Than"},{value:"Each Transaction Less Than",label:"Each Transaction Less Than"},{value:"Each Transaction Greater Than or Equal to",label:"Each Transaction Greater Than or Equal to"},{value:"Each Transaction Less Than or Equal to",label:"Each Transaction Less Than or Equal to"}],XD=[{value:"Current Transaction",label:"Current Transaction"},{value:"Day",label:"Day"},{value:"7 Days",label:"7 Days"},{value:"30 Days",label:"30 Days"},{value:"90 Days",label:"90 Days"},{value:"365 Days (Year)",label:"365 Days (Year)"}],QD=[{value:"true",label:"Active"},{value:"false",label:"Inactive"}],ZD=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),[p,g]=(0,t.useState)({rule_number:"",transaction_type:"",parameter:"",count_match_type:"",transaction_count:"",threshold_match_type:"",threshold:"",frequency:"",is_active:"true",activity_rule_score:"",rule_display_name:"",rule_description:""});(0,t.useEffect)(()=>{y()},[]);const y=async()=>{a(!0),s(null);try{const e=await JO.getTransactionActivityRules();e.success?r(e.data||[]):(s(e.error||"Failed to load rules"),Ht.error("Failed to load transaction activity rules"))}catch(AR){console.error("Error fetching rules:",AR),s("Failed to load transaction activity rules"),Ht.error("Failed to load transaction activity rules")}finally{a(!1)}};(0,t.useEffect)(()=>{c&&!d&&v()},[c,d]);const v=async()=>{const e=await JO.getNextRuleNumber();e.success&&g(t=>({...t,rule_number:e.ruleNumber}))},b=e=>{const{name:t,value:r,type:n,checked:a}=e.target;g(e=>({...e,[t]:"checkbox"===n?a:r}))},x=()=>{g({rule_number:"",transaction_type:"",parameter:"",count_match_type:"",transaction_count:"",threshold_match_type:"",threshold:"",frequency:"",is_active:"true",activity_rule_score:"",rule_display_name:"",rule_description:""})},w=e.filter(e=>{var t,r,n,a;return(null===(t=e.rule_display_name)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(r=e.rule_description)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase()))||(null===(n=e.rule_number)||void 0===n?void 0:n.toString().includes(o))||(null===(a=e.parameter)||void 0===a?void 0:a.toLowerCase().includes(o.toLowerCase()))});return(0,Zt.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,Zt.jsx)("div",{className:"mb-6",children:(0,Zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Transaction Activity Rules"}),(0,Zt.jsx)("p",{className:"text-gray-600 mt-2",children:"Rules that can be triggered when a transaction is created"})]}),(0,Zt.jsxs)("button",{onClick:()=>{h(null),x(),u(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm hover:shadow-md font-medium",children:[(0,Zt.jsx)(HD,{className:"w-5 h-5"}),"Add New Rule"]})]})}),!c&&(0,Zt.jsx)("div",{className:"mb-6",children:(0,Zt.jsxs)("div",{className:"relative max-w-md",children:[(0,Zt.jsx)(xD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Zt.jsx)("input",{type:"text",placeholder:"Search rules...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),c&&(0,Zt.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Zt.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,Zt.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>{u(!1),h(null),x()}}),(0,Zt.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:(0,Zt.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 max-h-[90vh] overflow-y-auto",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Zt.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:d?"Edit Rule":"Create New Rule"}),(0,Zt.jsx)("button",{onClick:()=>{u(!1),h(null),x()},className:"text-gray-400 hover:text-gray-600",children:(0,Zt.jsx)(qD,{className:"w-6 h-6"})})]}),(0,Zt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0);try{const e={transaction_type:p.transaction_type||null,parameter:p.parameter||null,count_match_type:p.count_match_type||null,transaction_count:p.transaction_count||null,threshold_match_type:p.threshold_match_type||null,threshold:p.threshold||null,frequency:p.frequency||null,is_active:!0===p.is_active||"true"===p.is_active,activity_rule_score:parseInt(p.activity_rule_score)||0,rule_display_name:p.rule_display_name||"",rule_description:p.rule_description||null};let t;t=d?await JO.updateTransactionActivityRule(d.id,{...e,rule_number:parseInt(p.rule_number)||0}):await JO.createTransactionActivityRule(e),t.success?(Ht.success(d?"Rule updated successfully":"Rule created successfully"),u(!1),h(null),x(),y()):Ht.error(t.error||"Failed to save rule")}catch(AR){console.error("Error saving rule:",AR),Ht.error("Failed to save rule")}finally{m(!1)}},className:"space-y-4",children:[(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rule Number ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"number",name:"rule_number",value:p.rule_number,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Transaction Type ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{name:"transaction_type",value:p.transaction_type,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select Transaction Type"}),VD.map(e=>(0,Zt.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Parameter ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{name:"parameter",value:p.parameter,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select Parameter"}),KD.map(e=>(0,Zt.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Count Match Type ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{name:"count_match_type",value:p.count_match_type,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select Count Match Type"}),YD.map(e=>(0,Zt.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Count"}),(0,Zt.jsx)("input",{type:"text",name:"transaction_count",value:p.transaction_count,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Threshold Match Type ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{name:"threshold_match_type",value:p.threshold_match_type,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select Threshold Match Type"}),JD.map(e=>(0,Zt.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Threshold"}),(0,Zt.jsx)("input",{type:"text",name:"threshold",value:p.threshold,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Frequency ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsxs)("select",{name:"frequency",value:p.frequency,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Zt.jsx)("option",{value:"",children:"Select Frequency"}),XD.map(e=>(0,Zt.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("select",{name:"is_active",value:p.is_active,onChange:e=>{g(t=>({...t,is_active:"true"===e.target.value}))},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:QD.map(e=>(0,Zt.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Activity Rule Score ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"number",name:"activity_rule_score",value:p.activity_rule_score,onChange:b,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rule Display Name ",(0,Zt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Zt.jsx)("input",{type:"text",name:"rule_display_name",value:p.rule_display_name,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rule Description"}),(0,Zt.jsx)("textarea",{name:"rule_description",value:p.rule_description,onChange:b,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Zt.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Zt.jsx)("button",{type:"button",onClick:()=>{u(!1),h(null),x()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Zt.jsx)("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":d?"Update Rule":"Create Rule"})]})]})]})})]})}),!c&&(0,Zt.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:n?(0,Zt.jsxs)("div",{className:"p-12 text-center",children:[(0,Zt.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,Zt.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading rules..."})]}):i?(0,Zt.jsx)("div",{className:"p-12 text-center",children:(0,Zt.jsx)("p",{className:"text-red-600",children:i})}):0===w.length?(0,Zt.jsx)("div",{className:"p-12 text-center",children:(0,Zt.jsx)("p",{className:"text-gray-500",children:"No rules found"})}):(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rule #"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Display Name"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parameter"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frequency"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Zt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(e=>(0,Zt.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors",children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.rule_number}),(0,Zt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:e.rule_display_name}),(0,Zt.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.parameter||"N/A"}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.frequency||"N/A"}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors "+(e.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),onClick:()=>(async(e,t)=>{try{const r=await JO.toggleRuleStatus(e,!t);r.success?(Ht.success(`Rule ${t?"deactivated":"activated"} successfully`),y()):Ht.error(r.error||"Failed to update rule status")}catch(AR){console.error("Error toggling rule status:",AR),Ht.error("Failed to update rule status")}})(e.id,e.is_active),children:e.is_active?"Active":"Inactive"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Zt.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Zt.jsx)("button",{onClick:()=>(e=>{h(e),g({rule_number:e.rule_number||"",transaction_type:e.transaction_type||"",parameter:e.parameter||"",count_match_type:e.count_match_type||"",transaction_count:e.transaction_count||"",threshold_match_type:e.threshold_match_type||"",threshold:e.threshold||"",frequency:e.frequency||"",is_active:void 0!==e.is_active?e.is_active?"true":"false":"true",activity_rule_score:e.activity_rule_score||"",rule_display_name:e.rule_display_name||"",rule_description:e.rule_description||""}),u(!0)})(e),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit rule",children:(0,Zt.jsx)(_D,{className:"w-5 h-5"})}),(0,Zt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this rule?"))try{const t=await JO.deleteTransactionActivityRule(e);t.success?(Ht.success("Rule deleted successfully"),y()):Ht.error(t.error||"Failed to delete rule")}catch(AR){console.error("Error deleting rule:",AR),Ht.error("Failed to delete rule")}})(e.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete rule",children:(0,Zt.jsx)(WD,{className:"w-5 h-5"})})]})})]},e.id))})]})})})]})},eM=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)({total:0,byStatus:{Open:0,"In Progress":0,Resolved:0,Closed:0},byRiskLevel:{Low:0,Medium:0,High:0},byType:{Screening:0,Transaction:0,KYC:0}}),d=re();(0,t.useEffect)(()=>{h(),f()},[]);const h=async()=>{try{a(!0);const e=await WO.getCases(1,100);e.data?(r(e.data||[]),s(null)):(s("Failed to fetch cases"),r([]))}catch(i){s("Failed to fetch cases"),r([]),console.error("Error fetching cases:",i)}finally{a(!1)}},f=async()=>{try{const e=await WO.getCaseStats();u(e)}catch(i){console.error("Error fetching stats:",i)}},m=e.filter(e=>{var t,r,n;return`${null===(t=e.customers)||void 0===t?void 0:t.first_name} ${null===(r=e.customers)||void 0===r?void 0:r.last_name}`.toLowerCase().includes(o.toLowerCase())||(null===(n=e.case_number)||void 0===n?void 0:n.toLowerCase().includes(o.toLowerCase()))});return n?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):i?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Zt.jsxs)("div",{className:"flex",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Zt.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Zt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),(0,Zt.jsx)("div",{className:"mt-2 text-sm text-red-700",children:i}),(0,Zt.jsx)("div",{className:"mt-4",children:(0,Zt.jsx)("button",{onClick:()=>{s(null),h(),f()},className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Retry"})})]})]})})}):(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Case Management"}),(0,Zt.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor and manage investigation cases"})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Cases"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.total})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Open Cases"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byStatus.Open})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"In Progress"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byStatus["In Progress"]})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Resolved"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byStatus.Resolved})]})]})})]}),(0,Zt.jsx)("div",{className:"mb-6",children:(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search by customer name or case number...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Zt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,Zt.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Case ID"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Name"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Risk Level"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,Zt.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[m.map(e=>{var t,r,n,a,i,s,o;return(0,Zt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.case_number||e.id}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Zt.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,Zt.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null===(t=e.customers)||void 0===t||null===(r=t.first_name)||void 0===r?void 0:r.charAt(0),null===(n=e.customers)||void 0===n||null===(a=n.last_name)||void 0===a?void 0:a.charAt(0)]})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(i=e.customers)||void 0===i?void 0:i.first_name," ",null===(s=e.customers)||void 0===s?void 0:s.last_name]}),(0,Zt.jsx)("div",{className:"text-sm text-gray-500",children:null===(o=e.customers)||void 0===o?void 0:o.email})]})]})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.case_type||"Unknown"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("High"===e.risk_level?"bg-red-100 text-red-800":"Medium"===e.risk_level?"bg-orange-100 text-orange-800":"Low"===e.risk_level?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.risk_level||"Not Set"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("Open"===e.status?"bg-blue-100 text-blue-800":"In Progress"===e.status?"bg-yellow-100 text-yellow-800":"Resolved"===e.status?"bg-green-100 text-green-800":(e.status,"bg-gray-100 text-gray-800")),children:e.status||"Unknown"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.assigned_to||"Unassigned"}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Zt.jsx)("button",{onClick:()=>d(`/cases/details/${e.id}`),className:"text-blue-600 hover:text-blue-900 font-medium",children:"View Details"})})]},e.id)}),0===m.length&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:"8",className:"px-6 py-12 text-center",children:(0,Zt.jsxs)("div",{className:"text-gray-500",children:[(0,Zt.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Zt.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No cases found"}),(0,Zt.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o?"No cases match your search criteria.":"No cases have been created yet."})]})})})]})]})})})]})},tM={id:"CASE-001",customerName:"Ali Raza",customerId:"CUST-1023",type:"Transaction",severity:"High",status:"Open",createdAt:"2025-08-01",assignedTo:"Analyst A",description:"Suspicious transaction pattern detected on 3 consecutive days exceeding AED 500,000.",actionsTaken:["Customer risk score recalculated","Transaction flagged and temporarily held","Initial review completed by Analyst A"],relatedTransactions:[{id:"TXN-345",amount:"AED 600,000",date:"2025-07-29",status:"Flagged"},{id:"TXN-352",amount:"AED 550,000",date:"2025-07-30",status:"Flagged"}]},rM=()=>{const{caseId:e}=ne(),r=re(),n=tM,[a,i]=(0,t.useState)(n.status),[s,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(null);return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("button",{onClick:()=>r(-1),className:"mb-4 text-blue-600 hover:underline",children:"\u2190 Back to Case List"}),(0,Zt.jsxs)("h1",{className:"text-2xl font-semibold mb-2",children:["Case Details: ",n.id]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded shadow-sm space-y-2 mb-6",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Customer Name:"})," ",n.customerName]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Customer ID:"})," ",n.customerId]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Type:"})," ",n.type]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Severity:"})," ",n.severity]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Status:"})," ",n.status]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Created At:"})," ",n.createdAt]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Assigned To:"})," ",n.assignedTo]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("strong",{children:"Description:"})," ",n.description]})]}),(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Actions Taken"}),(0,Zt.jsx)("ul",{className:"list-disc list-inside bg-white p-4 rounded shadow-sm mb-6",children:n.actionsTaken.map((e,t)=>(0,Zt.jsx)("li",{children:e},t))}),(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Related Transactions"}),(0,Zt.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,Zt.jsxs)("table",{className:"min-w-full border rounded shadow-sm",children:[(0,Zt.jsx)("thead",{className:"bg-gray-100",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"text-left p-3",children:"Transaction ID"}),(0,Zt.jsx)("th",{className:"text-left p-3",children:"Amount"}),(0,Zt.jsx)("th",{className:"text-left p-3",children:"Date"}),(0,Zt.jsx)("th",{className:"text-left p-3",children:"Status"})]})}),(0,Zt.jsx)("tbody",{children:n.relatedTransactions.map(e=>(0,Zt.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"p-3",children:e.id}),(0,Zt.jsx)("td",{className:"p-3",children:e.amount}),(0,Zt.jsx)("td",{className:"p-3",children:e.date}),(0,Zt.jsx)("td",{className:"p-3",children:e.status})]},e.id))})]})}),(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Work on Case"}),(0,Zt.jsxs)("form",{onSubmit:e=>{e.preventDefault(),alert(`Status updated to: ${a}\nComment: ${s}\nFile: ${(null===l||void 0===l?void 0:l.name)||"No file uploaded"}`)},className:"bg-white p-4 rounded shadow-sm space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Update Status"}),(0,Zt.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"border p-2 rounded w-full",children:[(0,Zt.jsx)("option",{value:"Open",children:"Open"}),(0,Zt.jsx)("option",{value:"Under Review",children:"Under Review"}),(0,Zt.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,Zt.jsx)("option",{value:"Escalated",children:"Escalated"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Add Internal Comment"}),(0,Zt.jsx)("textarea",{value:s,onChange:e=>o(e.target.value),rows:4,className:"border p-2 rounded w-full",placeholder:"Write any notes, findings, or updates here..."})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Upload Supporting Document"}),(0,Zt.jsx)("input",{type:"file",onChange:e=>c(e.target.files[0]),className:"border p-2 rounded w-full"})]}),(0,Zt.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Submit Updates"})]})]})},nM=()=>{const[e,r]=(0,t.useState)(""),[n,a]=(0,t.useState)(""),[i,s]=(0,t.useState)("medium"),[o,l]=(0,t.useState)("");return(0,Zt.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-semibold mb-6",children:"Assign Case"}),(0,Zt.jsxs)("div",{className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Case ID"}),(0,Zt.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded-md",value:e,onChange:e=>r(e.target.value),placeholder:"Enter Case ID"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Assign to User"}),(0,Zt.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded-md",value:n,onChange:e=>a(e.target.value),placeholder:"Enter user email or name"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Priority"}),(0,Zt.jsxs)("select",{className:"w-full border px-3 py-2 rounded-md",value:i,onChange:e=>s(e.target.value),children:[(0,Zt.jsx)("option",{value:"low",children:"Low"}),(0,Zt.jsx)("option",{value:"medium",children:"Medium"}),(0,Zt.jsx)("option",{value:"high",children:"High"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Note (optional)"}),(0,Zt.jsx)("textarea",{className:"w-full border px-3 py-2 rounded-md",rows:"3",value:o,onChange:e=>l(e.target.value),placeholder:"Add any special instructions or comments"})]}),(0,Zt.jsx)("button",{onClick:()=>{console.log("Case Assigned:",{caseId:e,assignee:n,priority:i,note:o}),alert("Case assigned successfully")},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Assign Case"})]})]})},aM=e=>{let{children:t,className:r}=e;return(0,Zt.jsx)("div",{className:`border rounded-lg shadow p-4 bg-white ${r||""}`,children:t})},iM=e=>{let{children:t}=e;return(0,Zt.jsx)("div",{className:"mt-2",children:t})},sM=e=>{let{children:t,className:r}=e;return(0,Zt.jsx)("div",{className:`overflow-y-auto max-h-[400px] ${r||""}`,children:t})},oM=e=>{let{children:t}=e;return(0,Zt.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm",children:t})},lM=e=>{let{children:t}=e;return(0,Zt.jsx)("span",{children:t})},cM=lr("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),uM=[{id:1,type:"Status Update",actor:"System",timestamp:"2025-08-07 10:15 AM",details:"Case status changed to 'Under Review'",comment:"",attachment:null},{id:2,type:"Comment",actor:"Analyst John Doe",timestamp:"2025-08-07 11:00 AM",details:"",comment:"Investigating customer source of funds. No immediate red flags.",attachment:null},{id:3,type:"File Upload",actor:"Analyst Jane Smith",timestamp:"2025-08-07 12:45 PM",details:"Uploaded supporting document.",comment:"",attachment:{name:"kyc_verification.pdf",url:"#"}}],dM=()=>(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Case Actions Timeline"}),(0,Zt.jsx)(sM,{className:"h-[500px] pr-4",children:(0,Zt.jsx)("div",{className:"space-y-6",children:uM.map(e=>(0,Zt.jsx)(aM,{children:(0,Zt.jsxs)(iM,{className:"p-4 flex gap-4",children:[(0,Zt.jsx)(oM,{children:(0,Zt.jsx)(lM,{children:e.actor[0]})}),(0,Zt.jsxs)("div",{className:"flex-1",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Zt.jsx)("h3",{className:"font-medium",children:e.actor}),(0,Zt.jsx)("span",{className:"text-sm text-muted-foreground",children:e.timestamp})]}),(0,Zt.jsx)("p",{className:"text-sm font-semibold",children:e.type}),e.details&&(0,Zt.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.details}),e.comment&&(0,Zt.jsx)("div",{className:"bg-muted p-2 rounded mt-2 text-sm",children:e.comment}),e.attachment&&(0,Zt.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-sm text-blue-600 hover:underline cursor-pointer",children:[(0,Zt.jsx)(cM,{size:14}),(0,Zt.jsx)("a",{href:e.attachment.url,children:e.attachment.name})]})]})]})},e.id))})})]}),hM=()=>{const[e,r]=(0,t.useState)(""),[n,a]=(0,t.useState)("PDF"),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!0),[f,m]=(0,t.useState)(""),[p,g]=(0,t.useState)(""),[y,v]=(0,t.useState)(""),[b,x]=(0,t.useState)(""),[w,N]=(0,t.useState)(""),[S,_]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{try{h(!0);const e=await jO.getCustomers();e.success?l(e.data||[]):(Ht.error("Failed to fetch customers"),l([]))}catch(AM){console.error("Error fetching customers:",AM),Ht.error("Failed to fetch customers"),l([])}finally{h(!1)}})()},[]);return(0,Zt.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Generate Report"}),(0,Zt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),i)if(e){u(!0);try{const t={customerId:i.id,customerName:`${i.first_name} ${i.last_name}`,customerEmail:i.email,reportType:e,format:n,createdAt:(new Date).toISOString(),preparedBy:"CurrentUser",data:{}};"Suspicious Transaction Report"===e?t.data={transactionId:f,suspicionReason:p}:"Screening Match Report"===e?t.data={matchedEntity:y,matchDetails:b}:"goAML XML Report"===e&&(t.data={goamlType:w,submissionReason:S}),console.log("Generated Report:",t),Ht.success("Report generated successfully!"),s(null),r(""),m(""),g(""),v(""),x(""),N(""),_("")}catch(AM){console.error("Error generating report:",AM),Ht.error("Failed to generate report")}finally{u(!1)}}else Ht.error("Please select a report type");else Ht.error("Please select a customer")},className:"space-y-4",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Customer"}),(0,Zt.jsxs)("select",{className:"w-full p-2 border rounded",value:(null===i||void 0===i?void 0:i.id)||"",onChange:e=>{const t=o.find(t=>t.id===e.target.value);s(t)},disabled:d,children:[(0,Zt.jsx)("option",{value:"",children:d?"Loading customers...":"Select Customer"}),o.map(e=>(0,Zt.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," - ",e.email]},e.id))]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Report Type"}),(0,Zt.jsxs)("select",{className:"w-full p-2 border rounded",value:e,onChange:e=>r(e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select Type"}),(0,Zt.jsx)("option",{value:"Suspicious Transaction Report",children:"Suspicious Transaction Report"}),(0,Zt.jsx)("option",{value:"Screening Match Report",children:"Screening Match Report"}),(0,Zt.jsx)("option",{value:"goAML XML Report",children:"goAML XML Report"})]})]}),"Suspicious Transaction Report"===e&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Transaction ID"}),(0,Zt.jsx)("input",{className:"w-full p-2 border rounded",value:f,onChange:e=>m(e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Suspicion Reason"}),(0,Zt.jsx)("textarea",{className:"w-full p-2 border rounded",value:p,onChange:e=>g(e.target.value)})]})]}),"Screening Match Report"===e&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Matched Entity"}),(0,Zt.jsx)("input",{className:"w-full p-2 border rounded",value:y,onChange:e=>v(e.target.value)})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Match Details"}),(0,Zt.jsx)("textarea",{className:"w-full p-2 border rounded",value:b,onChange:e=>x(e.target.value)})]})]}),"goAML XML Report"===e&&(0,Zt.jsxs)(Zt.Fragment,{children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"goAML Report Type"}),(0,Zt.jsxs)("select",{className:"w-full p-2 border rounded",value:w,onChange:e=>N(e.target.value),children:[(0,Zt.jsx)("option",{value:"",children:"Select"}),(0,Zt.jsx)("option",{value:"STR",children:"STR (Suspicious Transaction)"}),(0,Zt.jsx)("option",{value:"SAR",children:"SAR (Suspicious Activity)"}),(0,Zt.jsx)("option",{value:"CTR",children:"CTR (Cash Transaction)"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Submission Reason"}),(0,Zt.jsx)("textarea",{className:"w-full p-2 border rounded",value:S,onChange:e=>_(e.target.value)})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium",children:"Report Format"}),(0,Zt.jsxs)("select",{className:"w-full p-2 border rounded",value:n,onChange:e=>a(e.target.value),children:[(0,Zt.jsx)("option",{value:"PDF",children:"PDF"}),"goAML XML Report"===e&&(0,Zt.jsx)("option",{value:"XML",children:"XML"}),"goAML XML Report"===e&&(0,Zt.jsx)("option",{value:"Both",children:"Both"})]})]}),(0,Zt.jsx)("button",{type:"submit",className:"px-4 py-2 text-white rounded "+(c?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),disabled:c,children:c?"Generating...":"Generate Report"})]})]})},fM=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)({total:0,byType:{},byDate:{today:0,thisWeek:0,thisMonth:0}});(0,t.useEffect)(()=>{d(),h()},[]);const d=async()=>{try{a(!0);const e=await VO.getReports(1,100);e.data?(r(e.data||[]),s(null)):(s("Failed to fetch reports"),r([]))}catch(i){s("Failed to fetch reports"),r([]),console.error("Error fetching reports:",i)}finally{a(!1)}},h=async()=>{try{const e=await VO.getReportStats();u(e)}catch(i){console.error("Error fetching stats:",i)}},f=e.filter(e=>{var t,r;return(null===(t=e.report_type)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(r=e.report_number)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase()))});return n?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):i?(0,Zt.jsx)("div",{className:"p-6",children:(0,Zt.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Zt.jsxs)("div",{className:"flex",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Zt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Zt.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Zt.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),(0,Zt.jsx)("div",{className:"mt-2 text-sm text-red-700",children:i}),(0,Zt.jsx)("div",{className:"mt-4",children:(0,Zt.jsx)("button",{onClick:()=>{s(null),d(),h()},className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Retry"})})]})]})})}):(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"mb-6",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Generated Reports"}),(0,Zt.jsx)("p",{className:"text-gray-600 mt-1",children:"View and manage all generated reports"})]}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Reports"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.total})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Today"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byDate.today})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"This Week"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byDate.thisWeek})]})]})}),(0,Zt.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,Zt.jsxs)("div",{className:"flex items-center",children:[(0,Zt.jsx)("div",{className:"flex-shrink-0",children:(0,Zt.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center",children:(0,Zt.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,Zt.jsxs)("div",{className:"ml-4",children:[(0,Zt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"This Month"}),(0,Zt.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.byDate.thisMonth})]})]})})]}),(0,Zt.jsx)("div",{className:"mb-6",children:(0,Zt.jsxs)("div",{className:"relative",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Search by report type or number...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Zt.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Zt.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,Zt.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zt.jsx)("thead",{className:"bg-gray-50",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report ID"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report Type"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Format"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Zt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Zt.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[f.map(e=>(0,Zt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.report_number||e.id}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.report_type||"Unknown"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"goAML"===e.report_template?"XML":"PDF"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.generated_at?new Date(e.generated_at).toLocaleDateString():"N/A"}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"goAML"===e.report_template?(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Ready for Upload"}):(0,Zt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Generated"})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Zt.jsxs)("div",{className:"flex space-x-2",children:[(0,Zt.jsx)("button",{onClick:()=>(async e=>{try{const t=await VO.exportReportToPDF(e);t.success?(Ht.success("Report opened for printing"),console.log("Print URL:",t.downloadUrl)):Ht.error("Failed to open report for printing")}catch(i){Ht.error("Error opening report for printing"),console.error("Error:",i)}})(e.id),className:"text-blue-600 hover:text-blue-900 font-medium",children:"Print"}),(0,Zt.jsx)("button",{onClick:()=>(async e=>{try{const t=await VO.exportReportToPDF(e);t.success?(Ht.success("Report downloaded successfully"),console.log("Download URL:",t.downloadUrl)):Ht.error("Failed to download report")}catch(i){Ht.error("Error downloading report"),console.error("Error:",i)}})(e.id),className:"text-green-600 hover:text-green-900 font-medium",children:"Download"}),"goAML"===e.report_template&&(0,Zt.jsx)("button",{onClick:()=>(async()=>{try{Ht.success("Report marked as uploaded"),d()}catch(i){Ht.error("Failed to update report status"),console.error("Error:",i)}})(e.id),className:"text-yellow-600 hover:text-yellow-900 font-medium",children:"Mark Uploaded"})]})})]},e.id)),0===f.length&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center",children:(0,Zt.jsxs)("div",{className:"text-gray-500",children:[(0,Zt.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Zt.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reports found"}),(0,Zt.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o?"No reports match your search criteria.":"No reports have been generated yet."})]})})})]})]})})})]})},mM=[{id:1,name:"Ayesha Khan",email:"ayesha.khan@example.com",role:"Admin",status:"Active",lastLogin:"2025-08-06 14:32"},{id:2,name:"Ali Raza",email:"ali.raza@example.com",role:"Analyst",status:"Inactive",lastLogin:"2025-07-30 10:45"}];function pM(){const[e,r]=(0,t.useState)(mM),[n,a]=(0,t.useState)(!1),[i,s]=(0,t.useState)({name:"",email:"",role:"Analyst",password:"",status:"Active"}),o=e=>{s(t=>({...t,[e.target.name]:e.target.value}))};return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Zt.jsx)("h1",{className:"text-xl font-bold",children:"User Management"}),(0,Zt.jsx)("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ Add User"})]}),(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"w-full bg-white border border-gray-200",children:[(0,Zt.jsx)("thead",{className:"bg-gray-100 text-left",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"p-3 border-b",children:"Name"}),(0,Zt.jsx)("th",{className:"p-3 border-b",children:"Email"}),(0,Zt.jsx)("th",{className:"p-3 border-b",children:"Role"}),(0,Zt.jsx)("th",{className:"p-3 border-b",children:"Status"}),(0,Zt.jsx)("th",{className:"p-3 border-b",children:"Last Login"}),(0,Zt.jsx)("th",{className:"p-3 border-b text-center",children:"Actions"})]})}),(0,Zt.jsxs)("tbody",{children:[e.map(e=>(0,Zt.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"p-3",children:e.name}),(0,Zt.jsx)("td",{className:"p-3",children:e.email}),(0,Zt.jsx)("td",{className:"p-3",children:e.role}),(0,Zt.jsx)("td",{className:"p-3",children:e.status}),(0,Zt.jsx)("td",{className:"p-3",children:e.lastLogin}),(0,Zt.jsx)("td",{className:"p-3 text-center",children:(0,Zt.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this user?")&&r(e=>e.filter(e=>e.id!==t)));var t},className:"text-red-600 hover:underline",children:"Delete"})})]},e.id)),0===e.length&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:"6",className:"p-4 text-center text-gray-500",children:"No users found."})})]})]})}),n&&(0,Zt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Zt.jsxs)("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-md",children:[(0,Zt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Add New User"}),(0,Zt.jsxs)("div",{className:"space-y-3",children:[(0,Zt.jsx)("input",{type:"text",name:"name",placeholder:"Full Name",value:i.name,onChange:o,className:"w-full border rounded px-3 py-2"}),(0,Zt.jsx)("input",{type:"email",name:"email",placeholder:"Email Address",value:i.email,onChange:o,className:"w-full border rounded px-3 py-2"}),(0,Zt.jsx)("input",{type:"password",name:"password",placeholder:"Temporary Password",value:i.password,onChange:o,className:"w-full border rounded px-3 py-2"}),(0,Zt.jsxs)("select",{name:"role",value:i.role,onChange:o,className:"w-full border rounded px-3 py-2",children:[(0,Zt.jsx)("option",{value:"Admin",children:"Admin"}),(0,Zt.jsx)("option",{value:"Analyst",children:"Analyst"}),(0,Zt.jsx)("option",{value:"Reviewer",children:"Reviewer"}),(0,Zt.jsx)("option",{value:"Auditor",children:"Auditor"})]}),(0,Zt.jsxs)("select",{name:"status",value:i.status,onChange:o,className:"w-full border rounded px-3 py-2",children:[(0,Zt.jsx)("option",{value:"Active",children:"Active"}),(0,Zt.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,Zt.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,Zt.jsx)("button",{onClick:()=>a(!1),className:"px-4 py-2 border rounded",children:"Cancel"}),(0,Zt.jsx)("button",{onClick:()=>{const t={id:e.length+1,...i,lastLogin:"Never"};r(e=>[...e,t]),s({name:"",email:"",role:"Analyst",password:"",status:"Active"}),a(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add User"})]})]})})]})}const gM={Customer:["View Customers","Add Customer","Edit Customer","Delete Customer"],Screening:["Run Instant Screening","Manage Screening Rules"],Monitoring:["View Transactions","Flag Transactions","Add Transactions"],Risk:["View Risk Profiles","Manage Risk Rules"],CaseManagement:["View Cases","Take Case Actions","Close Cases"],Reports:["Generate Reports","Generate goAML XML","Mark Report as Uploaded"],Admin:["Manage Users","Manage Roles","Change Settings"]},yM=[{id:1,name:"Admin",description:"Full access to all modules",permissions:Object.values(gM).flat()},{id:2,name:"Compliance Officer",description:"Can screen and monitor transactions",permissions:["View Customers","Run Instant Screening","View Transactions","Flag Transactions","View Risk Profiles","View Cases","Generate Reports"]}],vM=()=>{const[e,r]=(0,t.useState)(yM),[n,a]=(0,t.useState)({name:"",description:""}),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1);return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Roles & Permissions"}),(0,Zt.jsxs)("div",{className:"mb-6 bg-gray-50 p-4 rounded shadow",children:[(0,Zt.jsx)("h3",{className:"font-semibold mb-2",children:"Add New Role"}),(0,Zt.jsxs)("div",{className:"flex gap-4",children:[(0,Zt.jsx)("input",{type:"text",placeholder:"Role Name",className:"border p-2 w-1/3",value:n.name,onChange:e=>a({...n,name:e.target.value})}),(0,Zt.jsx)("input",{type:"text",placeholder:"Description",className:"border p-2 w-1/2",value:n.description,onChange:e=>a({...n,description:e.target.value})}),(0,Zt.jsx)("button",{onClick:()=>{if(!n.name.trim())return;const t={id:e.length+1,name:n.name,description:n.description,permissions:[]};r([...e,t]),a({name:"",description:""})},className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Add Role"})]})]}),(0,Zt.jsx)("div",{className:"bg-white shadow rounded",children:(0,Zt.jsxs)("table",{className:"w-full border",children:[(0,Zt.jsx)("thead",{className:"bg-gray-100",children:(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("th",{className:"p-2 border",children:"Role Name"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Description"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Permissions"}),(0,Zt.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,Zt.jsx)("tbody",{children:e.map(t=>(0,Zt.jsxs)("tr",{children:[(0,Zt.jsx)("td",{className:"p-2 border",children:t.name}),(0,Zt.jsx)("td",{className:"p-2 border",children:t.description}),(0,Zt.jsxs)("td",{className:"p-2 border text-sm text-gray-600",children:[t.permissions.slice(0,3).join(", "),t.permissions.length>3&&(0,Zt.jsxs)("span",{className:"text-gray-400",children:[" ","+",t.permissions.length-3," more"]})]}),(0,Zt.jsxs)("td",{className:"p-2 border space-x-2",children:[(0,Zt.jsx)("button",{onClick:()=>(e=>{s({...e}),l(!0)})(t),className:"text-blue-600 underline",children:"Edit"}),(0,Zt.jsx)("button",{onClick:()=>{return n=t.id,void r(e.filter(e=>e.id!==n));var n},className:"text-red-600 underline",children:"Delete"})]})]},t.id))})]})}),o&&i&&(0,Zt.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,Zt.jsxs)("div",{className:"bg-white p-6 rounded w-[600px] max-h-[80vh] overflow-y-auto",children:[(0,Zt.jsxs)("h3",{className:"text-xl font-bold mb-4",children:["Edit Permissions: ",i.name]}),Object.entries(gM).map(e=>{let[t,r]=e;return(0,Zt.jsxs)("div",{className:"mb-4",children:[(0,Zt.jsx)("h4",{className:"font-semibold mb-1",children:t}),(0,Zt.jsx)("div",{className:"flex flex-wrap gap-3",children:r.map(e=>(0,Zt.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Zt.jsx)("input",{type:"checkbox",checked:i.permissions.includes(e),onChange:()=>(e=>{const t=i.permissions.includes(e)?i.permissions.filter(t=>t!==e):[...i.permissions,e];s(e=>({...e,permissions:t}))})(e)}),e]},e))})]},t)}),(0,Zt.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,Zt.jsx)("button",{className:"px-4 py-2 border rounded",onClick:()=>{l(!1),s(null)},children:"Cancel"}),(0,Zt.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>{r(e=>e.map(e=>e.id===i.id?i:e)),l(!1),s(null)},children:"Save Changes"})]})]})})]})},bM=()=>{const[e,r]=(0,t.useState)(!0),[n,a]=(0,t.useState)(15),[i,s]=(0,t.useState)("Asia/Dubai");return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"System Settings"}),(0,Zt.jsxs)("div",{className:"space-y-6 max-w-xl",children:[(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Email Notifications"}),(0,Zt.jsxs)("select",{value:e?"enabled":"disabled",onChange:e=>r("enabled"===e.target.value),className:"w-full border border-gray-300 rounded p-2",children:[(0,Zt.jsx)("option",{value:"enabled",children:"Enabled"}),(0,Zt.jsx)("option",{value:"disabled",children:"Disabled"})]})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"Auto Logout (minutes)"}),(0,Zt.jsx)("input",{type:"number",value:n,onChange:e=>a(Number(e.target.value)),min:"1",className:"w-full border border-gray-300 rounded p-2"})]}),(0,Zt.jsxs)("div",{children:[(0,Zt.jsx)("label",{className:"block font-medium mb-1",children:"System Timezone"}),(0,Zt.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full border border-gray-300 rounded p-2",children:[(0,Zt.jsx)("option",{value:"Asia/Dubai",children:"Asia/Dubai (UAE)"}),(0,Zt.jsx)("option",{value:"UTC",children:"UTC"}),(0,Zt.jsx)("option",{value:"Asia/Karachi",children:"Asia/Karachi"}),(0,Zt.jsx)("option",{value:"Asia/Riyadh",children:"Asia/Riyadh"}),(0,Zt.jsx)("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"})]})]}),(0,Zt.jsx)("div",{className:"pt-4",children:(0,Zt.jsx)("button",{onClick:()=>{alert("Settings saved!")},className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",children:"Save Settings"})})]})]})},xM={async getActivityLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=XC.from("system_logs").select("\n          *,\n          users (\n            id,\n            first_name,\n            last_name,\n            email\n          )\n        ").order("created_at",{ascending:!1});e.user&&(t=t.eq("user_id",e.user)),e.module&&(t=t.eq("module",e.module)),e.action&&(t=t.eq("action",e.action)),e.fromDate&&(t=t.gte("created_at",e.fromDate)),e.toDate&&(t=t.lte("created_at",e.toDate));const{data:r,error:n,count:a}=await t;if(n)return console.error("Error fetching activity logs:",n),{success:!1,data:[],count:0,error:n.message};const i=r.map(e=>({id:e.id,timestamp:new Date(e.created_at).toLocaleString(),user:e.users?`${e.users.first_name} ${e.users.last_name}`:"System",action:e.action,module:e.module,details:this.formatLogDetails(e),ip_address:e.ip_address,user_agent:e.user_agent,record_id:e.record_id,table_name:e.table_name}));return{success:!0,data:i,count:a||i.length,error:null}}catch(AM){return console.error("Error in getActivityLogs:",AM),{success:!1,data:[],count:0,error:AM.message}}},async getActivityLogById(e){try{const{data:t,error:r}=await XC.from("system_logs").select("\n          *,\n          users (\n            id,\n            first_name,\n            last_name,\n            email\n          )\n        ").eq("id",e).single();if(r)return console.error("Error fetching activity log:",r),{success:!1,data:null,error:r.message};return{success:!0,data:{id:t.id,timestamp:new Date(t.created_at).toLocaleString(),user:t.users?`${t.users.first_name} ${t.users.last_name}`:"System",action:t.action,module:t.module,details:this.formatLogDetails(t),ip_address:t.ip_address,user_agent:t.user_agent,record_id:t.record_id,table_name:t.table_name,old_values:t.old_values,new_values:t.new_values},error:null}}catch(AM){return console.error("Error in getActivityLogById:",AM),{success:!1,data:null,error:AM.message}}},async createActivityLog(e){try{const{data:t,error:r}=await XC.from("system_logs").insert([e]).select().single();return r?(console.error("Error creating activity log:",r),{success:!1,data:null,error:r.message}):{success:!0,data:t,error:null}}catch(AM){return console.error("Error in createActivityLog:",AM),{success:!1,data:null,error:AM.message}}},async getActivityLogStats(){try{const{count:e,error:t}=await XC.from("system_logs").select("*",{count:"exact",head:!0});if(t)return console.error("Error getting total count:",t),{success:!1,data:null,error:t.message};const r=new Date;r.setHours(0,0,0,0);const{count:n,error:a}=await XC.from("system_logs").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString());if(a)return console.error("Error getting today count:",a),{success:!1,data:null,error:a.message};const i=new Date;i.setDate(i.getDate()-7);const{count:s,error:o}=await XC.from("system_logs").select("*",{count:"exact",head:!0}).gte("created_at",i.toISOString());if(o)return console.error("Error getting week count:",o),{success:!1,data:null,error:o.message};const{data:l,error:c}=await XC.from("system_logs").select("action").gte("created_at",i.toISOString());if(c)return console.error("Error getting action counts:",c),{success:!1,data:null,error:c.message};const u=l.reduce((e,t)=>(e[t.action]=(e[t.action]||0)+1,e),{});return{success:!0,data:{total:e||0,today:n||0,thisWeek:s||0,actionStats:u},error:null}}catch(AM){return console.error("Error in getActivityLogStats:",AM),{success:!1,data:null,error:AM.message}}},formatLogDetails(e){let t=`${e.action} in ${e.module}`;return e.table_name&&(t+=` (${e.table_name})`),e.record_id&&(t+=` - Record ID: ${e.record_id}`),e.old_values&&e.new_values?t+=" - Updated":e.new_values?t+=" - Created":e.old_values&&(t+=" - Deleted"),t}},wM=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)({total:0,today:0,thisWeek:0,actionStats:{}}),[c,u]=(0,t.useState)({user:"",module:"",action:"",fromDate:"",toDate:""}),d=async()=>{try{a(!0),s(null);const e=await xM.getActivityLogs(c);e.success?r(e.data||[]):(s(e.error||"Failed to fetch logs"),Ht.error("Failed to fetch activity logs"))}catch(i){console.error("Error fetching logs:",i),s("Failed to fetch logs"),Ht.error("Failed to fetch activity logs")}finally{a(!1)}};(0,t.useEffect)(()=>{d(),(async()=>{try{const e=await xM.getActivityLogStats();e.success&&l(e.data)}catch(i){console.error("Error fetching stats:",i)}})()},[]);const h=e=>{u({...c,[e.target.name]:e.target.value})},f=e=>{e.preventDefault(),d()},m=e;return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Activity Logs"}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"Total Logs"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.total})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"Today"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.today})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"This Week"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.thisWeek})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"Actions"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:Object.keys(o.actionStats).length})]})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border mb-6",children:[(0,Zt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),(0,Zt.jsxs)("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Zt.jsx)("input",{type:"text",name:"user",placeholder:"Search by user",value:c.user,onChange:h,className:"border px-3 py-2 rounded"}),(0,Zt.jsxs)("select",{name:"module",value:c.module,onChange:h,className:"border px-3 py-2 rounded",children:[(0,Zt.jsx)("option",{value:"",children:"All Modules"}),(0,Zt.jsx)("option",{value:"Customer",children:"Customer"}),(0,Zt.jsx)("option",{value:"Screening",children:"Screening"}),(0,Zt.jsx)("option",{value:"Monitoring",children:"Monitoring"}),(0,Zt.jsx)("option",{value:"Report",children:"Report"}),(0,Zt.jsx)("option",{value:"System",children:"System"}),(0,Zt.jsx)("option",{value:"KYC",children:"KYC"}),(0,Zt.jsx)("option",{value:"Case",children:"Case"}),(0,Zt.jsx)("option",{value:"Risk",children:"Risk"})]}),(0,Zt.jsxs)("select",{name:"action",value:c.action,onChange:h,className:"border px-3 py-2 rounded",children:[(0,Zt.jsx)("option",{value:"",children:"All Actions"}),(0,Zt.jsx)("option",{value:"Created",children:"Created"}),(0,Zt.jsx)("option",{value:"Updated",children:"Updated"}),(0,Zt.jsx)("option",{value:"Deleted",children:"Deleted"}),(0,Zt.jsx)("option",{value:"Submitted",children:"Submitted"}),(0,Zt.jsx)("option",{value:"Auto-Flagged",children:"Auto-Flagged"}),(0,Zt.jsx)("option",{value:"Login",children:"Login"}),(0,Zt.jsx)("option",{value:"Assessed",children:"Assessed"}),(0,Zt.jsx)("option",{value:"Flagged",children:"Flagged"})]}),(0,Zt.jsx)("input",{type:"date",name:"fromDate",value:c.fromDate,onChange:h,className:"border px-3 py-2 rounded",placeholder:"From Date"}),(0,Zt.jsx)("input",{type:"date",name:"toDate",value:c.toDate,onChange:h,className:"border px-3 py-2 rounded",placeholder:"To Date"})]}),(0,Zt.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,Zt.jsx)("button",{type:"button",onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Apply Filters"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>{u({user:"",module:"",action:"",fromDate:"",toDate:""})},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Clear Filters"})]})]}),n&&(0,Zt.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border text-center",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Zt.jsx)("p",{className:"text-gray-600",children:"Loading activity logs..."})]}),i&&!n&&(0,Zt.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border text-center",children:[(0,Zt.jsx)("div",{className:"text-red-600 mb-4",children:(0,Zt.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Zt.jsx)("p",{className:"text-gray-600 mb-4",children:i}),(0,Zt.jsx)("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]}),!n&&!i&&(0,Zt.jsx)("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full",children:[(0,Zt.jsx)("thead",{children:(0,Zt.jsxs)("tr",{className:"bg-gray-50 text-left text-sm font-medium text-gray-700",children:[(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Timestamp"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"User"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Action"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Module"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Details"})]})}),(0,Zt.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[m.map((e,t)=>(0,Zt.jsxs)("tr",{className:"text-sm hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.timestamp}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.user}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Zt.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("Created"===e.action?"bg-green-100 text-green-800":"Updated"===e.action?"bg-blue-100 text-blue-800":"Deleted"===e.action?"bg-red-100 text-red-800":"Flagged"===e.action?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.action})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.module}),(0,Zt.jsx)("td",{className:"px-6 py-4 text-gray-900",children:e.details})]},e.id||t)),0===m.length&&(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:(0,Zt.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Zt.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Zt.jsx)("p",{className:"text-lg font-medium",children:"No activity logs found"}),(0,Zt.jsx)("p",{className:"text-sm",children:"Try adjusting your filters or check back later."})]})})})]})]})})})]})},NM={async getSystemLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=XC.from("system_logs").select("\n          *,\n          users (\n            id,\n            first_name,\n            last_name,\n            email\n          )\n        ").order("created_at",{ascending:!1});if(e.status){const r={Success:["Completed","Success","Finished"],Failed:["Failed","Error","Exception"],"In Progress":["Started","Running","Processing"]};r[e.status]&&(t=t.in("action",r[e.status]))}e.module&&(t=t.eq("module",e.module)),e.eventType&&(t=t.ilike("action",`%${e.eventType}%`)),e.fromDate&&(t=t.gte("created_at",e.fromDate)),e.toDate&&(t=t.lte("created_at",e.toDate));const{data:r,error:n,count:a}=await t;if(n)return console.error("Error fetching system logs:",n),{success:!1,data:[],count:0,error:n.message};const i=r.map(e=>({id:e.id,eventType:this.formatEventType(e.action),description:this.formatDescription(e),timestamp:new Date(e.created_at).toLocaleString(),status:this.determineStatus(e.action),triggerType:this.determineTriggerType(e),module:e.module,user:e.users?`${e.users.first_name} ${e.users.last_name}`:"System",ip_address:e.ip_address,record_id:e.record_id,table_name:e.table_name}));return{success:!0,data:i,count:a||i.length,error:null}}catch(AM){return console.error("Error in getSystemLogs:",AM),{success:!1,data:[],count:0,error:AM.message}}},async getSystemLogById(e){try{const{data:t,error:r}=await XC.from("system_logs").select("\n          *,\n          users (\n            id,\n            first_name,\n            last_name,\n            email\n          )\n        ").eq("id",e).single();if(r)return console.error("Error fetching system log:",r),{success:!1,data:null,error:r.message};return{success:!0,data:{id:t.id,eventType:this.formatEventType(t.action),description:this.formatDescription(t),timestamp:new Date(t.created_at).toLocaleString(),status:this.determineStatus(t.action),triggerType:this.determineTriggerType(t),module:t.module,user:t.users?`${t.users.first_name} ${t.users.last_name}`:"System",ip_address:t.ip_address,record_id:t.record_id,table_name:t.table_name,old_values:t.old_values,new_values:t.new_values},error:null}}catch(AM){return console.error("Error in getSystemLogById:",AM),{success:!1,data:null,error:AM.message}}},async createSystemLog(e){try{const{data:t,error:r}=await XC.from("system_logs").insert([e]).select().single();return r?(console.error("Error creating system log:",r),{success:!1,data:null,error:r.message}):{success:!0,data:t,error:null}}catch(AM){return console.error("Error in createSystemLog:",AM),{success:!1,data:null,error:AM.message}}},async getSystemLogStats(){try{const{count:e,error:t}=await XC.from("system_logs").select("*",{count:"exact",head:!0});if(t)return console.error("Error getting total count:",t),{success:!1,data:null,error:t.message};const r=new Date;r.setHours(0,0,0,0);const{count:n,error:a}=await XC.from("system_logs").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString());if(a)return console.error("Error getting today count:",a),{success:!1,data:null,error:a.message};const i=new Date;i.setDate(i.getDate()-7);const{count:s,error:o}=await XC.from("system_logs").select("*",{count:"exact",head:!0}).gte("created_at",i.toISOString());if(o)return console.error("Error getting week count:",o),{success:!1,data:null,error:o.message};const{data:l,error:c}=await XC.from("system_logs").select("action").gte("created_at",i.toISOString());if(c)return console.error("Error getting action counts:",c),{success:!1,data:null,error:c.message};const u=l.reduce((e,t)=>{const r=this.determineStatus(t.action);return e[r]=(e[r]||0)+1,e},{});return{success:!0,data:{total:e||0,today:n||0,thisWeek:s||0,statusStats:u},error:null}}catch(AM){return console.error("Error in getSystemLogStats:",AM),{success:!1,data:null,error:AM.message}}},formatEventType:e=>({Created:"Record Creation",Updated:"Record Update",Deleted:"Record Deletion",Submitted:"Report Submission","Auto-Flagged":"Automated Flagging",Assessed:"Risk Assessment",Flagged:"Transaction Flagging",Login:"User Login",Logout:"User Logout",Screening:"Screening Process",Monitoring:"Transaction Monitoring"}[e]||e),formatDescription(e){let t=`${e.action} in ${e.module}`;return e.table_name&&(t+=` (${e.table_name})`),e.record_id&&(t+=` - Record ID: ${e.record_id}`),e.old_values&&e.new_values?t+=" - Updated":e.new_values?t+=" - Created":e.old_values&&(t+=" - Deleted"),t},determineStatus:e=>({Created:"Success",Updated:"Success",Deleted:"Success",Submitted:"Success","Auto-Flagged":"Success",Assessed:"Success",Flagged:"Success",Login:"Success",Logout:"Success",Screening:"In Progress",Monitoring:"In Progress"}[e]||"Success"),determineTriggerType:e=>["Auto-Flagged","Screening","Monitoring"].includes(e.action)?"Auto":["Assessed","Created","Updated"].includes(e.action)?"Scheduled":"Manual"},SM=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(null),[o,l]=(0,t.useState)({total:0,today:0,thisWeek:0,statusStats:{}}),[c,u]=(0,t.useState)({status:"",module:"",eventType:"",fromDate:"",toDate:""}),d=async()=>{try{a(!0),s(null);const e=await NM.getSystemLogs(c);e.success?r(e.data||[]):(s(e.error||"Failed to fetch logs"),Ht.error("Failed to fetch system logs"))}catch(i){console.error("Error fetching logs:",i),s("Failed to fetch logs"),Ht.error("Failed to fetch system logs")}finally{a(!1)}},h=async()=>{try{const e=await NM.getSystemLogStats();e.success&&l(e.data)}catch(i){console.error("Error fetching stats:",i)}};(0,t.useEffect)(()=>{d(),h()},[]);const f=e=>{u({...c,[e.target.name]:e.target.value})},m=e=>{e.preventDefault(),d()},p=e;return(0,Zt.jsxs)("div",{className:"p-6",children:[(0,Zt.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"System Logs"}),(0,Zt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"Total Events"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.total})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"Today"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.today})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"This Week"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.thisWeek})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border",children:[(0,Zt.jsx)("div",{className:"text-sm text-gray-600",children:"Success Rate"}),(0,Zt.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:o.statusStats.Success||0})]})]}),(0,Zt.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border mb-6",children:[(0,Zt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),(0,Zt.jsxs)("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Zt.jsxs)("select",{name:"status",className:"border rounded p-2",value:c.status,onChange:f,children:[(0,Zt.jsx)("option",{value:"",children:"All Statuses"}),(0,Zt.jsx)("option",{value:"Success",children:"Success"}),(0,Zt.jsx)("option",{value:"Failed",children:"Failed"}),(0,Zt.jsx)("option",{value:"In Progress",children:"In Progress"})]}),(0,Zt.jsxs)("select",{name:"module",className:"border rounded p-2",value:c.module,onChange:f,children:[(0,Zt.jsx)("option",{value:"",children:"All Modules"}),(0,Zt.jsx)("option",{value:"Screening",children:"Screening"}),(0,Zt.jsx)("option",{value:"Reports",children:"Reports"}),(0,Zt.jsx)("option",{value:"Monitoring",children:"Monitoring"}),(0,Zt.jsx)("option",{value:"Risk",children:"Risk"}),(0,Zt.jsx)("option",{value:"Customer",children:"Customer"}),(0,Zt.jsx)("option",{value:"Case",children:"Case"}),(0,Zt.jsx)("option",{value:"KYC",children:"KYC"})]}),(0,Zt.jsx)("input",{type:"text",name:"eventType",placeholder:"Event Type",value:c.eventType,onChange:f,className:"border rounded p-2"}),(0,Zt.jsx)("input",{type:"date",name:"fromDate",value:c.fromDate,onChange:f,className:"border rounded p-2",placeholder:"From Date"}),(0,Zt.jsx)("input",{type:"date",name:"toDate",value:c.toDate,onChange:f,className:"border rounded p-2",placeholder:"To Date"})]}),(0,Zt.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,Zt.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Apply Filters"}),(0,Zt.jsx)("button",{type:"button",onClick:()=>{u({status:"",module:"",eventType:"",fromDate:"",toDate:""})},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Clear Filters"}),(0,Zt.jsx)("button",{onClick:()=>{d(),h()},className:"ml-auto px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Refresh Logs"})]})]}),n&&(0,Zt.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border text-center",children:[(0,Zt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Zt.jsx)("p",{className:"text-gray-600",children:"Loading system logs..."})]}),i&&!n&&(0,Zt.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow border text-center",children:[(0,Zt.jsx)("div",{className:"text-red-600 mb-4",children:(0,Zt.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Zt.jsx)("p",{className:"text-gray-600 mb-4",children:i}),(0,Zt.jsx)("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]}),!n&&!i&&(0,Zt.jsx)("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:(0,Zt.jsx)("div",{className:"overflow-x-auto",children:(0,Zt.jsxs)("table",{className:"min-w-full",children:[(0,Zt.jsx)("thead",{children:(0,Zt.jsxs)("tr",{className:"bg-gray-50 text-left text-sm font-medium text-gray-700",children:[(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Log ID"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Event Type"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Description"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Timestamp"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Status"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Trigger Type"}),(0,Zt.jsx)("th",{className:"px-6 py-3 border-b",children:"Module"})]})}),(0,Zt.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===p.length?(0,Zt.jsx)("tr",{children:(0,Zt.jsx)("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:(0,Zt.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Zt.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Zt.jsx)("p",{className:"text-lg font-medium",children:"No system logs found"}),(0,Zt.jsx)("p",{className:"text-sm",children:"Try adjusting your filters or check back later."})]})})}):p.map(e=>(0,Zt.jsxs)("tr",{className:"text-sm hover:bg-gray-50",children:[(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.id}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.eventType}),(0,Zt.jsx)("td",{className:"px-6 py-4 text-gray-900",children:e.description}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.timestamp}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Zt.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("Success"===e.status?"bg-green-100 text-green-800":"Failed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.triggerType}),(0,Zt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.module})]},e.id))})]})})})]})},_M=()=>(0,Zt.jsxs)(rt,{children:[(0,Zt.jsxs)(Ne,{children:[(0,Zt.jsx)(xe,{path:"/",element:(0,Zt.jsx)(hr,{})}),(0,Zt.jsx)(xe,{path:"/*",element:(0,Zt.jsx)(dr,{children:(0,Zt.jsxs)(Ne,{children:[(0,Zt.jsx)(xe,{path:"dashboard",element:(0,Zt.jsx)(sO,{})}),(0,Zt.jsx)(xe,{path:"customer/list",element:(0,Zt.jsx)(PT,{})}),(0,Zt.jsx)(xe,{path:"customer/onboarding",element:(0,Zt.jsx)(LT,{})}),(0,Zt.jsx)(xe,{path:"customer/kyc/:customerId",element:(0,Zt.jsx)(HT,{})}),(0,Zt.jsx)(xe,{path:"customer/risk-profile/:customerId",element:(0,Zt.jsx)($T,{})}),(0,Zt.jsx)(xe,{path:"customer/risk-mitigation/:customerId",element:(0,Zt.jsx)(KT,{})}),(0,Zt.jsx)(xe,{path:"customer/documents/:customerId",element:(0,Zt.jsx)(YT,{})}),(0,Zt.jsx)(xe,{path:"customer/sanction-details/:customerId",element:(0,Zt.jsx)(JT,{})}),(0,Zt.jsx)(xe,{path:"screening/instant",element:(0,Zt.jsx)(oD,{})}),(0,Zt.jsx)(xe,{path:"screening/ongoing",element:(0,Zt.jsx)(cD,{})}),(0,Zt.jsx)(xe,{path:"/screening/monitoringlist",element:(0,Zt.jsx)(dD,{})}),(0,Zt.jsx)(xe,{path:"/screening/screeninghistory",element:(0,Zt.jsx)(fD,{})}),(0,Zt.jsx)(xe,{path:"/screening/casedetails",element:(0,Zt.jsx)(pD,{})}),(0,Zt.jsx)(xe,{path:"transactions/addtransactions",element:(0,Zt.jsx)(gD,{})}),(0,Zt.jsx)(xe,{path:"transactions/approvals",element:(0,Zt.jsx)(AD,{})}),(0,Zt.jsx)(xe,{path:"transactions/reports",element:(0,Zt.jsx)(OD,{})}),(0,Zt.jsx)(xe,{path:"transactions/xml-report",element:(0,Zt.jsx)(TD,{})}),(0,Zt.jsx)(xe,{path:"transactions/transactionrules",element:(0,Zt.jsx)(ID,{})}),(0,Zt.jsx)(xe,{path:"risk/assessment",element:(0,Zt.jsx)(PD,{})}),(0,Zt.jsx)(xe,{path:"risk/rules",element:(0,Zt.jsx)(DD,{})}),(0,Zt.jsx)(xe,{path:"risk/models",element:(0,Zt.jsx)(MD,{})}),(0,Zt.jsx)(xe,{path:"risk/transaction-activity-rules",element:(0,Zt.jsx)(ZD,{})}),(0,Zt.jsx)(xe,{path:"/risk-profile/:id",element:(0,Zt.jsx)(UD,{})}),(0,Zt.jsx)(xe,{path:"cases/list",element:(0,Zt.jsx)(eM,{})}),(0,Zt.jsx)(xe,{path:"cases/details",element:(0,Zt.jsx)(rM,{})}),(0,Zt.jsx)(xe,{path:"cases/assign",element:(0,Zt.jsx)(nM,{})}),(0,Zt.jsx)(xe,{path:"cases/actions",element:(0,Zt.jsx)(dM,{})}),(0,Zt.jsx)(xe,{path:"reports/reportgeneration",element:(0,Zt.jsx)(hM,{})}),(0,Zt.jsx)(xe,{path:"reports/reportlist",element:(0,Zt.jsx)(fM,{})}),(0,Zt.jsx)(xe,{path:"admin/users",element:(0,Zt.jsx)(pM,{})}),(0,Zt.jsx)(xe,{path:"admin/roles",element:(0,Zt.jsx)(vM,{})}),(0,Zt.jsx)(xe,{path:"admin/settings",element:(0,Zt.jsx)(bM,{})}),(0,Zt.jsx)(xe,{path:"logs/activitylogs",element:(0,Zt.jsx)(wM,{})}),(0,Zt.jsx)(xe,{path:"logs/systemlogs",element:(0,Zt.jsx)(SM,{})})]})})})]}),(0,Zt.jsx)(Qt,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]}),jM=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,6453)).then(t=>{let{getCLS:r,getFID:n,getFCP:a,getLCP:i,getTTFB:s}=t;r(e),n(e),a(e),i(e),s(e)})};n.createRoot(document.getElementById("root")).render((0,Zt.jsx)(t.StrictMode,{children:(0,Zt.jsx)(_M,{})})),jM()})()})();
//# sourceMappingURL=main.e124c988.js.map